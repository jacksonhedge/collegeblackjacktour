import{d as j,y as $,r as o,j as e,c as S,b as E,v as T}from"./main-Bt21LLck.js";import g from"./EmailService-J_ppV6FB.js";import{M as k}from"./mail-Dke56W7c.js";import{C}from"./circle-check-big-PbtGHC_l.js";const J=()=>{var b,f;const{isDark:s}=j(),{currentUser:t}=$(),[l,i]=o.useState("welcome"),[r,w]=o.useState((t==null?void 0:t.email)||""),[m,h]=o.useState(!1),[p,x]=o.useState(null),[u,y]=o.useState(null),[d,v]=o.useState(!1),c={welcome:{name:"Welcome Email",description:"Sent when a new user signs up",fields:{userName:((b=t==null?void 0:t.user_metadata)==null?void 0:b.username)||"John"}},"group-invite":{name:"Group Invitation",description:"Invite users to join a group",fields:{inviterName:((f=t==null?void 0:t.user_metadata)==null?void 0:f.username)||"John",groupName:"NFL Sunday Squad",groupId:"123",groupBalance:1250,memberCount:8,personalMessage:"Hey! Join our group for the upcoming NFL season. We pool funds for weekly bets!"}},transaction:{name:"Transaction Notification",description:"Notify users about money movements",fields:{type:"received",amount:50,fromUser:"Sarah Johnson",description:"Fantasy league winnings",transactionId:"TXN-"+Date.now(),balance:1300}}},N=async()=>{h(!0),y(null),x(null);try{let a;const n=c[l];switch(l){case"welcome":a=await g.sendWelcomeEmail(r,n.fields.userName);break;case"group-invite":a=await g.sendGroupInvite({to:r,...n.fields});break;case"transaction":a=await g.sendTransactionEmail({to:r,...n.fields});break}x(a)}catch(a){y(a.message)}finally{h(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("h1",{className:`text-3xl font-bold mb-8 ${s?"text-white":"text-gray-900"}`,children:"Email Template Tester"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} shadow-lg`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Select Template"}),e.jsx("div",{className:"space-y-3",children:Object.entries(c).map(([a,n])=>e.jsx("button",{onClick:()=>i(a),className:`w-full p-4 rounded-lg text-left transition-all ${l===a?"bg-purple-600 text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsx("div",{className:`text-sm ${l===a?"text-purple-200":"opacity-75"}`,children:n.description})]})]})},a))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} shadow-lg`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Send Test Email"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Recipient Email"}),e.jsx("input",{type:"email",value:r,onChange:a=>w(a.target.value),placeholder:"Enter email address",className:`w-full px-4 py-2 rounded-lg border transition-colors ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-purple-500`})]}),e.jsxs("button",{onClick:N,disabled:!r||m,className:`w-full py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${!r||m?s?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:[e.jsx(S,{className:"w-4 h-4"}),m?"Sending...":"Send Test Email"]}),e.jsxs("button",{onClick:()=>v(!d),className:`w-full py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(E,{className:"w-4 h-4"}),d?"Hide Preview":"Show Preview"]})]}),p&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-green-500/20 text-green-500 flex items-start gap-3",children:[e.jsx(C,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Email sent successfully!"}),e.jsx("div",{className:"text-sm opacity-90",children:p.message||"Check your inbox"})]})]}),u&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-red-500/20 text-red-500 flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Error sending email"}),e.jsx("div",{className:"text-sm opacity-90",children:u})]})]})]})]}),e.jsxs("div",{className:`mt-6 p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} shadow-lg`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Template Data"}),e.jsx("pre",{className:`p-4 rounded-lg overflow-auto ${s?"bg-gray-900 text-gray-300":"bg-gray-100 text-gray-700"}`,children:JSON.stringify(c[l].fields,null,2)})]}),d&&e.jsxs("div",{className:`mt-6 p-6 rounded-xl ${s?"bg-gray-800":"bg-white"} shadow-lg`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Email Preview"}),e.jsx("div",{className:`rounded-lg overflow-hidden ${s?"bg-gray-900":"bg-gray-100"}`,children:e.jsx("iframe",{src:`data:text/html;charset=utf-8,${encodeURIComponent(I(l,c[l].fields))}`,className:"w-full h-[600px]",title:"Email Preview"})})]})]})},I=(s,t)=>{const l=`
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    </style>
  `;let i="";switch(s){case"welcome":i=`
        <h1>Welcome to Bankroll, ${t.userName}!</h1>
        <p>This is a preview of the welcome email template.</p>
      `;break;case"group-invite":i=`
        <h1>You're invited to join ${t.groupName}!</h1>
        <p>${t.inviterName} has invited you to join their group.</p>
        <p>Group balance: $${t.groupBalance}</p>
      `;break;case"transaction":i=`
        <h1>Transaction: $${t.amount} ${t.type}</h1>
        <p>Transaction ID: ${t.transactionId}</p>
      `;break}return`
    <!DOCTYPE html>
    <html>
      <head>${l}</head>
      <body style="padding: 20px;">
        ${i}
        <p style="color: #666; margin-top: 40px;">
          Note: This is a simplified preview. The actual email will have full styling and formatting.
        </p>
      </body>
    </html>
  `};export{J as default};
