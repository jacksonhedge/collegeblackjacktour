const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-BLCpSfJy.js","assets/circle-check-big-AqWX4NIq.js","assets/clock-chpOVBbq.js","assets/circle-x-DPF23Ng6.js","assets/mail-BthhqBKa.js","assets/message-square-Dsl2VSSP.js","assets/WinnersManager-C7zRh7bK.js","assets/plus-0mQGkKq9.js","assets/save-CDQjKhTV.js","assets/pen-vMeciIEs.js","assets/trash-2-DUHExa_c.js","assets/UserManagement-Cg549c4V.js","assets/activity-C_uWJt2H.js","assets/credit-card-CUHlnvDh.js","assets/arrow-down-right-Baj_H6uY.js","assets/arrow-up-right-dPMhnAC_.js","assets/triangle-alert-BT0Zmyg-.js","assets/download-CY5rDIuc.js","assets/ellipsis-vertical-BiHCsyDl.js","assets/info-ClfB4HWb.js","assets/bar-chart-3-mO0KKmMz.js","assets/log-out-BRXGddBq.js","assets/AdminNotifications-D9HkSAHF.js","assets/square-pen-U0YSSV6s.js","assets/format-D50N81rW.js","assets/AdminDashboard-TJmYKQ-n.js","assets/AdminAnalytics-yVltwlFB.js","assets/globe-DJMS5fni.js","assets/zap-9D0AvzZs.js","assets/menu-BcUfn-1D.js","assets/AdminDashboardModern-BVXm5_Uj.js","assets/crown-Blo20uuZ.js","assets/receipt-BegrFhSR.js","assets/sparkles-C_gut0zP.js","assets/user-plus-DI_TvP4x.js","assets/BankingView-D-4RRU6R.js","assets/MeldBankConnect-e5HdpqmT.js","assets/loader-circle-bHa5NdPL.js","assets/MyLeagues-R51OqTFy.js","assets/GroupService-Cfj0VT-H.js","assets/link-2-CwqLonFI.js","assets/SendMoney-BBKJZq6i.js","assets/Platforms-Dy6st-YO.js","assets/AnalyticsService-BFBBmrgi.js","assets/star-C_lx-ZPB.js","assets/Wallet-BotbdaJO.js","assets/lock-BA9TK0IC.js","assets/button-ooYe08FM.js","assets/alert-DSPc-G07.js","assets/input-DZxtkRTY.js","assets/EmailService-CRBjdB80.js","assets/share-2-D0Q1OSBU.js","assets/copy-Dba7HXDr.js","assets/transform-CnDyqK0n.js","assets/MechanicalStockTicker-BKDmpROZ.js","assets/circle-DA9-5Are.js","assets/CommissionersCard-BYHGK7vk.js","assets/CommissionersCard-B7LxfkmQ.css","assets/polygonApi-BGxzygGs.js","assets/MechanicalStockTicker-DAJJpJB4.css","assets/coins-CSmqQgfv.js","assets/minus-wU8vuv7m.js","assets/EnhancedPartners-C4I8pbWi.js","assets/tag-CRzTwXl3.js","assets/PartnersRouter-BRxEY4QY.js","assets/Profile-CwYPlRoE.js","assets/circle-help-D9zmATda.js","assets/CreateGroupEnhanced-R82ttzcg.js","assets/GroupService-DlhNiBgH.js","assets/InviteUsersModalEnhanced-D16Bx1SZ.js","assets/key-BfkyW3y6.js","assets/CreateGroupModal-DvVCdnj2.js","assets/GroupView-c_ntW7dL.js","assets/GroupUpgrade-B4yBl-ku.js","assets/GroupInvitePage-DsRW4Dak.js","assets/InvitePage-BlseZAoP.js","assets/Groups-DcpObapJ.js","assets/mockGroups-BwmsS2Tb.js","assets/TestEmails-BslYWt1J.js","assets/TestAuth-Cy7DN2Vf.js","assets/JoinGroup-DCUoOW2r.js","assets/RewardsView-D0dK-rw0.js","assets/NotificationSettings-BMGTn6DG.js","assets/WalletsView-BO4gYZVQ.js","assets/GiftCardsView-DLMe7xMW.js","assets/FantasyHome-DVm92dkN.js","assets/calendar-BXWOdxsG.js","assets/FantasyPlaque-CnCoHxQw.js","assets/EmailTest-CfAloqpG.js","assets/TaskMaster-Cf7HwUS_.js","assets/DeveloperPortal-BjqjoZ77.js","assets/OAuthConsent-uY47OldM.js","assets/NetworkExplorer-CiOP5GmH.js","assets/networkGraph-CuKwXlMu.js","assets/AdminNetwork-BKMH3p_Q.js","assets/Referrals-BMbImHCa.js","assets/AdminTransactions-7eyhsgCZ.js","assets/AdminLayout-yTI34P8z.js","assets/AdminAPIStatus-CK0frfs2.js","assets/AdminLeagues-BySRlMdC.js","assets/DashboardPage-DRTOSRdL.js","assets/TestPolygon-szsItcRa.js","assets/CommissionersCardDemo-Bwz1jbAN.js"])))=>i.map(i=>d[i]);
var YO=Object.defineProperty;var QO=(t,e,n)=>e in t?YO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ss=(t,e,n)=>QO(t,typeof e!="symbol"?e+"":e,n);function JO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var sA={exports:{}},im={},iA={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=Symbol.for("react.element"),eM=Symbol.for("react.portal"),tM=Symbol.for("react.fragment"),nM=Symbol.for("react.strict_mode"),rM=Symbol.for("react.profiler"),sM=Symbol.for("react.provider"),iM=Symbol.for("react.context"),oM=Symbol.for("react.forward_ref"),aM=Symbol.for("react.suspense"),lM=Symbol.for("react.memo"),cM=Symbol.for("react.lazy"),uE=Symbol.iterator;function uM(t){return t===null||typeof t!="object"?null:(t=uE&&t[uE]||t["@@iterator"],typeof t=="function"?t:null)}var oA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aA=Object.assign,lA={};function Vl(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||oA}Vl.prototype.isReactComponent={};Vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cA(){}cA.prototype=Vl.prototype;function q_(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||oA}var W_=q_.prototype=new cA;W_.constructor=q_;aA(W_,Vl.prototype);W_.isPureReactComponent=!0;var dE=Array.isArray,uA=Object.prototype.hasOwnProperty,H_={current:null},dA={key:!0,ref:!0,__self:!0,__source:!0};function hA(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uA.call(e,r)&&!dA.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Td,type:t,key:i,ref:o,props:s,_owner:H_.current}}function dM(t,e){return{$$typeof:Td,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function G_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Td}function hM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hE=/\/+/g;function Og(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hM(""+t.key):e.toString(36)}function ff(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Td:case eM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Og(o,0):r,dE(s)?(n="",t!=null&&(n=t.replace(hE,"$&/")+"/"),ff(s,e,n,"",function(c){return c})):s!=null&&(G_(s)&&(s=dM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hE,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dE(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Og(i,a);o+=ff(i,e,n,l,s)}else if(l=uM(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Og(i,a++),o+=ff(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yh(t,e,n){if(t==null)return t;var r=[],s=0;return ff(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},pf={transition:null},pM={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:pf,ReactCurrentOwner:H_};function fA(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:yh,forEach:function(t,e,n){yh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yh(t,function(){e++}),e},toArray:function(t){return yh(t,function(e){return e})||[]},only:function(t){if(!G_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Vl;xe.Fragment=tM;xe.Profiler=rM;xe.PureComponent=q_;xe.StrictMode=nM;xe.Suspense=aM;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pM;xe.act=fA;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aA({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=H_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uA.call(e,l)&&!dA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Td,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:iM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sM,_context:t},t.Consumer=t};xe.createElement=hA;xe.createFactory=function(t){var e=hA.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:oM,render:t}};xe.isValidElement=G_;xe.lazy=function(t){return{$$typeof:cM,_payload:{_status:-1,_result:t},_init:fM}};xe.memo=function(t,e){return{$$typeof:lM,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=pf.transition;pf.transition={};try{t()}finally{pf.transition=e}};xe.unstable_act=fA;xe.useCallback=function(t,e){return vn.current.useCallback(t,e)};xe.useContext=function(t){return vn.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};xe.useEffect=function(t,e){return vn.current.useEffect(t,e)};xe.useId=function(){return vn.current.useId()};xe.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return vn.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};xe.useRef=function(t){return vn.current.useRef(t)};xe.useState=function(t){return vn.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return vn.current.useTransition()};xe.version="18.3.1";iA.exports=xe;var T=iA.exports;const Mu=z_(T),mM=JO({__proto__:null,default:Mu},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM=T,yM=Symbol.for("react.element"),vM=Symbol.for("react.fragment"),_M=Object.prototype.hasOwnProperty,wM=gM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xM={key:!0,ref:!0,__self:!0,__source:!0};function pA(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_M.call(e,r)&&!xM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yM,type:t,key:i,ref:o,props:s,_owner:wM.current}}im.Fragment=vM;im.jsx=pA;im.jsxs=pA;sA.exports=im;var u=sA.exports,dy={},mA={exports:{}},Hn={},gA={exports:{}},yA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,z){var q=$.length;$.push(z);e:for(;0<q;){var J=q-1>>>1,se=$[J];if(0<s(se,z))$[J]=z,$[q]=se,q=J;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var z=$[0],q=$.pop();if(q!==z){$[0]=q;e:for(var J=0,se=$.length,ge=se>>>1;J<ge;){var Ge=2*(J+1)-1,zt=$[Ge],Et=Ge+1,fr=$[Et];if(0>s(zt,q))Et<se&&0>s(fr,zt)?($[J]=fr,$[Et]=q,J=Et):($[J]=zt,$[Ge]=q,J=Ge);else if(Et<se&&0>s(fr,q))$[J]=fr,$[Et]=q,J=Et;else break e}}return z}function s($,z){var q=$.sortIndex-z.sortIndex;return q!==0?q:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,w=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=$)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function P($){if(v=!1,E($),!w)if(n(l)!==null)w=!0,ue(R);else{var z=n(c);z!==null&&oe(P,z.startTime-$)}}function R($,z){w=!1,v&&(v=!1,x(y),y=-1),m=!0;var q=p;try{for(E(z),f=n(l);f!==null&&(!(f.expirationTime>z)||$&&!j());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var se=J(f.expirationTime<=z);z=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),E(z)}else r(l);f=n(l)}if(f!==null)var ge=!0;else{var Ge=n(c);Ge!==null&&oe(P,Ge.startTime-z),ge=!1}return ge}finally{f=null,p=q,m=!1}}var N=!1,k=null,y=-1,I=5,A=-1;function j(){return!(t.unstable_now()-A<I)}function O(){if(k!==null){var $=t.unstable_now();A=$;var z=!0;try{z=k(!0,$)}finally{z?D():(N=!1,k=null)}}else N=!1}var D;if(typeof _=="function")D=function(){_(O)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ne=Q.port2;Q.port1.onmessage=O,D=function(){ne.postMessage(null)}}else D=function(){S(O,0)};function ue($){k=$,N||(N=!0,D())}function oe($,z){y=S(function(){$(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,ue(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var q=p;p=z;try{return $()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=p;p=$;try{return z()}finally{p=q}},t.unstable_scheduleCallback=function($,z,q){var J=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,$={id:d++,callback:z,priorityLevel:$,startTime:q,expirationTime:se,sortIndex:-1},q>J?($.sortIndex=q,e(c,$),n(l)===null&&$===n(c)&&(v?(x(y),y=-1):v=!0,oe(P,q-J))):($.sortIndex=se,e(l,$),w||m||(w=!0,ue(R))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var z=p;return function(){var q=p;p=z;try{return $.apply(this,arguments)}finally{p=q}}}})(yA);gA.exports=yA;var bM=gA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM=T,Wn=bM;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vA=new Set,Lu={};function Qo(t,e){fl(t,e),fl(t+"Capture",e)}function fl(t,e){for(Lu[t]=e,t=0;t<e.length;t++)vA.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hy=Object.prototype.hasOwnProperty,SM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fE={},pE={};function kM(t){return hy.call(pE,t)?!0:hy.call(fE,t)?!1:SM.test(t)?pE[t]=!0:(fE[t]=!0,!1)}function TM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IM(t,e,n,r){if(e===null||typeof e>"u"||TM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function X_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(K_,X_);Vt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(K_,X_);Vt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(K_,X_);Vt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Y_(t,e,n,r){var s=Vt.hasOwnProperty(e)?Vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IM(e,n,s,r)&&(n=null),r||s===null?kM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ms=EM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vh=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),fy=Symbol.for("react.profiler"),_A=Symbol.for("react.provider"),wA=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),py=Symbol.for("react.suspense"),my=Symbol.for("react.suspense_list"),Z_=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),xA=Symbol.for("react.offscreen"),mE=Symbol.iterator;function wc(t){return t===null||typeof t!="object"?null:(t=mE&&t[mE]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Mg;function zc(t){if(Mg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mg=e&&e[1]||""}return`
`+Mg+t}var Lg=!1;function Fg(t,e){if(!t||Lg)return"";Lg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zc(t):""}function AM(t){switch(t.tag){case 5:return zc(t.type);case 16:return zc("Lazy");case 13:return zc("Suspense");case 19:return zc("SuspenseList");case 0:case 2:case 15:return t=Fg(t.type,!1),t;case 11:return t=Fg(t.type.render,!1),t;case 1:return t=Fg(t.type,!0),t;default:return""}}function gy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Aa:return"Fragment";case Ia:return"Portal";case fy:return"Profiler";case Q_:return"StrictMode";case py:return"Suspense";case my:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wA:return(t.displayName||"Context")+".Consumer";case _A:return(t._context.displayName||"Context")+".Provider";case J_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z_:return e=t.displayName||null,e!==null?e:gy(t.type)||"Memo";case Ys:e=t._payload,t=t._init;try{return gy(t(e))}catch{}}return null}function PM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gy(e);case 8:return e===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CM(t){var e=bA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _h(t){t._valueTracker||(t._valueTracker=CM(t))}function EA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yy(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SA(t,e){e=e.checked,e!=null&&Y_(t,"checked",e,!1)}function vy(t,e){SA(t,e);var n=ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_y(t,e.type,n):e.hasOwnProperty("defaultValue")&&_y(t,e.type,ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _y(t,e,n){(e!=="number"||qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qc=Array.isArray;function Ya(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ji(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(qc(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ji(n)}}function kA(t,e){var n=ji(e.value),r=ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _E(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wh,IA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wh=wh||document.createElement("div"),wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NM=["Webkit","ms","Moz","O"];Object.keys(lu).forEach(function(t){NM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lu[e]=lu[t]})});function AA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lu.hasOwnProperty(t)&&lu[t]?(""+e).trim():e+"px"}function PA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=AA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var RM=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function by(t,e){if(e){if(RM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Ey(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sy=null;function ew(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ky=null,Qa=null,Ja=null;function wE(t){if(t=Pd(t)){if(typeof ky!="function")throw Error(B(280));var e=t.stateNode;e&&(e=um(e),ky(t.stateNode,t.type,e))}}function CA(t){Qa?Ja?Ja.push(t):Ja=[t]:Qa=t}function NA(){if(Qa){var t=Qa,e=Ja;if(Ja=Qa=null,wE(t),e)for(t=0;t<e.length;t++)wE(e[t])}}function RA(t,e){return t(e)}function jA(){}var Vg=!1;function DA(t,e,n){if(Vg)return t(e,n);Vg=!0;try{return RA(t,e,n)}finally{Vg=!1,(Qa!==null||Ja!==null)&&(jA(),NA())}}function Vu(t,e){var n=t.stateNode;if(n===null)return null;var r=um(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Ty=!1;if(Ss)try{var xc={};Object.defineProperty(xc,"passive",{get:function(){Ty=!0}}),window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Ty=!1}function jM(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var cu=!1,Wf=null,Hf=!1,Iy=null,DM={onError:function(t){cu=!0,Wf=t}};function OM(t,e,n,r,s,i,o,a,l){cu=!1,Wf=null,jM.apply(DM,arguments)}function MM(t,e,n,r,s,i,o,a,l){if(OM.apply(this,arguments),cu){if(cu){var c=Wf;cu=!1,Wf=null}else throw Error(B(198));Hf||(Hf=!0,Iy=c)}}function Jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xE(t){if(Jo(t)!==t)throw Error(B(188))}function LM(t){var e=t.alternate;if(!e){if(e=Jo(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xE(s),t;if(i===r)return xE(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function MA(t){return t=LM(t),t!==null?LA(t):null}function LA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LA(t);if(e!==null)return e;t=t.sibling}return null}var FA=Wn.unstable_scheduleCallback,bE=Wn.unstable_cancelCallback,FM=Wn.unstable_shouldYield,VM=Wn.unstable_requestPaint,ft=Wn.unstable_now,$M=Wn.unstable_getCurrentPriorityLevel,tw=Wn.unstable_ImmediatePriority,VA=Wn.unstable_UserBlockingPriority,Gf=Wn.unstable_NormalPriority,UM=Wn.unstable_LowPriority,$A=Wn.unstable_IdlePriority,om=null,$r=null;function BM(t){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(om,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:WM,zM=Math.log,qM=Math.LN2;function WM(t){return t>>>=0,t===0?32:31-(zM(t)/qM|0)|0}var xh=64,bh=4194304;function Wc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Wc(a):(i&=o,i!==0&&(r=Wc(i)))}else o=n&~s,o!==0?r=Wc(o):i!==0&&(r=Wc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tr(e),s=1<<n,r|=t[n],e&=~s;return r}function HM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=HM(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ay(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UA(){var t=xh;return xh<<=1,!(xh&4194240)&&(xh=64),t}function $g(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Id(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tr(e),t[e]=n}function KM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function nw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function BA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zA,rw,qA,WA,HA,Py=!1,Eh=[],wi=null,xi=null,bi=null,$u=new Map,Uu=new Map,ti=[],XM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EE(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":$u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(e.pointerId)}}function bc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pd(e),e!==null&&rw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YM(t,e,n,r,s){switch(e){case"focusin":return wi=bc(wi,t,e,n,r,s),!0;case"dragenter":return xi=bc(xi,t,e,n,r,s),!0;case"mouseover":return bi=bc(bi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $u.set(i,bc($u.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Uu.set(i,bc(Uu.get(i)||null,t,e,n,r,s)),!0}return!1}function GA(t){var e=_o(t.target);if(e!==null){var n=Jo(e);if(n!==null){if(e=n.tag,e===13){if(e=OA(n),e!==null){t.blockedOn=e,HA(t.priority,function(){qA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sy=r,n.target.dispatchEvent(r),Sy=null}else return e=Pd(n),e!==null&&rw(e),t.blockedOn=n,!1;e.shift()}return!0}function SE(t,e,n){mf(t)&&n.delete(e)}function QM(){Py=!1,wi!==null&&mf(wi)&&(wi=null),xi!==null&&mf(xi)&&(xi=null),bi!==null&&mf(bi)&&(bi=null),$u.forEach(SE),Uu.forEach(SE)}function Ec(t,e){t.blockedOn===e&&(t.blockedOn=null,Py||(Py=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,QM)))}function Bu(t){function e(s){return Ec(s,t)}if(0<Eh.length){Ec(Eh[0],t);for(var n=1;n<Eh.length;n++){var r=Eh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&Ec(wi,t),xi!==null&&Ec(xi,t),bi!==null&&Ec(bi,t),$u.forEach(e),Uu.forEach(e),n=0;n<ti.length;n++)r=ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)GA(n),n.blockedOn===null&&ti.shift()}var Za=Ms.ReactCurrentBatchConfig,Xf=!0;function JM(t,e,n,r){var s=Re,i=Za.transition;Za.transition=null;try{Re=1,sw(t,e,n,r)}finally{Re=s,Za.transition=i}}function ZM(t,e,n,r){var s=Re,i=Za.transition;Za.transition=null;try{Re=4,sw(t,e,n,r)}finally{Re=s,Za.transition=i}}function sw(t,e,n,r){if(Xf){var s=Cy(t,e,n,r);if(s===null)Yg(t,e,r,Yf,n),EE(t,r);else if(YM(s,t,e,n,r))r.stopPropagation();else if(EE(t,r),e&4&&-1<XM.indexOf(t)){for(;s!==null;){var i=Pd(s);if(i!==null&&zA(i),i=Cy(t,e,n,r),i===null&&Yg(t,e,r,Yf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yg(t,e,r,null,n)}}var Yf=null;function Cy(t,e,n,r){if(Yf=null,t=ew(r),t=_o(t),t!==null)if(e=Jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yf=t,null}function KA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($M()){case tw:return 1;case VA:return 4;case Gf:case UM:return 16;case $A:return 536870912;default:return 16}default:return 16}}var di=null,iw=null,gf=null;function XA(){if(gf)return gf;var t,e=iw,n=e.length,r,s="value"in di?di.value:di.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return gf=s.slice(t,1<r?1-r:void 0)}function yf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sh(){return!0}function kE(){return!1}function Gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sh:kE,this.isPropagationStopped=kE,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sh)},persist:function(){},isPersistent:Sh}),e}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ow=Gn($l),Ad=et({},$l,{view:0,detail:0}),eL=Gn(Ad),Ug,Bg,Sc,am=et({},Ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sc&&(Sc&&t.type==="mousemove"?(Ug=t.screenX-Sc.screenX,Bg=t.screenY-Sc.screenY):Bg=Ug=0,Sc=t),Ug)},movementY:function(t){return"movementY"in t?t.movementY:Bg}}),TE=Gn(am),tL=et({},am,{dataTransfer:0}),nL=Gn(tL),rL=et({},Ad,{relatedTarget:0}),zg=Gn(rL),sL=et({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),iL=Gn(sL),oL=et({},$l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aL=Gn(oL),lL=et({},$l,{data:0}),IE=Gn(lL),cL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dL[t])?!!e[t]:!1}function aw(){return hL}var fL=et({},Ad,{key:function(t){if(t.key){var e=cL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aw,charCode:function(t){return t.type==="keypress"?yf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pL=Gn(fL),mL=et({},am,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AE=Gn(mL),gL=et({},Ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aw}),yL=Gn(gL),vL=et({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),_L=Gn(vL),wL=et({},am,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xL=Gn(wL),bL=[9,13,27,32],lw=Ss&&"CompositionEvent"in window,uu=null;Ss&&"documentMode"in document&&(uu=document.documentMode);var EL=Ss&&"TextEvent"in window&&!uu,YA=Ss&&(!lw||uu&&8<uu&&11>=uu),PE=" ",CE=!1;function QA(t,e){switch(t){case"keyup":return bL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function SL(t,e){switch(t){case"compositionend":return JA(e);case"keypress":return e.which!==32?null:(CE=!0,PE);case"textInput":return t=e.data,t===PE&&CE?null:t;default:return null}}function kL(t,e){if(Pa)return t==="compositionend"||!lw&&QA(t,e)?(t=XA(),gf=iw=di=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YA&&e.locale!=="ko"?null:e.data;default:return null}}var TL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TL[t.type]:e==="textarea"}function ZA(t,e,n,r){CA(r),e=Qf(e,"onChange"),0<e.length&&(n=new ow("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var du=null,zu=null;function IL(t){uP(t,0)}function lm(t){var e=Ra(t);if(EA(e))return t}function AL(t,e){if(t==="change")return e}var eP=!1;if(Ss){var qg;if(Ss){var Wg="oninput"in document;if(!Wg){var RE=document.createElement("div");RE.setAttribute("oninput","return;"),Wg=typeof RE.oninput=="function"}qg=Wg}else qg=!1;eP=qg&&(!document.documentMode||9<document.documentMode)}function jE(){du&&(du.detachEvent("onpropertychange",tP),zu=du=null)}function tP(t){if(t.propertyName==="value"&&lm(zu)){var e=[];ZA(e,zu,t,ew(t)),DA(IL,e)}}function PL(t,e,n){t==="focusin"?(jE(),du=e,zu=n,du.attachEvent("onpropertychange",tP)):t==="focusout"&&jE()}function CL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lm(zu)}function NL(t,e){if(t==="click")return lm(e)}function RL(t,e){if(t==="input"||t==="change")return lm(e)}function jL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:jL;function qu(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hy.call(e,s)||!Ar(t[s],e[s]))return!1}return!0}function DE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OE(t,e){var n=DE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DE(n)}}function nP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rP(){for(var t=window,e=qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qf(t.document)}return e}function cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DL(t){var e=rP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nP(n.ownerDocument.documentElement,n)){if(r!==null&&cw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=OE(n,i);var o=OE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OL=Ss&&"documentMode"in document&&11>=document.documentMode,Ca=null,Ny=null,hu=null,Ry=!1;function ME(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ry||Ca==null||Ca!==qf(r)||(r=Ca,"selectionStart"in r&&cw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hu&&qu(hu,r)||(hu=r,r=Qf(Ny,"onSelect"),0<r.length&&(e=new ow("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ca)))}function kh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Na={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},Hg={},sP={};Ss&&(sP=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function cm(t){if(Hg[t])return Hg[t];if(!Na[t])return t;var e=Na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sP)return Hg[t]=e[n];return t}var iP=cm("animationend"),oP=cm("animationiteration"),aP=cm("animationstart"),lP=cm("transitionend"),cP=new Map,LE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(t,e){cP.set(t,e),Qo(e,[t])}for(var Gg=0;Gg<LE.length;Gg++){var Kg=LE[Gg],ML=Kg.toLowerCase(),LL=Kg[0].toUpperCase()+Kg.slice(1);Bi(ML,"on"+LL)}Bi(iP,"onAnimationEnd");Bi(oP,"onAnimationIteration");Bi(aP,"onAnimationStart");Bi("dblclick","onDoubleClick");Bi("focusin","onFocus");Bi("focusout","onBlur");Bi(lP,"onTransitionEnd");fl("onMouseEnter",["mouseout","mouseover"]);fl("onMouseLeave",["mouseout","mouseover"]);fl("onPointerEnter",["pointerout","pointerover"]);fl("onPointerLeave",["pointerout","pointerover"]);Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function FE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MM(r,e,void 0,t),t.currentTarget=null}function uP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;FE(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;FE(s,a,c),i=l}}}if(Hf)throw t=Iy,Hf=!1,Iy=null,t}function Be(t,e){var n=e[Ly];n===void 0&&(n=e[Ly]=new Set);var r=t+"__bubble";n.has(r)||(dP(e,t,2,!1),n.add(r))}function Xg(t,e,n){var r=0;e&&(r|=4),dP(n,t,r,e)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[Th]){t[Th]=!0,vA.forEach(function(n){n!=="selectionchange"&&(FL.has(n)||Xg(n,!1,t),Xg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Th]||(e[Th]=!0,Xg("selectionchange",!1,e))}}function dP(t,e,n,r){switch(KA(e)){case 1:var s=JM;break;case 4:s=ZM;break;default:s=sw}n=s.bind(null,e,n,t),s=void 0,!Ty||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_o(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}DA(function(){var c=i,d=ew(n),f=[];e:{var p=cP.get(t);if(p!==void 0){var m=ow,w=t;switch(t){case"keypress":if(yf(n)===0)break e;case"keydown":case"keyup":m=pL;break;case"focusin":w="focus",m=zg;break;case"focusout":w="blur",m=zg;break;case"beforeblur":case"afterblur":m=zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=TE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=nL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yL;break;case iP:case oP:case aP:m=iL;break;case lP:m=_L;break;case"scroll":m=eL;break;case"wheel":m=xL;break;case"copy":case"cut":case"paste":m=aL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=AE}var v=(e&4)!==0,S=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var _=c,E;_!==null;){E=_;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,x!==null&&(P=Vu(_,x),P!=null&&v.push(Hu(_,P,E)))),S)break;_=_.return}0<v.length&&(p=new m(p,w,null,n,d),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Sy&&(w=n.relatedTarget||n.fromElement)&&(_o(w)||w[ks]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=c,w=w?_o(w):null,w!==null&&(S=Jo(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(v=TE,P="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=AE,P="onPointerLeave",x="onPointerEnter",_="pointer"),S=m==null?p:Ra(m),E=w==null?p:Ra(w),p=new v(P,_+"leave",m,n,d),p.target=S,p.relatedTarget=E,P=null,_o(d)===c&&(v=new v(x,_+"enter",w,n,d),v.target=E,v.relatedTarget=S,P=v),S=P,m&&w)t:{for(v=m,x=w,_=0,E=v;E;E=fa(E))_++;for(E=0,P=x;P;P=fa(P))E++;for(;0<_-E;)v=fa(v),_--;for(;0<E-_;)x=fa(x),E--;for(;_--;){if(v===x||x!==null&&v===x.alternate)break t;v=fa(v),x=fa(x)}v=null}else v=null;m!==null&&VE(f,p,m,v,!1),w!==null&&S!==null&&VE(f,S,w,v,!0)}}e:{if(p=c?Ra(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=AL;else if(NE(p))if(eP)R=RL;else{R=CL;var N=PL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=NL);if(R&&(R=R(t,c))){ZA(f,R,n,d);break e}N&&N(t,p,c),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&_y(p,"number",p.value)}switch(N=c?Ra(c):window,t){case"focusin":(NE(N)||N.contentEditable==="true")&&(Ca=N,Ny=c,hu=null);break;case"focusout":hu=Ny=Ca=null;break;case"mousedown":Ry=!0;break;case"contextmenu":case"mouseup":case"dragend":Ry=!1,ME(f,n,d);break;case"selectionchange":if(OL)break;case"keydown":case"keyup":ME(f,n,d)}var k;if(lw)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Pa?QA(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(YA&&n.locale!=="ko"&&(Pa||y!=="onCompositionStart"?y==="onCompositionEnd"&&Pa&&(k=XA()):(di=d,iw="value"in di?di.value:di.textContent,Pa=!0)),N=Qf(c,y),0<N.length&&(y=new IE(y,t,null,n,d),f.push({event:y,listeners:N}),k?y.data=k:(k=JA(n),k!==null&&(y.data=k)))),(k=EL?SL(t,n):kL(t,n))&&(c=Qf(c,"onBeforeInput"),0<c.length&&(d=new IE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=k))}uP(f,e)})}function Hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vu(t,n),i!=null&&r.unshift(Hu(t,i,s)),i=Vu(t,e),i!=null&&r.push(Hu(t,i,s))),t=t.return}return r}function fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function VE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Vu(n,i),l!=null&&o.unshift(Hu(n,l,a))):s||(l=Vu(n,i),l!=null&&o.push(Hu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VL=/\r\n?/g,$L=/\u0000|\uFFFD/g;function $E(t){return(typeof t=="string"?t:""+t).replace(VL,`
`).replace($L,"")}function Ih(t,e,n){if(e=$E(e),$E(t)!==e&&n)throw Error(B(425))}function Jf(){}var jy=null,Dy=null;function Oy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var My=typeof setTimeout=="function"?setTimeout:void 0,UL=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,BL=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(t){return UE.resolve(null).then(t).catch(zL)}:My;function zL(t){setTimeout(function(){throw t})}function Qg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bu(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Or="__reactFiber$"+Ul,Gu="__reactProps$"+Ul,ks="__reactContainer$"+Ul,Ly="__reactEvents$"+Ul,qL="__reactListeners$"+Ul,WL="__reactHandles$"+Ul;function _o(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BE(t);t!==null;){if(n=t[Or])return n;t=BE(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Or]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function um(t){return t[Gu]||null}var Fy=[],ja=-1;function zi(t){return{current:t}}function qe(t){0>ja||(t.current=Fy[ja],Fy[ja]=null,ja--)}function Le(t,e){ja++,Fy[ja]=t.current,t.current=e}var Di={},on=zi(Di),An=zi(!1),Oo=Di;function pl(t,e){var n=t.type.contextTypes;if(!n)return Di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function Zf(){qe(An),qe(on)}function zE(t,e,n){if(on.current!==Di)throw Error(B(168));Le(on,e),Le(An,n)}function hP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,PM(t)||"Unknown",s));return et({},n,r)}function ep(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,Oo=on.current,Le(on,t),Le(An,An.current),!0}function qE(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=hP(t,e,Oo),r.__reactInternalMemoizedMergedChildContext=t,qe(An),qe(on),Le(on,t)):qe(An),Le(An,n)}var hs=null,dm=!1,Jg=!1;function fP(t){hs===null?hs=[t]:hs.push(t)}function HL(t){dm=!0,fP(t)}function qi(){if(!Jg&&hs!==null){Jg=!0;var t=0,e=Re;try{var n=hs;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hs=null,dm=!1}catch(s){throw hs!==null&&(hs=hs.slice(t+1)),FA(tw,qi),s}finally{Re=e,Jg=!1}}return null}var Da=[],Oa=0,tp=null,np=0,Jn=[],Zn=0,Mo=null,ms=1,gs="";function uo(t,e){Da[Oa++]=np,Da[Oa++]=tp,tp=t,np=e}function pP(t,e,n){Jn[Zn++]=ms,Jn[Zn++]=gs,Jn[Zn++]=Mo,Mo=t;var r=ms;t=gs;var s=32-Tr(r)-1;r&=~(1<<s),n+=1;var i=32-Tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ms=1<<32-Tr(e)+s|n<<s|r,gs=i+t}else ms=1<<i|n<<s|r,gs=t}function uw(t){t.return!==null&&(uo(t,1),pP(t,1,0))}function dw(t){for(;t===tp;)tp=Da[--Oa],Da[Oa]=null,np=Da[--Oa],Da[Oa]=null;for(;t===Mo;)Mo=Jn[--Zn],Jn[Zn]=null,gs=Jn[--Zn],Jn[Zn]=null,ms=Jn[--Zn],Jn[Zn]=null}var Bn=null,Ln=null,We=!1,Sr=null;function mP(t,e){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function WE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mo!==null?{id:ms,overflow:gs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Ln=null,!0):!1;default:return!1}}function Vy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $y(t){if(We){var e=Ln;if(e){var n=e;if(!WE(t,e)){if(Vy(t))throw Error(B(418));e=Ei(n.nextSibling);var r=Bn;e&&WE(t,e)?mP(r,n):(t.flags=t.flags&-4097|2,We=!1,Bn=t)}}else{if(Vy(t))throw Error(B(418));t.flags=t.flags&-4097|2,We=!1,Bn=t}}}function HE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Ah(t){if(t!==Bn)return!1;if(!We)return HE(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oy(t.type,t.memoizedProps)),e&&(e=Ln)){if(Vy(t))throw gP(),Error(B(418));for(;e;)mP(t,e),e=Ei(e.nextSibling)}if(HE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=Bn?Ei(t.stateNode.nextSibling):null;return!0}function gP(){for(var t=Ln;t;)t=Ei(t.nextSibling)}function ml(){Ln=Bn=null,We=!1}function hw(t){Sr===null?Sr=[t]:Sr.push(t)}var GL=Ms.ReactCurrentBatchConfig;function kc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ph(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function GE(t){var e=t._init;return e(t._payload)}function yP(t){function e(x,_){if(t){var E=x.deletions;E===null?(x.deletions=[_],x.flags|=16):E.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=Ii(x,_),x.index=0,x.sibling=null,x}function i(x,_,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<_?(x.flags|=2,_):E):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,_,E,P){return _===null||_.tag!==6?(_=i0(E,x.mode,P),_.return=x,_):(_=s(_,E),_.return=x,_)}function l(x,_,E,P){var R=E.type;return R===Aa?d(x,_,E.props.children,P,E.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ys&&GE(R)===_.type)?(P=s(_,E.props),P.ref=kc(x,_,E),P.return=x,P):(P=Sf(E.type,E.key,E.props,null,x.mode,P),P.ref=kc(x,_,E),P.return=x,P)}function c(x,_,E,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=o0(E,x.mode,P),_.return=x,_):(_=s(_,E.children||[]),_.return=x,_)}function d(x,_,E,P,R){return _===null||_.tag!==7?(_=Io(E,x.mode,P,R),_.return=x,_):(_=s(_,E),_.return=x,_)}function f(x,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=i0(""+_,x.mode,E),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vh:return E=Sf(_.type,_.key,_.props,null,x.mode,E),E.ref=kc(x,null,_),E.return=x,E;case Ia:return _=o0(_,x.mode,E),_.return=x,_;case Ys:var P=_._init;return f(x,P(_._payload),E)}if(qc(_)||wc(_))return _=Io(_,x.mode,E,null),_.return=x,_;Ph(x,_)}return null}function p(x,_,E,P){var R=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return R!==null?null:a(x,_,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vh:return E.key===R?l(x,_,E,P):null;case Ia:return E.key===R?c(x,_,E,P):null;case Ys:return R=E._init,p(x,_,R(E._payload),P)}if(qc(E)||wc(E))return R!==null?null:d(x,_,E,P,null);Ph(x,E)}return null}function m(x,_,E,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(E)||null,a(_,x,""+P,R);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case vh:return x=x.get(P.key===null?E:P.key)||null,l(_,x,P,R);case Ia:return x=x.get(P.key===null?E:P.key)||null,c(_,x,P,R);case Ys:var N=P._init;return m(x,_,E,N(P._payload),R)}if(qc(P)||wc(P))return x=x.get(E)||null,d(_,x,P,R,null);Ph(_,P)}return null}function w(x,_,E,P){for(var R=null,N=null,k=_,y=_=0,I=null;k!==null&&y<E.length;y++){k.index>y?(I=k,k=null):I=k.sibling;var A=p(x,k,E[y],P);if(A===null){k===null&&(k=I);break}t&&k&&A.alternate===null&&e(x,k),_=i(A,_,y),N===null?R=A:N.sibling=A,N=A,k=I}if(y===E.length)return n(x,k),We&&uo(x,y),R;if(k===null){for(;y<E.length;y++)k=f(x,E[y],P),k!==null&&(_=i(k,_,y),N===null?R=k:N.sibling=k,N=k);return We&&uo(x,y),R}for(k=r(x,k);y<E.length;y++)I=m(k,x,y,E[y],P),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?y:I.key),_=i(I,_,y),N===null?R=I:N.sibling=I,N=I);return t&&k.forEach(function(j){return e(x,j)}),We&&uo(x,y),R}function v(x,_,E,P){var R=wc(E);if(typeof R!="function")throw Error(B(150));if(E=R.call(E),E==null)throw Error(B(151));for(var N=R=null,k=_,y=_=0,I=null,A=E.next();k!==null&&!A.done;y++,A=E.next()){k.index>y?(I=k,k=null):I=k.sibling;var j=p(x,k,A.value,P);if(j===null){k===null&&(k=I);break}t&&k&&j.alternate===null&&e(x,k),_=i(j,_,y),N===null?R=j:N.sibling=j,N=j,k=I}if(A.done)return n(x,k),We&&uo(x,y),R;if(k===null){for(;!A.done;y++,A=E.next())A=f(x,A.value,P),A!==null&&(_=i(A,_,y),N===null?R=A:N.sibling=A,N=A);return We&&uo(x,y),R}for(k=r(x,k);!A.done;y++,A=E.next())A=m(k,x,y,A.value,P),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?y:A.key),_=i(A,_,y),N===null?R=A:N.sibling=A,N=A);return t&&k.forEach(function(O){return e(x,O)}),We&&uo(x,y),R}function S(x,_,E,P){if(typeof E=="object"&&E!==null&&E.type===Aa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case vh:e:{for(var R=E.key,N=_;N!==null;){if(N.key===R){if(R=E.type,R===Aa){if(N.tag===7){n(x,N.sibling),_=s(N,E.props.children),_.return=x,x=_;break e}}else if(N.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ys&&GE(R)===N.type){n(x,N.sibling),_=s(N,E.props),_.ref=kc(x,N,E),_.return=x,x=_;break e}n(x,N);break}else e(x,N);N=N.sibling}E.type===Aa?(_=Io(E.props.children,x.mode,P,E.key),_.return=x,x=_):(P=Sf(E.type,E.key,E.props,null,x.mode,P),P.ref=kc(x,_,E),P.return=x,x=P)}return o(x);case Ia:e:{for(N=E.key;_!==null;){if(_.key===N)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(x,_.sibling),_=s(_,E.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=o0(E,x.mode,P),_.return=x,x=_}return o(x);case Ys:return N=E._init,S(x,_,N(E._payload),P)}if(qc(E))return w(x,_,E,P);if(wc(E))return v(x,_,E,P);Ph(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,E),_.return=x,x=_):(n(x,_),_=i0(E,x.mode,P),_.return=x,x=_),o(x)):n(x,_)}return S}var gl=yP(!0),vP=yP(!1),rp=zi(null),sp=null,Ma=null,fw=null;function pw(){fw=Ma=sp=null}function mw(t){var e=rp.current;qe(rp),t._currentValue=e}function Uy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function el(t,e){sp=t,fw=Ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function lr(t){var e=t._currentValue;if(fw!==t)if(t={context:t,memoizedValue:e,next:null},Ma===null){if(sp===null)throw Error(B(308));Ma=t,sp.dependencies={lanes:0,firstContext:t}}else Ma=Ma.next=t;return e}var wo=null;function gw(t){wo===null?wo=[t]:wo.push(t)}function _P(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gw(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ts(t,r)}function Ts(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qs=!1;function yw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ts(t,n)}return s=r.interleaved,s===null?(e.next=e,gw(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ts(t,n)}function vf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nw(t,n)}}function KE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ip(t,e,n,r){var s=t.updateQueue;Qs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,v=a;switch(p=e,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=et({},f,p);break e;case 2:Qs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fo|=o,t.lanes=o,t.memoizedState=f}}function XE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Cd={},Ur=zi(Cd),Ku=zi(Cd),Xu=zi(Cd);function xo(t){if(t===Cd)throw Error(B(174));return t}function vw(t,e){switch(Le(Xu,e),Le(Ku,t),Le(Ur,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xy(e,t)}qe(Ur),Le(Ur,e)}function yl(){qe(Ur),qe(Ku),qe(Xu)}function xP(t){xo(Xu.current);var e=xo(Ur.current),n=xy(e,t.type);e!==n&&(Le(Ku,t),Le(Ur,n))}function _w(t){Ku.current===t&&(qe(Ur),qe(Ku))}var Xe=zi(0);function op(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zg=[];function ww(){for(var t=0;t<Zg.length;t++)Zg[t]._workInProgressVersionPrimary=null;Zg.length=0}var _f=Ms.ReactCurrentDispatcher,e0=Ms.ReactCurrentBatchConfig,Lo=0,Je=null,wt=null,kt=null,ap=!1,fu=!1,Yu=0,KL=0;function Gt(){throw Error(B(321))}function xw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ar(t[n],e[n]))return!1;return!0}function bw(t,e,n,r,s,i){if(Lo=i,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_f.current=t===null||t.memoizedState===null?JL:ZL,t=n(r,s),fu){i=0;do{if(fu=!1,Yu=0,25<=i)throw Error(B(301));i+=1,kt=wt=null,e.updateQueue=null,_f.current=e5,t=n(r,s)}while(fu)}if(_f.current=lp,e=wt!==null&&wt.next!==null,Lo=0,kt=wt=Je=null,ap=!1,e)throw Error(B(300));return t}function Ew(){var t=Yu!==0;return Yu=0,t}function jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Je.memoizedState=kt=t:kt=kt.next=t,kt}function cr(){if(wt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=kt===null?Je.memoizedState:kt.next;if(e!==null)kt=e,wt=t;else{if(t===null)throw Error(B(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},kt===null?Je.memoizedState=kt=t:kt=kt.next=t}return kt}function Qu(t,e){return typeof e=="function"?e(t):e}function t0(t){var e=cr(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Lo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Je.lanes|=d,Fo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ar(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Je.lanes|=i,Fo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function n0(t){var e=cr(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ar(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bP(){}function EP(t,e){var n=Je,r=cr(),s=e(),i=!Ar(r.memoizedState,s);if(i&&(r.memoizedState=s,Sn=!0),r=r.queue,Sw(TP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Ju(9,kP.bind(null,n,r,s,e),void 0,null),It===null)throw Error(B(349));Lo&30||SP(n,e,s)}return s}function SP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kP(t,e,n,r){e.value=n,e.getSnapshot=r,IP(e)&&AP(t)}function TP(t,e,n){return n(function(){IP(e)&&AP(t)})}function IP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ar(t,n)}catch{return!0}}function AP(t){var e=Ts(t,1);e!==null&&Ir(e,t,1,-1)}function YE(t){var e=jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=QL.bind(null,Je,t),[e.memoizedState,t]}function Ju(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PP(){return cr().memoizedState}function wf(t,e,n,r){var s=jr();Je.flags|=t,s.memoizedState=Ju(1|e,n,void 0,r===void 0?null:r)}function hm(t,e,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(wt!==null){var o=wt.memoizedState;if(i=o.destroy,r!==null&&xw(r,o.deps)){s.memoizedState=Ju(e,n,i,r);return}}Je.flags|=t,s.memoizedState=Ju(1|e,n,i,r)}function QE(t,e){return wf(8390656,8,t,e)}function Sw(t,e){return hm(2048,8,t,e)}function CP(t,e){return hm(4,2,t,e)}function NP(t,e){return hm(4,4,t,e)}function RP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jP(t,e,n){return n=n!=null?n.concat([t]):null,hm(4,4,RP.bind(null,e,t),n)}function kw(){}function DP(t,e){var n=cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OP(t,e){var n=cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MP(t,e,n){return Lo&21?(Ar(n,e)||(n=UA(),Je.lanes|=n,Fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function XL(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=e0.transition;e0.transition={};try{t(!1),e()}finally{Re=n,e0.transition=r}}function LP(){return cr().memoizedState}function YL(t,e,n){var r=Ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FP(t))VP(e,n);else if(n=_P(t,e,n,r),n!==null){var s=mn();Ir(n,t,r,s),$P(n,e,r)}}function QL(t,e,n){var r=Ti(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FP(t))VP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ar(a,o)){var l=e.interleaved;l===null?(s.next=s,gw(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_P(t,e,s,r),n!==null&&(s=mn(),Ir(n,t,r,s),$P(n,e,r))}}function FP(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function VP(t,e){fu=ap=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $P(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nw(t,n)}}var lp={readContext:lr,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},JL={readContext:lr,useCallback:function(t,e){return jr().memoizedState=[t,e===void 0?null:e],t},useContext:lr,useEffect:QE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wf(4194308,4,RP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wf(4194308,4,t,e)},useInsertionEffect:function(t,e){return wf(4,2,t,e)},useMemo:function(t,e){var n=jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YL.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=jr();return t={current:t},e.memoizedState=t},useState:YE,useDebugValue:kw,useDeferredValue:function(t){return jr().memoizedState=t},useTransition:function(){var t=YE(!1),e=t[0];return t=XL.bind(null,t[1]),jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,s=jr();if(We){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),It===null)throw Error(B(349));Lo&30||SP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,QE(TP.bind(null,r,i,t),[t]),r.flags|=2048,Ju(9,kP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jr(),e=It.identifierPrefix;if(We){var n=gs,r=ms;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZL={readContext:lr,useCallback:DP,useContext:lr,useEffect:Sw,useImperativeHandle:jP,useInsertionEffect:CP,useLayoutEffect:NP,useMemo:OP,useReducer:t0,useRef:PP,useState:function(){return t0(Qu)},useDebugValue:kw,useDeferredValue:function(t){var e=cr();return MP(e,wt.memoizedState,t)},useTransition:function(){var t=t0(Qu)[0],e=cr().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:EP,useId:LP,unstable_isNewReconciler:!1},e5={readContext:lr,useCallback:DP,useContext:lr,useEffect:Sw,useImperativeHandle:jP,useInsertionEffect:CP,useLayoutEffect:NP,useMemo:OP,useReducer:n0,useRef:PP,useState:function(){return n0(Qu)},useDebugValue:kw,useDeferredValue:function(t){var e=cr();return wt===null?e.memoizedState=t:MP(e,wt.memoizedState,t)},useTransition:function(){var t=n0(Qu)[0],e=cr().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:EP,useId:LP,unstable_isNewReconciler:!1};function _r(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function By(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fm={isMounted:function(t){return(t=t._reactInternals)?Jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),s=Ti(t),i=ws(r,s);i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(Ir(e,t,s,r),vf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),s=Ti(t),i=ws(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Si(t,i,s),e!==null&&(Ir(e,t,s,r),vf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=Ti(t),s=ws(n,r);s.tag=2,e!=null&&(s.callback=e),e=Si(t,s,r),e!==null&&(Ir(e,t,r,n),vf(e,t,r))}};function JE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!qu(n,r)||!qu(s,i):!0}function UP(t,e,n){var r=!1,s=Di,i=e.contextType;return typeof i=="object"&&i!==null?i=lr(i):(s=Pn(e)?Oo:on.current,r=e.contextTypes,i=(r=r!=null)?pl(t,s):Di),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ZE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fm.enqueueReplaceState(e,e.state,null)}function zy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yw(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=lr(i):(i=Pn(e)?Oo:on.current,s.context=pl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(By(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fm.enqueueReplaceState(s,s.state,null),ip(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vl(t,e){try{var n="",r=e;do n+=AM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function r0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t5=typeof WeakMap=="function"?WeakMap:Map;function BP(t,e,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){up||(up=!0,ev=r),qy(t,e)},n}function zP(t,e,n){n=ws(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qy(t,e),typeof r!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=m5.bind(null,t,e,n),e.then(t,t))}function tS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ws(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var n5=Ms.ReactCurrentOwner,Sn=!1;function hn(t,e,n,r){e.child=t===null?vP(e,null,n,r):gl(e,t.child,n,r)}function rS(t,e,n,r,s){n=n.render;var i=e.ref;return el(e,s),r=bw(t,e,n,r,i,s),n=Ew(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Is(t,e,s)):(We&&n&&uw(e),e.flags|=1,hn(t,e,r,s),e.child)}function sS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qP(t,e,i,r,s)):(t=Sf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qu,n(o,r)&&t.ref===e.ref)return Is(t,e,s)}return e.flags|=1,t=Ii(i,r),t.ref=e.ref,t.return=e,e.child=t}function qP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qu(i,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,Is(t,e,s)}return Wy(t,e,n,r,s)}function WP(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Fa,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Fa,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(Fa,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(Fa,Mn),Mn|=r;return hn(t,e,s,n),e.child}function HP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wy(t,e,n,r,s){var i=Pn(n)?Oo:on.current;return i=pl(e,i),el(e,s),n=bw(t,e,n,r,i,s),r=Ew(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Is(t,e,s)):(We&&r&&uw(e),e.flags|=1,hn(t,e,n,s),e.child)}function iS(t,e,n,r,s){if(Pn(n)){var i=!0;ep(e)}else i=!1;if(el(e,s),e.stateNode===null)xf(t,e),UP(e,n,r),zy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=lr(c):(c=Pn(n)?Oo:on.current,c=pl(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ZE(e,o,r,c),Qs=!1;var p=e.memoizedState;o.state=p,ip(e,r,o,s),l=e.memoizedState,a!==r||p!==l||An.current||Qs?(typeof d=="function"&&(By(e,n,d,r),l=e.memoizedState),(a=Qs||JE(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_r(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=lr(l):(l=Pn(n)?Oo:on.current,l=pl(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&ZE(e,o,r,l),Qs=!1,p=e.memoizedState,o.state=p,ip(e,r,o,s);var w=e.memoizedState;a!==f||p!==w||An.current||Qs?(typeof m=="function"&&(By(e,n,m,r),w=e.memoizedState),(c=Qs||JE(e,n,c,r,p,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Hy(t,e,n,r,i,s)}function Hy(t,e,n,r,s,i){HP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qE(e,n,!1),Is(t,e,i);r=e.stateNode,n5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gl(e,t.child,null,i),e.child=gl(e,null,a,i)):hn(t,e,a,i),e.memoizedState=r.state,s&&qE(e,n,!0),e.child}function GP(t){var e=t.stateNode;e.pendingContext?zE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zE(t,e.context,!1),vw(t,e.containerInfo)}function oS(t,e,n,r,s){return ml(),hw(s),e.flags|=256,hn(t,e,n,r),e.child}var Gy={dehydrated:null,treeContext:null,retryLane:0};function Ky(t){return{baseLanes:t,cachePool:null,transitions:null}}function KP(t,e,n){var r=e.pendingProps,s=Xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(Xe,s&1),t===null)return $y(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gm(o,r,0,null),t=Io(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ky(n),e.memoizedState=Gy,t):Tw(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return r5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ii(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ii(a,i):(i=Io(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ky(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Gy,r}return i=t.child,t=i.sibling,r=Ii(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tw(t,e){return e=gm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ch(t,e,n,r){return r!==null&&hw(r),gl(e,t.child,null,n),t=Tw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=r0(Error(B(422))),Ch(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gm({mode:"visible",children:r.children},s,0,null),i=Io(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gl(e,t.child,null,o),e.child.memoizedState=Ky(o),e.memoizedState=Gy,i);if(!(e.mode&1))return Ch(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=r0(i,r,void 0),Ch(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sn||a){if(r=It,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ts(t,s),Ir(r,t,s,-1))}return Rw(),r=r0(Error(B(421))),Ch(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=g5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ln=Ei(s.nextSibling),Bn=e,We=!0,Sr=null,t!==null&&(Jn[Zn++]=ms,Jn[Zn++]=gs,Jn[Zn++]=Mo,ms=t.id,gs=t.overflow,Mo=e),e=Tw(e,r.children),e.flags|=4096,e)}function aS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uy(t.return,e,n)}function s0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function XP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(hn(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&aS(t,n,e);else if(t.tag===19)aS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&op(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),s0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&op(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}s0(e,!0,n,null,i);break;case"together":s0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s5(t,e,n){switch(e.tag){case 3:GP(e),ml();break;case 5:xP(e);break;case 1:Pn(e.type)&&ep(e);break;case 4:vw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le(rp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?KP(t,e,n):(Le(Xe,Xe.current&1),t=Is(t,e,n),t!==null?t.sibling:null);Le(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,WP(t,e,n)}return Is(t,e,n)}var YP,Xy,QP,JP;YP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xy=function(){};QP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xo(Ur.current);var i=null;switch(n){case"input":s=yy(t,s),r=yy(t,r),i=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),i=[];break;case"textarea":s=wy(t,s),r=wy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jf)}by(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};JP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tc(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function i5(t,e,n){var r=e.pendingProps;switch(dw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return Pn(e.type)&&Zf(),Kt(e),null;case 3:return r=e.stateNode,yl(),qe(An),qe(on),ww(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ah(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(rv(Sr),Sr=null))),Xy(t,e),Kt(e),null;case 5:_w(e);var s=xo(Xu.current);if(n=e.type,t!==null&&e.stateNode!=null)QP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Kt(e),null}if(t=xo(Ur.current),Ah(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Or]=e,r[Gu]=i,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Hc.length;s++)Be(Hc[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":gE(r,i),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Be("invalid",r);break;case"textarea":vE(r,i),Be("invalid",r)}by(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ih(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ih(r.textContent,a,t),s=["children",""+a]):Lu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":_h(r),yE(r,i,!0);break;case"textarea":_h(r),_E(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Or]=e,t[Gu]=r,YP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ey(n,r),n){case"dialog":Be("cancel",t),Be("close",t),s=r;break;case"iframe":case"object":case"embed":Be("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hc.length;s++)Be(Hc[s],t);s=r;break;case"source":Be("error",t),s=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),s=r;break;case"details":Be("toggle",t),s=r;break;case"input":gE(t,r),s=yy(t,r),Be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),Be("invalid",t);break;case"textarea":vE(t,r),s=wy(t,r),Be("invalid",t);break;default:s=r}by(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?PA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fu(t,l):typeof l=="number"&&Fu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Be("scroll",t):l!=null&&Y_(t,i,l,o))}switch(n){case"input":_h(t),yE(t,r,!1);break;case"textarea":_h(t),_E(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ji(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ya(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ya(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)JP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=xo(Xu.current),xo(Ur.current),Ah(e)){if(r=e.stateNode,n=e.memoizedProps,r[Or]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Ih(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ih(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r}return Kt(e),null;case 13:if(qe(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Ln!==null&&e.mode&1&&!(e.flags&128))gP(),ml(),e.flags|=98560,i=!1;else if(i=Ah(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Or]=e}else ml(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),i=!1}else Sr!==null&&(rv(Sr),Sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?bt===0&&(bt=3):Rw())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return yl(),Xy(t,e),t===null&&Wu(e.stateNode.containerInfo),Kt(e),null;case 10:return mw(e.type._context),Kt(e),null;case 17:return Pn(e.type)&&Zf(),Kt(e),null;case 19:if(qe(Xe),i=e.memoizedState,i===null)return Kt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Tc(i,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=op(t),o!==null){for(e.flags|=128,Tc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Xe,Xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ft()>_l&&(e.flags|=128,r=!0,Tc(i,!1),e.lanes=4194304)}else{if(!r)if(t=op(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Kt(e),null}else 2*ft()-i.renderingStartTime>_l&&n!==1073741824&&(e.flags|=128,r=!0,Tc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ft(),e.sibling=null,n=Xe.current,Le(Xe,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return Nw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function o5(t,e){switch(dw(e),e.tag){case 1:return Pn(e.type)&&Zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yl(),qe(An),qe(on),ww(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _w(e),null;case 13:if(qe(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Xe),null;case 4:return yl(),null;case 10:return mw(e.type._context),null;case 22:case 23:return Nw(),null;case 24:return null;default:return null}}var Nh=!1,tn=!1,a5=typeof WeakSet=="function"?WeakSet:Set,Y=null;function La(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Yy(t,e,n){try{n()}catch(r){st(t,e,r)}}var lS=!1;function l5(t,e){if(jy=Xf,t=rP(),cw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dy={focusedElem:t,selectionRange:n},Xf=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,S=w.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:_r(e.type,v),S);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(P){st(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return w=lS,lS=!1,w}function pu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yy(e,n,i)}s=s.next}while(s!==r)}}function pm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZP(t){var e=t.alternate;e!==null&&(t.alternate=null,ZP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[Gu],delete e[Ly],delete e[qL],delete e[WL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eC(t){return t.tag===5||t.tag===3||t.tag===4}function cS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jf));else if(r!==4&&(t=t.child,t!==null))for(Jy(t,e,n),t=t.sibling;t!==null;)Jy(t,e,n),t=t.sibling}function Zy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zy(t,e,n),t=t.sibling;t!==null;)Zy(t,e,n),t=t.sibling}var Ct=null,xr=!1;function $s(t,e,n){for(n=n.child;n!==null;)tC(t,e,n),n=n.sibling}function tC(t,e,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(om,n)}catch{}switch(n.tag){case 5:tn||La(n,e);case 6:var r=Ct,s=xr;Ct=null,$s(t,e,n),Ct=r,xr=s,Ct!==null&&(xr?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(xr?(t=Ct,n=n.stateNode,t.nodeType===8?Qg(t.parentNode,n):t.nodeType===1&&Qg(t,n),Bu(t)):Qg(Ct,n.stateNode));break;case 4:r=Ct,s=xr,Ct=n.stateNode.containerInfo,xr=!0,$s(t,e,n),Ct=r,xr=s;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yy(n,e,o),s=s.next}while(s!==r)}$s(t,e,n);break;case 1:if(!tn&&(La(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}$s(t,e,n);break;case 21:$s(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,$s(t,e,n),tn=r):$s(t,e,n);break;default:$s(t,e,n)}}function uS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a5),e.forEach(function(r){var s=y5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,xr=!1;break e;case 3:Ct=a.stateNode.containerInfo,xr=!0;break e;case 4:Ct=a.stateNode.containerInfo,xr=!0;break e}a=a.return}if(Ct===null)throw Error(B(160));tC(i,o,s),Ct=null,xr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){st(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nC(e,t),e=e.sibling}function nC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mr(e,t),Nr(t),r&4){try{pu(3,t,t.return),pm(3,t)}catch(v){st(t,t.return,v)}try{pu(5,t,t.return)}catch(v){st(t,t.return,v)}}break;case 1:mr(e,t),Nr(t),r&512&&n!==null&&La(n,n.return);break;case 5:if(mr(e,t),Nr(t),r&512&&n!==null&&La(n,n.return),t.flags&32){var s=t.stateNode;try{Fu(s,"")}catch(v){st(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&SA(s,i),Ey(a,o);var c=Ey(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?PA(s,f):d==="dangerouslySetInnerHTML"?IA(s,f):d==="children"?Fu(s,f):Y_(s,d,f,c)}switch(a){case"input":vy(s,i);break;case"textarea":kA(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ya(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ya(s,!!i.multiple,i.defaultValue,!0):Ya(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gu]=i}catch(v){st(t,t.return,v)}}break;case 6:if(mr(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){st(t,t.return,v)}}break;case 3:if(mr(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bu(e.containerInfo)}catch(v){st(t,t.return,v)}break;case 4:mr(e,t),Nr(t);break;case 13:mr(e,t),Nr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pw=ft())),r&4&&uS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(c=tn)||d,mr(e,t),tn=c):mr(e,t),Nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Y=t,d=t.child;d!==null;){for(f=Y=d;Y!==null;){switch(p=Y,m=p.child,p.tag){case 0:case 11:case 14:case 15:pu(4,p,p.return);break;case 1:La(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){st(r,n,v)}}break;case 5:La(p,p.return);break;case 22:if(p.memoizedState!==null){hS(f);continue}}m!==null?(m.return=p,Y=m):hS(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AA("display",o))}catch(v){st(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){st(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mr(e,t),Nr(t),r&4&&uS(t);break;case 21:break;default:mr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eC(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fu(s,""),r.flags&=-33);var i=cS(t);Zy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cS(t);Jy(t,a,o);break;default:throw Error(B(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c5(t,e,n){Y=t,rC(t)}function rC(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Nh;var c=tn;if(Nh=o,(tn=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?fS(s):l!==null?(l.return=o,Y=l):fS(s);for(;i!==null;)Y=i,rC(i),i=i.sibling;Y=s,Nh=a,tn=c}dS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):dS(t)}}function dS(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||pm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_r(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&XE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}XE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Bu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}tn||e.flags&512&&Qy(e)}catch(p){st(e,e.return,p)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function hS(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function fS(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pm(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){st(e,s,l)}}var i=e.return;try{Qy(e)}catch(l){st(e,i,l)}break;case 5:var o=e.return;try{Qy(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var u5=Math.ceil,cp=Ms.ReactCurrentDispatcher,Iw=Ms.ReactCurrentOwner,nr=Ms.ReactCurrentBatchConfig,Ie=0,It=null,yt=null,Mt=0,Mn=0,Fa=zi(0),bt=0,Zu=null,Fo=0,mm=0,Aw=0,mu=null,xn=null,Pw=0,_l=1/0,cs=null,up=!1,ev=null,ki=null,Rh=!1,hi=null,dp=0,gu=0,tv=null,bf=-1,Ef=0;function mn(){return Ie&6?ft():bf!==-1?bf:bf=ft()}function Ti(t){return t.mode&1?Ie&2&&Mt!==0?Mt&-Mt:GL.transition!==null?(Ef===0&&(Ef=UA()),Ef):(t=Re,t!==0||(t=window.event,t=t===void 0?16:KA(t.type)),t):1}function Ir(t,e,n,r){if(50<gu)throw gu=0,tv=null,Error(B(185));Id(t,n,r),(!(Ie&2)||t!==It)&&(t===It&&(!(Ie&2)&&(mm|=n),bt===4&&ni(t,Mt)),Cn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(_l=ft()+500,dm&&qi()))}function Cn(t,e){var n=t.callbackNode;GM(t,e);var r=Kf(t,t===It?Mt:0);if(r===0)n!==null&&bE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bE(n),e===1)t.tag===0?HL(pS.bind(null,t)):fP(pS.bind(null,t)),BL(function(){!(Ie&6)&&qi()}),n=null;else{switch(BA(r)){case 1:n=tw;break;case 4:n=VA;break;case 16:n=Gf;break;case 536870912:n=$A;break;default:n=Gf}n=dC(n,sC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sC(t,e){if(bf=-1,Ef=0,Ie&6)throw Error(B(327));var n=t.callbackNode;if(tl()&&t.callbackNode!==n)return null;var r=Kf(t,t===It?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hp(t,r);else{e=r;var s=Ie;Ie|=2;var i=oC();(It!==t||Mt!==e)&&(cs=null,_l=ft()+500,To(t,e));do try{f5();break}catch(a){iC(t,a)}while(!0);pw(),cp.current=i,Ie=s,yt!==null?e=0:(It=null,Mt=0,e=bt)}if(e!==0){if(e===2&&(s=Ay(t),s!==0&&(r=s,e=nv(t,s))),e===1)throw n=Zu,To(t,0),ni(t,r),Cn(t,ft()),n;if(e===6)ni(t,r);else{if(s=t.current.alternate,!(r&30)&&!d5(s)&&(e=hp(t,r),e===2&&(i=Ay(t),i!==0&&(r=i,e=nv(t,i))),e===1))throw n=Zu,To(t,0),ni(t,r),Cn(t,ft()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ho(t,xn,cs);break;case 3:if(ni(t,r),(r&130023424)===r&&(e=Pw+500-ft(),10<e)){if(Kf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=My(ho.bind(null,t,xn,cs),e);break}ho(t,xn,cs);break;case 4:if(ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*u5(r/1960))-r,10<r){t.timeoutHandle=My(ho.bind(null,t,xn,cs),r);break}ho(t,xn,cs);break;case 5:ho(t,xn,cs);break;default:throw Error(B(329))}}}return Cn(t,ft()),t.callbackNode===n?sC.bind(null,t):null}function nv(t,e){var n=mu;return t.current.memoizedState.isDehydrated&&(To(t,e).flags|=256),t=hp(t,e),t!==2&&(e=xn,xn=n,e!==null&&rv(e)),t}function rv(t){xn===null?xn=t:xn.push.apply(xn,t)}function d5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~Aw,e&=~mm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tr(e),r=1<<n;t[n]=-1,e&=~r}}function pS(t){if(Ie&6)throw Error(B(327));tl();var e=Kf(t,0);if(!(e&1))return Cn(t,ft()),null;var n=hp(t,e);if(t.tag!==0&&n===2){var r=Ay(t);r!==0&&(e=r,n=nv(t,r))}if(n===1)throw n=Zu,To(t,0),ni(t,e),Cn(t,ft()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ho(t,xn,cs),Cn(t,ft()),null}function Cw(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(_l=ft()+500,dm&&qi())}}function Vo(t){hi!==null&&hi.tag===0&&!(Ie&6)&&tl();var e=Ie;Ie|=1;var n=nr.transition,r=Re;try{if(nr.transition=null,Re=1,t)return t()}finally{Re=r,nr.transition=n,Ie=e,!(Ie&6)&&qi()}}function Nw(){Mn=Fa.current,qe(Fa)}function To(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UL(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(dw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zf();break;case 3:yl(),qe(An),qe(on),ww();break;case 5:_w(r);break;case 4:yl();break;case 13:qe(Xe);break;case 19:qe(Xe);break;case 10:mw(r.type._context);break;case 22:case 23:Nw()}n=n.return}if(It=t,yt=t=Ii(t.current,null),Mt=Mn=e,bt=0,Zu=null,Aw=mm=Fo=0,xn=mu=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}wo=null}return t}function iC(t,e){do{var n=yt;try{if(pw(),_f.current=lp,ap){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ap=!1}if(Lo=0,kt=wt=Je=null,fu=!1,Yu=0,Iw.current=null,n===null||n.return===null){bt=1,Zu=e,yt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=tS(o);if(m!==null){m.flags&=-257,nS(m,o,a,i,e),m.mode&1&&eS(i,c,e),e=m,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){eS(i,c,e),Rw();break e}l=Error(B(426))}}else if(We&&a.mode&1){var S=tS(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),nS(S,o,a,i,e),hw(vl(l,a));break e}}i=l=vl(l,a),bt!==4&&(bt=2),mu===null?mu=[i]:mu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=BP(i,l,e);KE(i,x);break e;case 1:a=l;var _=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ki===null||!ki.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=zP(i,a,e);KE(i,P);break e}}i=i.return}while(i!==null)}lC(n)}catch(R){e=R,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function oC(){var t=cp.current;return cp.current=lp,t===null?lp:t}function Rw(){(bt===0||bt===3||bt===2)&&(bt=4),It===null||!(Fo&268435455)&&!(mm&268435455)||ni(It,Mt)}function hp(t,e){var n=Ie;Ie|=2;var r=oC();(It!==t||Mt!==e)&&(cs=null,To(t,e));do try{h5();break}catch(s){iC(t,s)}while(!0);if(pw(),Ie=n,cp.current=r,yt!==null)throw Error(B(261));return It=null,Mt=0,bt}function h5(){for(;yt!==null;)aC(yt)}function f5(){for(;yt!==null&&!FM();)aC(yt)}function aC(t){var e=uC(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?lC(t):yt=e,Iw.current=null}function lC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o5(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,yt=null;return}}else if(n=i5(n,e,Mn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);bt===0&&(bt=5)}function ho(t,e,n){var r=Re,s=nr.transition;try{nr.transition=null,Re=1,p5(t,e,n,r)}finally{nr.transition=s,Re=r}return null}function p5(t,e,n,r){do tl();while(hi!==null);if(Ie&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KM(t,i),t===It&&(yt=It=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rh||(Rh=!0,dC(Gf,function(){return tl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nr.transition,nr.transition=null;var o=Re;Re=1;var a=Ie;Ie|=4,Iw.current=null,l5(t,n),nC(n,t),DL(Dy),Xf=!!jy,Dy=jy=null,t.current=n,c5(n),VM(),Ie=a,Re=o,nr.transition=i}else t.current=n;if(Rh&&(Rh=!1,hi=t,dp=s),i=t.pendingLanes,i===0&&(ki=null),BM(n.stateNode),Cn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(up)throw up=!1,t=ev,ev=null,t;return dp&1&&t.tag!==0&&tl(),i=t.pendingLanes,i&1?t===tv?gu++:(gu=0,tv=t):gu=0,qi(),null}function tl(){if(hi!==null){var t=BA(dp),e=nr.transition,n=Re;try{if(nr.transition=null,Re=16>t?16:t,hi===null)var r=!1;else{if(t=hi,hi=null,dp=0,Ie&6)throw Error(B(331));var s=Ie;for(Ie|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:pu(8,d,i)}var f=d.child;if(f!==null)f.return=d,Y=f;else for(;Y!==null;){d=Y;var p=d.sibling,m=d.return;if(ZP(d),d===c){Y=null;break}if(p!==null){p.return=m,Y=p;break}Y=m}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pu(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Y=x;break e}Y=i.return}}var _=t.current;for(Y=_;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=_;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pm(9,a)}}catch(R){st(a,a.return,R)}if(a===o){Y=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Y=P;break e}Y=a.return}}if(Ie=s,qi(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(om,t)}catch{}r=!0}return r}finally{Re=n,nr.transition=e}}return!1}function mS(t,e,n){e=vl(n,e),e=BP(t,e,1),t=Si(t,e,1),e=mn(),t!==null&&(Id(t,1,e),Cn(t,e))}function st(t,e,n){if(t.tag===3)mS(t,t,n);else for(;e!==null;){if(e.tag===3){mS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ki===null||!ki.has(r))){t=vl(n,t),t=zP(e,t,1),e=Si(e,t,1),t=mn(),e!==null&&(Id(e,1,t),Cn(e,t));break}}e=e.return}}function m5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Mt&n)===n&&(bt===4||bt===3&&(Mt&130023424)===Mt&&500>ft()-Pw?To(t,0):Aw|=n),Cn(t,e)}function cC(t,e){e===0&&(t.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var n=mn();t=Ts(t,e),t!==null&&(Id(t,e,n),Cn(t,n))}function g5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cC(t,n)}function y5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),cC(t,n)}var uC;uC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,s5(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,We&&e.flags&1048576&&pP(e,np,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xf(t,e),t=e.pendingProps;var s=pl(e,on.current);el(e,n),s=bw(null,e,r,t,s,n);var i=Ew();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,ep(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yw(e),s.updater=fm,e.stateNode=s,s._reactInternals=e,zy(e,r,t,n),e=Hy(null,e,r,!0,i,n)):(e.tag=0,We&&i&&uw(e),hn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_5(r),t=_r(r,t),s){case 0:e=Wy(null,e,r,t,n);break e;case 1:e=iS(null,e,r,t,n);break e;case 11:e=rS(null,e,r,t,n);break e;case 14:e=sS(null,e,r,_r(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),Wy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),iS(t,e,r,s,n);case 3:e:{if(GP(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wP(t,e),ip(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vl(Error(B(423)),e),e=oS(t,e,r,n,s);break e}else if(r!==s){s=vl(Error(B(424)),e),e=oS(t,e,r,n,s);break e}else for(Ln=Ei(e.stateNode.containerInfo.firstChild),Bn=e,We=!0,Sr=null,n=vP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ml(),r===s){e=Is(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return xP(e),t===null&&$y(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Oy(r,s)?o=null:i!==null&&Oy(r,i)&&(e.flags|=32),HP(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&$y(e),null;case 13:return KP(t,e,n);case 4:return vw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gl(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),rS(t,e,r,s,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le(rp,r._currentValue),r._currentValue=o,i!==null)if(Ar(i.value,o)){if(i.children===s.children&&!An.current){e=Is(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ws(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Uy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}hn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,el(e,n),s=lr(s),r=r(s),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,s=_r(r,e.pendingProps),s=_r(r.type,s),sS(t,e,r,s,n);case 15:return qP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),xf(t,e),e.tag=1,Pn(r)?(t=!0,ep(e)):t=!1,el(e,n),UP(e,r,s),zy(e,r,s,n),Hy(null,e,r,!0,t,n);case 19:return XP(t,e,n);case 22:return WP(t,e,n)}throw Error(B(156,e.tag))};function dC(t,e){return FA(t,e)}function v5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t,e,n,r){return new v5(t,e,n,r)}function jw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _5(t){if(typeof t=="function")return jw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===J_)return 11;if(t===Z_)return 14}return 2}function Ii(t,e){var n=t.alternate;return n===null?(n=er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Aa:return Io(n.children,s,i,e);case Q_:o=8,s|=8;break;case fy:return t=er(12,n,e,s|2),t.elementType=fy,t.lanes=i,t;case py:return t=er(13,n,e,s),t.elementType=py,t.lanes=i,t;case my:return t=er(19,n,e,s),t.elementType=my,t.lanes=i,t;case xA:return gm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _A:o=10;break e;case wA:o=9;break e;case J_:o=11;break e;case Z_:o=14;break e;case Ys:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Io(t,e,n,r){return t=er(7,t,r,e),t.lanes=n,t}function gm(t,e,n,r){return t=er(22,t,r,e),t.elementType=xA,t.lanes=n,t.stateNode={isHidden:!1},t}function i0(t,e,n){return t=er(6,t,null,e),t.lanes=n,t}function o0(t,e,n){return e=er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$g(0),this.expirationTimes=$g(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$g(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dw(t,e,n,r,s,i,o,a,l){return t=new w5(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yw(i),t}function x5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hC(t){if(!t)return Di;t=t._reactInternals;e:{if(Jo(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Pn(n))return hP(t,n,e)}return e}function fC(t,e,n,r,s,i,o,a,l){return t=Dw(n,r,!0,t,s,i,o,a,l),t.context=hC(null),n=t.current,r=mn(),s=Ti(n),i=ws(r,s),i.callback=e??null,Si(n,i,s),t.current.lanes=s,Id(t,s,r),Cn(t,r),t}function ym(t,e,n,r){var s=e.current,i=mn(),o=Ti(s);return n=hC(n),e.context===null?e.context=n:e.pendingContext=n,e=ws(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(s,e,o),t!==null&&(Ir(t,s,o,i),vf(t,s,o)),o}function fp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ow(t,e){gS(t,e),(t=t.alternate)&&gS(t,e)}function b5(){return null}var pC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mw(t){this._internalRoot=t}vm.prototype.render=Mw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));ym(t,e,null,null)};vm.prototype.unmount=Mw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){ym(null,t,null,null)}),e[ks]=null}};function vm(t){this._internalRoot=t}vm.prototype.unstable_scheduleHydration=function(t){if(t){var e=WA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&GA(t)}};function Lw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yS(){}function E5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fp(o);i.call(c)}}var o=fC(e,r,t,0,null,!1,!1,"",yS);return t._reactRootContainer=o,t[ks]=o.current,Wu(t.nodeType===8?t.parentNode:t),Vo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=fp(l);a.call(c)}}var l=Dw(t,0,!1,null,null,!1,!1,"",yS);return t._reactRootContainer=l,t[ks]=l.current,Wu(t.nodeType===8?t.parentNode:t),Vo(function(){ym(e,l,n,r)}),l}function wm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fp(o);a.call(l)}}ym(e,o,t,s)}else o=E5(n,e,t,s,r);return fp(o)}zA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wc(e.pendingLanes);n!==0&&(nw(e,n|1),Cn(e,ft()),!(Ie&6)&&(_l=ft()+500,qi()))}break;case 13:Vo(function(){var r=Ts(t,1);if(r!==null){var s=mn();Ir(r,t,1,s)}}),Ow(t,1)}};rw=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var n=mn();Ir(e,t,134217728,n)}Ow(t,134217728)}};qA=function(t){if(t.tag===13){var e=Ti(t),n=Ts(t,e);if(n!==null){var r=mn();Ir(n,t,e,r)}Ow(t,e)}};WA=function(){return Re};HA=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};ky=function(t,e,n){switch(e){case"input":if(vy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=um(r);if(!s)throw Error(B(90));EA(r),vy(r,s)}}}break;case"textarea":kA(t,n);break;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}};RA=Cw;jA=Vo;var S5={usingClientEntryPoint:!1,Events:[Pd,Ra,um,CA,NA,Cw]},Ic={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k5={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MA(t),t===null?null:t.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||b5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{om=jh.inject(k5),$r=jh}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S5;Hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(e))throw Error(B(200));return x5(t,e,null,n)};Hn.createRoot=function(t,e){if(!Lw(t))throw Error(B(299));var n=!1,r="",s=pC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dw(t,1,!1,null,null,n,!1,r,s),t[ks]=e.current,Wu(t.nodeType===8?t.parentNode:t),new Mw(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=MA(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return Vo(t)};Hn.hydrate=function(t,e,n){if(!_m(e))throw Error(B(200));return wm(null,t,e,!0,n)};Hn.hydrateRoot=function(t,e,n){if(!Lw(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fC(e,null,t,1,n??null,s,!1,i,o),t[ks]=e.current,Wu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vm(e)};Hn.render=function(t,e,n){if(!_m(e))throw Error(B(200));return wm(null,t,e,!1,n)};Hn.unmountComponentAtNode=function(t){if(!_m(t))throw Error(B(40));return t._reactRootContainer?(Vo(function(){wm(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};Hn.unstable_batchedUpdates=Cw;Hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_m(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return wm(t,e,n,!1,r)};Hn.version="18.3.1-next-f1338f8080-20240426";function mC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mC)}catch(t){console.error(t)}}mC(),mA.exports=Hn;var T5=mA.exports,vS=T5;dy.createRoot=vS.createRoot,dy.hydrateRoot=vS.hydrateRoot;const I5="modulepreload",A5=function(t){return"/"+t},_S={},ae=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=A5(l),l in _S)return;_S[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":I5,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(this,arguments)}var fi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fi||(fi={}));const wS="popstate";function P5(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return sv("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pp(s)}return N5(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C5(){return Math.random().toString(36).substr(2,8)}function xS(t,e){return{usr:t.state,key:t.key,idx:e}}function sv(t,e,n,r){return n===void 0&&(n=null),ed({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bl(e):e,{state:n,key:e&&e.key||r||C5()})}function pp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function N5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=fi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ed({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=fi.Pop;let S=d(),x=S==null?null:S-c;c=S,l&&l({action:a,location:v.location,delta:x})}function p(S,x){a=fi.Push;let _=sv(v.location,S,x);c=d()+1;let E=xS(_,c),P=v.createHref(_);try{o.pushState(E,"",P)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(P)}i&&l&&l({action:a,location:v.location,delta:1})}function m(S,x){a=fi.Replace;let _=sv(v.location,S,x);c=d();let E=xS(_,c),P=v.createHref(_);o.replaceState(E,"",P),i&&l&&l({action:a,location:v.location,delta:0})}function w(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof S=="string"?S:pp(S);return pt(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let v={get action(){return a},get location(){return t(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(wS,f),l=S,()=>{s.removeEventListener(wS,f),l=null}},createHref(S){return e(s,S)},createURL:w,encodeLocation(S){let x=w(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(S){return o.go(S)}};return v}var bS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bS||(bS={}));function R5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Bl(e):e,s=Vw(r.pathname||"/",n);if(s==null)return null;let i=gC(t);j5(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=B5(i[a],W5(s));return o}function gC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ai([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:$5(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of yC(i.path))s(i,o,l)}),e}function yC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=yC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function j5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:U5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D5=/^:[\w-]+$/,O5=3,M5=2,L5=1,F5=10,V5=-2,ES=t=>t==="*";function $5(t,e){let n=t.split("/"),r=n.length;return n.some(ES)&&(r+=V5),e&&(r+=M5),n.filter(s=>!ES(s)).reduce((s,i)=>s+(D5.test(i)?O5:i===""?L5:F5),r)}function U5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function B5(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=z5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:Ai([s,d.pathname]),pathnameBase:Y5(Ai([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ai([s,d.pathnameBase]))}return i}function z5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=q5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=a[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const w=a[f];return m&&!w?c[p]=void 0:c[p]=H5(w||"",p),c},{}),pathname:i,pathnameBase:o,pattern:t}}function q5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function W5(t){try{return decodeURI(t)}catch(e){return Fw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function H5(t,e){try{return decodeURIComponent(t)}catch(n){return Fw(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function G5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bl(t):t;return{pathname:n?n.startsWith("/")?n:K5(n,e):e,search:Q5(r),hash:J5(s)}}function K5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function a0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $w(t,e){let n=X5(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Uw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bl(t):(s=ed({},t),pt(!s.pathname||!s.pathname.includes("?"),a0("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),a0("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),a0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=G5(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ai=t=>t.join("/").replace(/\/\/+/g,"/"),Y5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vC=["post","put","patch","delete"];new Set(vC);const e6=["get",...vC];new Set(e6);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const Bw=T.createContext(null),t6=T.createContext(null),Wi=T.createContext(null),Nd=T.createContext(null),Zr=T.createContext({outlet:null,matches:[],isDataRoute:!1}),_C=T.createContext(null);function n6(t,e){let{relative:n}=e===void 0?{}:e;zl()||pt(!1);let{basename:r,navigator:s}=T.useContext(Wi),{hash:i,pathname:o,search:a}=xC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ai([r,o])),s.createHref({pathname:l,search:a,hash:i})}function zl(){return T.useContext(Nd)!=null}function dr(){return zl()||pt(!1),T.useContext(Nd).location}function r6(){return T.useContext(Nd).navigationType}function wC(t){T.useContext(Wi).static||T.useLayoutEffect(t)}function es(){let{isDataRoute:t}=T.useContext(Zr);return t?v6():s6()}function s6(){zl()||pt(!1);let t=T.useContext(Bw),{basename:e,future:n,navigator:r}=T.useContext(Wi),{matches:s}=T.useContext(Zr),{pathname:i}=dr(),o=JSON.stringify($w(s,n.v7_relativeSplatPath)),a=T.useRef(!1);return wC(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Uw(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ai([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}const i6=T.createContext(null);function o6(t){let e=T.useContext(Zr).outlet;return e&&T.createElement(i6.Provider,{value:t},e)}function Kre(){let{matches:t}=T.useContext(Zr),e=t[t.length-1];return e?e.params:{}}function xC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(Wi),{matches:s}=T.useContext(Zr),{pathname:i}=dr(),o=JSON.stringify($w(s,r.v7_relativeSplatPath));return T.useMemo(()=>Uw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function a6(t,e){return l6(t,e)}function l6(t,e,n,r){zl()||pt(!1);let{navigator:s}=T.useContext(Wi),{matches:i}=T.useContext(Zr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=dr(),d;if(e){var f;let S=typeof e=="string"?Bl(e):e;l==="/"||(f=S.pathname)!=null&&f.startsWith(l)||pt(!1),d=S}else d=c;let p=d.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",w=R5(t,{pathname:m}),v=f6(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Ai([l,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Ai([l,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&v?T.createElement(Nd.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fi.Pop}},v):v}function c6(){let t=y6(),e=Z5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const u6=T.createElement(c6,null);class d6 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(Zr.Provider,{value:this.props.routeContext},T.createElement(_C.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h6(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(Bw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Zr.Provider,{value:e},r)}function f6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));d>=0||pt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let m,w=!1,v=null,S=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||u6,l&&(c<0&&p===0?(w=!0,S=null):c===p&&(w=!0,S=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,p+1)),_=()=>{let E;return m?E=v:w?E=S:f.route.Component?E=T.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,T.createElement(h6,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?T.createElement(d6,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var bC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bC||{}),mp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mp||{});function p6(t){let e=T.useContext(Bw);return e||pt(!1),e}function m6(t){let e=T.useContext(t6);return e||pt(!1),e}function g6(t){let e=T.useContext(Zr);return e||pt(!1),e}function EC(t){let e=g6(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function y6(){var t;let e=T.useContext(_C),n=m6(mp.UseRouteError),r=EC(mp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function v6(){let{router:t}=p6(bC.UseNavigateStable),e=EC(mp.UseNavigateStable),n=T.useRef(!1);return wC(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},i)))},[t,e])}function Ao(t){let{to:e,replace:n,state:r,relative:s}=t;zl()||pt(!1);let{future:i,static:o}=T.useContext(Wi),{matches:a}=T.useContext(Zr),{pathname:l}=dr(),c=es(),d=Uw(e,$w(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function _6(t){return o6(t.context)}function re(t){pt(!1)}function w6(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fi.Pop,navigator:i,static:o=!1,future:a}=t;zl()&&pt(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:i,static:o,future:td({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Bl(r));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:w="default"}=r,v=T.useMemo(()=>{let S=Vw(d,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:m,key:w},navigationType:s}},[l,d,f,p,m,w,s]);return v==null?null:T.createElement(Wi.Provider,{value:c},T.createElement(Nd.Provider,{children:n,value:v}))}function x6(t){let{children:e,location:n}=t;return a6(iv(e),n)}new Promise(()=>{});function iv(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let i=[...e,s];if(r.type===T.Fragment){n.push.apply(n,iv(r.props.children,i));return}r.type!==re&&pt(!1),!r.props.index||!r.props.children||pt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=iv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}function b6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function E6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S6(t,e){return t.button===0&&(!e||e==="_self")&&!E6(t)}function av(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function k6(t,e){let n=av(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const T6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],I6="6";try{window.__reactRouterVersion=I6}catch{}const A6="startTransition",SS=mM[A6];function P6(t){let{basename:e,children:n,future:r,window:s}=t,i=T.useRef();i.current==null&&(i.current=P5({window:s,v5Compat:!0}));let o=i.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=T.useCallback(f=>{c&&SS?SS(()=>l(f)):l(f)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.createElement(w6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const C6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=e,p=b6(e,T6),{basename:m}=T.useContext(Wi),w,v=!1;if(typeof c=="string"&&N6.test(c)&&(w=c,C6))try{let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),R=Vw(P.pathname,m);P.origin===E.origin&&R!=null?c=R+P.search+P.hash:v=!0}catch{}let S=n6(c,{relative:s}),x=R6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:f});function _(E){r&&r(E),E.defaultPrevented||x(E)}return T.createElement("a",ov({},p,{href:w||S,onClick:v||i?r:_,ref:n,target:l}))});var kS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kS||(kS={}));var TS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(TS||(TS={}));function R6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=es(),c=dr(),d=xC(t,{relative:o});return T.useCallback(f=>{if(S6(f,n)){f.preventDefault();let p=r!==void 0?r:pp(c)===pp(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function j6(t){let e=T.useRef(av(t)),n=T.useRef(!1),r=dr(),s=T.useMemo(()=>k6(r.search,n.current?null:e.current),[r.search]),i=es(),o=T.useCallback((a,l)=>{const c=av(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const D6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ae(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class zw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class O6 extends zw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class M6 extends zw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class L6 extends zw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lv;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(lv||(lv={}));var F6=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class V6{constructor(e,{headers:n={},customFetch:r,region:s=lv.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=D6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return F6(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(w=>{throw new O6(w)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new M6(d);if(!d.ok)throw new L6(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var SC={},qw={},xm={},Rd={},bm={},Em={},$6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wl=$6();const U6=wl.fetch,kC=wl.fetch.bind(wl),TC=wl.Headers,B6=wl.Request,z6=wl.Response,ql=Object.freeze(Object.defineProperty({__proto__:null,Headers:TC,Request:B6,Response:z6,default:kC,fetch:U6},Symbol.toStringTag,{value:"Module"})),q6=ZO(ql);var Ww={};Object.defineProperty(Ww,"__esModule",{value:!0});class W6 extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Ww.default=W6;var IC=ar&&ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Em,"__esModule",{value:!0});const H6=IC(q6),G6=IC(Ww);let K6=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=H6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,d=null,f=null,p=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),S=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&S&&S.length>1&&(f=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(d=[],c=null,p=200,m="OK")}catch{i.status===404&&v===""?(p=204,m="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,m="OK"),c&&this.shouldThrowOnError)throw new G6.default(c)}return{error:c,data:d,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};Em.default=K6;var X6=ar&&ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bm,"__esModule",{value:!0});const Y6=X6(Em);let Q6=class extends Y6.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bm.default=Q6;var J6=ar&&ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rd,"__esModule",{value:!0});const Z6=J6(bm);let eF=class extends Z6.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Rd.default=eF;var tF=ar&&ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xm,"__esModule",{value:!0});const Ac=tF(Rd);let nF=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ac.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ac.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ac.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Ac.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ac.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};xm.default=nF;var Sm={},km={};Object.defineProperty(km,"__esModule",{value:!0});km.version=void 0;km.version="0.0.0-automated";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.DEFAULT_HEADERS=void 0;const rF=km;Sm.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rF.version}`};var AC=ar&&ar.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qw,"__esModule",{value:!0});const sF=AC(xm),iF=AC(Rd),oF=Sm;let aF=class PC{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},oF.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new sF.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new PC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new iF.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};qw.default=aF;(function(t){var e=ar&&ar.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;var n=qw;Object.defineProperty(t,"PostgrestClient",{enumerable:!0,get:function(){return e(n).default}});var r=xm;Object.defineProperty(t,"PostgrestQueryBuilder",{enumerable:!0,get:function(){return e(r).default}});var s=Rd;Object.defineProperty(t,"PostgrestFilterBuilder",{enumerable:!0,get:function(){return e(s).default}});var i=bm;Object.defineProperty(t,"PostgrestTransformBuilder",{enumerable:!0,get:function(){return e(i).default}});var o=Em;Object.defineProperty(t,"PostgrestBuilder",{enumerable:!0,get:function(){return e(o).default}})})(SC);const lF=z_(SC),{PostgrestClient:cF,PostgrestQueryBuilder:Zre,PostgrestFilterBuilder:ese,PostgrestTransformBuilder:tse,PostgrestBuilder:nse}=lF,uF="2.10.1",dF={"X-Client-Info":`realtime-js/${uF}`},hF="1.0.0",CC=1e4,fF=1e3;var nl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(nl||(nl={}));var Dn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Dn||(Dn={}));var br;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(br||(br={}));var cv;(function(t){t.websocket="websocket"})(cv||(cv={}));var yo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yo||(yo={}));class pF{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class NC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Me||(Me={}));const IS=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=mF(o,t,e,s),i),{})},mF=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?RC(i,o):uv(o)},RC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _F(e,n)}switch(t){case Me.bool:return gF(e);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return yF(e);case Me.json:case Me.jsonb:return vF(e);case Me.timestamp:return wF(e);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return uv(e);default:return uv(e)}},uv=t=>t,gF=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},yF=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vF=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_F=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>RC(e,a))}return t},wF=t=>typeof t=="string"?t.replace(" ","T"):t,jC=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class l0{constructor(e,n,r={},s=CC){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var AS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(AS||(AS={}));class yu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yu.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=yu.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yu.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const f=i[c];if(f){const p=d.map(S=>S.presence_ref),m=f.map(S=>S.presence_ref),w=d.filter(S=>m.indexOf(S.presence_ref)<0),v=f.filter(S=>p.indexOf(S.presence_ref)<0);w.length>0&&(a[c]=w),v.length>0&&(l[c]=v)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const f=e[a].map(m=>m.presence_ref),p=d.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var PS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(PS||(PS={}));var CS;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(CS||(CS={}));var NS;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(NS||(NS={}));class Hw{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new l0(this,br.join,this.params,this.timeout),this.rejoinTimer=new NC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(br.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new yu(this),this.broadcastEndpointURL=jC(this.socket.endPoint)+"/api/broadcast"}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e&&e("CHANNEL_ERROR",d)),this._onClose(()=>e&&e("CLOSED"));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:d})=>{var f;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),d===void 0){e&&e("SUBSCRIBED");return}else{const p=this.bindings.postgres_changes,m=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,w=[];for(let v=0;v<m;v++){const S=p[v],{filter:{event:x,schema:_,table:E,filter:P}}=S,R=d&&d[v];if(R&&R.event===x&&R.schema===_&&R.table===E&&R.filter===P)w.push(Object.assign(Object.assign({},S),{id:R.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e("SUBSCRIBED");return}}).receive("error",d=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,o,a;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.ack)&&s("ok"),l.receive("ok",()=>s("ok")),l.receive("error",()=>s("error")),l.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(br.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new l0(this,br.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new l0(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=br;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,v,S;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(v=m.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var w,v,S,x,_,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const P=m.id,R=(w=m.filter)===null||w===void 0?void 0:w.event;return P&&((v=n.ids)===null||v===void 0?void 0:v.includes(P))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const P=(_=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((E=n==null?void 0:n.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:v,table:S,commit_timestamp:x,type:_,errors:E}=w;p=Object.assign(Object.assign({},{schema:v,table:S,commit_timestamp:x,eventType:_,new:{},old:{},errors:E}),this._getPayloadRecords(w))}m.callback(p,r)})}_isClosed(){return this.state===Dn.closed}_isJoined(){return this.state===Dn.joined}_isJoining(){return this.state===Dn.joining}_isLeaving(){return this.state===Dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Hw.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(br.close,{},e)}_onError(e){this._on(br.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=IS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=IS(e.columns,e.old_record)),n}}const xF=()=>{},bF=typeof WebSocket<"u";class EF{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=dF,this.params={},this.timeout=CC,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xF,this.conn=null,this.sendBuffer=[],this.serializer=new pF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ae(async()=>{const{default:l}=await Promise.resolve().then(()=>ql);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${cv.websocket}`,this.httpEndpoint=jC(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new NC(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(bF){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new SF(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ae(async()=>{const{default:e}=await import("./browser-CKOv4jEK.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case nl.connecting:return yo.Connecting;case nl.open:return yo.Open;case nl.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}channel(e,n={config:{}}){const r=new Hw(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(br.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hF}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(br.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(fF,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class SF{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=nl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let Gw=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Jt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kF extends Gw{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class RS extends Gw{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var TF=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const DC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ae(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},IF=()=>TF(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ae(()=>Promise.resolve().then(()=>ql),void 0)).Response:Response});var Wl=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const c0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AF=(t,e)=>Wl(void 0,void 0,void 0,function*(){const n=yield IF();t instanceof n?t.json().then(r=>{e(new kF(c0(r),t.status||500))}).catch(r=>{e(new RS(c0(r),r))}):e(new RS(c0(t),t))}),PF=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};function Tm(t,e,n,r,s,i){return Wl(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,PF(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>AF(l,a))})})}function dv(t,e,n,r){return Wl(this,void 0,void 0,function*(){return Tm(t,"GET",e,n,r)})}function Js(t,e,n,r,s){return Wl(this,void 0,void 0,function*(){return Tm(t,"POST",e,r,s,n)})}function CF(t,e,n,r,s){return Wl(this,void 0,void 0,function*(){return Tm(t,"PUT",e,r,s,n)})}function OC(t,e,n,r,s){return Wl(this,void 0,void 0,function*(){return Tm(t,"DELETE",e,r,s,n)})}var Kn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const NF={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RF{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=DC(s)}uploadOrUpdate(e,n,r,s){return Kn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},jS),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(n),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:l,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Jt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Kn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:jS.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(Jt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Js(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Gw("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Kn(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Kn(this,void 0,void 0,function*(){try{return{data:{path:(yield Js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Kn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Js(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Kn(this,void 0,void 0,function*(){try{const s=yield Js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}download(e,n){return Kn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dv(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Jt(a))return{data:null,error:a};throw a}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield OC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Kn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NF),n),{prefix:e||""});return{data:yield Js(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Jt(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const jF="2.6.0",DF={"X-Client-Info":`storage-js/${jF}`};var pa=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class OF{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},DF),n),this.fetch=DC(r)}listBuckets(){return pa(this,void 0,void 0,function*(){try{return{data:yield dv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Jt(e))return{data:null,error:e};throw e}})}getBucket(e){return pa(this,void 0,void 0,function*(){try{return{data:yield dv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return pa(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return pa(this,void 0,void 0,function*(){try{return{data:yield CF(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return pa(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return pa(this,void 0,void 0,function*(){try{return{data:yield OC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}})}}class MF extends OF{constructor(e,n={},r){super(e,n,r)}from(e){return new RF(this.url,this.headers,e,this.fetch)}}const LF="2.44.0";let Gc="";typeof Deno<"u"?Gc="deno":typeof document<"u"?Gc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gc="react-native":Gc="node";const FF={"X-Client-Info":`supabase-js-${Gc}/${LF}`},VF={headers:FF},$F={schema:"public"},UF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BF={};var zF=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const qF=t=>{let e;return t?e=t:typeof fetch>"u"?e=kC:e=fetch,(...n)=>e(...n)},WF=()=>typeof Headers>"u"?TC:Headers,HF=(t,e,n)=>{const r=qF(n),s=WF();return(i,o)=>zF(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function GF(t){return t.replace(/\/$/,"")}function KF(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}const MC="2.64.2",XF="http://localhost:9999",YF="supabase.auth.token",QF={"X-Client-Info":`gotrue-js/${MC}`},DS=10,hv="X-Supabase-Api-Version",LC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function JF(t){return Math.round(Date.now()/1e3)+t}function ZF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const yr=()=>typeof document<"u",no={tested:!1,writable:!1},vu=()=>{if(!yr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(no.tested)return no.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),no.tested=!0,no.writable=!0}catch{no.tested=!0,no.writable=!1}return no.writable};function u0(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const FC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ae(async()=>{const{default:r}=await Promise.resolve().then(()=>ql);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},eV=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",VC=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Dh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},d0=async(t,e)=>{await t.removeItem(e)};function tV(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,o,a,l,c,d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)o=e.indexOf(t.charAt(d++)),a=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),c!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}let $C=class UC{constructor(){this.promise=new UC.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};$C.promiseConstructor=Promise;function OS(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(tV(r))}async function nV(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rV(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function sV(t){return("0"+t.toString(16)).substr(-2)}function iV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,sV).join("")}async function oV(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function aV(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lV(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await oV(t);return aV(n)}async function ma(t,e,n=!1){const r=iV();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await VC(t,`${e}-code-verifier`,s);const i=await lV(r);return[i,r===i?"plain":"s256"]}const cV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uV(t){const e=t.headers.get(hv);if(!e||!e.match(cV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Kw extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dV extends Kw{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function hV(t){return _e(t)&&t.name==="AuthApiError"}class BC extends Kw{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zo extends Kw{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class ro extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class h0 extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oh extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mh extends Zo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class MS extends Zo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fv extends Zo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function f0(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class LS extends Zo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var fV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const fo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pV=[502,503,504];async function FS(t){var e;if(!eV(t))throw new fv(fo(t),0);if(pV.includes(t.status))throw new fv(fo(t),t.status);let n;try{n=await t.json()}catch(i){throw new BC(fo(i),i)}let r;const s=uV(t);if(s&&s.getTime()>=LC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new LS(fo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new LS(fo(n),t.status,n.weak_password.reasons);throw new dV(fo(n),t.status||500,r)}const mV=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Se(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[hv]||(i[hv]=LC["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await gV(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function gV(t,e,n,r,s,i){const o=mV(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new fv(fo(l),0)}if(a.ok||await FS(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await FS(l)}}function Gs(t){var e;let n=null;wV(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=JF(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function VS(t){const e=Gs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ri(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yV(t){return{data:t,error:null}}function vV(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=fV(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function _V(t){return t}function wV(t){return t.access_token&&t.refresh_token&&t.expires_in}var xV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bV{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=FC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ri})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xV(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vV,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:_V});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);c[`${S}Page`]=v}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(_e(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ri})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ri})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}}const EV={getItem:t=>vu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{vu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{vu()&&globalThis.localStorage.removeItem(t)}};function $S(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function SV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ga={debug:!!(globalThis&&vu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kV extends zC{}async function TV(t,e,n){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kV(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}SV();const IV={url:XF,storageKey:YF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Pc=30*1e3,US=3;async function BS(t,e,n){return await n()}class nd{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nd.nextInstanceID,nd.nextInstanceID+=1,this.instanceID>0&&yr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},IV),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bV({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=FC(s.fetch),this.lock=s.lock||BS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:yr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=TV:this.lock=BS,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:vu()?this.storage=EV:(this.memoryStorage={},this.storage=$S(this.memoryStorage)):(this.memoryStorage={},this.storage=$S(this.memoryStorage)),yr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${MC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=yr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return _e(e)?{error:e}:{error:new BC("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{await this._removeSession();const i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gs}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{await this._removeSession();let i;if("email"in e){const{email:d,password:f,options:p}=e;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await ma(this.storage,this.storageKey)),i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:w},xform:Gs})}else if("phone"in e){const{phone:d,password:f,options:p}=e;i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Gs})}else throw new Oh("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VS})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VS})}else throw new Oh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new h0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Dh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/"),{data:i,error:o}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gs});return await d0(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new h0}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gs}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new h0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ma(this.storage,this.storageKey));const{error:f}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Oh("You must provide either an email or phone number.")}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Gs});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ma(this.storage,this.storageKey)),await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:yV})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ro;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Oh("You must provide either an email or phone number and a type")}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Dh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(l,c,d){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,c,d)}})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ro}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ri})})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ro;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ma(this.storage,this.storageKey));const{data:c,error:d}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ri});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return OS(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ro;const n=Date.now()/1e3;let r=n,s=!0,i=null;const o=OS(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(_e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ro;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!yr())throw new Mh("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Mh("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new MS("Not a valid PKCE flow url.");const n=u0(window.location.href);if(e){if(!n.code)throw new MS("No code detected.");const{data:_,error:E}=await this._exchangeCodeForSession(n.code);if(E)throw E;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Mh(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=n;if(!i||!a||!o||!c)throw new Mh("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let p=d+f;l&&(p=parseInt(l));const m=p-d;m*1e3<=Pc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=p-f;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",w,p,d);const{data:v,error:S}=await this._getUser(i);if(S)throw S;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:n.type},error:null}}catch(n){if(_e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=u0(window.location.href);return!!(yr()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=u0(window.location.href),n=await Dh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(hV(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await d0(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const n=ZF(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ma(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return yr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(_e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rV(async s=>(s>0&&await nV(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gs})),(s,i)=>{const o=200*Math.pow(2,s);return i&&f0(i)&&Date.now()+o-r<Pc})}catch(r){if(this._debug(n,"error",r),_e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),yr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Dh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+DS;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${DS}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),f0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $C;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ro;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),_e(i)){const o={session:null,error:i};return f0(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await VC(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await d0(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Pc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pc}ms, refresh threshold is ${US} ticks`),s<=US&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ma(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:a,error:l}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}nd.nextInstanceID=0;const AV=nd;class PV extends AV{constructor(e){super(e)}}var CV=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class NV{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=GF(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:$F,realtime:BF,auth:Object.assign(Object.assign({},UF),{storageKey:l}),global:VF},d=KF(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=HF(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},d.realtime)),this.rest=new cF(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new V6(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new MF(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return CV(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,debug:a},l,c){var d;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PV({url:this.authUrl,headers:Object.assign(Object.assign({},f),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,debug:a,fetch:c,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new EF(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qC=(t,e,n)=>new NV(t,e,n);console.warn("Supabase environment variables not configured");const RV="https://placeholder.supabase.co",jV="placeholder-key",Z=qC(RV,jV,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"bankroll-auth-token",flowType:"pkce"},global:{headers:{"x-application-name":"bankroll-website"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),DV={};var pv=null;function OV(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return DV.randomBytes(t)}catch{}if(!pv)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return pv(t)}function MV(t){pv=t}function Xw(t,e){if(t=t||Yw,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(gp(OV(rd),rd)),n.join("")}function WC(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=Yw;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function r(s){kr(function(){try{s(null,Xw(t))}catch(i){s(i)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(s,i){r(function(o,a){if(o){i(o);return}s(a)})})}function HC(t,e){if(typeof e>"u"&&(e=Yw),typeof e=="number"&&(e=Xw(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return mv(t,e)}function GC(t,e,n,r){function s(i){typeof t=="string"&&typeof e=="number"?WC(e,function(o,a){mv(t,a,i,r)}):typeof t=="string"&&typeof e=="string"?mv(t,e,i,r):kr(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,l){if(a){o(a);return}i(l)})})}function KC(t,e){for(var n=t.length^e.length,r=0;r<t.length;++r)n|=t.charCodeAt(r)^e.charCodeAt(r);return n===0}function LV(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:KC(HC(t,e.substring(0,e.length-31)),e)}function FV(t,e,n,r){function s(i){if(typeof t!="string"||typeof e!="string"){kr(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){kr(i.bind(this,null,!1));return}GC(t,e.substring(0,29),function(o,a){o?i(o):i(null,KC(a,e))},r)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(i,o){s(function(a,l){if(a){o(a);return}i(l)})})}function VV(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function $V(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function UV(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return XC(t)>72}var kr=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function XC(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e}function BV(t){for(var e=0,n,r,s=new Array(XC(t)),i=0,o=t.length;i<o;++i)n=t.charCodeAt(i),n<128?s[e++]=n:n<2048?(s[e++]=n>>6|192,s[e++]=n&63|128):(n&64512)===55296&&((r=t.charCodeAt(i+1))&64512)===56320?(n=65536+((n&1023)<<10)+(r&1023),++i,s[e++]=n>>18|240,s[e++]=n>>12&63|128,s[e++]=n>>6&63|128,s[e++]=n&63|128):(s[e++]=n>>12|224,s[e++]=n>>6&63|128,s[e++]=n&63|128);return s}var ya="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Us=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function gp(t,e){var n=0,r=[],s,i;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(s=t[n++]&255,r.push(ya[s>>2&63]),s=(s&3)<<4,n>=e){r.push(ya[s&63]);break}if(i=t[n++]&255,s|=i>>4&15,r.push(ya[s&63]),s=(i&15)<<2,n>=e){r.push(ya[s&63]);break}i=t[n++]&255,s|=i>>6&3,r.push(ya[s&63]),r.push(ya[i&63])}return r.join("")}function YC(t,e){var n=0,r=t.length,s=0,i=[],o,a,l,c,d,f;if(e<=0)throw Error("Illegal len: "+e);for(;n<r-1&&s<e&&(f=t.charCodeAt(n++),o=f<Us.length?Us[f]:-1,f=t.charCodeAt(n++),a=f<Us.length?Us[f]:-1,!(o==-1||a==-1||(d=o<<2>>>0,d|=(a&48)>>4,i.push(String.fromCharCode(d)),++s>=e||n>=r)||(f=t.charCodeAt(n++),l=f<Us.length?Us[f]:-1,l==-1)||(d=(a&15)<<4>>>0,d|=(l&60)>>2,i.push(String.fromCharCode(d)),++s>=e||n>=r)));)f=t.charCodeAt(n++),c=f<Us.length?Us[f]:-1,d=(l&3)<<6>>>0,d|=c,i.push(String.fromCharCode(d)),++s;var p=[];for(n=0;n<s;n++)p.push(i[n].charCodeAt(0));return p}var rd=16,Yw=10,zV=16,qV=100,zS=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],qS=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],QC=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function sd(t,e,n,r){var s,i=t[e],o=t[e+1];return i^=n[0],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[1],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[2],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[3],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[4],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[5],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[6],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[7],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[8],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[9],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[10],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[11],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[12],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[13],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[14],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[15],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[16],t[e]=o^n[zV+1],t[e+1]=i,t}function xa(t,e){for(var n=0,r=0;n<4;++n)r=r<<8|t[e]&255,e=(e+1)%t.length;return{key:r,offp:e}}function WS(t,e,n){for(var r=0,s=[0,0],i=e.length,o=n.length,a,l=0;l<i;l++)a=xa(t,r),r=a.offp,e[l]=e[l]^a.key;for(l=0;l<i;l+=2)s=sd(s,0,e,n),e[l]=s[0],e[l+1]=s[1];for(l=0;l<o;l+=2)s=sd(s,0,e,n),n[l]=s[0],n[l+1]=s[1]}function WV(t,e,n,r){for(var s=0,i=[0,0],o=n.length,a=r.length,l,c=0;c<o;c++)l=xa(e,s),s=l.offp,n[c]=n[c]^l.key;for(s=0,c=0;c<o;c+=2)l=xa(t,s),s=l.offp,i[0]^=l.key,l=xa(t,s),s=l.offp,i[1]^=l.key,i=sd(i,0,n,r),n[c]=i[0],n[c+1]=i[1];for(c=0;c<a;c+=2)l=xa(t,s),s=l.offp,i[0]^=l.key,l=xa(t,s),s=l.offp,i[1]^=l.key,i=sd(i,0,n,r),r[c]=i[0],r[c+1]=i[1]}function HS(t,e,n,r,s){var i=QC.slice(),o=i.length,a;if(n<4||n>31)if(a=Error("Illegal number of rounds (4-31): "+n),r){kr(r.bind(this,a));return}else throw a;if(e.length!==rd)if(a=Error("Illegal salt length: "+e.length+" != "+rd),r){kr(r.bind(this,a));return}else throw a;n=1<<n>>>0;var l,c,d=0,f;typeof Int32Array=="function"?(l=new Int32Array(zS),c=new Int32Array(qS)):(l=zS.slice(),c=qS.slice()),WV(e,t,l,c);function p(){if(s&&s(d/n),d<n)for(var w=Date.now();d<n&&(d=d+1,WS(t,l,c),WS(e,l,c),!(Date.now()-w>qV)););else{for(d=0;d<64;d++)for(f=0;f<o>>1;f++)sd(i,f<<1,l,c);var v=[];for(d=0;d<o;d++)v.push((i[d]>>24&255)>>>0),v.push((i[d]>>16&255)>>>0),v.push((i[d]>>8&255)>>>0),v.push((i[d]&255)>>>0);if(r){r(null,v);return}else return v}r&&kr(p)}if(typeof r<"u")p();else for(var m;;)if(typeof(m=p())<"u")return m||[]}function mv(t,e,n,r){var s;if(typeof t!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),n){kr(n.bind(this,s));return}else throw s;var i,o;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),n){kr(n.bind(this,s));return}else throw s;if(e.charAt(2)==="$")i="\0",o=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),n){kr(n.bind(this,s));return}else throw s;o=4}if(e.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),n){kr(n.bind(this,s));return}else throw s;var a=parseInt(e.substring(o,o+1),10)*10,l=parseInt(e.substring(o+1,o+2),10),c=a+l,d=e.substring(o+3,o+25);t+=i>="a"?"\0":"";var f=BV(t),p=YC(d,rd);function m(w){var v=[];return v.push("$2"),i>="a"&&v.push(i),v.push("$"),c<10&&v.push("0"),v.push(c.toString()),v.push("$"),v.push(gp(p,p.length)),v.push(gp(w,QC.length*4-1)),v.join("")}if(typeof n>"u")return m(HS(f,p,c));HS(f,p,c,function(w,v){w?n(w,null):n(null,m(v))},r)}function HV(t,e){return gp(t,e)}function GV(t,e){return YC(t,e)}const p0={setRandomFallback:MV,genSaltSync:Xw,genSalt:WC,hashSync:HC,hash:GC,compareSync:LV,compare:FV,getRounds:VV,getSalt:$V,truncates:UV,encodeBase64:HV,decodeBase64:GV},pi={async setupPIN(t,e){try{if(!/^\d{4}$/.test(e))throw new Error("PIN must be exactly 4 digits");const n=await p0.genSalt(10),r=await p0.hash(e,n),{data:s}=await Z.from("user_pins").select("id").eq("user_id",t).single();if(s){const{error:i}=await Z.from("user_pins").update({pin_hash:r,salt:n,failed_attempts:0,locked_until:null,pin_set_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("user_id",t);if(i)throw i;await this.logAction(t,"pin_changed",{success:!0})}else{const{error:i}=await Z.from("user_pins").insert({user_id:t,pin_hash:r,salt:n});if(i)throw i;await this.logAction(t,"pin_created",{success:!0})}return{success:!0}}catch(n){throw console.error("Error setting up PIN:",n),n}},async verifyPIN(t,e,n=null){try{const{data:r,error:s}=await Z.from("user_pins").select("*").eq("user_id",t).single();if(s||!r)throw new Error("PIN not set up");if(r.locked_until&&new Date(r.locked_until)>new Date){const o=Math.ceil((new Date(r.locked_until)-new Date)/6e4);throw new Error(`Account locked. Try again in ${o} minutes`)}if(await p0.compare(e,r.pin_hash))return await Z.from("user_pins").update({failed_attempts:0,locked_until:null,last_attempt_at:new Date().toISOString()}).eq("user_id",t),await this.logPINAttempt(t,n,"success"),await this.logAction(t,"pin_login_success",{deviceId:n}),{success:!0};{const o=r.failed_attempts+1,a={failed_attempts:o,last_attempt_at:new Date().toISOString()};throw o>=3&&(a.locked_until=new Date(Date.now()+15*6e4).toISOString(),await this.logPINAttempt(t,n,"locked")),await Z.from("user_pins").update(a).eq("user_id",t),await this.logPINAttempt(t,n,"failure"),await this.logAction(t,"pin_login_failed",{deviceId:n,attempts:o}),new Error(`Invalid PIN. ${3-o} attempts remaining`)}}catch(r){throw console.error("Error verifying PIN:",r),r}},async hasPIN(t){try{const{data:e,error:n}=await Z.from("user_pins").select("id").eq("user_id",t).single();return!!e&&!n}catch(e){return console.error("Error checking PIN status:",e),!1}},async removePIN(t){try{const{error:e}=await Z.from("user_pins").delete().eq("user_id",t);if(e)throw e;return await this.logAction(t,"pin_removed",{success:!0}),{success:!0}}catch(e){throw console.error("Error removing PIN:",e),e}},async logPINAttempt(t,e,n){try{await Z.from("pin_attempt_logs").insert({user_id:t,device_id:e,attempt_type:n,ip_address:await this.getIPAddress(),user_agent:navigator.userAgent})}catch(r){console.error("Error logging PIN attempt:",r)}},async logAction(t,e,n){try{await Z.from("user_audit_log").insert({user_id:t,action:e,details:n})}catch(r){console.error("Error logging action:",r)}},async getIPAddress(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return null}}},JC={async trustDevice(t,e){try{const{error:n}=await Z.from("trusted_devices").insert({user_id:t,device_id:e.deviceId,device_name:e.deviceName,device_type:e.deviceType,browser_name:e.browserName,os_name:e.osName,device_fingerprint:e.fingerprint,ip_address:await pi.getIPAddress()});if(n)if(n.code==="23505"){const{error:r}=await Z.from("trusted_devices").update({device_name:e.deviceName,device_fingerprint:e.fingerprint,last_used_at:new Date().toISOString(),is_active:!0,expires_at:new Date(Date.now()+2592e6).toISOString()}).eq("user_id",t).eq("device_id",e.deviceId);if(r)throw r}else throw n;return await pi.logAction(t,"device_trusted",{deviceId:e.deviceId,deviceName:e.deviceName}),{success:!0}}catch(n){throw console.error("Error trusting device:",n),n}},async isDeviceTrusted(t,e){try{const{data:n,error:r}=await Z.from("trusted_devices").select("*").eq("user_id",t).eq("device_id",e).eq("is_active",!0).single();return r||!n||new Date(n.expires_at)<new Date?!1:(await Z.from("trusted_devices").update({last_used_at:new Date().toISOString()}).eq("id",n.id),!0)}catch(n){return console.error("Error checking trusted device:",n),!1}},async getTrustedDevices(t){try{const{data:e,error:n}=await Z.from("trusted_devices").select("*").eq("user_id",t).eq("is_active",!0).order("last_used_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw console.error("Error getting trusted devices:",e),e}},async removeTrustedDevice(t,e){try{const{error:n}=await Z.from("trusted_devices").update({is_active:!1}).eq("user_id",t).eq("device_id",e);if(n)throw n;return await pi.logAction(t,"device_removed",{deviceId:e}),{success:!0}}catch(n){throw console.error("Error removing trusted device:",n),n}},async removeAllTrustedDevices(t){try{const{error:e}=await Z.from("trusted_devices").update({is_active:!1}).eq("user_id",t);if(e)throw e;return await pi.logAction(t,"all_devices_removed",{success:!0}),{success:!0}}catch(e){throw console.error("Error removing all trusted devices:",e),e}}};var GS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new XV;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YV=function(t){const e=ZC(t);return eN.encodeByteArray(e,!0)},yp=function(t){return YV(t).replace(/\./g,"")},tN=function(t){try{return eN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=()=>QV().__FIREBASE_DEFAULTS__,ZV=()=>{if(typeof process>"u"||typeof GS>"u")return;const t=GS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tN(t[1]);return e&&JSON.parse(e)},Im=()=>{try{return JV()||ZV()||e$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nN=t=>{var e,n;return(n=(e=Im())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rN=t=>{const e=nN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sN=()=>{var t;return(t=Im())===null||t===void 0?void 0:t.config},iN=t=>{var e;return(e=Im())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yp(JSON.stringify(n)),yp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function r$(){var t;const e=(t=Im())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function i$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o$(){const t=an();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function a$(){return!r$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function l$(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c$,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ea.prototype.create)}}class ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?u$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hr(s,a,r)}}function u$(t,e){return t.replace(d$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const d$=/\{\$([^}]+)}/g;function h$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(KS(i)&&KS(o)){if(!xl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function KS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function f$(t,e){const n=new p$(t,e);return n.subscribe.bind(n)}class p${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=m0),s.error===void 0&&(s.error=m0),s.complete===void 0&&(s.complete=m0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function m0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=1e3,y$=2,v$=4*60*60*1e3,_$=.5;function XS(t,e=g$,n=y$){const r=e*Math.pow(n,t),s=Math.round(_$*r*(Math.random()-.5)*2);return Math.min(v$,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new t$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b$(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x$(t){return t===po?void 0:t}function b$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new w$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const S$={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},k$=ke.INFO,T$={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},I$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=T$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=k$,this._logHandler=I$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const A$=(t,e)=>e.some(n=>t instanceof n);let YS,QS;function P$(){return YS||(YS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C$(){return QS||(QS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uN=new WeakMap,gv=new WeakMap,dN=new WeakMap,g0=new WeakMap,Qw=new WeakMap;function N$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uN.set(n,t)}).catch(()=>{}),Qw.set(e,t),e}function R$(t){if(gv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gv.set(t,e)}let yv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function j$(t){yv=t(yv)}function D$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(y0(this),e,...n);return dN.set(r,e.sort?e.sort():[e]),xs(r)}:C$().includes(t)?function(...e){return t.apply(y0(this),e),xs(uN.get(this))}:function(...e){return xs(t.apply(y0(this),e))}}function O$(t){return typeof t=="function"?D$(t):(t instanceof IDBTransaction&&R$(t),A$(t,P$())?new Proxy(t,yv):t)}function xs(t){if(t instanceof IDBRequest)return N$(t);if(g0.has(t))return g0.get(t);const e=O$(t);return e!==t&&(g0.set(t,e),Qw.set(e,t)),e}const y0=t=>Qw.get(t);function hN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xs(o.result),l.oldVersion,l.newVersion,xs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function sse(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),xs(n).then(()=>{})}const M$=["get","getKey","getAll","getAllKeys","count"],L$=["put","add","delete","clear"],v0=new Map;function JS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(v0.get(e))return v0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=L$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||M$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return v0.set(e,i),i}j$(t=>({...t,get:(e,n,r)=>JS(e,n)||t.get(e,n,r),has:(e,n)=>!!JS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(V$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function V$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vv="@firebase/app",ZS="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Am("@firebase/app"),$$="@firebase/app-compat",U$="@firebase/analytics-compat",B$="@firebase/analytics",z$="@firebase/app-check-compat",q$="@firebase/app-check",W$="@firebase/auth",H$="@firebase/auth-compat",G$="@firebase/database",K$="@firebase/data-connect",X$="@firebase/database-compat",Y$="@firebase/functions",Q$="@firebase/functions-compat",J$="@firebase/installations",Z$="@firebase/installations-compat",e9="@firebase/messaging",t9="@firebase/messaging-compat",n9="@firebase/performance",r9="@firebase/performance-compat",s9="@firebase/remote-config",i9="@firebase/remote-config-compat",o9="@firebase/storage",a9="@firebase/storage-compat",l9="@firebase/firestore",c9="@firebase/vertexai-preview",u9="@firebase/firestore-compat",d9="firebase",h9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="[DEFAULT]",f9={[vv]:"fire-core",[$$]:"fire-core-compat",[B$]:"fire-analytics",[U$]:"fire-analytics-compat",[q$]:"fire-app-check",[z$]:"fire-app-check-compat",[W$]:"fire-auth",[H$]:"fire-auth-compat",[G$]:"fire-rtdb",[K$]:"fire-data-connect",[X$]:"fire-rtdb-compat",[Y$]:"fire-fn",[Q$]:"fire-fn-compat",[J$]:"fire-iid",[Z$]:"fire-iid-compat",[e9]:"fire-fcm",[t9]:"fire-fcm-compat",[n9]:"fire-perf",[r9]:"fire-perf-compat",[s9]:"fire-rc",[i9]:"fire-rc-compat",[o9]:"fire-gcs",[a9]:"fire-gcs-compat",[l9]:"fire-fst",[u9]:"fire-fst-compat",[c9]:"fire-vertex","fire-js":"fire-js",[d9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=new Map,p9=new Map,wv=new Map;function ek(t,e){try{t.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pr(t){const e=t.name;if(wv.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;wv.set(e,t);for(const n of vp.values())ek(n,t);for(const n of p9.values())ek(n,t);return!0}function Hi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new ea("app","Firebase",m9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=h9;function fN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_v,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Pi.create("bad-app-name",{appName:String(s)});if(n||(n=sN()),!n)throw Pi.create("no-options");const i=vp.get(s);if(i){if(xl(n,i.options)&&xl(r,i.config))return i;throw Pi.create("duplicate-app",{appName:s})}const o=new E$(s);for(const l of wv.values())o.addComponent(l);const a=new g9(n,r,o);return vp.set(s,a),a}function Pm(t=_v){const e=vp.get(t);if(!e&&t===_v&&sN())return fN();if(!e)throw Pi.create("no-app",{appName:t});return e}function Nn(t,e,n){var r;let s=(r=f9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(a.join(" "));return}Pr(new ur(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="firebase-heartbeat-database",v9=1,id="firebase-heartbeat-store";let _0=null;function pN(){return _0||(_0=hN(y9,v9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(id)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pi.create("idb-open",{originalErrorMessage:t.message})})),_0}async function _9(t){try{const n=(await pN()).transaction(id),r=await n.objectStore(id).get(mN(t));return await n.done,r}catch(e){if(e instanceof hr)As.warn(e.message);else{const n=Pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function tk(t,e){try{const r=(await pN()).transaction(id,"readwrite");await r.objectStore(id).put(e,mN(t)),await r.done}catch(n){if(n instanceof hr)As.warn(n.message);else{const r=Pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(r.message)}}}function mN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=1024,x9=30*24*60*60*1e3;class b9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=x9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){As.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nk(),{heartbeatsToSend:r,unsentEntries:s}=E9(this._heartbeatsCache.heartbeats),i=yp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return As.warn(n),""}}}function nk(){return new Date().toISOString().substring(0,10)}function E9(t,e=w9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class S9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rk(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){Pr(new ur("platform-logger",e=>new F$(e),"PRIVATE")),Pr(new ur("heartbeat",e=>new b9(e),"PRIVATE")),Nn(vv,ZS,t),Nn(vv,ZS,"esm2017"),Nn("fire-js","")}k9("");var sk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,gN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,y){function I(){}I.prototype=y.prototype,k.D=y.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(A,j,O){for(var D=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)D[Q-2]=arguments[Q];return y.prototype[j].apply(A,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,y,I){I||(I=0);var A=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)A[j]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(j=0;16>j;++j)A[j]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=k.g[0],I=k.g[1],j=k.g[2];var O=k.g[3],D=y+(O^I&(j^O))+A[0]+3614090360&4294967295;y=I+(D<<7&4294967295|D>>>25),D=O+(j^y&(I^j))+A[1]+3905402710&4294967295,O=y+(D<<12&4294967295|D>>>20),D=j+(I^O&(y^I))+A[2]+606105819&4294967295,j=O+(D<<17&4294967295|D>>>15),D=I+(y^j&(O^y))+A[3]+3250441966&4294967295,I=j+(D<<22&4294967295|D>>>10),D=y+(O^I&(j^O))+A[4]+4118548399&4294967295,y=I+(D<<7&4294967295|D>>>25),D=O+(j^y&(I^j))+A[5]+1200080426&4294967295,O=y+(D<<12&4294967295|D>>>20),D=j+(I^O&(y^I))+A[6]+2821735955&4294967295,j=O+(D<<17&4294967295|D>>>15),D=I+(y^j&(O^y))+A[7]+4249261313&4294967295,I=j+(D<<22&4294967295|D>>>10),D=y+(O^I&(j^O))+A[8]+1770035416&4294967295,y=I+(D<<7&4294967295|D>>>25),D=O+(j^y&(I^j))+A[9]+2336552879&4294967295,O=y+(D<<12&4294967295|D>>>20),D=j+(I^O&(y^I))+A[10]+4294925233&4294967295,j=O+(D<<17&4294967295|D>>>15),D=I+(y^j&(O^y))+A[11]+2304563134&4294967295,I=j+(D<<22&4294967295|D>>>10),D=y+(O^I&(j^O))+A[12]+1804603682&4294967295,y=I+(D<<7&4294967295|D>>>25),D=O+(j^y&(I^j))+A[13]+4254626195&4294967295,O=y+(D<<12&4294967295|D>>>20),D=j+(I^O&(y^I))+A[14]+2792965006&4294967295,j=O+(D<<17&4294967295|D>>>15),D=I+(y^j&(O^y))+A[15]+1236535329&4294967295,I=j+(D<<22&4294967295|D>>>10),D=y+(j^O&(I^j))+A[1]+4129170786&4294967295,y=I+(D<<5&4294967295|D>>>27),D=O+(I^j&(y^I))+A[6]+3225465664&4294967295,O=y+(D<<9&4294967295|D>>>23),D=j+(y^I&(O^y))+A[11]+643717713&4294967295,j=O+(D<<14&4294967295|D>>>18),D=I+(O^y&(j^O))+A[0]+3921069994&4294967295,I=j+(D<<20&4294967295|D>>>12),D=y+(j^O&(I^j))+A[5]+3593408605&4294967295,y=I+(D<<5&4294967295|D>>>27),D=O+(I^j&(y^I))+A[10]+38016083&4294967295,O=y+(D<<9&4294967295|D>>>23),D=j+(y^I&(O^y))+A[15]+3634488961&4294967295,j=O+(D<<14&4294967295|D>>>18),D=I+(O^y&(j^O))+A[4]+3889429448&4294967295,I=j+(D<<20&4294967295|D>>>12),D=y+(j^O&(I^j))+A[9]+568446438&4294967295,y=I+(D<<5&4294967295|D>>>27),D=O+(I^j&(y^I))+A[14]+3275163606&4294967295,O=y+(D<<9&4294967295|D>>>23),D=j+(y^I&(O^y))+A[3]+4107603335&4294967295,j=O+(D<<14&4294967295|D>>>18),D=I+(O^y&(j^O))+A[8]+1163531501&4294967295,I=j+(D<<20&4294967295|D>>>12),D=y+(j^O&(I^j))+A[13]+2850285829&4294967295,y=I+(D<<5&4294967295|D>>>27),D=O+(I^j&(y^I))+A[2]+4243563512&4294967295,O=y+(D<<9&4294967295|D>>>23),D=j+(y^I&(O^y))+A[7]+1735328473&4294967295,j=O+(D<<14&4294967295|D>>>18),D=I+(O^y&(j^O))+A[12]+2368359562&4294967295,I=j+(D<<20&4294967295|D>>>12),D=y+(I^j^O)+A[5]+4294588738&4294967295,y=I+(D<<4&4294967295|D>>>28),D=O+(y^I^j)+A[8]+2272392833&4294967295,O=y+(D<<11&4294967295|D>>>21),D=j+(O^y^I)+A[11]+1839030562&4294967295,j=O+(D<<16&4294967295|D>>>16),D=I+(j^O^y)+A[14]+4259657740&4294967295,I=j+(D<<23&4294967295|D>>>9),D=y+(I^j^O)+A[1]+2763975236&4294967295,y=I+(D<<4&4294967295|D>>>28),D=O+(y^I^j)+A[4]+1272893353&4294967295,O=y+(D<<11&4294967295|D>>>21),D=j+(O^y^I)+A[7]+4139469664&4294967295,j=O+(D<<16&4294967295|D>>>16),D=I+(j^O^y)+A[10]+3200236656&4294967295,I=j+(D<<23&4294967295|D>>>9),D=y+(I^j^O)+A[13]+681279174&4294967295,y=I+(D<<4&4294967295|D>>>28),D=O+(y^I^j)+A[0]+3936430074&4294967295,O=y+(D<<11&4294967295|D>>>21),D=j+(O^y^I)+A[3]+3572445317&4294967295,j=O+(D<<16&4294967295|D>>>16),D=I+(j^O^y)+A[6]+76029189&4294967295,I=j+(D<<23&4294967295|D>>>9),D=y+(I^j^O)+A[9]+3654602809&4294967295,y=I+(D<<4&4294967295|D>>>28),D=O+(y^I^j)+A[12]+3873151461&4294967295,O=y+(D<<11&4294967295|D>>>21),D=j+(O^y^I)+A[15]+530742520&4294967295,j=O+(D<<16&4294967295|D>>>16),D=I+(j^O^y)+A[2]+3299628645&4294967295,I=j+(D<<23&4294967295|D>>>9),D=y+(j^(I|~O))+A[0]+4096336452&4294967295,y=I+(D<<6&4294967295|D>>>26),D=O+(I^(y|~j))+A[7]+1126891415&4294967295,O=y+(D<<10&4294967295|D>>>22),D=j+(y^(O|~I))+A[14]+2878612391&4294967295,j=O+(D<<15&4294967295|D>>>17),D=I+(O^(j|~y))+A[5]+4237533241&4294967295,I=j+(D<<21&4294967295|D>>>11),D=y+(j^(I|~O))+A[12]+1700485571&4294967295,y=I+(D<<6&4294967295|D>>>26),D=O+(I^(y|~j))+A[3]+2399980690&4294967295,O=y+(D<<10&4294967295|D>>>22),D=j+(y^(O|~I))+A[10]+4293915773&4294967295,j=O+(D<<15&4294967295|D>>>17),D=I+(O^(j|~y))+A[1]+2240044497&4294967295,I=j+(D<<21&4294967295|D>>>11),D=y+(j^(I|~O))+A[8]+1873313359&4294967295,y=I+(D<<6&4294967295|D>>>26),D=O+(I^(y|~j))+A[15]+4264355552&4294967295,O=y+(D<<10&4294967295|D>>>22),D=j+(y^(O|~I))+A[6]+2734768916&4294967295,j=O+(D<<15&4294967295|D>>>17),D=I+(O^(j|~y))+A[13]+1309151649&4294967295,I=j+(D<<21&4294967295|D>>>11),D=y+(j^(I|~O))+A[4]+4149444226&4294967295,y=I+(D<<6&4294967295|D>>>26),D=O+(I^(y|~j))+A[11]+3174756917&4294967295,O=y+(D<<10&4294967295|D>>>22),D=j+(y^(O|~I))+A[2]+718787259&4294967295,j=O+(D<<15&4294967295|D>>>17),D=I+(O^(j|~y))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+y&4294967295,k.g[1]=k.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,y){y===void 0&&(y=k.length);for(var I=y-this.blockSize,A=this.B,j=this.h,O=0;O<y;){if(j==0)for(;O<=I;)s(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<y;)if(A[j++]=k.charCodeAt(O++),j==this.blockSize){s(this,A),j=0;break}}else for(;O<y;)if(A[j++]=k[O++],j==this.blockSize){s(this,A),j=0;break}}this.h=j,this.o+=y},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var y=1;y<k.length-8;++y)k[y]=0;var I=8*this.o;for(y=k.length-8;y<k.length;++y)k[y]=I&255,I/=256;for(this.u(k),k=Array(16),y=I=0;4>y;++y)for(var A=0;32>A;A+=8)k[I++]=this.g[y]>>>A&255;return k};function i(k,y){var I=a;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=y(k)}function o(k,y){this.h=y;for(var I=[],A=!0,j=k.length-1;0<=j;j--){var O=k[j]|0;A&&O==y||(I[j]=O,A=!1)}this.g=I}var a={};function l(k){return-128<=k&&128>k?i(k,function(y){return new o([y|0],0>y?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return S(c(-k));for(var y=[],I=1,A=0;k>=I;A++)y[A]=k/I|0,I*=4294967296;return new o(y,0)}function d(k,y){if(k.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(k.charAt(0)=="-")return S(d(k.substring(1),y));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(y,8)),A=f,j=0;j<k.length;j+=8){var O=Math.min(8,k.length-j),D=parseInt(k.substring(j,j+O),y);8>O?(O=c(Math.pow(y,O)),A=A.j(O).add(c(D))):(A=A.j(I),A=A.add(c(D)))}return A}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var k=0,y=1,I=0;I<this.g.length;I++){var A=this.i(I);k+=(0<=A?A:4294967296+A)*y,y*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(v(this))return"-"+S(this).toString(k);for(var y=c(Math.pow(k,6)),I=this,A="";;){var j=P(I,y).g;I=x(I,j.j(y));var O=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=j,w(I))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(var y=0;y<k.g.length;y++)if(k.g[y]!=0)return!1;return!0}function v(k){return k.h==-1}t.l=function(k){return k=x(this,k),v(k)?-1:w(k)?0:1};function S(k){for(var y=k.g.length,I=[],A=0;A<y;A++)I[A]=~k.g[A];return new o(I,~k.h).add(p)}t.abs=function(){return v(this)?S(this):this},t.add=function(k){for(var y=Math.max(this.g.length,k.g.length),I=[],A=0,j=0;j<=y;j++){var O=A+(this.i(j)&65535)+(k.i(j)&65535),D=(O>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);A=D>>>16,O&=65535,D&=65535,I[j]=D<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(k,y){return k.add(S(y))}t.j=function(k){if(w(this)||w(k))return f;if(v(this))return v(k)?S(this).j(S(k)):S(S(this).j(k));if(v(k))return S(this.j(S(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var y=this.g.length+k.g.length,I=[],A=0;A<2*y;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var j=0;j<k.g.length;j++){var O=this.i(A)>>>16,D=this.i(A)&65535,Q=k.i(j)>>>16,ne=k.i(j)&65535;I[2*A+2*j]+=D*ne,_(I,2*A+2*j),I[2*A+2*j+1]+=O*ne,_(I,2*A+2*j+1),I[2*A+2*j+1]+=D*Q,_(I,2*A+2*j+1),I[2*A+2*j+2]+=O*Q,_(I,2*A+2*j+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new o(I,0)};function _(k,y){for(;(k[y]&65535)!=k[y];)k[y+1]+=k[y]>>>16,k[y]&=65535,y++}function E(k,y){this.g=k,this.h=y}function P(k,y){if(w(y))throw Error("division by zero");if(w(k))return new E(f,f);if(v(k))return y=P(S(k),y),new E(S(y.g),S(y.h));if(v(y))return y=P(k,S(y)),new E(S(y.g),y.h);if(30<k.g.length){if(v(k)||v(y))throw Error("slowDivide_ only works with positive integers.");for(var I=p,A=y;0>=A.l(k);)I=R(I),A=R(A);var j=N(I,1),O=N(A,1);for(A=N(A,2),I=N(I,2);!w(A);){var D=O.add(A);0>=D.l(k)&&(j=j.add(I),O=D),A=N(A,1),I=N(I,1)}return y=x(k,j.j(y)),new E(j,y)}for(j=f;0<=k.l(y);){for(I=Math.max(1,Math.floor(k.m()/y.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=c(I),D=O.j(y);v(D)||0<D.l(k);)I-=A,O=c(I),D=O.j(y);w(O)&&(O=p),j=j.add(O),k=x(k,D)}return new E(j,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var y=Math.max(this.g.length,k.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)&k.i(A);return new o(I,this.h&k.h)},t.or=function(k){for(var y=Math.max(this.g.length,k.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)|k.i(A);return new o(I,this.h|k.h)},t.xor=function(k){for(var y=Math.max(this.g.length,k.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)^k.i(A);return new o(I,this.h^k.h)};function R(k){for(var y=k.g.length+1,I=[],A=0;A<y;A++)I[A]=k.i(A)<<1|k.i(A-1)>>>31;return new o(I,k.h)}function N(k,y){var I=y>>5;y%=32;for(var A=k.g.length-I,j=[],O=0;O<A;O++)j[O]=0<y?k.i(O+I)>>>y|k.i(O+I+1)<<32-y:k.i(O+I);return new o(j,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Po=o}).apply(typeof sk<"u"?sk:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yN,Kc,vN,kf,xv,_N,wN,xN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,b){return h==Array.prototype||h==Object.prototype||(h[g]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var g=0;g<h.length;++g){var b=h[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(h,g){if(g)e:{var b=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var M=h[C];if(!(M in b))break e;b=b[M]}h=h[h.length-1],C=b[h],g=g(C),g!=C&&g!=null&&e(b,h,{configurable:!0,writable:!0,value:g})}}function i(h,g){h instanceof String&&(h+="");var b=0,C=!1,M={next:function(){if(!C&&b<h.length){var F=b++;return{value:g(F,h[F]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(h){return h||function(){return i(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function d(h,g,b){return h.call.apply(h.bind,arguments)}function f(h,g,b){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),h.apply(g,M)}}return function(){return h.apply(g,arguments)}}function p(h,g,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function m(h,g){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function w(h,g){function b(){}b.prototype=g.prototype,h.aa=g.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(C,M,F){for(var H=Array(arguments.length-2),De=2;De<arguments.length;De++)H[De-2]=arguments[De];return g.prototype[M].apply(C,H)}}function v(h){const g=h.length;if(0<g){const b=Array(g);for(let C=0;C<g;C++)b[C]=h[C];return b}return[]}function S(h,g){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(l(C)){const M=h.length||0,F=C.length||0;h.length=M+F;for(let H=0;H<F;H++)h[M+H]=C[H]}else h.push(C)}}class x{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function P(h){return P[" "](h),h}P[" "]=function(){};var R=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function N(h,g,b){for(const C in h)g.call(b,h[C],C,h)}function k(h,g){for(const b in h)g.call(void 0,h[b],b,h)}function y(h){const g={};for(const b in h)g[b]=h[b];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,g){let b,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(b in C)h[b]=C[b];for(let F=0;F<I.length;F++)b=I[F],Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])}}function j(h){var g=1;h=h.split(":");const b=[];for(;0<g&&h.length;)b.push(h.shift()),g--;return h.length&&b.push(h.join(":")),b}function O(h){a.setTimeout(()=>{throw h},0)}function D(){var h=z;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class Q{constructor(){this.h=this.g=null}add(g,b){const C=ne.get();C.set(g,b),this.h?this.h.next=C:this.g=C,this.h=C}}var ne=new x(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,$=!1,z=new Q,q=()=>{const h=a.Promise.resolve(void 0);oe=()=>{h.then(J)}};var J=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(b){O(b)}var g=ne;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}$=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return h}();function zt(h,g){if(ge.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(R){e:{try{P(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else b=="mouseover"?g=h.fromElement:b=="mouseout"&&(g=h.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&zt.aa.h.call(this)}}w(zt,ge);var Et={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fr="closure_listenable_"+(1e6*Math.random()|0),pg=0;function mg(h,g,b,C,M){this.listener=h,this.proxy=null,this.src=g,this.type=b,this.capture=!!C,this.ha=M,this.key=++pg,this.da=this.fa=!1}function Rn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ia(h){this.src=h,this.g={},this.h=0}ia.prototype.add=function(h,g,b,C,M){var F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);var H=Qi(h,g,C,M);return-1<H?(g=h[H],b||(g.fa=!1)):(g=new mg(g,this.src,F,!!C,M),g.fa=b,h.push(g)),g};function oa(h,g){var b=g.type;if(b in h.g){var C=h.g[b],M=Array.prototype.indexOf.call(C,g,void 0),F;(F=0<=M)&&Array.prototype.splice.call(C,M,1),F&&(Rn(g),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Qi(h,g,b,C){for(var M=0;M<h.length;++M){var F=h[M];if(!F.da&&F.listener==g&&F.capture==!!b&&F.ha==C)return M}return-1}var aa="closure_lm_"+(1e6*Math.random()|0),la={};function ic(h,g,b,C,M){if(Array.isArray(g)){for(var F=0;F<g.length;F++)ic(h,g[F],b,C,M);return null}return b=p1(b),h&&h[fr]?h.K(g,b,c(C)?!!C.capture:!!C,M):oc(h,g,b,!1,C,M)}function oc(h,g,b,C,M,F){if(!g)throw Error("Invalid event type");var H=c(M)?!!M.capture:!!M,De=yg(h);if(De||(h[aa]=De=new ia(h)),b=De.add(g,b,C,H,F),b.proxy)return b;if(C=bO(),b.proxy=C,C.src=h,C.listener=b,h.addEventListener)Ge||(M=H),M===void 0&&(M=!1),h.addEventListener(g.toString(),C,M);else if(h.attachEvent)h.attachEvent(f1(g.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return b}function bO(){function h(b){return g.call(h.src,h.listener,b)}const g=EO;return h}function h1(h,g,b,C,M){if(Array.isArray(g))for(var F=0;F<g.length;F++)h1(h,g[F],b,C,M);else C=c(C)?!!C.capture:!!C,b=p1(b),h&&h[fr]?(h=h.i,g=String(g).toString(),g in h.g&&(F=h.g[g],b=Qi(F,b,C,M),-1<b&&(Rn(F[b]),Array.prototype.splice.call(F,b,1),F.length==0&&(delete h.g[g],h.h--)))):h&&(h=yg(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Qi(g,b,C,M)),(b=-1<h?g[h]:null)&&gg(b))}function gg(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[fr])oa(g.i,h);else{var b=h.type,C=h.proxy;g.removeEventListener?g.removeEventListener(b,C,h.capture):g.detachEvent?g.detachEvent(f1(b),C):g.addListener&&g.removeListener&&g.removeListener(C),(b=yg(g))?(oa(b,h),b.h==0&&(b.src=null,g[aa]=null)):Rn(h)}}}function f1(h){return h in la?la[h]:la[h]="on"+h}function EO(h,g){if(h.da)h=!0;else{g=new zt(g,this);var b=h.listener,C=h.ha||h.src;h.fa&&gg(h),h=b.call(C,g)}return h}function yg(h){return h=h[aa],h instanceof ia?h:null}var vg="__closure_events_fn_"+(1e9*Math.random()>>>0);function p1(h){return typeof h=="function"?h:(h[vg]||(h[vg]=function(g){return h.handleEvent(g)}),h[vg])}function qt(){se.call(this),this.i=new ia(this),this.M=this,this.F=null}w(qt,se),qt.prototype[fr]=!0,qt.prototype.removeEventListener=function(h,g,b,C){h1(this,h,g,b,C)};function ln(h,g){var b,C=h.F;if(C)for(b=[];C;C=C.F)b.push(C);if(h=h.M,C=g.type||g,typeof g=="string")g=new ge(g,h);else if(g instanceof ge)g.target=g.target||h;else{var M=g;g=new ge(C,h),A(g,M)}if(M=!0,b)for(var F=b.length-1;0<=F;F--){var H=g.g=b[F];M=th(H,C,!0,g)&&M}if(H=g.g=h,M=th(H,C,!0,g)&&M,M=th(H,C,!1,g)&&M,b)for(F=0;F<b.length;F++)H=g.g=b[F],M=th(H,C,!1,g)&&M}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var b=h.g[g],C=0;C<b.length;C++)Rn(b[C]);delete h.g[g],h.h--}}this.F=null},qt.prototype.K=function(h,g,b,C){return this.i.add(String(h),g,!1,b,C)},qt.prototype.L=function(h,g,b,C){return this.i.add(String(h),g,!0,b,C)};function th(h,g,b,C){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,F=0;F<g.length;++F){var H=g[F];if(H&&!H.da&&H.capture==b){var De=H.listener,At=H.ha||H.src;H.fa&&oa(h.i,H),M=De.call(At,C)!==!1&&M}}return M&&!C.defaultPrevented}function m1(h,g,b){if(typeof h=="function")b&&(h=p(h,b));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function g1(h){h.g=m1(()=>{h.g=null,h.i&&(h.i=!1,g1(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class SO extends se{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:g1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ac(h){se.call(this),this.h=h,this.g={}}w(ac,se);var y1=[];function v1(h){N(h.g,function(g,b){this.g.hasOwnProperty(b)&&gg(g)},h),h.g={}}ac.prototype.N=function(){ac.aa.N.call(this),v1(this)},ac.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _g=a.JSON.stringify,kO=a.JSON.parse,TO=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function wg(){}wg.prototype.h=null;function _1(h){return h.h||(h.h=h.i())}function w1(){}var lc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xg(){ge.call(this,"d")}w(xg,ge);function bg(){ge.call(this,"c")}w(bg,ge);var Ji={},x1=null;function nh(){return x1=x1||new qt}Ji.La="serverreachability";function b1(h){ge.call(this,Ji.La,h)}w(b1,ge);function cc(h){const g=nh();ln(g,new b1(g))}Ji.STAT_EVENT="statevent";function E1(h,g){ge.call(this,Ji.STAT_EVENT,h),this.stat=g}w(E1,ge);function cn(h){const g=nh();ln(g,new E1(g,h))}Ji.Ma="timingevent";function S1(h,g){ge.call(this,Ji.Ma,h),this.size=g}w(S1,ge);function uc(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function dc(){this.g=!0}dc.prototype.xa=function(){this.g=!1};function IO(h,g,b,C,M,F){h.info(function(){if(h.g)if(F)for(var H="",De=F.split("&"),At=0;At<De.length;At++){var Pe=De[At].split("=");if(1<Pe.length){var Wt=Pe[0];Pe=Pe[1];var Ht=Wt.split("_");H=2<=Ht.length&&Ht[1]=="type"?H+(Wt+"="+Pe+"&"):H+(Wt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+g+`
`+b+`
`+H})}function AO(h,g,b,C,M,F,H){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+g+`
`+b+`
`+F+" "+H})}function ca(h,g,b,C){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+CO(h,b)+(C?" "+C:"")})}function PO(h,g){h.info(function(){return"TIMEOUT: "+g})}dc.prototype.info=function(){};function CO(h,g){if(!h.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var C=b[h];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<M.length;H++)M[H]=""}}}}return _g(b)}catch{return g}}var rh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},k1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Eg;function sh(){}w(sh,wg),sh.prototype.g=function(){return new XMLHttpRequest},sh.prototype.i=function(){return{}},Eg=new sh;function Ls(h,g,b,C){this.j=h,this.i=g,this.l=b,this.R=C||1,this.U=new ac(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new T1}function T1(){this.i=null,this.g="",this.h=!1}var I1={},Sg={};function kg(h,g,b){h.L=1,h.v=lh(ns(g)),h.m=b,h.P=!0,A1(h,null)}function A1(h,g){h.F=Date.now(),ih(h),h.A=ns(h.v);var b=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),B1(b.i,"t",C),h.C=0,b=h.j.J,h.h=new T1,h.g=oE(h.j,b?g:null,!h.m),0<h.O&&(h.M=new SO(p(h.Y,h,h.g),h.O)),g=h.U,b=h.g,C=h.ca;var M="readystatechange";Array.isArray(M)||(M&&(y1[0]=M.toString()),M=y1);for(var F=0;F<M.length;F++){var H=ic(b,M[F],C||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=h.H?y(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),cc(),IO(h.i,h.u,h.A,h.l,h.R,h.m)}Ls.prototype.ca=function(h){h=h.target;const g=this.M;g&&rs(h)==3?g.j():this.Y(h)},Ls.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=rs(this.g);var g=this.g.Ba();const ha=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||X1(this.g)))){this.J||Ht!=4||g==7||(g==8||0>=ha?cc(3):cc(2)),Tg(this);var b=this.g.Z();this.X=b;t:if(P1(this)){var C=X1(this.g);h="";var M=C.length,F=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),hc(this);var H="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,h+=this.h.i.decode(C[g],{stream:!(F&&g==M-1)});C.length=0,this.h.g+=h,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=b==200,AO(this.i,this.u,this.A,this.l,this.R,Ht,b),this.o){if(this.T&&!this.K){t:{if(this.g){var De,At=this.g;if((De=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(De)){var Pe=De;break t}}Pe=null}if(b=Pe)ca(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ig(this,b);else{this.o=!1,this.s=3,cn(12),Zi(this),hc(this);break e}}if(this.P){b=!0;let pr;for(;!this.J&&this.C<H.length;)if(pr=NO(this,H),pr==Sg){Ht==4&&(this.s=4,cn(14),b=!1),ca(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==I1){this.s=4,cn(15),ca(this.i,this.l,H,"[Invalid Chunk]"),b=!1;break}else ca(this.i,this.l,pr,null),Ig(this,pr);if(P1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||H.length!=0||this.h.h||(this.s=1,cn(16),b=!1),this.o=this.o&&b,!b)ca(this.i,this.l,H,"[Invalid Chunked Response]"),Zi(this),hc(this);else if(0<H.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),jg(Wt),Wt.M=!0,cn(11))}}else ca(this.i,this.l,H,null),Ig(this,H);Ht==4&&Zi(this),this.o&&!this.J&&(Ht==4?nE(this.j,this):(this.o=!1,ih(this)))}else KO(this.g),b==400&&0<H.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Zi(this),hc(this)}}}catch{}finally{}};function P1(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function NO(h,g){var b=h.C,C=g.indexOf(`
`,b);return C==-1?Sg:(b=Number(g.substring(b,C)),isNaN(b)?I1:(C+=1,C+b>g.length?Sg:(g=g.slice(C,C+b),h.C=C+b,g)))}Ls.prototype.cancel=function(){this.J=!0,Zi(this)};function ih(h){h.S=Date.now()+h.I,C1(h,h.I)}function C1(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=uc(p(h.ba,h),g)}function Tg(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Ls.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(PO(this.i,this.A),this.L!=2&&(cc(),cn(17)),Zi(this),this.s=2,hc(this)):C1(this,this.S-h)};function hc(h){h.j.G==0||h.J||nE(h.j,h)}function Zi(h){Tg(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,v1(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function Ig(h,g){try{var b=h.j;if(b.G!=0&&(b.g==h||Ag(b.h,h))){if(!h.K&&Ag(b.h,h)&&b.G==3){try{var C=b.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)ph(b),hh(b);else break e;Rg(b),cn(18)}}else b.za=M[1],0<b.za-b.T&&37500>M[2]&&b.F&&b.v==0&&!b.C&&(b.C=uc(p(b.Za,b),6e3));if(1>=j1(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else to(b,11)}else if((h.K||b.g==h)&&ph(b),!_(g))for(M=b.Da.g.parse(g),g=0;g<M.length;g++){let Pe=M[g];if(b.T=Pe[0],Pe=Pe[1],b.G==2)if(Pe[0]=="c"){b.K=Pe[1],b.ia=Pe[2];const Wt=Pe[3];Wt!=null&&(b.la=Wt,b.j.info("VER="+b.la));const Ht=Pe[4];Ht!=null&&(b.Aa=Ht,b.j.info("SVER="+b.Aa));const ha=Pe[5];ha!=null&&typeof ha=="number"&&0<ha&&(C=1.5*ha,b.L=C,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const pr=h.g;if(pr){const gh=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gh){var F=C.h;F.g||gh.indexOf("spdy")==-1&&gh.indexOf("quic")==-1&&gh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Pg(F,F.h),F.h=null))}if(C.D){const Dg=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dg&&(C.ya=Dg,$e(C.I,C.D,Dg))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),C=b;var H=h;if(C.qa=iE(C,C.J?C.ia:null,C.W),H.K){D1(C.h,H);var De=H,At=C.L;At&&(De.I=At),De.B&&(Tg(De),ih(De)),C.g=H}else eE(C);0<b.i.length&&fh(b)}else Pe[0]!="stop"&&Pe[0]!="close"||to(b,7);else b.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?to(b,7):Ng(b):Pe[0]!="noop"&&b.l&&b.l.ta(Pe),b.v=0)}}cc(4)}catch{}}var RO=class{constructor(h,g){this.g=h,this.map=g}};function N1(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function R1(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function j1(h){return h.h?1:h.g?h.g.size:0}function Ag(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function Pg(h,g){h.g?h.g.add(g):h.h=g}function D1(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}N1.prototype.cancel=function(){if(this.i=O1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function O1(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const b of h.g.values())g=g.concat(b.D);return g}return v(h.i)}function jO(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],b=h.length,C=0;C<b;C++)g.push(h[C]);return g}g=[],b=0;for(C in h)g[b++]=h[C];return g}function DO(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var b=0;b<h;b++)g.push(b);return g}g=[],b=0;for(const C in h)g[b++]=C;return g}}}function M1(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var b=DO(h),C=jO(h),M=C.length,F=0;F<M;F++)g.call(void 0,C[F],b&&b[F],h)}var L1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OO(h,g){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var C=h[b].indexOf("="),M=null;if(0<=C){var F=h[b].substring(0,C);M=h[b].substring(C+1)}else F=h[b];g(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function eo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof eo){this.h=h.h,oh(this,h.j),this.o=h.o,this.g=h.g,ah(this,h.s),this.l=h.l;var g=h.i,b=new mc;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),F1(this,b),this.m=h.m}else h&&(g=String(h).match(L1))?(this.h=!1,oh(this,g[1]||"",!0),this.o=fc(g[2]||""),this.g=fc(g[3]||"",!0),ah(this,g[4]),this.l=fc(g[5]||"",!0),F1(this,g[6]||"",!0),this.m=fc(g[7]||"")):(this.h=!1,this.i=new mc(null,this.h))}eo.prototype.toString=function(){var h=[],g=this.j;g&&h.push(pc(g,V1,!0),":");var b=this.g;return(b||g=="file")&&(h.push("//"),(g=this.o)&&h.push(pc(g,V1,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(pc(b,b.charAt(0)=="/"?FO:LO,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",pc(b,$O)),h.join("")};function ns(h){return new eo(h)}function oh(h,g,b){h.j=b?fc(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function ah(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function F1(h,g,b){g instanceof mc?(h.i=g,UO(h.i,h.h)):(b||(g=pc(g,VO)),h.i=new mc(g,h.h))}function $e(h,g,b){h.i.set(g,b)}function lh(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function fc(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pc(h,g,b){return typeof h=="string"?(h=encodeURI(h).replace(g,MO),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function MO(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var V1=/[#\/\?@]/g,LO=/[#\?:]/g,FO=/[#\?]/g,VO=/[#\?@]/g,$O=/#/g;function mc(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Fs(h){h.g||(h.g=new Map,h.h=0,h.i&&OO(h.i,function(g,b){h.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=mc.prototype,t.add=function(h,g){Fs(this),this.i=null,h=ua(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(g),this.h+=1,this};function $1(h,g){Fs(h),g=ua(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function U1(h,g){return Fs(h),g=ua(h,g),h.g.has(g)}t.forEach=function(h,g){Fs(this),this.g.forEach(function(b,C){b.forEach(function(M){h.call(g,M,C,this)},this)},this)},t.na=function(){Fs(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let C=0;C<g.length;C++){const M=h[C];for(let F=0;F<M.length;F++)b.push(g[C])}return b},t.V=function(h){Fs(this);let g=[];if(typeof h=="string")U1(this,h)&&(g=g.concat(this.g.get(ua(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)g=g.concat(h[b])}return g},t.set=function(h,g){return Fs(this),this.i=null,h=ua(this,h),U1(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function B1(h,g,b){$1(h,g),0<b.length&&(h.i=null,h.g.set(ua(h,g),v(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var C=g[b];const F=encodeURIComponent(String(C)),H=this.V(C);for(C=0;C<H.length;C++){var M=F;H[C]!==""&&(M+="="+encodeURIComponent(String(H[C]))),h.push(M)}}return this.i=h.join("&")};function ua(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function UO(h,g){g&&!h.j&&(Fs(h),h.i=null,h.g.forEach(function(b,C){var M=C.toLowerCase();C!=M&&($1(this,C),B1(this,M,b))},h)),h.j=g}function BO(h,g){const b=new dc;if(a.Image){const C=new Image;C.onload=m(Vs,b,"TestLoadImage: loaded",!0,g,C),C.onerror=m(Vs,b,"TestLoadImage: error",!1,g,C),C.onabort=m(Vs,b,"TestLoadImage: abort",!1,g,C),C.ontimeout=m(Vs,b,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else g(!1)}function zO(h,g){const b=new dc,C=new AbortController,M=setTimeout(()=>{C.abort(),Vs(b,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:C.signal}).then(F=>{clearTimeout(M),F.ok?Vs(b,"TestPingServer: ok",!0,g):Vs(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Vs(b,"TestPingServer: error",!1,g)})}function Vs(h,g,b,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(b)}catch{}}function qO(){this.g=new TO}function WO(h,g,b){const C=b||"";try{M1(h,function(M,F){let H=M;c(M)&&(H=_g(M)),g.push(C+F+"="+encodeURIComponent(H))})}catch(M){throw g.push(C+"type="+encodeURIComponent("_badmap")),M}}function ch(h){this.l=h.Ub||null,this.j=h.eb||!1}w(ch,wg),ch.prototype.g=function(){return new uh(this.l,this.j)},ch.prototype.i=function(h){return function(){return h}}({});function uh(h,g){qt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(uh,qt),t=uh.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,yc(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gc(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,yc(this)),this.g&&(this.readyState=3,yc(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;z1(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function z1(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?gc(this):yc(this),this.readyState==3&&z1(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,gc(this))},t.Qa=function(h){this.g&&(this.response=h,gc(this))},t.ga=function(){this.g&&gc(this)};function gc(h){h.readyState=4,h.l=null,h.j=null,h.v=null,yc(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=g.next();return h.join(`\r
`)};function yc(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(uh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function q1(h){let g="";return N(h,function(b,C){g+=C,g+=":",g+=b,g+=`\r
`}),g}function Cg(h,g,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=q1(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):$e(h,g,b))}function nt(h){qt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(nt,qt);var HO=/^https?$/i,GO=["POST","PUT"];t=nt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Eg.g(),this.v=this.o?_1(this.o):_1(Eg),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){W1(this,F);return}if(h=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)b.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const F of C.keys())b.set(F,C.get(F));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GO,g,void 0))||C||M||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of b)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{K1(this),this.u=!0,this.g.send(h),this.u=!1}catch(F){W1(this,F)}};function W1(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,H1(h),dh(h)}function H1(h){h.A||(h.A=!0,ln(h,"complete"),ln(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ln(this,"complete"),ln(this,"abort"),dh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dh(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?G1(this):this.bb())},t.bb=function(){G1(this)};function G1(h){if(h.h&&typeof o<"u"&&(!h.v[1]||rs(h)!=4||h.Z()!=2)){if(h.u&&rs(h)==4)m1(h.Ea,0,h);else if(ln(h,"readystatechange"),rs(h)==4){h.h=!1;try{const H=h.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var C;if(C=H===0){var M=String(h.D).match(L1)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),C=!HO.test(M?M.toLowerCase():"")}b=C}if(b)ln(h,"complete"),ln(h,"success");else{h.m=6;try{var F=2<rs(h)?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.Z()+"]",H1(h)}}finally{dh(h)}}}}function dh(h,g){if(h.g){K1(h);const b=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||ln(h,"ready");try{b.onreadystatechange=C}catch{}}}function K1(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function rs(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),kO(g)}};function X1(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function KO(h){const g={};h=(h.g&&2<=rs(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(_(h[C]))continue;var b=j(h[C]);const M=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=g[M]||[];g[M]=F,F.push(b)}k(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vc(h,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||g}function Y1(h){this.Aa=0,this.i=[],this.j=new dc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vc("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vc("baseRetryDelayMs",5e3,h),this.cb=vc("retryDelaySeedMs",1e4,h),this.Wa=vc("forwardChannelMaxRetries",2,h),this.wa=vc("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new N1(h&&h.concurrentRequestLimit),this.Da=new qO,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Y1.prototype,t.la=8,t.G=1,t.connect=function(h,g,b,C){cn(0),this.W=h,this.H=g||{},b&&C!==void 0&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=iE(this,null,this.W),fh(this)};function Ng(h){if(Q1(h),h.G==3){var g=h.U++,b=ns(h.I);if($e(b,"SID",h.K),$e(b,"RID",g),$e(b,"TYPE","terminate"),_c(h,b),g=new Ls(h,h.j,g),g.L=2,g.v=lh(ns(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=oE(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ih(g)}sE(h)}function hh(h){h.g&&(jg(h),h.g.cancel(),h.g=null)}function Q1(h){hh(h),h.u&&(a.clearTimeout(h.u),h.u=null),ph(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function fh(h){if(!R1(h.h)&&!h.s){h.s=!0;var g=h.Ga;oe||q(),$||(oe(),$=!0),z.add(g,h),h.B=0}}function XO(h,g){return j1(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=uc(p(h.Ga,h,g),rE(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const M=new Ls(this,this.j,h);let F=this.o;if(this.S&&(F?(F=y(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var C=this.i[b];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Z1(this,M,g),b=ns(this.I),$e(b,"RID",h),$e(b,"CVER",22),this.D&&$e(b,"X-HTTP-Session-Id",this.D),_c(this,b),F&&(this.O?g="headers="+encodeURIComponent(String(q1(F)))+"&"+g:this.m&&Cg(b,this.m,F)),Pg(this.h,M),this.Ua&&$e(b,"TYPE","init"),this.P?($e(b,"$req",g),$e(b,"SID","null"),M.T=!0,kg(M,b,null)):kg(M,b,g),this.G=2}}else this.G==3&&(h?J1(this,h):this.i.length==0||R1(this.h)||J1(this))};function J1(h,g){var b;g?b=g.l:b=h.U++;const C=ns(h.I);$e(C,"SID",h.K),$e(C,"RID",b),$e(C,"AID",h.T),_c(h,C),h.m&&h.o&&Cg(C,h.m,h.o),b=new Ls(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Z1(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Pg(h.h,b),kg(b,C,g)}function _c(h,g){h.H&&N(h.H,function(b,C){$e(g,C,b)}),h.l&&M1({},function(b,C){$e(g,C,b)})}function Z1(h,g,b){b=Math.min(h.i.length,b);var C=h.l?p(h.l.Na,h.l,h):null;e:{var M=h.i;let F=-1;for(;;){const H=["count="+b];F==-1?0<b?(F=M[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let De=!0;for(let At=0;At<b;At++){let Pe=M[At].g;const Wt=M[At].map;if(Pe-=F,0>Pe)F=Math.max(0,M[At].g-100),De=!1;else try{WO(Wt,H,"req"+Pe+"_")}catch{C&&C(Wt)}}if(De){C=H.join("&");break e}}}return h=h.i.splice(0,b),g.D=h,C}function eE(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;oe||q(),$||(oe(),$=!0),z.add(g,h),h.v=0}}function Rg(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=uc(p(h.Fa,h),rE(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,tE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=uc(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),hh(this),tE(this))};function jg(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function tE(h){h.g=new Ls(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=ns(h.qa);$e(g,"RID","rpc"),$e(g,"SID",h.K),$e(g,"AID",h.T),$e(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(g,"TO",h.ja),$e(g,"TYPE","xmlhttp"),_c(h,g),h.m&&h.o&&Cg(g,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=lh(ns(g)),b.m=null,b.P=!0,A1(b,h)}t.Za=function(){this.C!=null&&(this.C=null,hh(this),Rg(this),cn(19))};function ph(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function nE(h,g){var b=null;if(h.g==g){ph(h),jg(h),h.g=null;var C=2}else if(Ag(h.h,g))b=g.D,D1(h.h,g),C=1;else return;if(h.G!=0){if(g.o)if(C==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var M=h.B;C=nh(),ln(C,new S1(C,b)),fh(h)}else eE(h);else if(M=g.s,M==3||M==0&&0<g.X||!(C==1&&XO(h,g)||C==2&&Rg(h)))switch(b&&0<b.length&&(g=h.h,g.i=g.i.concat(b)),M){case 1:to(h,5);break;case 4:to(h,10);break;case 3:to(h,6);break;default:to(h,2)}}}function rE(h,g){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*g}function to(h,g){if(h.j.info("Error code "+g),g==2){var b=p(h.fb,h),C=h.Xa;const M=!C;C=new eo(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||oh(C,"https"),lh(C),M?BO(C.toString(),b):zO(C.toString(),b)}else cn(2);h.G=0,h.l&&h.l.sa(g),sE(h),Q1(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function sE(h){if(h.G=0,h.ka=[],h.l){const g=O1(h.h);(g.length!=0||h.i.length!=0)&&(S(h.ka,g),S(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function iE(h,g,b){var C=b instanceof eo?ns(b):new eo(b);if(C.g!="")g&&(C.g=g+"."+C.g),ah(C,C.s);else{var M=a.location;C=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var F=new eo(null);C&&oh(F,C),g&&(F.g=g),M&&ah(F,M),b&&(F.l=b),C=F}return b=h.D,g=h.ya,b&&g&&$e(C,b,g),$e(C,"VER",h.la),_c(h,C),C}function oE(h,g,b){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new nt(new ch({eb:b})):new nt(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aE(){}t=aE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mh(){}mh.prototype.g=function(h,g){return new jn(h,g)};function jn(h,g){qt.call(this),this.g=new Y1(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!_(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new da(this)}w(jn,qt),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Ng(this.g)},jn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=_g(h),h=b);g.i.push(new RO(g.Ya++,h)),g.G==3&&fh(g)},jn.prototype.N=function(){this.g.l=null,delete this.j,Ng(this.g),delete this.g,jn.aa.N.call(this)};function lE(h){xg.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const b in g){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}w(lE,xg);function cE(){bg.call(this),this.status=1}w(cE,bg);function da(h){this.g=h}w(da,aE),da.prototype.ua=function(){ln(this.g,"a")},da.prototype.ta=function(h){ln(this.g,new lE(h))},da.prototype.sa=function(h){ln(this.g,new cE)},da.prototype.ra=function(){ln(this.g,"b")},mh.prototype.createWebChannel=mh.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,xN=function(){return new mh},wN=function(){return nh()},_N=Ji,xv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rh.NO_ERROR=0,rh.TIMEOUT=8,rh.HTTP_ERROR=6,kf=rh,k1.COMPLETE="complete",vN=k1,w1.EventType=lc,lc.OPEN="a",lc.CLOSE="b",lc.ERROR="c",lc.MESSAGE="d",qt.prototype.listen=qt.prototype.K,Kc=w1,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,yN=nt}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});const ik="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new Am("@firebase/firestore");function Cc(){return $o.logLevel}function te(t,...e){if($o.logLevel<=ke.DEBUG){const n=e.map(Jw);$o.debug(`Firestore (${Hl}): ${t}`,...n)}}function Ps(t,...e){if($o.logLevel<=ke.ERROR){const n=e.map(Jw);$o.error(`Firestore (${Hl}): ${t}`,...n)}}function bl(t,...e){if($o.logLevel<=ke.WARN){const n=e.map(Jw);$o.warn(`Firestore (${Hl}): ${t}`,...n)}}function Jw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: `+t;throw Ps(e),new Error(e)}function Ae(t,e){t||ce()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class I9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class A9{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new bN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new en(e)}}class P9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new P9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ae(this.o===void 0);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new N9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=j9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function El(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Fe(0,0))}static max(){return new fe(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return od.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof od?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends od{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const D9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends od{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return D9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new W(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new W(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(je.fromString(e))}static fromName(e){return new ie(je.fromString(e).popFirst(5))}static empty(){return new ie(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new je(e.slice()))}}function O9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Oi(s,ie.empty(),e)}function M9(t){return new Oi(t.readTime,t.key,-1)}class Oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oi(fe.min(),ie.empty(),-1)}static max(){return new Oi(fe.max(),ie.empty(),-1)}}function L9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==F9)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function $9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Od(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zw.oe=-1;function Md(t){return t==null}function _p(t){return t===0&&1/t==-1/0}function U9(t){return typeof t=="number"&&Number.isInteger(t)&&!_p(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ak(this.data.getIterator())}getIteratorFrom(e){return new ak(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class ak{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Lt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kN("Invalid base64 string: "+i):i}}(e);return new $t(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const B9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=B9.exec(t);if(Ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Uo(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ex(t){const e=t.mapValue.fields.__previous_value__;return Cm(e)?ex(e):e}function ad(t){const e=Mi(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ld{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ld("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ld&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:W9(t)?9007199254740991:q9(t)?10:11:ce()}function Yr(t,e){if(t===e)return!0;const n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ad(t).isEqual(ad(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Mi(s.timestampValue),a=Mi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Uo(s.bytesValue).isEqual(Uo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ht(s.geoPointValue.latitude)===ht(i.geoPointValue.latitude)&&ht(s.geoPointValue.longitude)===ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ht(s.integerValue)===ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ht(s.doubleValue),a=ht(i.doubleValue);return o===a?_p(o)===_p(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ok(o)!==ok(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Yr(o[l],a[l])))return!1;return!0}(t,e);default:return ce()}}function cd(t,e){return(t.values||[]).find(n=>Yr(n,e))!==void 0}function Sl(t,e){if(t===e)return 0;const n=Bo(t),r=Bo(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ht(i.integerValue||i.doubleValue),l=ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lk(t.timestampValue,e.timestampValue);case 4:return lk(ad(t),ad(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Uo(i),l=Uo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ce(a[c],l[c]);if(d!==0)return d}return Ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ce(ht(i.latitude),ht(o.latitude));return a!==0?a:Ce(ht(i.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ck(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const f=i.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Ce(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:ck(m,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Vh.mapValue&&o===Vh.mapValue)return 0;if(i===Vh.mapValue)return 1;if(o===Vh.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=Ce(l[f],d[f]);if(p!==0)return p;const m=Sl(a[l[f]],c[d[f]]);if(m!==0)return m}return Ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ce()}}function lk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Mi(t),r=Mi(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function ck(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Sl(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function kl(t){return bv(t)}function bv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Uo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bv(n.fields[o])}`;return s+"}"}(t.mapValue):ce()}function wp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ev(t){return!!t&&"integerValue"in t}function tx(t){return!!t&&"arrayValue"in t}function uk(t){return!!t&&"nullValue"in t}function dk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tf(t){return!!t&&"mapValue"in t}function q9(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_u(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function W9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=Dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=_u(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){na(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new fn(_u(this.value))}}function TN(t){const e=[];return na(t.fields,(n,r)=>{const s=new Dt([n]);if(Tf(r)){const i=TN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,fe.min(),fe.min(),fe.min(),fn.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,fe.min(),fe.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,fe.min(),fe.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.position=e,this.inclusive=n}}function hk(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Sl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function H9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{}class vt extends IN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K9(e,n,r):n==="array-contains"?new Q9(e,r):n==="in"?new J9(e,r):n==="not-in"?new Z9(e,r):n==="array-contains-any"?new e8(e,r):new vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X9(e,r):new Y9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sl(n,this.value)):n!==null&&Bo(this.value)===Bo(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends IN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Cr(e,n)}matches(e){return AN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AN(t){return t.op==="and"}function PN(t){return G9(t)&&AN(t)}function G9(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function Sv(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+kl(t.value);if(PN(t))return t.filters.map(e=>Sv(e)).join(",");{const e=t.filters.map(n=>Sv(n)).join(",");return`${t.op}(${e})`}}function CN(t,e){return t instanceof vt?function(r,s){return s instanceof vt&&r.op===s.op&&r.field.isEqual(s.field)&&Yr(r.value,s.value)}(t,e):t instanceof Cr?function(r,s){return s instanceof Cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&CN(o,s.filters[a]),!0):!1}(t,e):void ce()}function NN(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${kl(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(NN).join(" ,")+"}"}(t):"Filter"}class K9 extends vt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class X9 extends vt{constructor(e,n){super(e,"in",n),this.keys=RN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Y9 extends vt{constructor(e,n){super(e,"not-in",n),this.keys=RN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class Q9 extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tx(n)&&cd(n.arrayValue,this.value)}}class J9 extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cd(this.value.arrayValue,n)}}class Z9 extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cd(this.value.arrayValue,n)}}class e8 extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function pk(t,e=null,n=[],r=[],s=null,i=null,o=null){return new t8(t,e,n,r,s,i,o)}function nx(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>kl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>kl(r)).join(",")),e.ue=n}return e.ue}function rx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!H9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fk(t.startAt,e.startAt)&&fk(t.endAt,e.endAt)}function kv(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function n8(t,e,n,r,s,i,o,a){return new ra(t,e,n,r,s,i,o,a)}function Nm(t){return new ra(t)}function mk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sx(t){return t.collectionGroup!==null}function rl(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Lt(Dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ud(i,r))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new ud(Dt.keyField(),r))}return e.ce}function zr(t){const e=me(t);return e.le||(e.le=r8(e,rl(t))),e.le}function r8(t,e){if(t.limitType==="F")return pk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ud(s.field,i)});const n=t.endAt?new Tl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tl(t.startAt.position,t.startAt.inclusive):null;return pk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tv(t,e){const n=t.filters.concat([e]);return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xp(t,e,n){return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rm(t,e){return rx(zr(t),zr(e))&&t.limitType===e.limitType}function jN(t){return`${nx(zr(t))}|lt:${t.limitType}`}function ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>NN(s)).join(", ")}]`),Md(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>kl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>kl(s)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function jm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of rl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=hk(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,rl(r),s)||r.endAt&&!function(o,a,l){const c=hk(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,rl(r),s))}(t,e)}function s8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DN(t){return(e,n)=>{let r=!1;for(const s of rl(t)){const i=i8(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function i8(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Sl(l,c):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return SN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new tt(ie.comparator);function Cs(){return o8}const ON=new tt(ie.comparator);function Xc(...t){let e=ON;for(const n of t)e=e.insert(n.key,n);return e}function MN(t){let e=ON;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bo(){return wu()}function LN(){return wu()}function wu(){return new Gl(t=>t.toString(),(t,e)=>t.isEqual(e))}const a8=new tt(ie.comparator),l8=new Lt(ie.comparator);function Ee(...t){let e=l8;for(const n of t)e=e.add(n);return e}const c8=new Lt(Ce);function u8(){return c8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_p(e)?"-0":e}}function FN(t){return{integerValue:""+t}}function d8(t,e){return U9(e)?FN(e):ix(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function h8(t,e,n){return t instanceof dd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cm(i)&&(i=ex(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Il?$N(t,e):t instanceof hd?UN(t,e):function(s,i){const o=VN(s,i),a=gk(o)+gk(s.Pe);return Ev(o)&&Ev(s.Pe)?FN(a):ix(s.serializer,a)}(t,e)}function f8(t,e,n){return t instanceof Il?$N(t,e):t instanceof hd?UN(t,e):n}function VN(t,e){return t instanceof bp?function(r){return Ev(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class dd extends Dm{}class Il extends Dm{constructor(e){super(),this.elements=e}}function $N(t,e){const n=BN(e);for(const r of t.elements)n.some(s=>Yr(s,r))||n.push(r);return{arrayValue:{values:n}}}class hd extends Dm{constructor(e){super(),this.elements=e}}function UN(t,e){let n=BN(e);for(const r of t.elements)n=n.filter(s=>!Yr(s,r));return{arrayValue:{values:n}}}class bp extends Dm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gk(t){return ht(t.integerValue||t.doubleValue)}function BN(t){return tx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.field=e,this.transform=n}}function p8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Il&&s instanceof Il||r instanceof hd&&s instanceof hd?El(r.elements,s.elements,Yr):r instanceof bp&&s instanceof bp?Yr(r.Pe,s.Pe):r instanceof dd&&s instanceof dd}(t.transform,e.transform)}class m8{constructor(e,n){this.version=e,this.transformResults=n}}class Ot{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function If(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Om{}function qN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mm(t.key,Ot.none()):new Ld(t.key,t.data,Ot.none());{const n=t.data,r=fn.empty();let s=new Lt(Dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gi(t.key,r,new Fn(s.toArray()),Ot.none())}}function g8(t,e,n){t instanceof Ld?function(s,i,o){const a=s.value.clone(),l=vk(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gi?function(s,i,o){if(!If(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=vk(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(WN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xu(t,e,n,r){return t instanceof Ld?function(i,o,a,l){if(!If(i.precondition,o))return a;const c=i.value.clone(),d=_k(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gi?function(i,o,a,l){if(!If(i.precondition,o))return a;const c=_k(i.fieldTransforms,l,o),d=o.data;return d.setAll(WN(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return If(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function y8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=VN(r.transform,s||null);i!=null&&(n===null&&(n=fn.empty()),n.set(r.field,i))}return n||null}function yk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&El(r,s,(i,o)=>p8(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ld extends Om{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gi extends Om{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vk(t,e,n){const r=new Map;Ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,f8(o,a,n[s]))}return r}function _k(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,h8(i,o,e))}return r}class Mm extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HN extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&g8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=qN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,(n,r)=>yk(n,r))&&El(this.baseMutations,e.baseMutations,(n,r)=>yk(n,r))}}class ox{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length);let s=function(){return a8}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ox(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Te;function GN(t){switch(t){default:return ce();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function KN(t){if(t===void 0)return Ps("GRPC error has no .code"),V.UNKNOWN;switch(t){case mt.OK:return V.OK;case mt.CANCELLED:return V.CANCELLED;case mt.UNKNOWN:return V.UNKNOWN;case mt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case mt.INTERNAL:return V.INTERNAL;case mt.UNAVAILABLE:return V.UNAVAILABLE;case mt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case mt.NOT_FOUND:return V.NOT_FOUND;case mt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case mt.ABORTED:return V.ABORTED;case mt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case mt.DATA_LOSS:return V.DATA_LOSS;default:return ce()}}(Te=mt||(mt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new Po([4294967295,4294967295],0);function wk(t){const e=x8().encode(t),n=new gN;return n.update(e),new Uint8Array(n.digest())}function xk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Po([n,r],0),new Po([s,i],0)]}class ax{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yc(`Invalid padding: ${n}`);if(r<0)throw new Yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Po.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Po.fromNumber(r)));return s.compare(b8)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=wk(e),[r,s]=xk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ax(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=wk(e),[r,s]=xk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lm(fe.min(),s,new tt(Ce),Cs(),Ee())}}class Fd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fd(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class XN{constructor(e,n){this.targetId=e,this.me=n}}class YN{constructor(e,n,r=$t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class bk{constructor(){this.fe=0,this.ge=Sk(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce()}}),new Fd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Sk()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class E8{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cs(),this.qe=Ek(),this.Qe=new tt(Ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(kv(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,Tt.newNoDocument(o,fe.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Uo(r).toUint8Array()}catch(l){if(l instanceof kN)return bl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ax(o,s,i)}catch(l){return bl(l instanceof Yc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&kv(a.target)){const l=new ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Tt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ee();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Lm(e,n,this.Qe,this.ke,r);return this.ke=Cs(),this.qe=Ek(),this.Qe=new tt(Ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bk,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(Ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bk),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ek(){return new tt(ie.comparator)}function Sk(){return new tt(ie.comparator)}const S8={asc:"ASCENDING",desc:"DESCENDING"},k8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T8={and:"AND",or:"OR"};class I8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iv(t,e){return t.useProto3Json||Md(e)?e:{value:e}}function Ep(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function A8(t,e){return Ep(t,e.toTimestamp())}function zn(t){return Ae(!!t),fe.fromTimestamp(function(n){const r=Mi(n);return new Fe(r.seconds,r.nanos)}(t))}function lx(t,e){return Av(t,e).canonicalString()}function Av(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JN(t){const e=je.fromString(t);return Ae(sR(e)),e}function Sp(t,e){return lx(t.databaseId,e.path)}function bu(t,e){const n=JN(e);if(n.get(1)!==t.databaseId.projectId)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(eR(n))}function ZN(t,e){return lx(t.databaseId,e)}function P8(t){const e=JN(t);return e.length===4?je.emptyPath():eR(e)}function Pv(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eR(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kk(t,e,n){return{name:Sp(t,e),fields:n.value.mapValue.fields}}function C8(t,e){return"found"in e?function(r,s){Ae(!!s.found),s.found.name,s.found.updateTime;const i=bu(r,s.found.name),o=zn(s.found.updateTime),a=s.found.createTime?zn(s.found.createTime):fe.min(),l=new fn({mapValue:{fields:s.found.fields}});return Tt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){Ae(!!s.missing),Ae(!!s.readTime);const i=bu(r,s.missing),o=zn(s.readTime);return Tt.newNoDocument(i,o)}(t,e):ce()}function N8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ae(d===void 0||typeof d=="string"),$t.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array),$t.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?V.UNKNOWN:KN(c.code);return new W(d,c.message||"")}(o);n=new YN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bu(t,r.document.name),i=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):fe.min(),a=new fn({mapValue:{fields:r.document.fields}}),l=Tt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Af(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bu(t,r.document),i=r.readTime?zn(r.readTime):fe.min(),o=Tt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Af([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bu(t,r.document),i=r.removedTargetIds||[];n=new Af([],i,s,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new w8(s,i),a=r.targetId;n=new XN(a,o)}}return n}function tR(t,e){let n;if(e instanceof Ld)n={update:kk(t,e.key,e.value)};else if(e instanceof Mm)n={delete:Sp(t,e.key)};else if(e instanceof Gi)n={update:kk(t,e.key,e.data),updateMask:$8(e.fieldMask)};else{if(!(e instanceof HN))return ce();n={verify:Sp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof dd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:A8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce()}(t,e.precondition)),n}function R8(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?zn(s.updateTime):zn(i);return o.isEqual(fe.min())&&(o=zn(i)),new m8(o,s.transformResults||[])}(n,e))):[]}function j8(t,e){return{documents:[ZN(t,e.path)]}}function D8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZN(t,s);const i=function(c){if(c.length!==0)return rR(Cr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Ea(p.field),direction:L8(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Iv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function O8(t){let e=P8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=nR(f);return p instanceof Cr&&PN(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new ud(Sa(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Md(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Tl(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Tl(m,p)}(n.endAt)),n8(e,s,o,i,a,"F",l,c)}function M8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sa(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Sa(n.unaryFilter.field);return vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sa(n.unaryFilter.field);return vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sa(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Sa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>nR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function L8(t){return S8[t]}function F8(t){return k8[t]}function V8(t){return T8[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function Sa(t){return Dt.fromServerFormat(t.fieldPath)}function rR(t){return t instanceof vt?function(n){if(n.op==="=="){if(dk(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if(uk(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dk(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if(uk(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:F8(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(s=>rR(s));return r.length===1?r[0]:{compositeFilter:{op:V8(n.op),filters:r}}}(t):ce()}function $8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=$t.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.ct=e}}function B8(t){const e=O8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(){this.un=new q8}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Oi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class q8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Lt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Al(0)}static kn(){return new Al(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){this.changes=new Gl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xu(r.mutation,s,Fn.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=bo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Xc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Cs();const o=wu(),a=function(){return wu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Gi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),xu(d.mutation,c,d.mutation.getFieldMask(),Fe.now())):o.set(c.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new H8(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wu();let s=new tt((o,a)=>o-a),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Fn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=LN();d.forEach(p=>{if(!i.has(p)){const m=qN(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(bo());let a=-1,l=i;return o.next(c=>U.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ee())).next(d=>({batchId:a,changes:MN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Xc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Xc();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(f,p){return new ra(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Tt.newInvalidDocument(d)))});let a=Xc();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&xu(d.mutation,c,Fn.empty(),Fe.now()),jm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:B8(s.bundledQuery),readTime:zn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.overlays=new tt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bo();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=bo(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=bo(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=bo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _8(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Tr=new Lt(St.Er),this.dr=new Lt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new St(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new St(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new je([])),r=new St(n,e),s=new St(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new je([])),r=new St(n,e),s=new St(n,e+1);let i=Ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new St(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class St{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ce(e.wr,n.wr)}static Ar(e,n){return Ce(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Lt(St.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new v8(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new St(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new St(n,0),s=new St(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Ce);return n.forEach(s=>{const i=new St(s,0),o=new St(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new St(new ie(i),0);let a=new Lt(Ce);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new St(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new St(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.Mr=e,this.docs=function(){return new tt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=Cs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cs();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||L9(M9(d),r)<=0||(s.has(d.key)||jm(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ce()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z8(this)}getSize(e){return U.resolve(this.size)}}class Z8 extends W8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.persistence=e,this.Nr=new Gl(n=>nx(n),rx),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cx,this.targetCount=0,this.kr=Al.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Al(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zw(0),this.Kr=!1,this.Kr=!0,this.$r=new Y8,this.referenceDelegate=e(this),this.Ur=new eU(this),this.indexManager=new z8,this.remoteDocumentCache=function(s){return new J8(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new U8(n),this.Gr=new K8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Q8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new nU(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nU extends V9{constructor(e){super(),this.currentSequenceNumber=e}}class ux{constructor(e){this.persistence=e,this.Jr=new cx,this.Yr=null}static Zr(e){return new ux(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return a$()?8:$9(an())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new rU;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Cc()<=ke.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Cc()<=ke.DEBUG&&te("QueryEngine","Query:",ba(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Cc()<=ke.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):U.resolve())}Yi(e,n){if(mk(n))return U.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=xp(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ee(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,xp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return mk(n)||s.isEqual(fe.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Cc()<=ke.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ba(n)),this.rs(e,o,n,O9(s,-1)).next(a=>a))})}ts(e,n){let r=new Lt(DN(e));return n.forEach((s,i)=>{jm(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Cc()<=ke.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",ba(n)),this.Ji.getDocumentsMatchingQuery(e,n,Oi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new tt(Ce),this._s=new Gl(i=>nx(i),rx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oU(t,e,n,r){return new iU(t,e,n,r)}async function iR(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ee();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function aU(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=U.resolve();return p.forEach(w=>{m=m.next(()=>d.getEntry(l,w)).next(v=>{const S=c.docVersions.get(w);Ae(S!==null),v.version.compareTo(S)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oR(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lU(t,e){const n=me(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken($t.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(v,S,x){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Ur.updateTargetData(i,m))});let l=Cs(),c=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(cU(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(fe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function cU(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function uU(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dU(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new gi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cv(t,e,n){const r=me(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Od(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Tk(t,e,n){const r=me(t);let s=fe.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=me(l),p=f._s.get(d);return p!==void 0?U.resolve(f.os.get(p)):f.Ur.getTargetData(c,d)}(r,o,zr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Ee())).next(a=>(hU(r,s8(e),a),{documents:a,Ts:i})))}function hU(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ik{constructor(){this.activeTargetIds=u8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fU{constructor(){this.so=new Ik,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ik,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function w0(){return $h===null?$h=function(){return 268435456+Math.round(2147483648*Math.random())}():$h++,"0x"+$h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class yU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=w0(),l=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(te("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw bl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=mU[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=w0();return new Promise((o,a)=>{const l=new yN;l.setWithCredentials(!0),l.listenOnce(vN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kf.NO_ERROR:const d=l.getResponseJson();te(Xt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case kf.TIMEOUT:te(Xt,`RPC '${e}' ${i} timed out`),a(new W(V.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const f=l.getStatus();if(te(Xt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const w=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(x)>=0?x:V.UNKNOWN}(m.status);a(new W(w,m.message))}else a(new W(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(V.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{te(Xt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);te(Xt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=w0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xN(),a=wN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");te(Xt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const w=new gU({Io:S=>{m?te(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(te(Xt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),te(Xt,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},To:()=>f.close()}),v=(S,x,_)=>{S.listen(x,E=>{try{_(E)}catch(P){setTimeout(()=>{throw P},0)}})};return v(f,Kc.EventType.OPEN,()=>{m||(te(Xt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),v(f,Kc.EventType.CLOSE,()=>{m||(m=!0,te(Xt,`RPC '${e}' stream ${s} transport closed`),w.So())}),v(f,Kc.EventType.ERROR,S=>{m||(m=!0,bl(Xt,`RPC '${e}' stream ${s} transport errored:`,S),w.So(new W(V.UNAVAILABLE,"The operation could not be completed")))}),v(f,Kc.EventType.MESSAGE,S=>{var x;if(!m){const _=S.data[0];Ae(!!_);const E=_,P=E.error||((x=E[0])===null||x===void 0?void 0:x.error);if(P){te(Xt,`RPC '${e}' stream ${s} received error:`,P);const R=P.status;let N=function(I){const A=mt[I];if(A!==void 0)return KN(A)}(R),k=P.message;N===void 0&&(N=V.INTERNAL,k="Unknown error status: "+R+" with message "+P.message),m=!0,w.So(new W(N,k)),f.close()}else te(Xt,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),v(a,_N.STAT_EVENT,S=>{S.stat===xv.PROXY?te(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===xv.NOPROXY&&te(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function x0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){return new I8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Ps(n.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vU extends aR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=N8(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?zn(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=kv(l)?{documents:j8(i,l)}:{query:D8(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QN(i,o.resumeToken);const c=Iv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Ep(i,o.snapshotVersion.toTimestamp());const c=Iv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=M8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pv(this.serializer),n.removeTarget=e,this.a_(n)}}class _U extends aR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=R8(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Av(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Av(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ps(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{sa(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=me(l);c.L_.add(4),await Vd(c),c.q_.set("Unknown"),c.L_.delete(4),await Vm(c)}(this))})}),this.q_=new xU(r,s)}}async function Vm(t){if(sa(t))for(const e of t.B_)await e(!0)}async function Vd(t){for(const e of t.B_)await e(!1)}function lR(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gx(n)?mx(n):Kl(n).r_()&&px(n,e))}function fx(t,e){const n=me(t),r=Kl(n);n.N_.delete(e),r.r_()&&cR(n,e),n.N_.size===0&&(r.r_()?r.o_():sa(n)&&n.q_.set("Unknown"))}function px(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).A_(e)}function cR(t,e){t.Q_.xe(e),Kl(t).R_(e)}function mx(t){t.Q_=new E8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.q_.v_()}function gx(t){return sa(t)&&!Kl(t).n_()&&t.N_.size>0}function sa(t){return me(t).L_.size===0}function uR(t){t.Q_=void 0}async function EU(t){t.q_.set("Online")}async function SU(t){t.N_.forEach((e,n)=>{px(t,e)})}async function kU(t,e){uR(t),gx(t)?(t.q_.M_(e),mx(t)):t.q_.set("Unknown")}async function TU(t,e,n){if(t.q_.set("Online"),e instanceof YN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kp(t,r)}else if(e instanceof Af?t.Q_.Ke(e):e instanceof XN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await oR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken($t.EMPTY_BYTE_STRING,d.snapshotVersion)),cR(i,l);const f=new gi(d.target,l,c,d.sequenceNumber);px(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await kp(t,r)}}async function kp(t,e,n){if(!Od(e))throw e;t.L_.add(1),await Vd(t),t.q_.set("Offline"),n||(n=()=>oR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vm(t)})}function dR(t,e){return e().catch(n=>kp(t,n,e))}async function $m(t){const e=me(t),n=Li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IU(e);)try{const s=await uU(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,AU(e,s)}catch(s){await kp(e,s)}hR(e)&&fR(e)}function IU(t){return sa(t)&&t.O_.length<10}function AU(t,e){t.O_.push(e);const n=Li(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hR(t){return sa(t)&&!Li(t).n_()&&t.O_.length>0}function fR(t){Li(t).start()}async function PU(t){Li(t).p_()}async function CU(t){const e=Li(t);for(const n of t.O_)e.m_(n.mutations)}async function NU(t,e,n){const r=t.O_.shift(),s=ox.from(r,e,n);await dR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $m(t)}async function RU(t,e){e&&Li(t).V_&&await async function(r,s){if(function(o){return GN(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Li(r).s_(),await dR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $m(r)}}(t,e),hR(t)&&fR(t)}async function Pk(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=sa(n);n.L_.add(3),await Vd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vm(n)}async function jU(t,e){const n=me(t);e?(n.L_.delete(2),await Vm(n)):e||(n.L_.add(2),await Vd(n),n.q_.set("Unknown"))}function Kl(t){return t.K_||(t.K_=function(n,r,s){const i=me(n);return i.w_(),new vU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:EU.bind(null,t),Ro:SU.bind(null,t),mo:kU.bind(null,t),d_:TU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gx(t)?mx(t):t.q_.set("Unknown")):(await t.K_.stop(),uR(t))})),t.K_}function Li(t){return t.U_||(t.U_=function(n,r,s){const i=me(n);return i.w_(),new _U(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PU.bind(null,t),mo:RU.bind(null,t),f_:CU.bind(null,t),g_:NU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $m(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new yx(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vx(t,e){if(Ps("AsyncQueue",`${e}: ${t}`),Od(t))return new W(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Xc(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new sl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.W_=new tt(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pl(e,n,sl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OU{constructor(){this.queries=Nk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=Nk(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new W(V.ABORTED,"Firestore shutting down"))}}function Nk(){return new Gl(t=>jN(t),Rm)}async function _x(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new DU,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=vx(o,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&xx(n)}async function wx(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MU(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&xx(n)}function LU(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function xx(t){t.Y_.forEach(e=>{e.next()})}var Nv,Rk;(Rk=Nv||(Nv={})).ea="default",Rk.Cache="cache";class bx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.key=e}}class mR{constructor(e){this.key=e}}class FU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=DN(e),this.Ra=new sl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ck,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=jm(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let S=!1;p&&m?p.data.isEqual(m.data)?w!==v&&(r.track({type:3,doc:m}),S=!0):this.ga(p,m)||(r.track({type:2,doc:m}),S=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),S=!0):p&&!m&&(r.track({type:1,doc:p}),S=!0,(l||c)&&(a=!0)),S&&(m?(o=o.add(m),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(m,w){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return v(m)-v(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Pl(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ck,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pR(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $U{constructor(e){this.key=e,this.va=!1}}class UU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gl(a=>jN(a),Rm),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(ie.comparator),this.Na=new Map,this.La=new cx,this.Ba={},this.ka=new Map,this.qa=Al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BU(t,e,n=!0){const r=xR(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gR(r,e,n,!0),s}async function zU(t,e){const n=xR(t);await gR(n,e,!0,!1)}async function gR(t,e,n,r){const s=await dU(t.localStore,zr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await qU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&lR(t.remoteStore,s),a}async function qU(t,e,n,r,s){t.Ka=(f,p,m)=>async function(v,S,x,_){let E=S.view.ma(x);E.ns&&(E=await Tk(v.localStore,S.query,!1).then(({documents:k})=>S.view.ma(k,E)));const P=_&&_.targetChanges.get(S.targetId),R=_&&_.targetMismatches.get(S.targetId)!=null,N=S.view.applyChanges(E,v.isPrimaryClient,P,R);return Dk(v,S.targetId,N.wa),N.snapshot}(t,f,p,m);const i=await Tk(t.localStore,e,!0),o=new FU(e,i.Ts),a=o.ma(i.documents),l=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Dk(t,n,c.wa);const d=new VU(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function WU(t,e,n){const r=me(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Rm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fx(r.remoteStore,s.targetId),Rv(r,s.targetId)}).catch(Dd)):(Rv(r,s.targetId),await Cv(r.localStore,s.targetId,!0))}async function HU(t,e){const n=me(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fx(n.remoteStore,r.targetId))}async function GU(t,e,n){const r=eB(t);try{const s=await function(o,a){const l=me(o),c=Fe.now(),d=a.reduce((m,w)=>m.add(w.key),Ee());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=Cs(),v=Ee();return l.cs.getEntries(m,d).next(S=>{w=S,w.forEach((x,_)=>{_.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(S=>{f=S;const x=[];for(const _ of a){const E=y8(_,f.get(_.key).overlayedDocument);E!=null&&x.push(new Gi(_.key,E,TN(E.value.mapValue),Ot.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(S=>{p=S;const x=S.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,S.batchId,x)})}).then(()=>({batchId:p.batchId,changes:MN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new tt(Ce)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await $d(r,s.changes),await $m(r.remoteStore)}catch(s){const i=vx(s,"Failed to persist write");n.reject(i)}}async function yR(t,e){const n=me(t);try{const r=await lU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ae(o.va):s.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await $d(n,r,e)}catch(r){await Dd(r)}}function jk(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&xx(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KU(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new tt(ie.comparator);o=o.insert(i,Tt.newNoDocument(i,fe.min()));const a=Ee().add(i),l=new Lm(fe.min(),new Map,new tt(Ce),o,a);await yR(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ex(r)}else await Cv(r.localStore,e,!1).then(()=>Rv(r,e,n)).catch(Dd)}async function XU(t,e){const n=me(t),r=e.batch.batchId;try{const s=await aU(n.localStore,e);_R(n,r,null),vR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $d(n,s)}catch(s){await Dd(s)}}async function YU(t,e,n){const r=me(t);try{const s=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ae(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);_R(r,e,n),vR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $d(r,s)}catch(s){await Dd(s)}}function vR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function _R(t,e,n){const r=me(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Rv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wR(t,r)})}function wR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ex(t))}function Dk(t,e,n){for(const r of n)r instanceof pR?(t.La.addReference(r.key,e),QU(t,r)):r instanceof mR?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wR(t,r.key)):ce()}function QU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ex(t))}function Ex(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(je.fromString(e)),r=t.qa.next();t.Na.set(r,new $U(n)),t.Oa=t.Oa.insert(n,r),lR(t.remoteStore,new gi(zr(Nm(n.path)),r,"TargetPurposeLimboResolution",Zw.oe))}}async function $d(t,e,n){const r=me(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=dx.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,p=>U.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>U.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Od(f))throw f;te("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.os.get(p),w=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(p,v)}}}(r.localStore,i))}async function JU(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await iR(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $d(n,r.hs)}}function ZU(t,e){const n=me(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let s=Ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function xR(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KU.bind(null,e),e.Ca.d_=MU.bind(null,e.eventManager),e.Ca.$a=LU.bind(null,e.eventManager),e}function eB(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YU.bind(null,e),e}class Tp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oU(this.persistence,new sU,e.initialUser,this.serializer)}Ga(e){return new tU(ux.Zr,this.serializer)}Wa(e){return new fU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tp.provider={build:()=>new Tp};class jv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JU.bind(null,this.syncEngine),await jU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OU}()}createDatastore(e){const n=Fm(e.databaseInfo.databaseId),r=function(i){return new yU(i)}(e.databaseInfo);return function(i,o,a,l){return new wU(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new bU(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>jk(this.syncEngine,n,0),function(){return Ak.D()?new Ak:new pU}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new UU(s,i,o,a,l,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=me(s);te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Vd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jv.provider={build:()=>new jv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new W(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=me(s),a={documents:i.map(f=>Sp(o.serializer,f))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,je.emptyPath(),a,i.length),c=new Map;l.forEach(f=>{const p=C8(o.serializer,f);c.set(p.key.toString(),p)});const d=[];return i.forEach(f=>{const p=c.get(f.toString());Ae(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=ie.fromPath(r);this.mutations.push(new HN(s,this.precondition(s)))}),await async function(r,s){const i=me(r),o={writes:s.map(a=>tR(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,je.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ce();n=fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new W(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fe.min())?Ot.exists(!1):Ot.updateTime(n):Ot.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fe.min()))throw new W(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ot.updateTime(n)}return Ot.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new hx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new tB(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Md(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!GN(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=EN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function b0(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ok(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sB(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Pk(e.remoteStore,s)),t._onlineComponents=e}async function sB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await b0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;bl("Error using user provided cache. Falling back to memory cache: "+n),await b0(t,new Tp)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await b0(t,new Tp);return t._offlineComponents}async function kx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Ok(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Ok(t,new jv))),t._onlineComponents}function iB(t){return kx(t).then(e=>e.syncEngine)}function oB(t){return kx(t).then(e=>e.datastore)}async function Ip(t){const e=await kx(t),n=e.eventManager;return n.onListen=BU.bind(null,e.syncEngine),n.onUnlisten=WU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HU.bind(null,e.syncEngine),n}function aB(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Sx({next:p=>{d.Za(),o.enqueueAndForget(()=>wx(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new W(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new W(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new bx(Nm(a.path),d,{includeMetadataChanges:!0,_a:!0});return _x(i,f)}(await Ip(t),t.asyncQueue,e,n,r)),r.promise}function lB(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Sx({next:p=>{d.Za(),o.enqueueAndForget(()=>wx(i,f)),p.fromCache&&l.source==="server"?c.reject(new W(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new bx(a,d,{includeMetadataChanges:!0,_a:!0});return _x(i,f)}(await Ip(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e,n){if(!n)throw new W(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cB(t,e,n,r){if(e===!0&&r===!0)throw new W(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lk(t){if(!ie.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fk(t){if(ie.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Um(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Um(t);throw new W(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uB(t,e){if(e<=0)throw new W(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vk(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T9;switch(r.type){case"firstParty":return new C9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mk.get(n);r&&(te("ComponentProvider","Removing Datastore"),Mk.delete(n),r.terminate())}(this),Promise.resolve()}}function dB(t,e,n,r={}){var s;const i=(t=gn(t,Bm))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=en.MOCK_USER;else{a=oN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new en(c)}t._authCredentials=new I9(new bN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class Ci extends ts{constructor(e,n,r){super(e,n,Nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new ie(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function Er(t,e,...n){if(t=Ve(t),ER("collection","path",e),t instanceof Bm){const r=je.fromString(e,...n);return Fk(r),new Ci(t,null,r)}{if(!(t instanceof Ft||t instanceof Ci))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Fk(r),new Ci(t.firestore,null,r)}}function Vn(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=EN.newId()),ER("doc","path",e),t instanceof Bm){const r=je.fromString(e,...n);return Lk(r),new Ft(t,null,new ie(r))}{if(!(t instanceof Ft||t instanceof Ci))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Lk(r),new Ft(t.firestore,t instanceof Ci?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hx(this,"async_queue_retry"),this.Vu=()=>{const r=x0();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=x0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=x0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Od(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ps("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=yx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Uk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Qr extends Bm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $k,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $k(e),this._firestoreClient=void 0,await e}}}function SR(t,e){const n=typeof t=="object"?t:Pm(),r=typeof t=="string"?t:"(default)",s=Hi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rN("firestore");i&&dB(s,...i)}return s}function Ud(t){if(t._terminated)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hB(t),t._firestoreClient}function hB(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new z9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rB(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo($t.fromBase64String(e))}catch(n){throw new W(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=/^__.*__$/;class pB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ld(e,this.data,n,this.fieldTransforms)}}class kR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class zm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ap(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(TR(this.Cu)&&fB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fm(e)}Qu(e,n,r,s=!1){return new zm({Cu:e,methodName:n,qu:r,path:Dt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(t){const e=t._freezeSettings(),n=Fm(t._databaseId);return new mB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ax(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Nx("Data must be an object, but it was:",o,r);const a=CR(r,o);let l,c;if(i.merge)l=new Fn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=Dv(e,f,n);if(!o.contains(p))throw new W(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);RR(d,p)||d.push(p)}l=new Fn(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new pB(new fn(a),l,c)}class qm extends zd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qm}}function gB(t,e,n){return new zm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Px extends zd{_toFieldTransform(e){return new zN(e.path,new dd)}isEqual(e){return e instanceof Px}}class Cx extends zd{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=gB(this,e,!0),r=this.Ku.map(i=>Yl(i,n)),s=new Il(r);return new zN(e.path,s)}isEqual(e){return e instanceof Cx&&xl(this.Ku,e.Ku)}}function IR(t,e,n,r){const s=t.Qu(1,e,n);Nx("Data must be an object, but it was:",s,r);const i=[],o=fn.empty();na(r,(l,c)=>{const d=Rx(e,l,n);c=Ve(c);const f=s.Nu(d);if(c instanceof qm)i.push(d);else{const p=Yl(c,f);p!=null&&(i.push(d),o.set(d,p))}});const a=new Fn(i);return new kR(o,a,s.fieldTransforms)}function AR(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Dv(e,r,n)],l=[s];if(i.length%2!=0)throw new W(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Dv(e,i[p])),l.push(i[p+1]);const c=[],d=fn.empty();for(let p=a.length-1;p>=0;--p)if(!RR(c,a[p])){const m=a[p];let w=l[p];w=Ve(w);const v=o.Nu(m);if(w instanceof qm)c.push(m);else{const S=Yl(w,v);S!=null&&(c.push(m),d.set(m,S))}}const f=new Fn(c);return new kR(d,f,o.fieldTransforms)}function PR(t,e,n,r=!1){return Yl(n,t.Qu(r?4:3,e))}function Yl(t,e){if(NR(t=Ve(t)))return Nx("Unsupported field value:",e,t),CR(t,e);if(t instanceof zd)return function(r,s){if(!TR(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Yl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d8(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:Ep(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ep(s.serializer,i)}}if(r instanceof Tx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:QN(s.serializer,r._byteString)};if(r instanceof Ft){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ix)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ix(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Um(r)}`)}(t,e)}function CR(t,e){const n={};return SN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(r,s)=>{const i=Yl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function NR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof Tx||t instanceof zo||t instanceof Ft||t instanceof zd||t instanceof Ix)}function Nx(t,e,n){if(!NR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Um(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Dv(t,e,n){if((e=Ve(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return Rx(t,e);throw Ap("Field path arguments must be of type string or ",t,!1,void 0,n)}const yB=new RegExp("[~\\*/\\[\\]]");function Rx(t,e,n){if(e.search(yB)>=0)throw Ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch{throw Ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ap(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new W(V.INVALID_ARGUMENT,a+t+l)}function RR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vB extends fd{data(){return super.data()}}function Wm(t,e){return typeof e=="string"?Rx(t,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jx{}class Hm extends jx{}function Zs(t,e,...n){let r=[];e instanceof jx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Wd).length,a=i.filter(l=>l instanceof qd).length;if(o>1||o>0&&a>0)throw new W(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qd extends Hm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qd(e,n,r)}_apply(e){const n=this._parse(e);return DR(e._query,n),new ts(e.firestore,e.converter,Tv(e._query,n))}_parse(e){const n=Xl(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zk(f,d);const m=[];for(const w of f)m.push(Bk(l,i,w));p={arrayValue:{values:m}}}else p=Bk(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zk(f,d),p=PR(a,o,f,d==="in"||d==="not-in");return vt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function On(t,e,n){const r=e,s=Wm("where",t);return qd._create(s,r,n)}class Wd extends jx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)DR(o,l),o=Tv(o,l)}(e._query,n),new ts(e.firestore,e.converter,Tv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cse(...t){return t.forEach(e=>wB("or",e)),Wd._create("or",t)}class Dx extends Hm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dx(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(i,o)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ra(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Uh(t,e="asc"){const n=e,r=Wm("orderBy",t);return Dx._create(r,n)}class Ox extends Hm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ox(e,n,r)}_apply(e){return new ts(e.firestore,e.converter,xp(e._query,this._limit,this._limitType))}}function use(t){return uB("limit",t),Ox._create("limit",t,"F")}class Mx extends Hm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mx(e,n,r)}_apply(e){const n=_B(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,function(s,i){return new ra(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function dse(...t){return Mx._create("startAfter",t,!1)}function _B(t,e,n,r){if(n[0]=Ve(n[0]),n[0]instanceof fd)return function(i,o,a,l,c){if(!l)throw new W(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of rl(i))if(f.field.isKeyField())d.push(wp(o,l.key));else{const p=l.data.field(f.field);if(Cm(p))throw new W(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new W(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Tl(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Xl(t.firestore);return function(o,a,l,c,d,f){const p=o.explicitOrderBy;if(d.length>p.length)throw new W(V.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let w=0;w<d.length;w++){const v=d[w];if(p[w].field.isKeyField()){if(typeof v!="string")throw new W(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!sx(o)&&v.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const S=o.path.child(je.fromString(v));if(!ie.isDocumentKey(S))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const x=new ie(S);m.push(wp(a,x))}else{const S=PR(l,c,v);m.push(S)}}return new Tl(m,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Bk(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new W(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sx(e)&&n.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!ie.isDocumentKey(r))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wp(t,new ie(r))}if(n instanceof Ft)return wp(t,n._key);throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Um(n)}.`)}function zk(t,e){if(!Array.isArray(t)||t.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DR(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function wB(t,e){if(!(e instanceof qd||e instanceof Wd))throw new W(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class OR{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return na(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ht(o.doubleValue));return new Ix(i)}convertGeoPoint(e){return new Tx(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ex(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Ae(sR(r));const s=new ld(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Ps(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xB extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fx extends fd{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pf extends Fx{data(e={}){return super.data(e)}}class MR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Va(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pf(this._firestore,this._userDataWriter,r.key,r,new Va(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Va(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Va(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:bB(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){t=gn(t,Ft);const e=gn(t.firestore,Qr);return aB(Ud(e),t._key).then(n=>VR(e,t,n))}class Gm extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function ei(t){t=gn(t,ts);const e=gn(t.firestore,Qr),n=Ud(e),r=new Gm(e);return jR(t._query),lB(n,t._query).then(s=>new MR(e,r,t,s))}function LR(t,e,n){t=gn(t,Ft);const r=gn(t.firestore,Qr),s=Lx(t.converter,e,n);return Km(r,[Ax(Xl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ot.none())])}function ka(t,e,n,...r){t=gn(t,Ft);const s=gn(t.firestore,Qr),i=Xl(s);let o;return o=typeof(e=Ve(e))=="string"||e instanceof Bd?AR(i,"updateDoc",t._key,e,n,r):IR(i,"updateDoc",t._key,e),Km(s,[o.toMutation(t._key,Ot.exists(!0))])}function FR(t){return Km(gn(t.firestore,Qr),[new Mm(t._key,Ot.none())])}function Vx(t,e){const n=gn(t.firestore,Qr),r=Vn(t),s=Lx(t.converter,e);return Km(n,[Ax(Xl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ot.exists(!1))]).then(()=>r)}function EB(t,...e){var n,r,s;t=Ve(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Uk(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Uk(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,d;if(t instanceof Ft)c=gn(t.firestore,Qr),d=Nm(t._key.path),l={next:f=>{e[o]&&e[o](VR(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=gn(t,ts);c=gn(f.firestore,Qr),d=f._query;const p=new Gm(c);l={next:m=>{e[o]&&e[o](new MR(c,p,f,m))},error:e[o+1],complete:e[o+2]},jR(t._query)}return function(p,m,w,v){const S=new Sx(v),x=new bx(m,S,w);return p.asyncQueue.enqueueAndForget(async()=>_x(await Ip(p),x)),()=>{S.Za(),p.asyncQueue.enqueueAndForget(async()=>wx(await Ip(p),x))}}(Ud(c),d,a,l)}function Km(t,e){return function(r,s){const i=new Br;return r.asyncQueue.enqueueAndForget(async()=>GU(await iB(r),s,i)),i.promise}(Ud(t),e)}function VR(t,e,n){const r=n.docs.get(e._key),s=new Gm(t);return new Fx(t,s,e._key,r,new Va(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB={maxAttempts:5};function Nc(t,e){if((t=Ve(t)).firestore!==e)throw new W(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Xl(n)}get(n){const r=Nc(n,this._firestore),s=new xB(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ce();const o=i[0];if(o.isFoundDocument())return new fd(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new fd(this._firestore,s,r._key,null,r.converter);throw ce()})}set(n,r,s){const i=Nc(n,this._firestore),o=Lx(i.converter,r,s),a=Ax(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=Nc(n,this._firestore);let a;return a=typeof(r=Ve(r))=="string"||r instanceof Bd?AR(this._dataReader,"Transaction.update",o._key,r,s,i):IR(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Nc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Nc(e,this._firestore),r=new Gm(this._firestore);return super.get(e).then(s=>new Fx(this._firestore,r,n._key,s._document,new Va(!1,!1),n.converter))}}function qk(t,e,n){t=gn(t,Qr);const r=Object.assign(Object.assign({},SB),n);return function(i){if(i.maxAttempts<1)throw new W(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new Br;return i.asyncQueue.enqueueAndForget(async()=>{const c=await oB(i);new nB(i.asyncQueue,c,a,o,l).au()}),l.promise}(Ud(t),s=>e(new kB(t,s)),r)}function Bh(){return new Px("serverTimestamp")}function fse(...t){return new Cx("arrayUnion",t)}(function(e,n=!0){(function(s){Hl=s})(ta),Pr(new ur("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Qr(new A9(r.getProvider("auth-internal")),new R9(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Nn(ik,"4.7.3",e),Nn(ik,"4.7.3","esm2017")})();var TB="firebase",IB="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(TB,IB,"app");function $x(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AB=$R,UR=new ea("auth","Firebase",$R());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Am("@firebase/auth");function PB(t,...e){Pp.logLevel<=ke.WARN&&Pp.warn(`Auth (${ta}): ${t}`,...e)}function Cf(t,...e){Pp.logLevel<=ke.ERROR&&Pp.error(`Auth (${ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,...e){throw Ux(t,...e)}function qr(t,...e){return Ux(t,...e)}function BR(t,e,n){const r=Object.assign(Object.assign({},AB()),{[e]:n});return new ea("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return BR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ux(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UR.create(t,...e)}function pe(t,e,...n){if(!t)throw Ux(e,...n)}function ys(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cf(e),new Error(e)}function Rs(t,e){t||ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CB(){return Wk()==="http:"||Wk()==="https:"}function Wk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CB()||aN()||"connection"in navigator)?navigator.onLine:!0}function RB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=n$()||i$()}get(){return NB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){Rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=new Hd(3e4,6e4);function zx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ql(t,e,n,r,s={}){return qR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=jd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return s$()||(c.referrerPolicy="no-referrer"),zR.fetch()(WR(t,t.config.apiHost,n,a),c)})}async function qR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jB),e);try{const s=new MB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw zh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw zh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw BR(t,d,c);Ns(t,d)}}catch(s){if(s instanceof hr)throw s;Ns(t,"network-request-failed",{message:String(s)})}}async function OB(t,e,n,r,s={}){const i=await Ql(t,e,n,r,s);return"mfaPendingCredential"in i&&Ns(t,"multi-factor-auth-required",{_serverResponse:i}),i}function WR(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Bx(t.config,s):`${t.config.apiScheme}://${s}`}class MB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qr(this.auth,"network-request-failed")),DB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t,e){return Ql(t,"POST","/v1/accounts:delete",e)}async function HR(t,e){return Ql(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FB(t,e=!1){const n=Ve(t),r=await n.getIdToken(e),s=qx(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eu(E0(s.auth_time)),issuedAtTime:Eu(E0(s.iat)),expirationTime:Eu(E0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function E0(t){return Number(t)*1e3}function qx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(n);return s?JSON.parse(s):(Cf("Failed to decode base64 JWT payload"),null)}catch(s){return Cf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hk(t){const e=qx(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&VB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pd(t,HR(n,{idToken:r}));pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?GR(i.providerUserInfo):[],a=BB(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Mv(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function UB(t){const e=Ve(t);await Cp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function GR(t){return t.map(e=>{var{providerId:n}=e,r=$x(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zB(t,e){const n=await qR(t,{},async()=>{const r=jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=WR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qB(t,e){return Ql(t,"POST","/v2/accounts:revokeToken",zx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Hk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new il;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=$x(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $B(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pd(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FB(this,e)}reload(){return UB(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await pd(this,LB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:P,isAnonymous:R,providerData:N,stsTokenManager:k}=n;pe(E&&k,e,"internal-error");const y=il.fromJSON(this.name,k);pe(typeof E=="string",e,"internal-error"),Bs(f,e.name),Bs(p,e.name),pe(typeof P=="boolean",e,"internal-error"),pe(typeof R=="boolean",e,"internal-error"),Bs(m,e.name),Bs(w,e.name),Bs(v,e.name),Bs(S,e.name),Bs(x,e.name),Bs(_,e.name);const I=new vs({uid:E,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:R,photoURL:w,phoneNumber:m,tenantId:v,stsTokenManager:y,createdAt:x,lastLoginAt:_});return N&&Array.isArray(N)&&(I.providerData=N.map(A=>Object.assign({},A))),S&&(I._redirectEventId=S),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new il;s.updateFromServerResponse(n);const i=new vs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?GR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new il;a.updateFromIdToken(r);const l=new vs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Mv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new Map;function _s(t){Rs(t instanceof Function,"Expected a class definition");let e=Gk.get(t);return e?(Rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KR.type="NONE";const Kk=KR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e,n){return`firebase:${t}:${e}:${n}`}class ol{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Nf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Nf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ol(_s(Kk),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||_s(Kk);const o=Nf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=vs._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ol(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ol(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ej(e))return"Blackberry";if(tj(e))return"Webos";if(YR(e))return"Safari";if((e.includes("chrome/")||QR(e))&&!e.includes("edge/"))return"Chrome";if(ZR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XR(t=an()){return/firefox\//i.test(t)}function YR(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QR(t=an()){return/crios\//i.test(t)}function JR(t=an()){return/iemobile/i.test(t)}function ZR(t=an()){return/android/i.test(t)}function ej(t=an()){return/blackberry/i.test(t)}function tj(t=an()){return/webos/i.test(t)}function Wx(t=an()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WB(t=an()){var e;return Wx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HB(){return o$()&&document.documentMode===10}function nj(t=an()){return Wx(t)||ZR(t)||tj(t)||ej(t)||/windows phone/i.test(t)||JR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e=[]){let n;switch(t){case"Browser":n=Xk(an());break;case"Worker":n=`${Xk(an())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e={}){return Ql(t,"GET","/v2/passwordPolicy",zx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=6;class YB{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:XB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yk(this),this.idTokenSubscription=new Yk(this),this.beforeStateQueue=new GB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await HR(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mi(this.app))return Promise.reject(Co(this));const n=e?Ve(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mi(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KB(this),n=new YB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hx(t){return Ve(t)}class Yk{constructor(e){this.auth=e,this.observer=null,this.addObserver=f$(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JB(t){Gx=t}function ZB(t){return Gx.loadJS(t)}function e7(){return Gx.gapiScript}function t7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t,e){const n=Hi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(xl(i,e??{}))return s;Ns(s,"already-initialized")}return n.initialize({options:e})}function r7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function s7(t,e,n){const r=Hx(t);pe(r._canInitEmulator,r,"emulator-config-failed"),pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=sj(e),{host:o,port:a}=i7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),o7()}function sj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i7(t){const e=sj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Qk(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Qk(o)}}}function Qk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,n){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(t,e){return OB(t,"POST","/v1/accounts:signInWithIdp",zx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7="http://localhost";class qo extends ij{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=$x(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new qo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return al(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,al(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,al(e,n)}buildRequest(){const e={requestUri:a7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends oj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Gd{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Gd{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Gd{constructor(){super("twitter.com")}static credential(e,n){return qo._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ai.credential(n,r)}catch{return null}}}ai.TWITTER_SIGN_IN_METHOD="twitter.com";ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vs._fromIdTokenResponse(e,r,s),o=Jk(r);return new Cl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jk(r);return new Cl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Np.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Np(e,n,r,s)}}function aj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Np._fromErrorAndOperation(t,i,e,r):i})}async function l7(t,e,n=!1){const r=await pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7(t,e,n=!1){const{auth:r}=t;if(mi(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const i=await pd(t,aj(r,s,e,t),n);pe(i.idToken,r,"internal-error");const o=qx(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(t.uid===a,r,"user-mismatch"),Cl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ns(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e,n=!1){if(mi(t.app))return Promise.reject(Co(t));const r="signIn",s=await aj(t,r,e),i=await Cl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function d7(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function h7(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}const Rp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rp,"1"),this.storage.removeItem(Rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=1e3,p7=10;class cj extends lj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,p7):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},f7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cj.type="LOCAL";const m7=cj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj extends lj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uj.type="SESSION";const dj=uj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await g7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Kx("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function v7(t){Wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function _7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x7(){return hj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="firebaseLocalStorageDb",b7=1,jp="firebaseLocalStorage",pj="fbase_key";class Kd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ym(t,e){return t.transaction([jp],e?"readwrite":"readonly").objectStore(jp)}function E7(){const t=indexedDB.deleteDatabase(fj);return new Kd(t).toPromise()}function Lv(){const t=indexedDB.open(fj,b7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jp,{keyPath:pj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jp)?e(r):(r.close(),await E7(),e(await Lv()))})})}async function Zk(t,e,n){const r=Ym(t,!0).put({[pj]:e,value:n});return new Kd(r).toPromise()}async function S7(t,e){const n=Ym(t,!1).get(e),r=await new Kd(n).toPromise();return r===void 0?null:r.value}function eT(t,e){const n=Ym(t,!0).delete(e);return new Kd(n).toPromise()}const k7=800,T7=3;class mj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>T7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(x7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _7(),!this.activeServiceWorker)return;this.sender=new y7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lv();return await Zk(e,Rp,"1"),await eT(e,Rp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>S7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ym(s,!1).getAll();return new Kd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mj.type="LOCAL";const I7=mj;new Hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t,e){return e?_s(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends ij{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return al(e,this._buildIdpRequest())}_linkToIdToken(e,n){return al(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return al(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P7(t){return u7(t.auth,new Xx(t),t.bypassAuthState)}function C7(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),c7(n,new Xx(t),t.bypassAuthState)}async function N7(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),l7(n,new Xx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P7;case"linkViaPopup":case"linkViaRedirect":return N7;case"reauthViaPopup":case"reauthViaRedirect":return C7;default:Ns(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=new Hd(2e3,1e4);class $a extends gj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=Kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R7.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7="pendingRedirect",Rf=new Map;class D7 extends gj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const r=await O7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O7(t,e){const n=F7(e),r=L7(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function M7(t,e){Rf.set(t._key(),e)}function L7(t){return _s(t._redirectPersistence)}function F7(t){return Nf(j7,t.config.apiKey,t.name)}async function V7(t,e,n=!1){if(mi(t.app))return Promise.reject(Co(t));const r=Hx(t),s=A7(r,e),o=await new D7(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=10*60*1e3;class U7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yj(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$7&&this.cachedEventUids.clear(),this.cachedEventUids.has(tT(e))}saveEventToCache(e){this.cachedEventUids.add(tT(e)),this.lastProcessedEventTime=Date.now()}}function tT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z7(t,e={}){return Ql(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W7=/^https?/;async function H7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await z7(t);for(const n of e)try{if(G7(n))return}catch{}Ns(t,"unauthorized-domain")}function G7(t){const e=Ov(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!W7.test(n))return!1;if(q7.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=new Hd(3e4,6e4);function nT(){const t=Wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X7(t){return new Promise((e,n)=>{var r,s,i;function o(){nT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nT(),n(qr(t,"network-request-failed"))},timeout:K7.get()})}if(!((s=(r=Wr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wr().gapi)===null||i===void 0)&&i.load)o();else{const a=t7("iframefcb");return Wr()[a]=()=>{gapi.load?o():n(qr(t,"network-request-failed"))},ZB(`${e7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jf=null,e})}let jf=null;function Y7(t){return jf=jf||X7(t),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=new Hd(5e3,15e3),J7="__/auth/iframe",Z7="emulator/auth/iframe",ez={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nz(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bx(e,Z7):`https://${t.config.authDomain}/${J7}`,r={apiKey:e.apiKey,appName:t.name,v:ta},s=tz.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${jd(r).slice(1)}`}async function rz(t){const e=await Y7(t),n=Wr().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:nz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ez,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qr(t,"network-request-failed"),a=Wr().setTimeout(()=>{i(o)},Q7.get());function l(){Wr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iz=500,oz=600,az="_blank",lz="http://localhost";class rT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cz(t,e,n,r=iz,s=oz){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sz),{width:r.toString(),height:s.toString(),top:i,left:o}),c=an().toLowerCase();n&&(a=QR(c)?az:n),XR(c)&&(e=e||lz,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(WB(c)&&a!=="_self")return uz(e||"",a),new rT(null);const f=window.open(e||"",a,d);pe(f,t,"popup-blocked");try{f.focus()}catch{}return new rT(f)}function uz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz="__/auth/handler",hz="emulator/auth/handler",fz=encodeURIComponent("fac");async function sT(t,e,n,r,s,i){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ta,eventId:s};if(e instanceof oj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",h$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Gd){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${fz}=${encodeURIComponent(l)}`:"";return`${pz(t)}?${jd(a).slice(1)}${c}`}function pz({config:t}){return t.emulator?Bx(t,hz):`https://${t.authDomain}/${dz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="webStorageSupport";class mz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dj,this._completeRedirectFn=V7,this._overrideRedirectResult=M7}async _openPopup(e,n,r,s){var i;Rs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await sT(e,n,r,Ov(),s);return cz(e,o,Kx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await sT(e,n,r,Ov(),s);return v7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Rs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rz(e),r=new U7(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(S0,{type:S0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[S0];o!==void 0&&n(!!o),Ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nj()||YR()||Wx()}}const gz=mz;var iT="@firebase/auth",oT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _z(t){Pr(new ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rj(t)},c=new QB(r,s,i,l);return r7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new ur("auth-internal",e=>{const n=Hx(e.getProvider("auth").getImmediate());return(r=>new yz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(iT,oT,vz(t)),Nn(iT,oT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=5*60,xz=iN("authIdTokenMaxAge")||wz;let aT=null;const bz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xz)return;const s=n==null?void 0:n.token;aT!==s&&(aT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Fv(t=Pm()){const e=Hi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n7(t,{popupRedirectResolver:gz,persistence:[I7,m7,dj]}),r=iN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bz(i.toString());h7(n,o,()=>o(n.currentUser)),d7(n,a=>o(a))}}const s=nN("auth");return s&&s7(n,`http://${s}`),n}function Ez(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Ez().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_z("Browser");const vj="@firebase/installations",Yx="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=1e4,wj=`w:${Yx}`,xj="FIS_v2",Sz="https://firebaseinstallations.googleapis.com/v1",kz=60*60*1e3,Tz="installations",Iz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wo=new ea(Tz,Iz,Az);function bj(t){return t instanceof hr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej({projectId:t}){return`${Sz}/projects/${t}/installations`}function Sj(t){return{token:t.token,requestStatus:2,expiresIn:Cz(t.expiresIn),creationTime:Date.now()}}async function kj(t,e){const r=(await e.json()).error;return Wo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Tj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pz(t,{refreshToken:e}){const n=Tj(t);return n.append("Authorization",Nz(e)),n}async function Ij(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Cz(t){return Number(t.replace("s","000"))}function Nz(t){return`${xj} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Ej(t),s=Tj(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:xj,appId:t.appId,sdkVersion:wj},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Ij(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Sj(c.authToken)}}else throw await kj("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=/^[cdef][\w-]{21}$/,Vv="";function Oz(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Mz(t);return Dz.test(n)?n:Vv}catch{return Vv}}function Mz(t){return jz(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=new Map;function Cj(t,e){const n=Qm(t);Nj(n,e),Lz(n,e)}function Nj(t,e){const n=Pj.get(t);if(n)for(const r of n)r(e)}function Lz(t,e){const n=Fz();n&&n.postMessage({key:t,fid:e}),Vz()}let Eo=null;function Fz(){return!Eo&&"BroadcastChannel"in self&&(Eo=new BroadcastChannel("[Firebase] FID Change"),Eo.onmessage=t=>{Nj(t.data.key,t.data.fid)}),Eo}function Vz(){Pj.size===0&&Eo&&(Eo.close(),Eo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="firebase-installations-database",Uz=1,Ho="firebase-installations-store";let k0=null;function Qx(){return k0||(k0=hN($z,Uz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ho)}}})),k0}async function Dp(t,e){const n=Qm(t),s=(await Qx()).transaction(Ho,"readwrite"),i=s.objectStore(Ho),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Cj(t,e.fid),e}async function Rj(t){const e=Qm(t),r=(await Qx()).transaction(Ho,"readwrite");await r.objectStore(Ho).delete(e),await r.done}async function Jm(t,e){const n=Qm(t),s=(await Qx()).transaction(Ho,"readwrite"),i=s.objectStore(Ho),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Cj(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t){let e;const n=await Jm(t.appConfig,r=>{const s=Bz(r),i=zz(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Vv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Bz(t){const e=t||{fid:Oz(),registrationStatus:0};return jj(e)}function zz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Wo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=qz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Wz(t)}:{installationEntry:e}}async function qz(t,e){try{const n=await Rz(t,e);return Dp(t.appConfig,n)}catch(n){throw bj(n)&&n.customData.serverCode===409?await Rj(t.appConfig):await Dp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Wz(t){let e=await lT(t.appConfig);for(;e.registrationStatus===1;)await Aj(100),e=await lT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Jx(t);return r||n}return e}function lT(t){return Jm(t,e=>{if(!e)throw Wo.create("installation-not-found");return jj(e)})}function jj(t){return Hz(t)?{fid:t.fid,registrationStatus:0}:t}function Hz(t){return t.registrationStatus===1&&t.registrationTime+_j<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz({appConfig:t,heartbeatServiceProvider:e},n){const r=Kz(t,n),s=Pz(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:wj,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Ij(()=>fetch(r,a));if(l.ok){const c=await l.json();return Sj(c)}else throw await kj("Generate Auth Token",l)}function Kz(t,{fid:e}){return`${Ej(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t,e=!1){let n;const r=await Jm(t.appConfig,i=>{if(!Dj(i))throw Wo.create("not-registered");const o=i.authToken;if(!e&&Qz(o))return i;if(o.requestStatus===1)return n=Xz(t,e),i;{if(!navigator.onLine)throw Wo.create("app-offline");const a=Zz(i);return n=Yz(t,a),a}});return n?await n:r.authToken}async function Xz(t,e){let n=await cT(t.appConfig);for(;n.authToken.requestStatus===1;)await Aj(100),n=await cT(t.appConfig);const r=n.authToken;return r.requestStatus===0?Zx(t,e):r}function cT(t){return Jm(t,e=>{if(!Dj(e))throw Wo.create("not-registered");const n=e.authToken;return eq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Yz(t,e){try{const n=await Gz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Dp(t.appConfig,r),n}catch(n){if(bj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Rj(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dp(t.appConfig,r)}throw n}}function Dj(t){return t!==void 0&&t.registrationStatus===2}function Qz(t){return t.requestStatus===2&&!Jz(t)}function Jz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kz}function Zz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function eq(t){return t.requestStatus===1&&t.requestTime+_j<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tq(t){const e=t,{installationEntry:n,registrationPromise:r}=await Jx(e);return r?r.catch(console.error):Zx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(t,e=!1){const n=t;return await rq(n),(await Zx(n,e)).token}async function rq(t){const{registrationPromise:e}=await Jx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){if(!t||!t.options)throw T0("App Configuration");if(!t.name)throw T0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw T0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function T0(t){return Wo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="installations",iq="installations-internal",oq=t=>{const e=t.getProvider("app").getImmediate(),n=sq(e),r=Hi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},aq=t=>{const e=t.getProvider("app").getImmediate(),n=Hi(e,Oj).getImmediate();return{getId:()=>tq(n),getToken:s=>nq(n,s)}};function lq(){Pr(new ur(Oj,oq,"PUBLIC")),Pr(new ur(iq,aq,"PRIVATE"))}lq();Nn(vj,Yx);Nn(vj,Yx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="analytics",cq="firebase_id",uq="origin",dq=60*1e3,hq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eb="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new Am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qn=new ea("analytics","Analytics",fq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){if(!t.startsWith(eb)){const e=qn.create("invalid-gtag-resource",{gtagURL:t});return yn.warn(e.message),""}return t}function Mj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mq(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gq(t,e){const n=mq("firebase-js-sdk-policy",{createScriptURL:pq}),r=document.createElement("script"),s=`${eb}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function yq(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function vq(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await Mj(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){yn.error(a)}t("config",s,i)}async function _q(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Mj(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){yn.error(i)}}function wq(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await _q(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await vq(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){yn.error(a)}}return s}function xq(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=wq(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function bq(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(eb)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=30,Sq=1e3;class kq{constructor(e={},n=Sq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Lj=new kq;function Tq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Iq(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Tq(r)},i=hq.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw qn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Aq(t,e=Lj,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw qn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw qn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Nq;return setTimeout(async()=>{a.abort()},dq),Fj({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Fj(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Lj){var i;const{appId:o,measurementId:a}=t;try{await Pq(r,e)}catch(l){if(a)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Iq(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Cq(c)){if(s.deleteThrottleMetadata(o),a)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?XS(n,s.intervalMillis,Eq):XS(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,f),yn.debug(`Calling attemptFetch again in ${d} millis`),Fj(t,f,r,s)}}function Pq(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(qn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Cq(t){if(!(t instanceof hr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Nq{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Rq(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}async function jq(t,e,n,r){{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dq(){if(lN())try{await cN()}catch(t){return yn.warn(qn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return yn.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Oq(t,e,n,r,s,i,o){var a;const l=Aq(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>yn.error(m)),e.push(l);const c=Dq().then(m=>{if(m)return r.getId()}),[d,f]=await Promise.all([l,c]);bq(i)||gq(i,d.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[uq]="firebase",p.update=!0,f!=null&&(p[cq]=f),s("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e){this.app=e}_delete(){return delete ll[this.app.options.appId],Promise.resolve()}}let ll={},uT=[];const dT={};let I0="dataLayer",Lq="gtag",hT,tb,fT=!1;function Fq(){const t=[];if(aN()&&t.push("This is a browser extension environment."),l$()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=qn.create("invalid-analytics-context",{errorInfo:e});yn.warn(n.message)}}function Vq(t,e,n){Fq();const r=t.options.appId;if(!r)throw qn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qn.create("no-api-key");if(ll[r]!=null)throw qn.create("already-exists",{id:r});if(!fT){yq(I0);const{wrappedGtag:i,gtagCore:o}=xq(ll,uT,dT,I0,Lq);tb=i,hT=o,fT=!0}return ll[r]=Oq(t,uT,dT,e,hT,I0,n),new Mq(t)}function $q(t=Pm()){t=Ve(t);const e=Hi(t,Op);return e.isInitialized()?e.getImmediate():Uq(t)}function Uq(t,e={}){const n=Hi(t,Op);if(n.isInitialized()){const s=n.getImmediate();if(xl(e,n.getOptions()))return s;throw qn.create("already-initialized")}return n.initialize({options:e})}function pse(t,e,n){t=Ve(t),jq(tb,ll[t.app.options.appId],e).catch(r=>yn.error(r))}function Bq(t,e,n,r){t=Ve(t),Rq(tb,ll[t.app.options.appId],e,n,r).catch(s=>yn.error(s))}const pT="@firebase/analytics",mT="0.10.8";function zq(){Pr(new ur(Op,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Vq(r,s,n)},"PUBLIC")),Pr(new ur("analytics-internal",t,"PRIVATE")),Nn(pT,mT),Nn(pT,mT,"esm2017");function t(e){try{const n=e.getProvider(Op).getImmediate();return{logEvent:(r,s,i)=>Bq(n,r,s,i)}}catch(n){throw qn.create("interop-component-reg-failed",{reason:n})}}}zq();const qq={apiKey:"AIzaSyD7VNKg6Gqam8qHZiHUpzgleVYbk8Gc9qU",authDomain:"bankroll-2ccb4.firebaseapp.com",databaseURL:"https://bankroll-2ccb4-default-rtdb.firebaseio.com",projectId:"bankroll-2ccb4",storageBucket:"bankroll-2ccb4.firebasestorage.app",messagingSenderId:"443440711718",appId:"1:443440711718:web:dc3f58dfe81324edc3bee7",measurementId:"G-QZ2NEGJV6D"};let Qc=null,dt=null,Vj=null,Wq=null;try{Qc=fN(qq),dt=SR(Qc),Vj=Fv(Qc),Wq=typeof window<"u"?$q(Qc):null}catch(t){console.warn("Firebase initialization error:",t)}const gT=Qc,yT=async(t,e)=>{if(!(t!=null&&t.id))return!1;try{const n=Vn(dt,"users",t.id);if((await yi(n)).exists()){const s={};return e!=null&&e.username&&(s.username=e.username),e!=null&&e.first_name&&(s.firstName=e.first_name,s.displayName=`${e.first_name} ${e.last_name||""}`.trim()),e!=null&&e.last_name&&(s.lastName=e.last_name),e!=null&&e.phone_number&&(s.phoneNumber=e.phone_number),e!=null&&e.profile_image&&(s.profileImage=e.profile_image),Object.keys(s).length>0&&await LR(n,s,{merge:!0}),!0}else return!1}catch{return!1}},$j=T.createContext({}),Hq=["admin@bankroll.com","jackson@bankroll.com","jackson@hedgepay.co"];function Ut(){const t=T.useContext($j);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const Gq=({children:t})=>{const[e,n]=T.useState(null),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[a,l]=T.useState(null),c=T.useCallback(k=>k&&Hq.includes(k.email),[]),d=async k=>{try{const I=new Promise((D,Q)=>setTimeout(()=>Q(new Error("Profile fetch timeout")),1e4)),A=Z.from("users").select("*").eq("id",k).single(),{data:j,error:O}=await Promise.race([A,I]);if(O)throw O;return j}catch(y){return console.error("Get user profile error:",y),null}},f=async(k,y,I)=>{try{const{data:A,error:j}=await Z.auth.signUp({email:k,password:y,options:{data:{firstName:I.firstName,lastName:I.lastName,username:I.username,phoneNumber:I.phoneNumber}}});if(j)throw j;const{error:O}=await Z.rpc("handle_user_signup",{user_id:A.user.id,user_email:k,user_username:I.username,user_first_name:I.firstName,user_last_name:I.lastName,user_phone:I.phoneNumber||null});if(O&&console.error("Setup error:",O),I.pin)try{await pi.setupPIN(A.user.id,I.pin)}catch(D){console.error("PIN setup error:",D)}try{const D=(await ae(async()=>{const{default:ne}=await import("./EmailService-CRBjdB80.js");return{default:ne}},[])).default;await new D().sendWelcomeEmail(k,I.username||I.firstName||k.split("@")[0])}catch(D){console.error("Error sending welcome email:",D)}return A}catch(A){throw console.error("Sign up error:",A),A}},p=async(k,y)=>{try{const{data:I,error:A}=await Z.auth.signInWithPassword({email:k,password:y});if(A)throw A;try{const j=(await ae(async()=>{const{default:D}=await import("./EmailService-CRBjdB80.js");return{default:D}},[])).default,O={userAgent:navigator.userAgent,platform:navigator.platform,vendor:navigator.vendor,location:"Location detection available in production",ipAddress:"Available in production"};await j.sendSecurityEmail({to:k,alertType:"new_login",data:{email:k,deviceInfo:O,loginTime:new Date().toLocaleString()}})}catch(j){console.error("Error sending login notification:",j)}return I}catch(I){throw console.error("Sign in error:",I),I}},m=async()=>{try{const{error:k}=await Z.auth.signOut();if(k)throw k;n(null)}catch(k){throw console.error("Sign out error:",k),k}},w=async k=>{try{const{error:y}=await Z.auth.resetPasswordForEmail(k,{redirectTo:`${window.location.origin}/reset-password`});if(y)throw y}catch(y){throw console.error("Password reset error:",y),y}},v=async k=>{try{const{data:y,error:I}=await Z.functions.invoke("send-verification-code",{body:{phoneNumber:k,userId:e==null?void 0:e.id}});if(I)throw I;return y}catch(y){throw console.error("Send verification code error:",y),y}},S=async(k,y)=>{try{const{data:I,error:A}=await Z.functions.invoke("verify-phone",{body:{phoneNumber:k,code:y,userId:e==null?void 0:e.id}});if(A)throw A;if(e!=null&&e.id){const j=await d(e.id);n({...e,profile:j})}return I}catch(I){throw console.error("Verify phone error:",I),I}},x=async(k,y)=>{try{const{data:I,error:A}=await Z.from("users").update({...y,updated_at:new Date().toISOString()}).eq("id",k).select().single();if(A)throw A;return n(j=>({...j,profile:{...j.profile,...I}})),I}catch(I){throw console.error("Update user data error:",I),I}},_=async(k,y)=>{try{let I;if(y instanceof File){const j=y.name.split(".").pop(),D=`profile-images/${`${k}-${Date.now()}.${j}`}`,{error:Q}=await Z.storage.from("avatars").upload(D,y);if(Q)throw Q;const{data:{publicUrl:ne}}=Z.storage.from("avatars").getPublicUrl(D);I=ne}else I=y;const A=await x(k,{profile_image:I});return I}catch(I){throw console.error("Update profile image error:",I),I}},E=async k=>{try{const{data:y,error:I}=await Z.from("users").select("username").eq("username",k).maybeSingle();if(I&&I.code!=="42501")throw I;return!y}catch(y){return console.error("Check username error:",y),!0}},P=async(k,y)=>{try{return l({email:k,password:y}),!0}catch(I){throw console.error("Validation error:",I),I}},R=async k=>{if(!a)throw new Error("No signup data found. Please start over.");try{return await f(a.email,a.password,k)}finally{l(null)}};T.useEffect(()=>{Z.auth.getSession().then(({data:{session:y},error:I})=>{if(I){console.error("Session check error:",I),s(!1),o(!0);return}y!=null&&y.user?d(y.user.id).then(async A=>{await yT(y.user,A),n({...y.user,profile:A,isAdmin:c(y.user)}),s(!1),o(!0)}).catch(A=>{console.error("Error loading user profile:",A),n({...y.user,profile:null,isAdmin:c(y.user)}),s(!1),o(!0)}):(s(!1),o(!0))}).catch(y=>{console.error("Fatal session check error:",y),s(!1),o(!0)});const{data:{subscription:k}}=Z.auth.onAuthStateChange(async(y,I)=>{if(y==="SIGNED_IN"&&(I!=null&&I.user))try{const A=await d(I.user.id);await yT(I.user,A),n({...I.user,profile:A,isAdmin:c(I.user)})}catch(A){console.error("Error in auth state change:",A),n({...I.user,profile:null,isAdmin:c(I.user)})}else if(y==="SIGNED_OUT")n(null);else if(y==="USER_UPDATED"&&(I!=null&&I.user)){const A=await d(I.user.id);n({...I.user,profile:A,isAdmin:c(I.user)})}});return()=>k.unsubscribe()},[c]);const N={currentUser:e,loading:r,sessionChecked:i,isAdmin:(e==null?void 0:e.isAdmin)||!1,signUp:f,signIn:p,signOut:m,resetPassword:w,sendVerificationCode:v,verifyPhone:S,updateUserData:x,updateProfileImage:_,checkUsernameAvailability:E,validateSignupStep1:P,completeSignup:R,isNewUser:!!a};return u.jsx($j.Provider,{value:N,children:t})},Uj=T.createContext({}),Kq=()=>T.useContext(Uj),Xq=({children:t})=>{const[e,n]=T.useState(!1),[r,s]=T.useState(!0),i=es();T.useEffect(()=>{const c=localStorage.getItem("bankroll_admin_auth"),d=localStorage.getItem("bankroll_admin_expiry");if(c&&d){const f=new Date().getTime(),p=parseInt(d);f<p?n(!0):(localStorage.removeItem("bankroll_admin_auth"),localStorage.removeItem("bankroll_admin_expiry"))}s(!1)},[]);const l={isAuthenticated:e,loading:r,login:c=>{const d="B@nkroll123!";if(console.log("AdminAuthContext login attempt with password:",c),c===d){const f=btoa(c+":"+new Date().getTime()),p=new Date().getTime()+6*60*60*1e3;return localStorage.setItem("bankroll_admin_auth",f),localStorage.setItem("bankroll_admin_expiry",p.toString()),n(!0),console.log("Login successful, isAuthenticated set to true"),!0}return console.log("Login failed, wrong password"),!1},logout:()=>{localStorage.removeItem("bankroll_admin_auth"),localStorage.removeItem("bankroll_admin_expiry"),n(!1),i("/")}};return u.jsx(Uj.Provider,{value:l,children:t})},so="https://api.sleeper.app/v1";class vT{static async getUser(e){try{const n=await fetch(`${so}/user/${e}`);if(!n.ok)throw new Error("User not found");return await n.json()}catch(n){throw n}}static async getUserLeagues(e,n="2024",r="nfl"){try{const s=await fetch(`${so}/user/${e}/leagues/${r}/${n}`);if(!s.ok)throw new Error("Failed to fetch leagues");return await s.json()}catch(s){throw s}}static async getLeagueUsers(e){try{const n=await fetch(`${so}/league/${e}/users`);if(!n.ok)throw new Error("Failed to fetch league users");return await n.json()}catch(n){throw n}}static async getLeagueRosters(e){try{const n=await fetch(`${so}/league/${e}/rosters`);if(!n.ok)throw new Error("Failed to fetch league rosters");return await n.json()}catch(n){throw n}}static async getLeagueDetails(e){try{const n=await fetch(`${so}/league/${e}`);if(!n.ok)throw new Error("Failed to fetch league details");return await n.json()}catch(n){throw n}}static async getNFLPlayers(e="2024"){try{const n=await fetch("https://api.sleeper.app/v1/players/nfl");if(!n.ok)throw new Error("Failed to fetch NFL players");return await n.json()}catch(n){throw n}}static async getLeagueMatchups(e,n){try{const r=await fetch(`${so}/league/${e}/matchups/${n}`);if(!r.ok)throw new Error("Failed to fetch matchups");return await r.json()}catch(r){throw r}}static async getLeagueTransactions(e,n){try{const r=await fetch(`${so}/league/${e}/transactions/${n}`);if(!r.ok)throw new Error("Failed to fetch transactions");return await r.json()}catch(r){throw r}}static getAvatarUrl(e){return e?`https://sleepercdn.com/avatars/${e}`:null}static getLeagueAvatarUrl(e){return e?`https://sleepercdn.com/avatars/${e}`:null}static getPlayerHeadshotUrl(e){return`https://sleepercdn.com/content/nfl/players/${e}.jpg`}}const Bj=T.createContext(),Yq=()=>{const t=T.useContext(Bj);if(!t)throw new Error("useSleeperContext must be used within a SleeperProvider");return t},Qq=({children:t})=>{const[e,n]=T.useState(()=>{const p=localStorage.getItem("sleeperUser");return p?JSON.parse(p):null}),[r,s]=T.useState(()=>{const p=localStorage.getItem("sleeperLeagues");return p?JSON.parse(p):[]}),[i,o]=T.useState(!1),[a,l]=T.useState("");T.useEffect(()=>{e?localStorage.setItem("sleeperUser",JSON.stringify(e)):localStorage.removeItem("sleeperUser")},[e]),T.useEffect(()=>{r.length>0?localStorage.setItem("sleeperLeagues",JSON.stringify(r)):localStorage.removeItem("sleeperLeagues")},[r]);const f={user:e,leagues:r,isLoading:i,errorMessage:a,fetchUser:async p=>{o(!0),l("");try{const m=await vT.getUser(p);n(m);const w=await vT.getUserLeagues(m.user_id);s(w)}catch(m){l("Failed to find Sleeper user"),console.error("Error fetching Sleeper user:",m)}finally{o(!1)}},disconnectSleeper:()=>{n(null),s([]),localStorage.removeItem("sleeperUser"),localStorage.removeItem("sleeperLeagues")}};return u.jsx(Bj.Provider,{value:f,children:t})};function zj(t){return t?t instanceof Fe?t.toDate():t:new Date}function Jq(t){if(!t||t.length===0)return 0;const e=new Date;return t.filter(n=>n.status==="active"&&(!n.dateExpires||zj(n.dateExpires)>e)).reduce((n,r)=>n+(r.amount||0),0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="firebasestorage.googleapis.com",Wj="storageBucket",Zq=2*60*1e3,eW=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends hr{constructor(e,n,r=0){super(A0(e),`Firebase Storage: ${n} (${A0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return A0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function A0(t){return"storage/"+t}function nb(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(lt.UNKNOWN,t)}function tW(t){return new ct(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nW(t){return new ct(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(lt.UNAUTHENTICATED,t)}function sW(){return new ct(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iW(t){return new ct(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oW(){return new ct(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aW(){return new ct(lt.CANCELED,"User canceled the upload/download.")}function lW(t){return new ct(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function cW(t){return new ct(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uW(){return new ct(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wj+"' property when initializing the app?")}function dW(){return new ct(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hW(){return new ct(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function fW(t){return new ct(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $v(t){return new ct(lt.INVALID_ARGUMENT,t)}function Hj(){return new ct(lt.APP_DELETED,"The Firebase app was deleted.")}function pW(t){return new ct(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Su(t,e){return new ct(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Rc(t){throw new ct(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(r.path==="")return r;throw cW(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),w={bucket:1,path:3},v=n===qj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${S}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<E.length;P++){const R=E[P],N=R.regex.exec(e);if(N){const k=N[R.indices.bucket];let y=N[R.indices.path];y||(y=""),r=new $n(k,y),R.postModify(r);break}}if(r==null)throw lW(e);return r}}class mW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...S){c||(c=!0,e.apply(null,S))}function f(S){s=setTimeout(()=>{s=null,t(m,l())},S)}function p(){i&&clearTimeout(i)}function m(S,...x){if(c){p();return}if(S){p(),d.call(null,S,...x);return}if(l()||o){p(),d.call(null,S,...x);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let w=!1;function v(S){w||(w=!0,p(),!c&&(s!==null?(S||(a=2),clearTimeout(s),f(0)):S||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function yW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){return t!==void 0}function _W(t){return typeof t=="object"&&!Array.isArray(t)}function rb(t){return typeof t=="string"||t instanceof String}function _T(t){return sb()&&t instanceof Blob}function sb(){return typeof Blob<"u"}function wT(t,e,n,r){if(r<e)throw $v(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $v(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Gj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var No;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(No||(No={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,w)=>{this.resolve_=m,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===No.NO_ERROR,l=i.getStatus();if(!a||wW(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===No.ABORT;r(!1,new qh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new qh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());vW(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=nb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Hj():aW();o(l)}else{const l=oW();o(l)}};this.canceled_?n(!1,new qh(!1,null,!0)):this.backoffId_=gW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function TW(t,e,n,r,s,i,o=!0){const a=Gj(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return SW(c,e),bW(c,n),EW(c,i),kW(c,r),new xW(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AW(...t){const e=IW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(sb())return new Blob(t);throw new ct(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(t){if(typeof atob>"u")throw fW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P0{constructor(e,n){this.data=e,this.contentType=n||null}}function NW(t,e){switch(t){case Mr.RAW:return new P0(Kj(e));case Mr.BASE64:case Mr.BASE64URL:return new P0(Xj(t,e));case Mr.DATA_URL:return new P0(jW(e),DW(e))}throw nb()}function Kj(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function RW(t){let e;try{e=decodeURIComponent(t)}catch{throw Su(Mr.DATA_URL,"Malformed data URL.")}return Kj(e)}function Xj(t,e){switch(t){case Mr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Su(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Su(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=CW(e)}catch(s){throw s.message.includes("polyfill")?s:Su(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Yj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Su(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=OW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jW(t){const e=new Yj(t);return e.base64?Xj(Mr.BASE64,e.rest):RW(e.rest)}function DW(t){return new Yj(t).contentType}function OW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){let r=0,s="";_T(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(_T(this.data_)){const r=this.data_,s=PW(r,e,n);return s===null?null:new li(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new li(r,!0)}}static getBlob(...e){if(sb()){const n=e.map(r=>r instanceof li?r.data_:r);return new li(AW.apply(null,n))}else{const n=e.map(o=>rb(o)?NW(Mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new li(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){let e;try{e=JSON.parse(t)}catch{return null}return _W(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Jj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(t,e){return e}class un{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||FW}}let Wh=null;function VW(t){return!rb(t)||t.length<2?t:Jj(t)}function Zj(){if(Wh)return Wh;const t=[];t.push(new un("bucket")),t.push(new un("generation")),t.push(new un("metageneration")),t.push(new un("name","fullPath",!0));function e(i,o){return VW(o)}const n=new un("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new un("size");return s.xform=r,t.push(s),t.push(new un("timeCreated")),t.push(new un("updated")),t.push(new un("md5Hash",null,!0)),t.push(new un("cacheControl",null,!0)),t.push(new un("contentDisposition",null,!0)),t.push(new un("contentEncoding",null,!0)),t.push(new un("contentLanguage",null,!0)),t.push(new un("contentType",null,!0)),t.push(new un("metadata","customMetadata",!0)),Wh=t,Wh}function $W(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new $n(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function UW(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return $W(r,t),r}function e4(t,e,n){const r=Qj(e);return r===null?null:UW(t,r,n)}function BW(t,e,n,r){const s=Qj(e);if(s===null||!rb(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=ib(p,n,r),w=Gj({alt:"media",token:c});return m+w})[0]}function zW(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class t4{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){if(!t)throw nb()}function qW(t,e){function n(r,s){const i=e4(t,s,e);return n4(i!==null),i}return n}function WW(t,e){function n(r,s){const i=e4(t,s,e);return n4(i!==null),BW(i,s,t.host,t._protocol)}return n}function r4(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=sW():s=rW():n.getStatus()===402?s=nW(t.bucket):n.getStatus()===403?s=iW(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function HW(t){const e=r4(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=tW(t.path)),i.serverResponse=s.serverResponse,i}return n}function GW(t,e,n){const r=e.fullServerUrl(),s=ib(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new t4(s,i,WW(t,n),o);return a.errorHandler=HW(e),a}function KW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=KW(null,e)),r}function YW(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let P=0;P<2;P++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=XW(e,r,s),d=zW(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=li.getBlob(f,r,p);if(m===null)throw dW();const w={name:c.fullPath},v=ib(i,t.host,t._protocol),S="POST",x=t.maxUploadRetryTime,_=new t4(v,S,qW(t,n),x);return _.urlParams=w,_.headers=o,_.body=m.uploadData(),_.errorHandler=r4(e),_}class QW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=No.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=No.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=No.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Rc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class JW extends QW{initXhr(){this.xhr_.responseType="text"}}function s4(){return new JW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Go(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jj(this._location.path)}get storage(){return this._service}get parent(){const e=MW(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new Go(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pW(e)}}function ZW(t,e,n){t._throwIfRoot("uploadBytes");const r=YW(t.storage,t._location,Zj(),new li(e,!0),n);return t.storage.makeRequestWithTokens(r,s4).then(s=>({metadata:s,ref:t}))}function eH(t){t._throwIfRoot("getDownloadURL");const e=GW(t.storage,t._location,Zj());return t.storage.makeRequestWithTokens(e,s4).then(n=>{if(n===null)throw hW();return n})}function tH(t,e){const n=LW(t._location.path,e),r=new $n(t._location.bucket,n);return new Go(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(t){return/^[A-Za-z]+:\/\//.test(t)}function rH(t,e){return new Go(t,e)}function i4(t,e){if(t instanceof ob){const n=t;if(n._bucket==null)throw uW();const r=new Go(n,n._bucket);return e!=null?i4(r,e):r}else return e!==void 0?tH(t,e):t}function sH(t,e){if(e&&nH(e)){if(t instanceof ob)return rH(t,e);throw $v("To use ref(service, url), the first argument must be a Storage instance.")}else return i4(t,e)}function xT(t,e){const n=e==null?void 0:e[Wj];return n==null?null:$n.makeFromBucketSpec(n,t)}function iH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:oN(s,t.app.options.projectId))}class ob{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=qj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zq,this._maxUploadRetryTime=eW,this._requests=new Set,s!=null?this._bucket=$n.makeFromBucketSpec(s,this._host):this._bucket=xT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=xT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Go(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new mW(Hj());{const o=TW(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const bT="@firebase/storage",ET="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="storage";function C0(t,e,n){return t=Ve(t),ZW(t,e,n)}function N0(t){return t=Ve(t),eH(t)}function Hh(t,e){return t=Ve(t),sH(t,e)}function ST(t=Pm(),e){t=Ve(t);const r=Hi(t,o4).getImmediate({identifier:e}),s=rN("storage");return s&&oH(r,...s),r}function oH(t,e,n,r={}){iH(t,e,n,r)}function aH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ob(n,r,s,e,ta)}function lH(){Pr(new ur(o4,aH,"PUBLIC").setMultipleInstances(!0)),Nn(bT,ET,""),Nn(bT,ET,"esm2017")}lH();const Pt=[];for(let t=0;t<256;++t)Pt.push((t+256).toString(16).slice(1));function cH(t,e=0){return(Pt[t[e+0]]+Pt[t[e+1]]+Pt[t[e+2]]+Pt[t[e+3]]+"-"+Pt[t[e+4]]+Pt[t[e+5]]+"-"+Pt[t[e+6]]+Pt[t[e+7]]+"-"+Pt[t[e+8]]+Pt[t[e+9]]+"-"+Pt[t[e+10]]+Pt[t[e+11]]+Pt[t[e+12]]+Pt[t[e+13]]+Pt[t[e+14]]+Pt[t[e+15]]).toLowerCase()}let R0;const uH=new Uint8Array(16);function dH(){if(!R0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");R0=crypto.getRandomValues.bind(crypto)}return R0(uH)}const hH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kT={randomUUID:hH};function ab(t,e,n){var s;if(kT.randomUUID&&!e&&!t)return kT.randomUUID();t=t||{};const r=t.random??((s=t.rng)==null?void 0:s.call(t))??dH();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cH(r)}class Ro{static async getStaticAssetUrl(e,n){if(!n)return null;const r=`${e}/${n}`;if(this.cache.has(r))return this.cache.get(r);if(this.failureCache.has(r)){const s=this.failureCache.get(r);if(Date.now()-s<5*60*1e3)return null;this.failureCache.delete(r)}try{const s=ST();let i=null,o=null;const a=[n.startsWith("/")?n:`/images/${e}/${n}`,`${e}/${n}`,`static/${e}/${n}`,`images/${n}`,`images/${e}/${n}`];for(const l of[a[0]])try{if(typeof window<"u"&&(await fetch(l,{method:"HEAD",cache:"no-cache"})).ok)return this.cache.set(r,l),l}catch{}for(const l of a.slice(1))try{const c=Hh(s,l);if(i=await Promise.race([N0(c),new Promise((d,f)=>setTimeout(()=>f(new Error("Firebase storage timeout")),5e3))]),i)return this.cache.set(r,i),i}catch(c){if(o=c,c.code==="storage/object-not-found"||c.code==="storage/unauthorized"||c.code==="storage/canceled"||c.status===412||c.serverResponse&&c.serverResponse.status===412)continue}return o&&(o.code!=="storage/object-not-found"&&console.warn(`Firebase Storage access issue for ${e}/${n}: ${o.code||o.message}`),this.failureCache.set(r,Date.now())),null}catch(s){return console.warn(`Storage service error for ${e}/${n}: ${s.message}`),this.failureCache.set(r,Date.now()),null}}static async uploadStaticAsset(e,n,r){if(!e)return null;try{const s=ST(),i=e.name.split(".").pop(),o=r||`${ab()}.${i}`;if(n==="platform-logos"){const a=Hh(s,`${n}/${o}`);await C0(a,e);const l=await N0(a);try{const c=Hh(s,`static/${n}/${o}`);await C0(c,e)}catch(c){console.log(`Note: Secondary upload path failed, but primary succeeded: ${c.message}`)}return this.cache.set(`${n}/${o}`,l),l}else{const a=Hh(s,`${n}/${o}`);await C0(a,e);const l=await N0(a);return this.cache.set(`${n}/${o}`,l),l}}catch(s){throw console.error(`Failed to upload file to ${n}:`,s),s}}static async uploadProfileImage(e,n){return this.uploadStaticAsset(e,`profile-images/${n}`,`${Date.now()}`)}static clearCache(){this.cache.clear(),this.failureCache.clear()}}ss(Ro,"cache",new Map),ss(Ro,"failureCache",new Map);class Lr{static async getImageUrl(e){if(!e)return console.error("No image name provided to PlatformImageService.getImageUrl"),null;const n=this.urlCache.get(e);if(n)return n;if(this.inProgressFetches.has(e))try{return await this.inProgressFetches.get(e)}catch{this.inProgressFetches.delete(e)}const r=this._fetchOptimizedImageUrl(e);this.inProgressFetches.set(e,r);try{const s=await r;return s?(this.urlCache.set(e,s),this.errorCount.delete(e),s):this._getDefaultPlaceholder(e)}catch(s){const i=this.errorCount.get(e)||0;return this.errorCount.set(e,i+1),i>2&&console.error(`Persistent error loading image ${e}:`,s),this._getDefaultPlaceholder(e)}finally{this.inProgressFetches.delete(e)}}static async _fetchOptimizedImageUrl(e){try{if(e.startsWith("http")||e.startsWith("/"))return e;const n=`/images/${e}`,r=`/images/platform-logos/${e}`;try{return await Promise.race([this._checkImageExists(n,800),this._checkImageExists(r,800),new Promise((o,a)=>setTimeout(()=>a(new Error("Local image timeout")),1e3))])}catch{}try{const o=await Promise.race([Ro.getStaticAssetUrl("platform-logos",e),new Promise((a,l)=>setTimeout(()=>l(new Error("Firebase timeout")),3e3))]);if(o)return o}catch{}const s=e.split(".")[0].toLowerCase(),i=[".png",".jpg",".webp",".jpeg"];for(const o of i){if(e.toLowerCase().endsWith(o))continue;const a=`${s}${o}`,l=`/images/${a}`,c=`/images/platform-logos/${a}`;try{const d=await Promise.race([this._checkImageExists(l,600),this._checkImageExists(c,600),new Promise((f,p)=>setTimeout(()=>p(new Error("Extension check timeout")),800))]);if(d)return d}catch{}}for(const o of i){if(e.toLowerCase().endsWith(o))continue;const a=`${s}${o}`;try{const l=await Ro.getStaticAssetUrl("platform-logos",a);if(l)return l}catch{}}return null}catch(n){return console.error("Error in _fetchOptimizedImageUrl:",n),null}}static _checkImageExists(e,n=1e3){return new Promise((r,s)=>{const i=new Image;i.onload=()=>r(e),i.onerror=()=>s(new Error(`Image not found: ${e}`)),i.src=e,setTimeout(()=>s(new Error(`Image load timeout: ${e}`)),n)})}static _getDefaultPlaceholder(e){if(this.fallbackUrls.has(e))return this.fallbackUrls.get(e);const n=e.split(".")[0].replace(/[0-9]/g,"").toLowerCase(),r=n.charAt(0).toUpperCase(),s=document.createElement("canvas");s.width=100,s.height=100;const i=s.getContext("2d"),o={a:"#ef4444",b:"#3b82f6",c:"#8b5cf6",d:"#22c55e",e:"#f97316",f:"#ef4444",g:"#3b82f6",h:"#8b5cf6",i:"#22c55e",j:"#f97316",k:"#ef4444",l:"#3b82f6",m:"#8b5cf6",n:"#22c55e",o:"#f97316",p:"#ef4444",q:"#3b82f6",r:"#8b5cf6",s:"#22c55e",t:"#f97316",u:"#ef4444",v:"#3b82f6",w:"#8b5cf6",x:"#22c55e",y:"#f97316",z:"#ef4444"},a=n.charAt(0),l=o[a]||"#3b82f6";this.fallbackUrls.delete(e);const c=i.createLinearGradient(0,0,100,100);c.addColorStop(0,l),c.addColorStop(1,this._adjustColor(l,-30)),i.fillStyle=c,i.beginPath(),i.arc(50,50,45,0,Math.PI*2),i.fill(),i.fillStyle="#ffffff",i.font="bold 48px Arial",i.textAlign="center",i.textBaseline="middle";const d=n.length>1?`${n.charAt(0).toUpperCase()}${n.charAt(1)}`:r;i.fillText(d.substring(0,2),50,50),i.strokeStyle="rgba(255,255,255,0.3)",i.lineWidth=2,i.beginPath(),i.arc(50,50,42,0,Math.PI*2),i.stroke();const f=s.toDataURL();return this.fallbackUrls.set(e,f),console.log(`Generated fallback image for ${n} (${e})`),f}static _adjustColor(e,n){return"#"+e.replace(/^#/,"").replace(/../g,r=>("0"+Math.min(255,Math.max(0,parseInt(r,16)+n)).toString(16)).substr(-2))}static async uploadPlatformImage(e,n){try{const r=await Ro.uploadStaticAsset(e,"platform-logos",n);if(r)return this.urlCache.set(n,r),r;throw new Error("Failed to upload image")}catch(r){throw console.error("Error uploading platform image:",r),r}}static clearCache(){this.urlCache.clear(),this.inProgressFetches.clear(),this.fallbackUrls.clear(),this.errorCount.clear()}static async loadAllImages(){try{const{ALL_PLATFORMS:e}=await ae(async()=>{const{ALL_PLATFORMS:i}=await Promise.resolve().then(()=>yH);return{ALL_PLATFORMS:i}},void 0),n=e.map(i=>this.getImageUrl(i.imageFile).catch(o=>(console.warn(`Failed to load image for ${i.name}:`,o),null))),s=(await Promise.allSettled(n)).filter(i=>i.status==="fulfilled"&&i.value).length;return console.log(`Successfully loaded ${s} of ${e.length} platform images`),s>0}catch(e){return console.error("Error loading platform images:",e),!1}}}ss(Lr,"urlCache",new Map),ss(Lr,"inProgressFetches",new Map),ss(Lr,"fallbackUrls",new Map),ss(Lr,"errorCount",new Map);const mse=Object.freeze(Object.defineProperty({__proto__:null,default:Lr},Symbol.toStringTag,{value:"Module"})),ci={fanduel:{id:"fanduel",name:"FanDuel",logo:"fanduel.png"},draftkings:{id:"draftkings",name:"DraftKings",logo:"draftkingsFantasy.png"},underdog:{id:"underdog",name:"Underdog",logo:"underdog.jpeg"},sleeper:{id:"sleeper",name:"Sleeper",logo:"sleeperFantasy.png"},cbs:{id:"cbs",name:"CBS",logo:"CBS Sports.png"},yahoo:{id:"yahoo",name:"Yahoo",logo:"yahoofantasy.png"},espnbet:{id:"espnbet",name:"ESPNBet",logo:"espnbet.png"},espnfantasy:{id:"espnfantasy",name:"ESPN Fantasy",logo:"espnFantasy.png"},fanatics:{id:"fanatics",name:"Fanatics",logo:"fanatics.png"},betmgm:{id:"betmgm",name:"BetMGM",logo:"betmgm.png"},caesars:{id:"caesars",name:"Caesars",logo:"caesars.png"},pokerstars:{id:"pokerstars",name:"PokerStars",logo:"pokerstars.png"},betr:{id:"betr",name:"Betr",logo:"betrFantasy.png"},prizepicks:{id:"prizepicks",name:"PrizePicks",logo:"prizepicks.png"},myprize:{id:"myprize",name:"MyPrize",logo:"MyPrize.png"},dwolla:{id:"dwolla",name:"Dwolla Balance",logo:"BankrollLogoTransparent.png"}},Gh="/images/default.png";class fH{constructor(){if(!dt)throw new Error("Firestore must be initialized before using WalletService");this.firestore=dt,Ro.clearCache()}validatePlatformId(e){return e in ci}async getPlatformInfo(e){if(this.validatePlatformId(e)){const n=ci[e];try{const r=await Lr.getImageUrl(n.logo);return{id:n.id,name:n.name,logo:r||Gh}}catch(r){return console.error("Error loading platform logo:",r),{id:n.id,name:n.name,logo:Gh}}}return{id:e,name:`Platform ${e}`,logo:Gh}}calculateTotalBonusBalance(e=[]){return e.filter(n=>n.status==="active"&&(!n.dateExpires||zj(n.dateExpires)>new Date)).reduce((n,r)=>n+(r.amount||0),0)}async createInitialSubWallet(e){const n=await this.getPlatformInfo(e);return{platformId:n.id,name:n.name,logo:n.logo,cashBalance:0,bonusBalances:[],totalBonusBalance:0,lastUpdated:Fe.now(),status:"active",connected:!0,created:!0,loading:!1,notifiedRedeemable:!1}}async createSubWallet(e,n){var s;if(!this.validatePlatformId(n))throw new Error(`Invalid platform ID: ${n}`);const r=Vn(this.firestore,"users",e);try{await qk(this.firestore,async l=>{const c=await l.get(r);if(!c.exists())throw new Error("User document not found");if((c.data().subWallets||{})[n]){console.log("SubWallet already exists:",n);return}const p=await this.createInitialSubWallet(n);p.bonusBalances=[],p.totalBonusBalance=0,p.created=!0,p.connected=!0,l.update(r,{[`subWallets.${n}`]:p,lastUpdated:Fe.now()}),console.log("Creating subWallet:",{platformId:n,subWallet:p})});const o=(await yi(r)).data(),a=(s=o==null?void 0:o.subWallets)==null?void 0:s[n];if(console.log("Created subWallet in Firebase:",{platformId:n,subWallet:a}),!a)throw new Error("Failed to verify wallet creation")}catch(i){throw console.error("Error creating wallet:",i),i}}async initializeUserWallet(e){const n=Vn(this.firestore,"users",e);try{Ro.clearCache(),await qk(this.firestore,async i=>{const o=await i.get(n),a=await Lr.getImageUrl("BankrollLogoTransparent.png"),l={id:e,totalCashBalance:0,totalBonusBalance:0,availableWithdrawal:0,investableBalance:0,subWallets:{},bankroll:{balance:0,logo:a||Gh},lastUpdated:Fe.now()};for(const c of Object.keys(ci))l.subWallets[c]=await this.createInitialSubWallet(c);if(!o.exists())await i.set(n,l),console.log("Initializing new user wallet:",l);else{const d=o.data().subWallets||{};for(const f of Object.keys(ci))d[f]||(d[f]=await this.createInitialSubWallet(f));await i.update(n,{subWallets:d,lastUpdated:Fe.now()})}console.log("Initialized wallet structure:",{userId:e,subWallets:l.subWallets})});const r=await yi(n);if(!r.exists())throw new Error("Failed to verify wallet initialization - document not found");const s=r.data();if(!s.subWallets)throw new Error("Failed to verify wallet initialization - subWallets not found");Object.keys(ci).forEach(i=>{if(!s.subWallets[i])throw new Error(`Failed to verify wallet initialization - ${i} wallet not found`)}),console.log("Successfully verified wallet initialization")}catch(r){throw console.error("Error initializing wallet:",r),r}}}new fH;const a4=T.createContext(),gse=()=>{const t=T.useContext(a4);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t},Dr="/images/default.png",Kh=()=>({bankroll:{balance:0,logo:Dr},subWallets:Object.keys(ci).reduce((t,e)=>(t[e]={platformId:e,name:ci[e].name,logo:Dr,cashBalance:0,bonusBalances:[],totalBonusBalance:0,lastUpdated:new Date,status:"active",connected:!1,created:!1,loading:!1,notifiedRedeemable:!1},t),{}),lastUpdated:new Date}),pH=({children:t})=>{const{currentUser:e}=Ut(),[n,r]=T.useState(null),[s,i]=T.useState(!1),[o,a]=T.useState(!1);T.useEffect(()=>{if(!e||o)return;(async()=>{try{const f=await Lr.getImageUrl("BankrollLogoTransparent.png"),p=Object.entries(ci).map(async([v,S])=>{try{const x=await Lr.getImageUrl(S.logo);return[v,x||Dr]}catch(x){return console.error(`Error loading logo for ${v}:`,x),[v,Dr]}}),m=await Promise.all(p),w=Object.fromEntries(m);r(v=>{if(!v)return Kh();const S={...v.subWallets};return Object.entries(S).forEach(([x,_])=>{S[x]={..._,logo:w[x]||Dr}}),{...v,bankroll:{...v.bankroll,logo:f||Dr},subWallets:S}}),a(!0)}catch(f){console.error("Error loading wallet images:",f),r(p=>p?{...p,bankroll:{...p.bankroll,logo:Dr},subWallets:Object.entries(p.subWallets).reduce((m,[w,v])=>({...m,[w]:{...v,logo:Dr}}),{})}:Kh()),a(!0)}})()},[e,o]),T.useEffect(()=>{if(!e){r(null),i(!1),a(!1);return}i(!0);const d=e.uid||e.id;if(!d){console.warn("No user ID found for current user"),r(Kh()),i(!1);return}const f=Vn(dt,"users",d),p=EB(f,m=>{if(m.exists()){const w=m.data();r(v=>{var x;const S={...(v==null?void 0:v.subWallets)||{}};return Object.entries(w.subWallets||{}).forEach(([_,E])=>{var P,R,N;S[_]={...((P=v==null?void 0:v.subWallets)==null?void 0:P[_])||{},...E,logo:((N=(R=v==null?void 0:v.subWallets)==null?void 0:R[_])==null?void 0:N.logo)||Dr,bonusBalances:E.bonusBalances||[],totalBonusBalance:Jq(E.bonusBalances||[])}}),{...w,bankroll:{...w.bankroll,logo:((x=v==null?void 0:v.bankroll)==null?void 0:x.logo)||Dr},subWallets:S}})}else r(Kh());i(!1)},m=>{console.error("Error in wallet listener:",m),i(!1)});return()=>{p()}},[e]);const c={wallets:n,loading:s,refreshWallet:async()=>Promise.resolve()};return u.jsx(a4.Provider,{value:c,children:t})},l4=()=>"https://bankroll.live",Xh=t=>`${l4()}/join/group/${t}`,yse=t=>`${l4()}/invite/${t}`,c4=T.createContext(),vse=()=>{const t=T.useContext(c4);if(!t)throw new Error("useGroup must be used within a GroupProvider");return t},mH=({children:t})=>{const{currentUser:e}=Ut(),[n,r]=T.useState([]),[s,i]=T.useState(!0),[o,a]=T.useState(null),l=async v=>{if(!v)return console.warn("getUserData called with no userId"),null;try{const S=Vn(dt,"users",v),x=await yi(S);if(x.exists()){const R=x.data();let N=R.profileImage||R.photoURL;if(!N){const y=v.split("").reduce((I,A)=>I+A.charCodeAt(0),0)%30+1;N=`/images/profile_${y}.${y===1||y===4||y===16||y===30?"jpeg":"png"}`}return{uid:v,...R,photoURL:N,profileImage:N,displayName:R.firstName&&R.lastName?`${R.firstName} ${R.lastName}`:R.displayName||R.username||R.email||"Unknown User",groups:R.groups||[]}}const E=v.split("").reduce((R,N)=>R+N.charCodeAt(0),0)%30+1,P=`/images/profile_${E}.${E===1||E===4||E===16||E===30?"jpeg":"png"}`;return{uid:v,displayName:"Unknown User",photoURL:P,profileImage:P,groups:[]}}catch(S){console.error("Error fetching user data:",S);const _=v.split("").reduce((P,R)=>P+R.charCodeAt(0),0)%30+1,E=`/images/profile_${_}.${_===1||_===4||_===16||_===30?"jpeg":"png"}`;return{uid:v,displayName:"Unknown User",photoURL:E,profileImage:E,groups:[]}}},c=(v,S)=>({platformId:`group_${v}`,groupId:v,ownerId:S,name:"Group Wallet",logo:"/images/BankrollLogoTransparent.png",cashBalance:0,bonusBalances:[],totalBonusBalance:0,lastUpdated:new Date,status:"active",connected:!0,memberBalances:{},expenses:[]});T.useEffect(()=>{if(!e){r([]),i(!1);return}(async()=>{try{a(null),i(!0);const S=e.uid||e.id;if(!S){console.warn("No user ID found for current user"),r([]),i(!1);return}const x=Er(dt,"groups"),_=Zs(x,On("memberIds","array-contains",S)),E=await ei(_),P=[];for(const R of E.docs){const N=R.data();N.memberIds=N.memberIds||[];const k=await l(N.ownerId),y=N.memberIds.map(D=>l(D)),A=(await Promise.all(y)).filter(D=>D!==null),j=Array.from(new Map(A.map(D=>[D.uid,D])).values());let O=N.wallet;O||(O=c(R.id,N.ownerId),await ka(R.ref,{wallet:O})),P.push({id:R.id,name:N.name||"",description:N.description||"",emoji:N.emoji||"👥",ownerId:N.ownerId,owner:k,members:j,memberIds:N.memberIds,pendingMembers:N.pendingMembers||[],dateCreated:N.dateCreated||new Date().toISOString(),isHidden:N.isHidden||!1,visibility:N.visibility||"private",inviteLink:Xh(R.id),status:N.status||"active",wallet:O,type:N.type||"default",leagueInfo:N.leagueInfo||null})}r(P)}catch(S){console.error("Error fetching groups:",S),a("Failed to load groups")}finally{i(!1)}})()},[e]);const w={groups:n,loading:s,error:o,createGroup:async v=>{if(!e)throw new Error("Must be logged in to create a group");try{const S=e.uid||e.id;if(!S)throw new Error("No user ID found");const x=Vn(dt,"users",S),_=await yi(x);_.exists()||await setDoc(x,{groups:[],createdAt:new Date,email:e.email});const E=ab(),P=Er(dt,"groups"),R=await l(S),N=c(E,S),k={id:E,name:v.name,emoji:v.emoji||"👥",description:v.description||"",ownerId:S,owner:R,members:[R],memberIds:[S],pendingMembers:[],dateCreated:new Date().toISOString(),isHidden:!1,visibility:v.visibility||"private",inviteLink:Xh(E),status:"active",wallet:N,type:v.type||"default",leagueInfo:v.leagueInfo||null},y=await Vx(P,k);await ka(y,{id:y.id});const I=_.exists()?_.data().groups||[]:[];return await ka(x,{groups:[...I,y.id]}),r(A=>[...A,{...k,id:y.id}]),y.id}catch(S){throw console.error("Error creating group:",S),S}},getGroup:async v=>{try{if(!v)throw new Error("Group ID is required");const S=Vn(dt,"groups",v),x=await yi(S);if(x.exists()){const _=x.data();_.memberIds=_.memberIds||[];const E=await l(_.ownerId),P=_.memberIds.map(I=>l(I)),N=(await Promise.all(P)).filter(I=>I!==null),k=Array.from(new Map(N.map(I=>[I.uid,I])).values());let y=_.wallet;return y||(y=c(v,_.ownerId),await ka(S,{wallet:y})),{id:x.id,name:_.name||"",description:_.description||"",emoji:_.emoji||"👥",ownerId:_.ownerId,owner:E,members:k,memberIds:_.memberIds,pendingMembers:_.pendingMembers||[],dateCreated:_.dateCreated||new Date().toISOString(),isHidden:_.isHidden||!1,visibility:_.visibility||"private",inviteLink:Xh(x.id),status:_.status||"active",wallet:y,type:_.type||"default",leagueInfo:_.leagueInfo||null}}else throw new Error("Group not found")}catch(S){throw console.error("Error fetching group:",S),S}},deleteGroup:async v=>{try{if(!e)throw new Error("Must be logged in to delete a group");if(!v)throw new Error("Group ID is required");const S=e.uid||e.id;if(!S)throw new Error("No user ID found");const x=Vn(dt,"groups",v),_=await yi(x);if(!_.exists())throw new Error("Group not found");if(_.data().ownerId!==S)throw new Error("Only the group owner can delete the group");return await FR(x),r(P=>P.filter(R=>R.id!==v)),!0}catch(S){throw console.error("Error deleting group:",S),S}},refreshGroups:async()=>{if(e)try{i(!0),a(null);const v=e.uid||e.id;if(!v){console.warn("No user ID found for current user"),r([]),i(!1);return}const S=Er(dt,"groups"),x=Zs(S,On("memberIds","array-contains",v)),_=await ei(x),E=[];for(const P of _.docs){const R=P.data();R.memberIds=R.memberIds||[];const N=await l(R.ownerId),k=R.memberIds.map(O=>l(O)),I=(await Promise.all(k)).filter(O=>O!==null),A=Array.from(new Map(I.map(O=>[O.uid,O])).values());let j=R.wallet;j||(j=c(P.id,R.ownerId),await ka(P.ref,{wallet:j})),E.push({id:P.id,name:R.name||"",description:R.description||"",emoji:R.emoji||"👥",ownerId:R.ownerId,owner:N,members:A,memberIds:R.memberIds,pendingMembers:R.pendingMembers||[],dateCreated:R.dateCreated||new Date().toISOString(),isHidden:R.isHidden||!1,visibility:R.visibility||"private",inviteLink:Xh(P.id),status:R.status||"active",wallet:j,type:R.type||"default",leagueInfo:R.leagueInfo||null})}r(E)}catch(v){console.error("Error refreshing groups:",v),a("Failed to refresh groups")}finally{i(!1)}}};return u.jsx(c4.Provider,{value:w,children:t})},Ou=class Ou{constructor(){this.cache=new Map,this.cacheTimeout=5*60*1e3,this.ipLocationCache=null,this.ipLocationCacheTimeout=30*60*1e3}async getBrowserLocation(){return new Promise((e,n)=>{if(!navigator.geolocation){n(new Error("Geolocation is not supported by this browser"));return}const r={enableHighAccuracy:!1,timeout:1e4,maximumAge:this.cacheTimeout};navigator.geolocation.getCurrentPosition(async s=>{try{const{latitude:i,longitude:o}=s.coords,a=await this.reverseGeocode(i,o),l={latitude:i,longitude:o,accuracy:s.coords.accuracy,source:"browser",timestamp:Date.now(),...a};this.cache.set("browser_location",{data:l,timestamp:Date.now()}),e(l)}catch(i){console.warn("Error reverse geocoding browser location:",i),e({latitude,longitude,accuracy:s.coords.accuracy,source:"browser",timestamp:Date.now(),state:null,stateCode:null,country:null,countryCode:null})}},s=>{console.warn("Browser geolocation error:",s.message),n(s)},r)})}async getIPLocation(){try{if(this.ipLocationCache&&Date.now()-this.ipLocationCache.timestamp<this.ipLocationCacheTimeout)return this.ipLocationCache.data;const e=["https://ipapi.co/json/","https://api.ipify.org?format=json","https://freegeoip.app/json/"];let n=null;try{const r=await fetch("https://ipapi.co/json/",{timeout:5e3});if(r.ok){const s=await r.json();if(s.error)throw new Error(`IP location service error: ${s.reason}`);n={latitude:s.latitude,longitude:s.longitude,city:s.city,state:s.region,stateCode:s.region_code,country:s.country_name,countryCode:s.country_code,zipCode:s.postal,source:"ip",timestamp:Date.now(),accuracy:5e4}}}catch(r){console.warn("Primary IP location service failed:",r)}if(!n)try{const r=await fetch("https://freegeoip.app/json/",{timeout:5e3});if(r.ok){const s=await r.json();n={latitude:s.latitude,longitude:s.longitude,city:s.city,state:s.region_name,stateCode:s.region_code,country:s.country_name,countryCode:s.country_code,zipCode:s.zip_code,source:"ip",timestamp:Date.now(),accuracy:5e4}}}catch(r){console.warn("Backup IP location service failed:",r)}if(!n)throw new Error("All IP location services failed");return n.countryCode==="US"&&n.state&&!n.stateCode&&(n.stateCode=Ou.US_STATES[n.state]||n.state),this.ipLocationCache={data:n,timestamp:Date.now()},n}catch(e){throw console.error("IP location detection failed:",e),e}}async reverseGeocode(e,n){try{const r=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e}&longitude=${n}&localityLanguage=en`,{timeout:5e3});if(!r.ok)throw new Error(`Reverse geocoding failed: ${r.status}`);const s=await r.json(),i={city:s.city||s.locality,state:s.principalSubdivision,stateCode:s.principalSubdivisionCode?s.principalSubdivisionCode.split("-")[1]:null,country:s.countryName,countryCode:s.countryCode,zipCode:s.postcode};return i.countryCode==="US"&&i.state&&!i.stateCode&&(i.stateCode=Ou.US_STATES[i.state]||i.state),i}catch(r){return console.warn("Reverse geocoding failed:",r),{city:null,state:null,stateCode:null,country:null,countryCode:null,zipCode:null}}}async detectLocation(){try{const e=await this.getBrowserLocation();return console.log("Location detected via browser:",e),e}catch(e){console.warn("Browser geolocation failed, trying IP location:",e.message);try{const n=await this.getIPLocation();return console.log("Location detected via IP:",n),n}catch(n){throw console.error("All location detection methods failed:",n),new Error("Unable to detect location: Both browser and IP location services failed")}}}getCachedLocation(){const e=this.cache.get("browser_location");return e&&Date.now()-e.timestamp<this.cacheTimeout?e.data:this.ipLocationCache&&Date.now()-this.ipLocationCache.timestamp<this.ipLocationCacheTimeout?this.ipLocationCache.data:null}setManualLocation(e){const n={...e,source:"manual",timestamp:Date.now()};return this.cache.set("manual_location",{data:n,timestamp:Date.now()}),n}getManualLocation(){const e=this.cache.get("manual_location");return e?e.data:null}clearCache(){this.cache.clear(),this.ipLocationCache=null}isPlatformAvailableInLocation(e,n){if(!n||!e||!e.restrictedStates&&!e.allowedStates&&!e.restrictedCountries&&!e.allowedCountries)return!0;const r=n.countryCode,s=n.stateCode;return!(e.restrictedCountries&&e.restrictedCountries.includes(r)||e.allowedCountries&&!e.allowedCountries.includes(r)||r==="US"&&s&&(e.restrictedStates&&e.restrictedStates.includes(s)||e.allowedStates&&!e.allowedStates.includes(s)))}getLocationDisclaimer(e){if(!e)return"Please gamble responsibly. Gambling regulations vary by location.";const{countryCode:n,stateCode:r}=e;return n==="US"?{NV:"Nevada residents: Gambling problem? Call 1-800-522-4700.",NJ:"New Jersey residents: If you or someone you know has a gambling problem, call 1-800-GAMBLER.",PA:"Pennsylvania residents: If you or someone you know has a gambling problem, call 1-800-GAMBLER.",MI:"Michigan residents: If you or someone you know has a gambling problem, call 1-800-270-7117.",CA:"California residents: Gambling problem? Call 1-800-GAMBLER.",NY:"New York residents: If you or someone you know has a gambling problem, call 1-877-8-HOPENY."}[r]||"Please gamble responsibly. If you or someone you know has a gambling problem, call 1-800-522-4700.":"Please gamble responsibly. Gambling regulations vary by location."}formatLocationDisplay(e){if(!e)return"Location not detected";const n=[];return e.city&&n.push(e.city),e.stateCode&&e.countryCode==="US"?n.push(e.stateCode):e.state&&n.push(e.state),e.countryCode&&e.countryCode!=="US"&&n.push(e.countryCode),n.join(", ")||`${e.source} location`}};ss(Ou,"US_STATES",{Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","District of Columbia":"DC"});let Uv=Ou;const Qn=new Uv,u4=T.createContext();function gH({children:t}){const[e,n]=T.useState(null),[r,s]=T.useState(!1),[i,o]=T.useState(null),[a,l]=T.useState("unknown"),[c,d]=T.useState(!1),[f,p]=T.useState(!1);T.useEffect(()=>{(()=>{const k=Qn.getManualLocation();if(k){n(k),d(!0);return}const y=Qn.getCachedLocation();y&&(n(y),p(!0))})()},[]);const m=T.useCallback(async()=>{if(!navigator.permissions||!navigator.permissions.query)return"unknown";try{const N=await navigator.permissions.query({name:"geolocation"});return l(N.state),N.onchange=()=>{l(N.state)},N.state}catch(N){return console.warn("Could not check geolocation permission:",N),"unknown"}},[]),w=T.useCallback(async(N=!1)=>{if(c&&!N||f&&!N&&e)return e;s(!0),o(null);try{await m();const k=await Qn.detectLocation();return n(k),p(!0),o(null),console.log("Location detected successfully:",k),k}catch(k){return console.error("Location detection failed:",k),o(k.message),p(!0),null}finally{s(!1)}},[c,f,e,m]),v=T.useCallback(N=>{try{const k=Qn.setManualLocation(N);return n(k),d(!0),o(null),console.log("Manual location set:",k),k}catch(k){return console.error("Failed to set manual location:",k),o("Failed to set manual location"),null}},[]),S=T.useCallback(async()=>{Qn.clearCache(),d(!1),n(null),p(!1),await w(!0)},[w]);T.useEffect(()=>{(async()=>{if(e||f||c)return;const k=await m();(k==="granted"||k==="unknown")&&w()})()},[e,f,c,w,m]);const x=T.useCallback(N=>Qn.isPlatformAvailableInLocation(N,e),[e]),_=T.useCallback(()=>Qn.getLocationDisclaimer(e),[e]),E=T.useCallback(()=>Qn.formatLocationDisplay(e),[e]),P=T.useCallback(async()=>{try{s(!0),await w(!0)}catch(N){console.error("Failed to request location permission:",N)}},[w]),R={userLocation:e,locationLoading:r,locationError:i,permissionStatus:a,manualLocationSet:c,locationDetectionAttempted:f,detectLocation:w,setManualLocation:v,clearManualLocation:S,requestLocationPermission:P,checkPermissionStatus:m,isPlatformAvailable:x,getLocationDisclaimer:_,formatLocationDisplay:E,hasLocation:!!e,isUSLocation:(e==null?void 0:e.countryCode)==="US",currentState:e==null?void 0:e.stateCode,currentCountry:e==null?void 0:e.countryCode,locationSource:e==null?void 0:e.source};return u.jsx(u4.Provider,{value:R,children:t})}function d4(){const t=T.useContext(u4);if(t===void 0)throw new Error("useLocation must be used within a LocationProvider");return t}const be={FANTASY:"FANTASY",CASINO:"CASINO",SPORTS:"SPORTS",SWEEPS_CASINO:"SWEEPS_CASINO"},h4=[{id:"playstar",name:"PlayStar Casino NJ",category:be.CASINO,value:.5,imageFile:"playstar.png",gradientStart:"#FBBF24",gradientEnd:"#D97706",promoOffer:"100% Deposit Match up to $500 + 500 Bonus Spins",url:"https://click.trackplaystar.com/track/314f996a-668d-400d-8c9b-97d28c3fde31?type=seo&s1=662608032",allowedStates:["NJ"],allowedCountries:["US"],ageRequirement:21,locationSpecificOffers:{NJ:{promoOffer:"100% Deposit Match up to $500 + 500 Bonus Spins",disclaimer:"New Jersey residents only. Must be 21+. Gambling Problem? Call 1-800-GAMBLER."}}},{id:"mcluck",name:"McLuck",category:be.SWEEPS_CASINO,value:.5,imageFile:"mcluck.png",gradientStart:"#FFD700",gradientEnd:"#B8860B",url:"https://tracking.b2-partners.com/visit/?bta=3035&nci=5356&afp1=662608032&utm_campaign=lhr&utm_creative=662608032&referred_by=PLAYBONUS&corid",restrictedStates:["WA","ID","MT","NV"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"Free Sweeps Coins on Signup",disclaimer:"Must be 18+. Sweepstakes rules apply. Void where prohibited."}}},{id:"pulsz",name:"Pulsz",category:be.SWEEPS_CASINO,value:.5,imageFile:"pulsz.png",gradientStart:"#FCD34D",gradientEnd:"#F59E0B",url:"https://affiliates.pulsz.com/visit/?bta=3035&nci=5348&afp1=142603201&utm_campaign=lhr&utm_creative=142603201&referred_by=BONUSPLAY&corid",restrictedStates:["WA","ID","MT","NV"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"Free Sweeps Coins on Signup",disclaimer:"Must be 18+. Sweepstakes rules apply. Void where prohibited."}}},{id:"hellomillions",name:"HelloMillions",category:be.SWEEPS_CASINO,value:.5,imageFile:"hellomillions.png",gradientStart:"#FCD34D",gradientEnd:"#F59E0B",url:"https://tracking.b2-partners.com/visit/?bta=3035&nci=5357&afp1=662608032&utm_campaign=lhr&utm_creative=662608032&referred_by=BONUSPLAY&corid",restrictedStates:["WA","ID","MT","NV"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"Free Sweeps Coins on Signup",disclaimer:"Must be 18+. Sweepstakes rules apply. Void where prohibited."}}},{id:"draftkings",name:"DraftKings",category:be.FANTASY,value:.5,imageFile:"draftkingsFantasy.png",gradientStart:"#FBBF24",gradientEnd:"#D97706",restrictedStates:["WA","ID","MT","NV","AZ","LA","HI"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"New User Bonus Available",disclaimer:"Must be 18+. Fantasy sports not available in all states."}}},{id:"fanduel",name:"FanDuel",category:be.FANTASY,value:.5,imageFile:"fanduel.png",gradientStart:"#60A5FA",gradientEnd:"#2563EB",restrictedStates:["WA","ID","MT","NV","AZ","LA","HI"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"Special Signup Bonus",disclaimer:"Must be 18+. Fantasy sports not available in all states."}}},{id:"sleeper",name:"Sleeper",category:be.FANTASY,value:.5,imageFile:"sleeper.png",gradientStart:"#34D399",gradientEnd:"#059669"},{id:"espnfantasy",name:"ESPN Fantasy",category:be.FANTASY,value:.5,imageFile:"espnFantasy.png",gradientStart:"#F87171",gradientEnd:"#DC2626"},{id:"prizepicks",name:"PrizePicks",category:be.FANTASY,value:.5,imageFile:"prizepicks.png",gradientStart:"#A78BFA",gradientEnd:"#7C3AED",allowedStates:["AK","CA","FL","GA","IL","KS","KY","MN","NE","NM","NC","OK","OR","RI","SC","SD","TX","UT","VT","WI","WY"],allowedCountries:["US"],ageRequirement:18,locationSpecificOffers:{default:{promoOffer:"Get 100% deposit match up to $100",disclaimer:"First-time users only. Must be 18+. Not available in all states."}}},{id:"pokerstars",name:"PokerStars",category:be.CASINO,value:.5,imageFile:"pokerstars.png",gradientStart:"#F472B6",gradientEnd:"#DB2777",allowedStates:["MI","NJ","PA"],allowedCountries:["US"],ageRequirement:21,locationSpecificOffers:{MI:{promoOffer:"$50 free play with first deposit",disclaimer:"Michigan residents only. Must be 21+. Gambling Problem? Call 1-800-270-7117."},NJ:{promoOffer:"$50 free play with first deposit",disclaimer:"New Jersey residents only. Must be 21+. Gambling Problem? Call 1-800-GAMBLER."},PA:{promoOffer:"$50 free play with first deposit",disclaimer:"Pennsylvania residents only. Must be 21+. Gambling Problem? Call 1-800-GAMBLER."}}},{id:"betmgm",name:"BetMGM",category:be.SPORTS,value:.5,imageFile:"betmgm.png",gradientStart:"#818CF8",gradientEnd:"#4F46E5",allowedStates:["AZ","CO","IA","IL","IN","KS","LA","MD","MI","NJ","NY","PA","TN","VA","WV","WY","DC","NV","OR"],allowedCountries:["US"],ageRequirement:21,locationSpecificOffers:{default:{promoOffer:"Bet $10, Get $200 in Bonus Bets",disclaimer:"Must be 21+. New customers only. Terms apply. Gambling Problem? Call 1-800-522-4700."}}},{id:"caesars",name:"Caesars",category:be.SPORTS,value:.5,imageFile:"caesars.png",gradientStart:"#FCD34D",gradientEnd:"#F59E0B",allowedStates:["AZ","CO","IA","IL","IN","KS","LA","MD","MI","NJ","NY","PA","TN","VA","WV","WY","DC","NV"],allowedCountries:["US"],ageRequirement:21,locationSpecificOffers:{default:{promoOffer:"Bet $1, Get $250 in Bonus Bets",disclaimer:"Must be 21+. New customers only. Terms apply. Gambling Problem? Call 1-800-522-4700."}}},{id:"underdog",name:"Underdog",category:be.SPORTS,value:.5,imageFile:"underdog.jpeg",gradientStart:"#FB7185",gradientEnd:"#E11D48"},{id:"betr",name:"Betr",category:be.SPORTS,value:.5,imageFile:"betr.png",gradientStart:"#2DD4BF",gradientEnd:"#0D9488"},{id:"betrivers",name:"BetRivers",category:be.SPORTS,value:.5,imageFile:"betRivers.png",gradientStart:"#94A3B8",gradientEnd:"#475569"},{id:"wynnbet",name:"WynnBet",category:be.SPORTS,value:.5,imageFile:null,gradientStart:"#C084FC",gradientEnd:"#9333EA"},{id:"wowvegas",name:"WowVegas",category:be.SWEEPS_CASINO,value:.5,imageFile:"wowvegas.png",gradientStart:"#F472B6",gradientEnd:"#DB2777",disabled:!0,disabledText:"Coming Soon"},{id:"high5",name:"High 5",category:be.SWEEPS_CASINO,value:.5,imageFile:"high5.png",gradientStart:"#818CF8",gradientEnd:"#4F46E5",disabled:!0,disabledText:"Coming Soon"},{id:"realprize",name:"Realprize",category:be.SWEEPS_CASINO,value:.5,imageFile:"realprize.webp",gradientStart:"#FBBF24",gradientEnd:"#D97706",disabled:!0,disabledText:"Coming Soon"},{id:"crowncoins",name:"Crown Coins",category:be.SWEEPS_CASINO,value:.5,imageFile:"crowncoins.png",gradientStart:"#FCD34D",gradientEnd:"#F59E0B",disabled:!0,disabledText:"Coming Soon"},{id:"stake",name:"Stake",category:be.SWEEPS_CASINO,value:.5,imageFile:"Stake.jpg",gradientStart:"#A78BFA",gradientEnd:"#7C3AED",disabled:!0,disabledText:"Coming Soon"},{id:"carnivalciti",name:"Carnival Citi",category:be.SWEEPS_CASINO,value:.5,imageFile:"carnivalciti.jpg",gradientStart:"#FB7185",gradientEnd:"#E11D48",disabled:!0,disabledText:"Coming Soon"},{id:"jackpota",name:"Jackpota",category:be.SWEEPS_CASINO,value:.5,imageFile:"jackpota.png",gradientStart:"#C084FC",gradientEnd:"#9333EA",disabled:!0,disabledText:"Coming Soon"},{id:"nolimit",name:"NoLimit",category:be.SWEEPS_CASINO,value:.5,imageFile:"nolimit.png",gradientStart:"#F87171",gradientEnd:"#DC2626",disabled:!0,disabledText:"Coming Soon"},{id:"megabonanza",name:"Megabonanza",category:be.SWEEPS_CASINO,value:.5,imageFile:"megabonanza.webp",gradientStart:"#94A3B8",gradientEnd:"#475569",disabled:!0,disabledText:"Coming Soon"},{id:"moonspin",name:"Moonspin",category:be.SWEEPS_CASINO,value:.5,imageFile:"moonspin.jpg",gradientStart:"#F472B6",gradientEnd:"#DB2777",disabled:!0,disabledText:"Coming Soon"},{id:"moneyfactory",name:"Money Factory",category:be.SWEEPS_CASINO,value:.5,imageFile:"moneyfactory.webp",gradientStart:"#818CF8",gradientEnd:"#4F46E5",disabled:!0,disabledText:"Coming Soon"},{id:"luckybird",name:"Luckybird",category:be.SWEEPS_CASINO,value:.5,imageFile:"luckybird.png",gradientStart:"#2DD4BF",gradientEnd:"#0D9488",disabled:!0,disabledText:"Coming Soon"},{id:"funrize",name:"Funrize",category:be.SWEEPS_CASINO,value:.5,imageFile:"funrize.webp",gradientStart:"#FBBF24",gradientEnd:"#D97706",disabled:!0,disabledText:"Coming Soon"},{id:"fortunewheelz",name:"Fortune Wheelz",category:be.SWEEPS_CASINO,value:.5,imageFile:"fortunewheelz.png",gradientStart:"#60A5FA",gradientEnd:"#2563EB",disabled:!0,disabledText:"Coming Soon"},{id:"funzcity",name:"FunzCity",category:be.SWEEPS_CASINO,value:.5,imageFile:"funzcity.webp",gradientStart:"#FCD34D",gradientEnd:"#F59E0B",disabled:!0,disabledText:"Coming Soon"},{id:"chumba",name:"Chumba",category:be.SWEEPS_CASINO,value:.5,imageFile:"chumba.png",gradientStart:"#A78BFA",gradientEnd:"#7C3AED",disabled:!0,disabledText:"Coming Soon"},{id:"luckyland",name:"Luckyland",category:be.SWEEPS_CASINO,value:.5,imageFile:"luckyland.png",gradientStart:"#FB7185",gradientEnd:"#E11D48",disabled:!0,disabledText:"Coming Soon"},{id:"betriversnet",name:"BetRivers.Net",category:be.SWEEPS_CASINO,value:.5,imageFile:"betrivers.jpg",gradientStart:"#C084FC",gradientEnd:"#9333EA",disabled:!0,disabledText:"Coming Soon"},{id:"sportsmillions",name:"Sports Millions",category:be.SWEEPS_CASINO,value:.5,imageFile:null,gradientStart:"#F472B6",gradientEnd:"#DB2777",url:"https://tracking.b2-partners.com/visit/?bta=3035&nci=5414&afp={clickid}&afp1=662608032&utm_campaign=lhr&utm_creative=662608032&referred_by=PLAYBONUS&corid",disabled:!0,disabledText:"Coming Soon"}],yH=Object.freeze(Object.defineProperty({__proto__:null,ALL_PLATFORMS:h4,PLATFORM_CATEGORIES:be},Symbol.toStringTag,{value:"Module"})),f4=T.createContext(),vH=["ALL","SWEEPS_CASINO","FANTASY","CASINO","SPORTS"],_H=vH.map(t=>({id:t,label:t==="SWEEPS_CASINO"?"SWEEPS CASINO":t})),wH=["playstar","mcluck","pulsz","hellomillions"],is=h4.map(t=>({...t,imageUrl:t.imageFile?`/images/${t.imageFile}`:null,priority:wH.includes(t.id)}));function xH({children:t,userLocation:e=null}){const[n,r]=T.useState({}),[s,i]=T.useState(!0),[o,a]=T.useState(0),[l,c]=T.useState({}),[d,f]=T.useState(!1),[p,m]=T.useState(is),w=T.useRef(!1),v=T.useRef({}),S=T.useRef(null),x=T.useRef(null),_=y=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{a(y)},500)},E=T.useCallback(async y=>{if(!y.imageFile||v.current[y.id])return v.current[y.id]||null;try{const I=`/images/${y.imageFile}`;try{const A=new Image;return A.src=I,await new Promise((j,O)=>{A.onload=j,A.onerror=O,setTimeout(O,1e3)}),v.current[y.id]=I,I}catch{const j=await Lr.getImageUrl(y.imageFile);if(j)return v.current[y.id]=j,j}}catch(I){return console.error(`Failed to load image for ${y.id}:`,I),null}},[]);T.useEffect(()=>((async()=>{if(w.current||d)return;w.current=!0,i(!0);let I=0;const A={...v.current};try{const j=is.filter(D=>D.priority),O=await Promise.allSettled(j.map(async D=>{const Q=await E(D);return Q&&(A[D.id]=Q,I++),{id:D.id,url:Q}}));r(A),a(I),f(!0)}catch(j){console.error("Error loading priority images:",j)}finally{i(!1),w.current=!1}})(),()=>{w.current=!1,S.current&&clearTimeout(S.current)}),[E]),T.useEffect(()=>{if(!d)return;const y=async()=>{if(w.current)return;w.current=!0;const I={...n},A={...l};let j=Object.keys(I).length;const O=8;try{const D=is.filter(Q=>!Q.priority&&!v.current[Q.id]);for(let Q=0;Q<D.length;Q+=O){const ne=D.slice(Q,Q+O),ue=await Promise.allSettled(ne.map(async oe=>{const $=await E(oe);return $?(I[oe.id]=$,j++):A[oe.id]=!0,{id:oe.id,url:$}}));r({...I}),_(j),await new Promise(oe=>setTimeout(oe,50))}}catch(D){console.warn("Error loading remaining images:",D)}finally{r(I),c(A),a(j),i(!1),w.current=!1}};return window.requestIdleCallback?window.requestIdleCallback(()=>y(),{timeout:2e3}):setTimeout(y,500),()=>{w.current=!1}},[d,E,n,l]),T.useEffect(()=>{if(typeof IntersectionObserver>"u")return;const y=new IntersectionObserver(I=>{I.forEach(A=>{if(A.isIntersecting){const j=A.target.dataset.platformId;if(j&&!v.current[j]){const O=is.find(D=>D.id===j);O&&E(O).then(D=>{D&&r(Q=>({...Q,[j]:D}))})}y.unobserve(A.target)}})},{rootMargin:"200px 0px"});return x.current=y,()=>{x.current&&x.current.disconnect()}},[E]),T.useEffect(()=>{if(!e){m(is);return}const y=is.filter(I=>Qn.isPlatformAvailableInLocation(I,e));m(y),console.log(`Filtered platforms for ${e.stateCode||e.countryCode}:`,y.length,"of",is.length,"available")},[e]);const P=T.useCallback(y=>{if(!e||!y.locationSpecificOffers)return y.promoOffer||null;const I=e.stateCode,A=y.locationSpecificOffers[I]||y.locationSpecificOffers.default;return(A==null?void 0:A.promoOffer)||y.promoOffer||null},[e]),R=T.useCallback(y=>{if(!e||!y.locationSpecificOffers)return Qn.getLocationDisclaimer(e);const I=e.stateCode,A=y.locationSpecificOffers[I]||y.locationSpecificOffers.default;return(A==null?void 0:A.disclaimer)||Qn.getLocationDisclaimer(e)},[e]),N=T.useCallback(y=>Qn.isPlatformAvailableInLocation(y,e),[e]),k={platforms:p,allPlatforms:is,categories:_H,platformImages:n,imagesLoading:s,imagesLoaded:o,imageErrors:l,totalPlatforms:is.length,availablePlatforms:p.length,userLocation:e,getPlatformOffer:P,getPlatformDisclaimer:R,isPlatformAvailable:N,observeElement:(y,I)=>{x.current&&y&&(y.dataset.platformId=I,x.current.observe(y))}};return u.jsx(f4.Provider,{value:k,children:t})}function _se(){const t=T.useContext(f4);if(t===void 0)throw new Error("usePlatforms must be used within a PlatformsProvider");return t}const bH=({children:t})=>{const{userLocation:e}=d4();return u.jsx(xH,{userLocation:e,children:t})},p4=T.createContext(),Zm=()=>{const t=T.useContext(p4);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},EH=({children:t})=>{const[e,n]=T.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":!0});T.useEffect(()=>{const i=document.documentElement;e?(i.classList.add("dark"),localStorage.setItem("theme","dark")):(i.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]),T.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),o=a=>{localStorage.getItem("theme")||n(a.matches)};return i.addEventListener("change",o),()=>i.removeEventListener("change",o)},[]);const s={isDark:e,toggleTheme:()=>{n(i=>!i)}};return u.jsx(p4.Provider,{value:s,children:t})};var L=typeof window<"u"?window:void 0,kn=typeof globalThis<"u"?globalThis:L,m4=Array.prototype,TT=m4.forEach,IT=m4.indexOf,Un=kn==null?void 0:kn.navigator,X=kn==null?void 0:kn.document,bn=kn==null?void 0:kn.location,Bv=kn==null?void 0:kn.fetch,zv=kn!=null&&kn.XMLHttpRequest&&"withCredentials"in new kn.XMLHttpRequest?kn.XMLHttpRequest:void 0,AT=kn==null?void 0:kn.AbortController,wn=Un==null?void 0:Un.userAgent,ve=L??{},fs={DEBUG:!1,LIB_VERSION:"1.248.1"},j0="$copy_autocapture",SH=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],ps=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),kH=["fatal","error","warning","log","info","debug"];function we(t,e){return t.indexOf(e)!==-1}var eg=function(t){return t.trim()},qv=function(t){return t.replace(/^\$/,"")},TH=Array.isArray,g4=Object.prototype,y4=g4.hasOwnProperty,tg=g4.toString,He=TH||function(t){return tg.call(t)==="[object Array]"},rr=t=>typeof t=="function",ot=t=>t===Object(t)&&!He(t),Ua=t=>{if(ot(t)){for(var e in t)if(y4.call(t,e))return!1;return!0}return!1},G=t=>t===void 0,at=t=>tg.call(t)=="[object String]",Wv=t=>at(t)&&t.trim().length===0,Ki=t=>t===null,Ne=t=>G(t)||Ki(t),nn=t=>tg.call(t)=="[object Number]",Fr=t=>tg.call(t)==="[object Boolean]",IH=t=>t instanceof FormData,AH=t=>we(SH,t),v4=t=>{var e={t:function(n){if(L&&(fs.DEBUG||ve.POSTHOG_DEBUG)&&!G(L.console)&&L.console){for(var r=("__rrweb_original__"in L.console[n])?L.console[n].__rrweb_original__:L.console[n],s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];r(t,...i)}},info:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];console.error(t,...r)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>v4(t+" "+n)};return e},ee=v4("[PostHog.js]"),Bt=ee.createLogger,PH=Bt("[ExternalScriptsLoader]"),PT=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return PH.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=X==null?void 0:X.querySelectorAll("script");if(r){for(var s=0;s<r.length;s++)if(r[s].src===e)return n()}var i=()=>{if(!X)return n("document not found");var o=X.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=X.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):X.body.appendChild(o)};X!=null&&X.body?i():X==null||X.addEventListener("DOMContentLoaded",i)};function K(){return K=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K.apply(null,arguments)}function _4(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}ve.__PosthogExtensions__=ve.__PosthogExtensions__||{},ve.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var s=3e5;r=r+"&t="+Math.floor(Date.now()/s)*s}var i=t.requestRouter.endpointFor("assets",r);PT(t,i,n)},ve.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var r=t.requestRouter.endpointFor("api",e);PT(t,r,n)};var Mp={};function Ni(t,e,n){if(He(t)){if(TT&&t.forEach===TT)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,s=t.length;r<s;r++)if(r in t&&e.call(n,t[r],r)===Mp)return}}}function Oe(t,e,n){if(!Ne(t)){if(He(t))return Ni(t,e,n);if(IH(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===Mp)return}else for(var s in t)if(y4.call(t,s)&&e.call(n,t[s],s)===Mp)return}}var gt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ni(n,function(s){for(var i in s)s[i]!==void 0&&(t[i]=s[i])}),t},ng=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ni(n,function(s){Ni(s,function(i){t.push(i)})}),t};function Df(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var CT=function(t){try{return t()}catch{return}},CH=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(s){ee.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),ee.critical(s)}}},lb=function(t){var e={};return Oe(t,function(n,r){(at(n)&&n.length>0||nn(n))&&(e[r]=n)}),e};function NH(t,e){return n=t,r=i=>at(i)&&!Ki(e)?i.slice(0,e):i,s=new Set,function i(o,a){return o!==Object(o)?r?r(o,a):o:s.has(o)?void 0:(s.add(o),He(o)?(l=[],Ni(o,c=>{l.push(i(c))})):(l={},Oe(o,(c,d)=>{s.has(c)||(l[d]=i(c,d))})),l);var l}(n);var n,r,s}var RH=["herokuapp.com","vercel.app","netlify.app"];function jH(t){var e=t==null?void 0:t.hostname;if(!at(e))return!1;var n=e.split(".").slice(-2).join(".");for(var r of RH)if(n===r)return!1;return!0}function w4(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Ye(t,e,n,r){var{capture:s=!1,passive:i=!0}=r??{};t==null||t.addEventListener(e,n,{capture:s,passive:i})}var x4="$people_distinct_id",Jc="__alias",Zc="__timers",NT="$autocapture_disabled_server_side",Hv="$heatmaps_enabled_server_side",RT="$exception_capture_enabled_server_side",Gv="$error_tracking_suppression_rules",jT="$web_vitals_enabled_server_side",b4="$dead_clicks_enabled_server_side",DT="$web_vitals_allowed_metrics",Kv="$session_recording_enabled_server_side",OT="$console_log_recording_enabled_server_side",MT="$session_recording_network_payload_capture",LT="$session_recording_masking",FT="$session_recording_canvas_recording",VT="$replay_sample_rate",$T="$replay_minimum_duration",UT="$replay_script_config",Lp="$sesid",eu="$session_is_sampled",Xv="$session_recording_url_trigger_activated_session",Yv="$session_recording_event_trigger_activated_session",Ba="$enabled_feature_flags",Of="$early_access_features",Qv="$feature_flag_details",tu="$stored_person_properties",mo="$stored_group_properties",Jv="$surveys",Yh="$surveys_activated",Fp="$flag_call_reported",us="$user_state",Zv="$client_session_props",e_="$capture_rate_limit",t_="$initial_campaign_params",n_="$initial_referrer_info",Vp="$initial_person_info",$p="$epp",E4="__POSTHOG_TOOLBAR__",BT="$posthog_cookieless",DH=[x4,Jc,"__cmpns",Zc,Kv,Hv,Lp,Ba,Gv,us,Of,Qv,mo,tu,Jv,Fp,Zv,e_,t_,n_,$p,Vp];function zT(t){return t instanceof Element&&(t.id===E4||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function rg(t){return!!t&&t.nodeType===1}function Ri(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function S4(t){return!!t&&t.nodeType===3}function k4(t){return!!t&&t.nodeType===11}function cb(t){return t?eg(t).split(/\s+/):[]}function qT(t){var e=L==null?void 0:L.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Up(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return cb(e)}function T4(t){return Ne(t)?null:eg(t).split(/(\s+)/).filter(e=>Nl(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function sg(t){var e="";return s_(t)&&!P4(t)&&t.childNodes&&t.childNodes.length&&Oe(t.childNodes,function(n){var r;S4(n)&&n.textContent&&(e+=(r=T4(n.textContent))!==null&&r!==void 0?r:"")}),eg(e)}function I4(t){return G(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var r_=["a","button","form","input","select","textarea","label"];function A4(t){var e=t.parentNode;return!(!e||!rg(e))&&e}function OH(t,e,n,r,s){var i,o,a;if(n===void 0&&(n=void 0),!L||!t||Ri(t,"html")||!rg(t)||(i=n)!=null&&i.url_allowlist&&!qT(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&qT(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(S=>e.type===S))return!1}for(var c=!1,d=[t],f=!0,p=t;p.parentNode&&!Ri(p,"body");)if(k4(p.parentNode))d.push(p.parentNode.host),p=p.parentNode.host;else{if(!(f=A4(p)))break;if(r||r_.indexOf(f.tagName.toLowerCase())>-1)c=!0;else{var m=L.getComputedStyle(f);m&&m.getPropertyValue("cursor")==="pointer"&&(c=!0)}d.push(f),p=f}if(!function(S,x){var _=x==null?void 0:x.element_allowlist;if(G(_))return!0;var E,P=function(N){if(_.some(k=>N.tagName.toLowerCase()===k))return{v:!0}};for(var R of S)if(E=P(R))return E.v;return!1}(d,n)||!function(S,x){var _=x==null?void 0:x.css_selector_allowlist;if(G(_))return!0;var E,P=function(N){if(_.some(k=>N.matches(k)))return{v:!0}};for(var R of S)if(E=P(R))return E.v;return!1}(d,n))return!1;var w=L.getComputedStyle(t);if(w&&w.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var v=t.tagName.toLowerCase();switch(v){case"html":return!1;case"form":return(s||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(e.type)>=0;default:return c?(s||["click"]).indexOf(e.type)>=0:(s||["click"]).indexOf(e.type)>=0&&(r_.indexOf(v)>-1||t.getAttribute("contenteditable")==="true")}}function s_(t){for(var e=t;e.parentNode&&!Ri(e,"body");e=e.parentNode){var n=Up(e);if(we(n,"ph-sensitive")||we(n,"ph-no-capture"))return!1}if(we(Up(t),"ph-include"))return!0;var r=t.type||"";if(at(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var s=t.name||t.id||"";return!(at(s)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(s.replace(/[^a-zA-Z0-9]/g,"")))}function P4(t){return!!(Ri(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ri(t,"select")||Ri(t,"textarea")||t.getAttribute("contenteditable")==="true")}var C4="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",MH=new RegExp("^(?:"+C4+")$"),LH=new RegExp(C4),N4="\\d{3}-?\\d{2}-?\\d{4}",FH=new RegExp("^("+N4+")$"),VH=new RegExp("("+N4+")");function Nl(t,e){return e===void 0&&(e=!0),!(Ne(t)||at(t)&&(t=eg(t),(e?MH:LH).test((t||"").replace(/[- ]/g,""))||(e?FH:VH).test(t)))}function R4(t){var e=sg(t);return Nl(e=(e+" "+j4(t)).trim())?e:""}function j4(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Oe(t.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var s=sg(n);e=(e+" "+s).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+j4(n)).trim())}catch(i){ee.error("[AutoCapture]",i)}}),e}function $H(t){return function(e){var n=e.map(r=>{var s,i,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var l=K({},r.text?{text:r.text}:{},{"nth-child":(s=r.nth_child)!==null&&s!==void 0?s:0,"nth-of-type":(i=r.nth_of_type)!==null&&i!==void 0?i:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),c={};return Df(l).sort((d,f)=>{var[p]=d,[m]=f;return p.localeCompare(m)}).forEach(d=>{var[f,p]=d;return c[WT(f.toString())]=WT(p.toString())}),o+=":",o+=Df(c).map(d=>{var[f,p]=d;return f+'="'+p+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var r,s,i={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(s=n.attr__href)==null?void 0:s.slice(0,2048),attr_class:UH(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Df(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return i.attributes[a]=l}),i})}(t))}function WT(t){return t.replace(/"|\\"/g,'\\"')}function UH(t){var e=t.attr__class;return e?He(e)?e:cb(e):void 0}class D4{constructor(){this.clicks=[]}isRageClick(e,n,r){var s=this.clicks[this.clicks.length-1];if(s&&Math.abs(e-s.x)+Math.abs(n-s.y)<30&&r-s.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}var BH=["localhost","127.0.0.1"],Rl=t=>{var e=X==null?void 0:X.createElement("a");return G(e)?null:(e.href=t,e)},zH=function(t,e){var n,r;e===void 0&&(e="&");var s=[];return Oe(t,function(i,o){G(i)||G(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(i)?i.name:i.toString()),r=encodeURIComponent(o),s[s.length]=r+"="+n)}),s.join(e)},Bp=function(t,e){for(var n,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var i=r[s].split("=");if(i[0]===e){n=i;break}}if(!He(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{ee.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},ub=function(t,e,n){if(!t||!e||!e.length)return t;for(var r=t.split("#"),s=r[0]||"",i=r[1],o=s.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),d=[],f=0;f<c.length;f++){var p=c[f].split("=");He(p)&&(e.includes(p[0])?d.push(p[0]+"="+n):d.push(c[f]))}var m=l;return a!=null&&(m+="?"+d.join("&")),i!=null&&(m+="#"+i),m},zp=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},HT=Bt("[AutoCapture]");function D0(t,e){return e.length>t?e.slice(0,t)+"...":e}function qH(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!rg(e));return e}function WH(t,e,n,r){var s=t.tagName.toLowerCase(),i={tag_name:s};r_.indexOf(s)>-1&&!n&&(s.toLowerCase()==="a"||s.toLowerCase()==="button"?i.$el_text=D0(1024,R4(t)):i.$el_text=D0(1024,sg(t)));var o=Up(t);o.length>0&&(i.classes=o.filter(function(d){return d!==""})),Oe(t.attributes,function(d){var f;if((!P4(t)||["name","id","class","aria-label"].indexOf(d.name)!==-1)&&(r==null||!r.includes(d.name))&&!e&&Nl(d.value)&&(f=d.name,!at(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var p=d.value;d.name==="class"&&(p=cb(p).join(" ")),i["attr__"+d.name]=D0(1024,p)}});for(var a=1,l=1,c=t;c=qH(c);)a++,c.tagName===t.tagName&&l++;return i.nth_child=a,i.nth_of_type=l,i}function HH(t,e){for(var n,r,{e:s,maskAllElementAttributes:i,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],d=t;d.parentNode&&!Ri(d,"body");)k4(d.parentNode)?(c.push(d.parentNode.host),d=d.parentNode.host):(c.push(d.parentNode),d=d.parentNode);var f,p=[],m={},w=!1,v=!1;if(Oe(c,P=>{var R=s_(P);P.tagName.toLowerCase()==="a"&&(w=P.getAttribute("href"),w=R&&w&&Nl(w)&&w),we(Up(P),"ph-no-capture")&&(v=!0),p.push(WH(P,i,o,a));var N=function(k){if(!s_(k))return{};var y={};return Oe(k.attributes,function(I){if(I.name&&I.name.indexOf("data-ph-capture-attribute")===0){var A=I.name.replace("data-ph-capture-attribute-",""),j=I.value;A&&j&&Nl(j)&&(y[A]=j)}}),y}(P);gt(m,N)}),v)return{props:{},explicitNoCapture:v};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?p[0].$el_text=R4(t):p[0].$el_text=sg(t)),w){var S,x;p[0].attr__href=w;var _=(S=Rl(w))==null?void 0:S.host,E=L==null||(x=L.location)==null?void 0:x.host;_&&E&&_!==E&&(f=w)}return{props:gt({$event_type:s.type,$ce_version:1},l?{}:{$elements:p},{$elements_chain:$H(p)},(n=p[0])!=null&&n.$el_text?{$el_text:(r=p[0])==null?void 0:r.$el_text}:{},f&&s.type==="click"?{$external_click_url:f}:{},m)}}class GH{constructor(e){this.i=!1,this.o=null,this.rageclicks=new D4,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,r=ot(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map(s=>new RegExp(s)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(s=>new RegExp(s)),r}$(){if(this.isBrowserSupported()){if(L&&X){var e=r=>{r=r||(L==null?void 0:L.event);try{this.k(r)}catch(s){HT.error("Failed to capture event",s)}};if(Ye(X,"submit",e,{capture:!0}),Ye(X,"change",e,{capture:!0}),Ye(X,"click",e,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(L==null?void 0:L.event),this.k(r,j0)};Ye(X,"copy",n,{capture:!0}),Ye(X,"cut",n,{capture:!0})}}}else HT.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[NT]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,r=[];return(n=this.m)==null||n.forEach(s=>{var i=X==null?void 0:X.querySelectorAll(s);i==null||i.forEach(o=>{e===o&&r.push(s)})}),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)==null?void 0:e.props[NT],s=this.o;if(Ki(s)&&!Fr(r)&&!this.instance.config.advanced_disable_decide)return!1;var i=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!i}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,s=I4(e);S4(s)&&(s=s.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var i=n===j0;if(s&&OH(s,e,this.S,i,i?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=HH(s,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(s);if(l&&l.length>0&&(o.$element_selectors=l),n===j0){var c,d=T4(L==null||(c=L.getSelection())==null?void 0:c.toString()),f=e.type||"clipboard";if(!d)return!1;o.$selected_content=d,o.$copy_type=f}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return rr(X==null?void 0:X.querySelectorAll)}}Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return nn(t)&&isFinite(t)&&Math.floor(t)===t});var GT="0123456789abcdef";class qp{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,s){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(s)||e<0||n<0||r<0||s<0||e>0xffffffffffff||n>4095||r>1073741823||s>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|n>>>8,i[7]=n,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=s>>>24,i[13]=s>>>16,i[14]=s>>>8,i[15]=s,new qp(i)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+GT.charAt(this.bytes[n]>>>4)+GT.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new qp(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class KH{constructor(){this.I=0,this.P=0,this.R=new XH}generate(){var e=this.generateOrAbort();if(G(e)){this.I=0;var n=this.generateOrAbort();if(G(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.I)this.I=e,this.T();else{if(!(e+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return qp.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var KT,O4=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};L&&!G(L.crypto)&&crypto.getRandomValues&&(O4=t=>crypto.getRandomValues(t));class XH{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(O4(this.M),this.C=0),this.M[this.C++]}}var vi=()=>YH().toString(),YH=()=>(KT||(KT=new KH)).generate(),jc="",QH=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function JH(t,e){if(e){var n=function(s,i){if(i===void 0&&(i=X),jc)return jc;if(!i||["localhost","127.0.0.1"].includes(s))return"";for(var o=s.split("."),a=Math.min(o.length,8),l="dmn_chk_"+vi();!jc&&a--;){var c=o.slice(a).join("."),d=l+"=1;domain=."+c+";path=/";i.cookie=d+";max-age=3",i.cookie.includes(l)&&(i.cookie=d+";max-age=0",jc=c)}return jc}(t);if(!n){var r=(s=>{var i=s.match(QH);return i?i[0]:""})(t);r!==n&&ee.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var bs={O:()=>!!X,F:function(t){ee.error("cookieStore error: "+t)},A:function(t){if(X){try{for(var e=t+"=",n=X.cookie.split(";").filter(i=>i.length),r=0;r<n.length;r++){for(var s=n[r];s.charAt(0)==" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return decodeURIComponent(s.substring(e.length,s.length))}}catch{}return null}},D:function(t){var e;try{e=JSON.parse(bs.A(t))||{}}catch{}return e},L:function(t,e,n,r,s){if(X)try{var i="",o="",a=JH(X.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),i="; expires="+l.toUTCString()}s&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+i+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&ee.warn("cookieStore warning: large cookie, len="+c.length),X.cookie=c,c}catch{return}},N:function(t,e){try{bs.L(t,"",-1,e)}catch{return}}},O0=null,xt={O:function(){if(!Ki(O0))return O0;var t=!0;if(G(L))t=!1;else try{var e="__mplssupport__";xt.L(e,"xyz"),xt.A(e)!=='"xyz"'&&(t=!1),xt.N(e)}catch{t=!1}return t||ee.error("localStorage unsupported; falling back to cookie store"),O0=t,t},F:function(t){ee.error("localStorage error: "+t)},A:function(t){try{return L==null?void 0:L.localStorage.getItem(t)}catch(e){xt.F(e)}return null},D:function(t){try{return JSON.parse(xt.A(t))||{}}catch{}return null},L:function(t,e){try{L==null||L.localStorage.setItem(t,JSON.stringify(e))}catch(n){xt.F(n)}},N:function(t){try{L==null||L.localStorage.removeItem(t)}catch(e){xt.F(e)}}},ZH=["distinct_id",Lp,eu,$p,Vp],Qh=K({},xt,{D:function(t){try{var e={};try{e=bs.D(t)||{}}catch{}var n=gt(e,JSON.parse(xt.A(t)||"{}"));return xt.L(t,n),n}catch{}return null},L:function(t,e,n,r,s,i){try{xt.L(t,e,void 0,void 0,i);var o={};ZH.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&bs.L(t,o,n,r,s,i)}catch(a){xt.F(a)}},N:function(t,e){try{L==null||L.localStorage.removeItem(t),bs.N(t,e)}catch(n){xt.F(n)}}}),Jh={},eG={O:function(){return!0},F:function(t){ee.error("memoryStorage error: "+t)},A:function(t){return Jh[t]||null},D:function(t){return Jh[t]||null},L:function(t,e){Jh[t]=e},N:function(t){delete Jh[t]}},io=null,jt={O:function(){if(!Ki(io))return io;if(io=!0,G(L))io=!1;else try{var t="__support__";jt.L(t,"xyz"),jt.A(t)!=='"xyz"'&&(io=!1),jt.N(t)}catch{io=!1}return io},F:function(t){ee.error("sessionStorage error: ",t)},A:function(t){try{return L==null?void 0:L.sessionStorage.getItem(t)}catch(e){jt.F(e)}return null},D:function(t){try{return JSON.parse(jt.A(t))||null}catch{}return null},L:function(t,e){try{L==null||L.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){jt.F(n)}},N:function(t){try{L==null||L.sessionStorage.removeItem(t)}catch(e){jt.F(e)}}},va=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});class tG{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.j()?va.DENIED:this.U}isOptedOut(){return this.consent===va.DENIED||this.consent===va.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.q.L(this.B,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.N(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get U(){var e=this.q.A(this.B);return e==="1"?va.GRANTED:e==="0"?va.DENIED:va.PENDING}get q(){if(!this.H){var e=this.S.opt_out_capturing_persistence_type;this.H=e==="localStorage"?xt:bs;var n=e==="localStorage"?bs:xt;n.A(this.B)&&(this.H.A(this.B)||this.optInOut(n.A(this.B)==="1"),n.N(this.B,this.S.cross_subdomain_cookie))}return this.H}j(){return!!this.S.respect_dnt&&!!w4([Un==null?void 0:Un.doNotTrack,Un==null?void 0:Un.msDoNotTrack,ve.doNotTrack],e=>we([!0,1,"1","yes"],e))}}var Zh=Bt("[Dead Clicks]"),nG=()=>!0,rG=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(b4)),r=t.instance.config.capture_dead_clicks;return Fr(r)?r:n};let M4=class{get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[b4]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G(()=>{this.J()})}G(e){var n,r;(n=ve.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(r=ve.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",s=>{s?Zh.error("failed to load script",s):e()})}J(){var e;if(X){if(!this.W&&(e=ve.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=ot(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.W=ve.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.W.start(X),Zh.info("starting...")}}else Zh.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,Zh.info("stopping..."))}};var M0=Bt("[ExceptionAutocapture]");let sG=class{constructor(e){var n;this.V=()=>{var r;if(L&&this.isEnabled&&(r=ve.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var s=ve.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,i=ve.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,o=ve.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=s(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=i(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=o(this.captureException.bind(this)))}catch(a){M0.error("failed to start",a),this.Z()}}},this._instance=e,this.tt=!((n=this._instance.persistence)==null||!n.props[RT]),this.S=this.it(),this.startIfEnabled()}it(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return ot(e)?n=K({},n,e):(G(e)?this.tt:e)&&(n=K({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(M0.info("enabled"),this.G(this.V))}G(e){var n,r;(n=ve.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(r=ve.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",s=>{if(s)return M0.error("failed to load script",s);e()})}Z(){var e,n,r;(e=this.K)==null||e.call(this),this.K=void 0,(n=this.Y)==null||n.call(this),this.Y=void 0,(r=this.X)==null||r.call(this),this.X=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.tt=!!n||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[RT]:this.tt}),this.startIfEnabled()}captureException(e){var n=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=n+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(e)}};function L4(t){return!G(Event)&&F4(t,Event)}function F4(t,e){try{return t instanceof e}catch{return!1}}function V4(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return F4(t,Error)}}function Mf(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function L0(t){return Mf(t,"DOMError")}var XT=/\(error: (.*)\)/,YT=50,za="?";function F0(t,e,n,r){var s={platform:"web:javascript",filename:t,function:e==="<anonymous>"?za:e,in_app:!0};return G(n)||(s.lineno=n),G(r)||(s.colno=r),s}var iG=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,oG=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,aG=/\((\S*)(?::(\d+))(?::(\d+))\)/,lG=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,cG=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,uG=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.sort((s,i)=>s[0]-i[0]).map(s=>s[1]);return function(s,i){i===void 0&&(i=0);for(var o=[],a=s.split(`
`),l=i;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var d=XT.test(c)?c.replace(XT,"$1"):c;if(!d.match(/\S*Error: /)){for(var f of r){var p=f(d);if(p){o.push(p);break}}if(o.length>=YT)break}}}return function(m){if(!m.length)return[];var w=Array.from(m);return w.reverse(),w.slice(0,YT).map(v=>K({},v,{filename:v.filename||dG(w).filename,function:v.function||za}))}(o)}}([30,t=>{var e=iG.exec(t);if(e){var[,n,r,s]=e;return F0(n,za,+r,+s)}var i=oG.exec(t);if(i){if(i[2]&&i[2].indexOf("eval")===0){var o=aG.exec(i[2]);o&&(i[2]=o[1],i[3]=o[2],i[4]=o[3])}var[a,l]=JT(i[1]||za,i[2]);return F0(l,a,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}}],[50,t=>{var e=lG.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=cG.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var r=e[3],s=e[1]||za;return[s,r]=JT(s,r),F0(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function dG(t){return t[t.length-1]||{}}var ef,QT,V0,JT=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:za,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},hG=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function db(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",r=function(o){return o&&fG.test(o.message)?1:0}(t);try{var s=uG,i=function(o,a){var l=function(c){var d=globalThis._posthogChunkIds;if(!d)return{};var f=Object.keys(d);return V0&&f.length===QT||(QT=f.length,V0=f.reduce((p,m)=>{ef||(ef={});var w=ef[m];if(w)p[w[0]]=w[1];else for(var v=c(m),S=v.length-1;S>=0;S--){var x=v[S],_=x==null?void 0:x.filename,E=d[m];if(_&&E){p[_]=E,ef[m]=[_,E];break}}return p},{})),V0}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(s(n,r),s);return i.slice(0,i.length-e)}catch{}return[]}var fG=/Minified React error #\d+;/i;function pG(t,e){var n,r,s=db(t),i=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)!==null&&r!==void 0&&r;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:s,type:"raw"},mechanism:{handled:i,synthetic:o}}}function $4(t,e){var n=pG(t,e);return t.cause&&V4(t.cause)&&t.cause!==t?[n,...$4(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function $0(t,e){return{$exception_list:$4(t,e),$exception_level:"error"}}function U0(t,e){var n,r,s,i=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(s=e==null?void 0:e.defaultExceptionType)!==null&&s!==void 0?s:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:i,synthetic:o}};if(e!=null&&e.syntheticException){var l=db(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function mG(t){return at(t)&&!Wv(t)&&kH.indexOf(t)>=0}function gG(t,e){var n,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,i=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:L4(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(d,f){f===void 0&&(f=40);var p=Object.keys(d);if(p.sort(),!p.length)return"[object has no keys]";for(var m=p.length;m>0;m--){var w=p.slice(0,m).join(", ");if(!(w.length>f))return m===p.length||w.length<=f?w:w.slice(0,f)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:s,synthetic:i}};if(e!=null&&e.syntheticException){var c=db(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:mG(t.level)?t.level:"error"}}function yG(t,e){var{error:n,event:r}=t,s={$exception_list:[]},i=n||r;if(L0(i)||function(p){return Mf(p,"DOMException")}(i)){var o=i;if(function(p){return"stack"in p}(i))s=$0(i,e);else{var a=o.name||(L0(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;s=U0(l,K({},e,{overrideExceptionType:L0(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(s.$exception_DOMException_code=""+o.code),s}if(function(p){return Mf(p,"ErrorEvent")}(i)&&i.error)return $0(i.error,e);if(V4(i))return $0(i,e);if(function(p){return Mf(p,"Object")}(i)||L4(i))return gG(i,e);if(G(n)&&at(r)){var c="Error",d=r,f=r.match(hG);return f&&(c=f[1],d=f[2]),U0(d,K({},e,{overrideExceptionType:c,defaultExceptionMessage:d}))}return U0(i,e)}function ZT(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],s=n(r);return rr(s)&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}class vG{constructor(e){var n;this._instance=e,this.et=(L==null||(n=L.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(ee.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,ee.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(L&&L.history){var r=this;(e=L.history.pushState)!=null&&e.__posthog_wrapped__||ZT(L.history,"pushState",s=>function(i,o,a){s.call(this,i,o,a),r.st("pushState")}),(n=L.history.replaceState)!=null&&n.__posthog_wrapped__||ZT(L.history,"replaceState",s=>function(i,o,a){s.call(this,i,o,a),r.st("replaceState")}),this.nt()}}st(e){try{var n,r=L==null||(n=L.location)==null?void 0:n.pathname;if(!r)return;r!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.et=r}catch(s){ee.error("Error capturing "+e+" pageview",s)}}nt(){if(!this.rt){var e=()=>{this.st("popstate")};Ye(L,"popstate",e),this.rt=()=>{L&&L.removeEventListener("popstate",e)}}}}function Wp(t){var e,n;return((e=JSON.stringify(t,(n=[],function(r,s){if(ot(s)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(s)?"[Circular]":(n.push(s),s)}return s})))==null?void 0:e.length)||0}function i_(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),r=t.data.slice(0,n),s=t.data.slice(n);return[i_({size:Wp(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),i_({size:Wp(s),data:s,sessionId:t.sessionId,windowId:t.windowId})].flatMap(i=>i)}return[t]}var ds=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(ds||{}),wr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(wr||{}),o_="[SessionRecording]",a_="redacted",tf={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},_G=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],wG=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],xG=["/s/","/e/","/i/"];function e2(t,e,n,r){if(Ne(t))return t;var s=(e==null?void 0:e["content-length"])||function(i){return new Blob([i]).size}(t);return at(s)&&(s=parseInt(s)),s>n?o_+" "+r+" body too large to record ("+s+" bytes)":t}function t2(t,e){if(Ne(t))return t;var n=t;return Nl(n,!1)||(n=o_+" "+e+" body "+a_),Oe(wG,r=>{var s,i;(s=n)!=null&&s.length&&((i=n)==null?void 0:i.indexOf(r))!==-1&&(n=o_+" "+e+" body "+a_+" as might contain: "+r)}),n}var bG=(t,e)=>{var n,r,s,i={payloadSizeLimitBytes:tf.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...tf.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...tf.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=i,s=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),p=>(p!=null&&p.requestBody&&(p.requestBody=e2(p.requestBody,p.requestHeaders,s,"Request")),p!=null&&p.responseBody&&(p.responseBody=e2(p.responseBody,p.responseHeaders,s,"Response")),p)),d=p=>{return c(((v,S)=>{var x,_=Rl(v.name),E=S.indexOf("http")===0?(x=Rl(S))==null?void 0:x.pathname:S;E==="/"&&(E="");var P=_==null?void 0:_.pathname.replace(E||"","");if(!(_&&P&&xG.some(R=>P.indexOf(R)===0)))return v})((w=(m=p).requestHeaders,Ne(w)||Oe(Object.keys(w??{}),v=>{_G.includes(v.toLowerCase())&&(w[v]=a_)}),m),t.api_host));var m,w},f=rr(t.session_recording.maskNetworkRequestFn);return f&&rr(t.session_recording.maskCapturedNetworkRequestFn)&&ee.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(t.session_recording.maskCapturedNetworkRequestFn=p=>{var m=t.session_recording.maskNetworkRequestFn({url:p.name});return K({},p,{name:m==null?void 0:m.url})}),i.maskRequestFn=rr(t.session_recording.maskCapturedNetworkRequestFn)?p=>{var m,w=d(p);return w&&(m=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(w))!==null&&m!==void 0?m:void 0}:p=>function(m){if(!G(m))return m.requestBody=t2(m.requestBody,"Request"),m.responseBody=t2(m.responseBody,"Response"),m}(d(p)),K({},tf,i,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function tr(t,e,n,r,s){return e>n&&(ee.warn("min cannot be greater than max."),e=n),nn(t)?t>n?(r&&ee.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r&&ee.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&ee.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+s),tr(s||n,e,n,r))}class EG{constructor(e,n){var r,s;n===void 0&&(n={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach(i=>{this.ut[i]=this.ut[i]+this.lt,this.ut[i]>=this.ot&&delete this.ut[i]})},this.vt=i=>{var o=this._rrweb.mirror.getNode(i);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[i,o]},this.ct=i=>{var o,a,l,c,d,f,p,m;return((o=(a=i.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=i.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((d=(f=i.texts)==null?void 0:f.length)!==null&&d!==void 0?d:0)+((p=(m=i.adds)==null?void 0:m.length)!==null&&p!==void 0?p:0)},this.throttleMutations=i=>{if(i.type!==3||i.data.source!==0)return i;var o=i.data,a=this.ct(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var d,f,p,[m,w]=this.vt(c.id);return this.ut[m]===0?!1:(this.ut[m]=(d=this.ut[m])!==null&&d!==void 0?d:this.ot,this.ut[m]=Math.max(this.ut[m]-1,0),this.ut[m]===0&&(this.ht[m]||(this.ht[m]=!0,(f=(p=this.ft).onBlockedNode)==null||f.call(p,m,w))),c)}));var l=this.ct(o);return l!==0||a===l?i:void 0},this._rrweb=e,this.ft=n,this.lt=tr((r=this.ft.refillRate)!==null&&r!==void 0?r:this.lt,0,100,"mutation throttling refill rate"),this.ot=tr((s=this.ft.bucketSize)!==null&&s!==void 0?s:this.ot,0,100,"mutation throttling bucket size"),setInterval(()=>{this.dt()},1e3)}}var sr=Uint8Array,Tn=Uint16Array,jl=Uint32Array,hb=new sr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fb=new sr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n2=new sr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U4=function(t,e){for(var n=new Tn(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var s=new jl(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return[n,s]},B4=U4(hb,2),SG=B4[0],l_=B4[1];SG[28]=258,l_[258]=28;for(var r2=U4(fb,0)[1],z4=new Tn(32768),ze=0;ze<32768;++ze){var oo=(43690&ze)>>>1|(21845&ze)<<1;oo=(61680&(oo=(52428&oo)>>>2|(13107&oo)<<2))>>>4|(3855&oo)<<4,z4[ze]=((65280&oo)>>>8|(255&oo)<<8)>>>1}var ku=function(t,e,n){for(var r=t.length,s=0,i=new Tn(e);s<r;++s)++i[t[s]-1];var o,a=new Tn(e);for(s=0;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;for(o=new Tn(r),s=0;s<r;++s)o[s]=z4[a[t[s]-1]++]>>>15-t[s];return o},Ko=new sr(288);for(ze=0;ze<144;++ze)Ko[ze]=8;for(ze=144;ze<256;++ze)Ko[ze]=9;for(ze=256;ze<280;++ze)Ko[ze]=7;for(ze=280;ze<288;++ze)Ko[ze]=8;var Hp=new sr(32);for(ze=0;ze<32;++ze)Hp[ze]=5;var kG=ku(Ko,9),TG=ku(Hp,5),q4=function(t){return(t/8>>0)+(7&t&&1)},W4=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Tn?Tn:t instanceof jl?jl:sr)(n-e);return r.set(t.subarray(e,n)),r},os=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Dc=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},B0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return[new sr(0),0];if(s==1){var o=new sr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(R,N){return R.f-N.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=s-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=d&&n[c].f<n[f].f?c++:f++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};var p=i[0].s;for(r=1;r<s;++r)i[r].s>p&&(p=i[r].s);var m=new Tn(p+1),w=c_(n[d-1],m,0);if(w>e){r=0;var v=0,S=w-e,x=1<<S;for(i.sort(function(R,N){return m[N.s]-m[R.s]||R.f-N.f});r<s;++r){var _=i[r].s;if(!(m[_]>e))break;v+=x-(1<<w-m[_]),m[_]=e}for(v>>>=S;v>0;){var E=i[r].s;m[E]<e?v-=1<<e-m[E]++-1:++r}for(;r>=0&&v;--r){var P=i[r].s;m[P]==e&&(--m[P],++v)}w=e}return[new sr(m),w]},c_=function(t,e,n){return t.s==-1?Math.max(c_(t.l,e,n+1),c_(t.r,e,n+1)):e[t.s]=n},s2=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Tn(++e),r=0,s=t[0],i=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return[n.subarray(0,r),e]},Oc=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},u_=function(t,e,n){var r=n.length,s=q4(e+2);t[s]=255&r,t[s+1]=r>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var i=0;i<r;++i)t[s+i+4]=n[i];return 8*(s+4+r)},i2=function(t,e,n,r,s,i,o,a,l,c,d){os(e,d++,n),++s[256];for(var f=B0(s,15),p=f[0],m=f[1],w=B0(i,15),v=w[0],S=w[1],x=s2(p),_=x[0],E=x[1],P=s2(v),R=P[0],N=P[1],k=new Tn(19),y=0;y<_.length;++y)k[31&_[y]]++;for(y=0;y<R.length;++y)k[31&R[y]]++;for(var I=B0(k,7),A=I[0],j=I[1],O=19;O>4&&!A[n2[O-1]];--O);var D,Q,ne,ue,oe=c+5<<3,$=Oc(s,Ko)+Oc(i,Hp)+o,z=Oc(s,p)+Oc(i,v)+o+14+3*O+Oc(k,A)+(2*k[16]+3*k[17]+7*k[18]);if(oe<=$&&oe<=z)return u_(e,d,t.subarray(l,l+c));if(os(e,d,1+(z<$)),d+=2,z<$){D=ku(p,m),Q=p,ne=ku(v,S),ue=v;var q=ku(A,j);for(os(e,d,E-257),os(e,d+5,N-1),os(e,d+10,O-4),d+=14,y=0;y<O;++y)os(e,d+3*y,A[n2[y]]);d+=3*O;for(var J=[_,R],se=0;se<2;++se){var ge=J[se];for(y=0;y<ge.length;++y){var Ge=31&ge[y];os(e,d,q[Ge]),d+=A[Ge],Ge>15&&(os(e,d,ge[y]>>>5&127),d+=ge[y]>>>12)}}}else D=kG,Q=Ko,ne=TG,ue=Hp;for(y=0;y<a;++y)if(r[y]>255){Ge=r[y]>>>18&31,Dc(e,d,D[Ge+257]),d+=Q[Ge+257],Ge>7&&(os(e,d,r[y]>>>23&31),d+=hb[Ge]);var zt=31&r[y];Dc(e,d,ne[zt]),d+=ue[zt],zt>3&&(Dc(e,d,r[y]>>>5&8191),d+=fb[zt])}else Dc(e,d,D[r[y]]),d+=Q[r[y]];return Dc(e,d,D[256]),d+Q[256]},IG=new jl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AG=function(){for(var t=new jl(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),PG=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=AG[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},CG=function(t,e,n,r,s){return function(i,o,a,l,c,d){var f=i.length,p=new sr(l+f+5*(1+Math.floor(f/7e3))+c),m=p.subarray(l,p.length-c),w=0;if(!o||f<8)for(var v=0;v<=f;v+=65535){var S=v+65535;S<f?w=u_(m,w,i.subarray(v,S)):(m[v]=d,w=u_(m,w,i.subarray(v,f)))}else{for(var x=IG[o-1],_=x>>>13,E=8191&x,P=(1<<a)-1,R=new Tn(32768),N=new Tn(P+1),k=Math.ceil(a/3),y=2*k,I=function(oc){return(i[oc]^i[oc+1]<<k^i[oc+2]<<y)&P},A=new jl(25e3),j=new Tn(288),O=new Tn(32),D=0,Q=0,ne=(v=0,0),ue=0,oe=0;v<f;++v){var $=I(v),z=32767&v,q=N[$];if(R[z]=q,N[$]=z,ue<=v){var J=f-v;if((D>7e3||ne>24576)&&J>423){w=i2(i,m,0,A,j,O,Q,ne,oe,v-oe,w),ne=D=Q=0,oe=v;for(var se=0;se<286;++se)j[se]=0;for(se=0;se<30;++se)O[se]=0}var ge=2,Ge=0,zt=E,Et=z-q&32767;if(J>2&&$==I(v-Et))for(var fr=Math.min(_,J)-1,pg=Math.min(32767,v),mg=Math.min(258,J);Et<=pg&&--zt&&z!=q;){if(i[v+ge]==i[v+ge-Et]){for(var Rn=0;Rn<mg&&i[v+Rn]==i[v+Rn-Et];++Rn);if(Rn>ge){if(ge=Rn,Ge=Et,Rn>fr)break;var ia=Math.min(Et,Rn-2),oa=0;for(se=0;se<ia;++se){var Qi=v-Et+se+32768&32767,aa=Qi-R[Qi]+32768&32767;aa>oa&&(oa=aa,q=Qi)}}}Et+=(z=q)-(q=R[z])+32768&32767}if(Ge){A[ne++]=268435456|l_[ge]<<18|r2[Ge];var la=31&l_[ge],ic=31&r2[Ge];Q+=hb[la]+fb[ic],++j[257+la],++O[ic],ue=v+ge,++D}else A[ne++]=i[v],++j[i[v]]}}w=i2(i,m,d,A,j,O,Q,ne,oe,v-oe,w)}return W4(p,0,l+q4(w)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!s)},d_=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},NG=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&d_(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},RG=function(t){return 10+(t.filename&&t.filename.length+1||0)};function H4(t,e){e===void 0&&(e={});var n=PG(),r=t.length;n.p(t);var s=CG(t,e,RG(e),8),i=s.length;return NG(s,e),d_(s,i-8,n.d()),d_(s,i-4,r),s}function G4(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new sr(t.length+(t.length>>>1)),s=0,i=function(c){r[s++]=c},o=0;o<n;++o){if(s+5>r.length){var a=new sr(s+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?i(l):l<2048?(i(192|l>>>6),i(128|63&l)):l>55295&&l<57344?(i(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),i(128|l>>>12&63),i(128|l>>>6&63),i(128|63&l)):(i(224|l>>>12),i(128|l>>>6&63),i(128|63&l))}return W4(r,0,s)}function jG(t,e){return function(n){for(var r=0,s=0;s<n.length;s++)r=(r<<5)-r+n.charCodeAt(s),r|=0;return Math.abs(r)}(t)%100<tr(100*e,0,100)}var Fi="disabled",pb="sampled",Gp="active",Xo="buffering",mb="paused",gb="trigger",Hr=gb+"_activated",sn=gb+"_pending",Jr=gb+"_"+Fi;function o2(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class K4{constructor(e){this.gt=e}triggerStatus(e){var n=this.gt.map(r=>r.triggerStatus(e));return n.includes(Hr)?Hr:n.includes(sn)?sn:Jr}stop(){this.gt.forEach(e=>e.stop())}}class X4{constructor(e){this.gt=e}triggerStatus(e){var n=new Set;for(var r of this.gt)n.add(r.triggerStatus(e));switch(n.delete(Jr),n.size){case 0:return Jr;case 1:return Array.from(n)[0];default:return sn}}stop(){this.gt.forEach(e=>e.stop())}}class DG{triggerStatus(){return sn}stop(){}}class OG{constructor(e){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,r;this._t=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.bt=((r=e.sessionRecording)==null?void 0:r.urlBlocklist)||[]}wt(e){var n;return this._t.length===0?Jr:((n=this._instance)==null?void 0:n.get_property(Xv))===e?Hr:sn}triggerStatus(e){var n=this.wt(e),r=n===Hr?Hr:n===sn?sn:Jr;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(e,n,r){if(L!==void 0&&L.location.href){var s=L.location.href,i=this.urlBlocked,o=o2(s,this.bt);i&&o||(o&&!i?e():!o&&i&&n(),o2(s,this._t)&&r("url"))}}stop(){}}class MG{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=e}triggerStatus(){var e=sn;return Ne(this.linkedFlag)&&(e=Jr),this.linkedFlagSeen&&(e=Hr),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var r;if(this.linkedFlag=((r=e.sessionRecording)==null?void 0:r.linkedFlag)||null,!Ne(this.linkedFlag)&&!this.linkedFlagSeen){var s=at(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,i=at(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(ot(a)&&s in a){var c=a[s];l=Fr(c)?c===!0:i?c===i:!!c}this.linkedFlagSeen=l,l&&n(s,i)})}}stop(){this.yt()}}class LG{constructor(e){this.St=[],this._instance=e}onRemoteConfig(e){var n;this.St=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}$t(e){var n;return this.St.length===0?Jr:((n=this._instance)==null?void 0:n.get_property(Yv))===e?Hr:sn}triggerStatus(e){var n=this.$t(e),r=n===Hr?Hr:n===sn?sn:Jr;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function FG(t){return t.isRecordingEnabled?Xo:Fi}function VG(t){if(!t.receivedDecide)return Xo;if(!t.isRecordingEnabled)return Fi;if(t.urlTriggerMatching.urlBlocked)return mb;var e=t.isSampled===!0,n=new K4([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?pb:n===Hr?Gp:n===sn?Xo:t.isSampled===!1?Fi:Gp}function $G(t){if(!t.receivedDecide)return Xo;if(!t.isRecordingEnabled)return Fi;if(t.urlTriggerMatching.urlBlocked)return mb;var e=new X4([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==Jr,r=Fr(t.isSampled);return n&&e===sn?Xo:n&&e===Jr||r&&!t.isSampled?Fi:t.isSampled===!0?pb:Gp}var nu="[SessionRecording]",Yt=Bt(nu);function nf(){var t;return ve==null||(t=ve.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var UG=3e5,BG=[wr.MouseMove,wr.MouseInteraction,wr.Scroll,wr.ViewportResize,wr.Input,wr.TouchMove,wr.MediaInteraction,wr.Drag],a2=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function ao(t){return function(e,n){for(var r="",s=0;s<e.length;){var i=e[s++];i<128||n?r+=String.fromCharCode(i):i<224?r+=String.fromCharCode((31&i)<<6|63&e[s++]):i<240?r+=String.fromCharCode((15&i)<<12|(63&e[s++])<<6|63&e[s++]):(i=((15&i)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}return r}(H4(G4(JSON.stringify(t))),!0)}function l2(t){return t.type===ds.Custom&&t.data.tag==="sessionIdle"}class zG{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(nu+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var e,n;return this.Rt.triggerStatus(this.sessionId)===sn?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:UG}get Tt(){var e=this._instance.get_property(eu);return Fr(e)?e:null}get Mt(){var e,n,r=(e=this.M)==null?void 0:e.data[((n=this.M)==null?void 0:n.data.length)-1],{sessionStartTimestamp:s}=this.It.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-s:null}get Ct(){var e=!!this._instance.get_property(Kv),n=!this._instance.config.disable_session_recording;return L&&e&&n}get Ot(){var e=!!this._instance.get_property(OT),n=this._instance.config.enable_recording_console_log;return n??e}get Ft(){var e,n,r,s,i,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(FT),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,d=(r=(s=a==null?void 0:a.canvasFps)!==null&&s!==void 0?s:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,f=(i=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&i!==void 0?i:.4;if(typeof f=="string"){var p=parseFloat(f);f=isNaN(p)?.4:p}return{enabled:c,fps:tr(d,0,12,"canvas recording fps",4),quality:tr(f,0,1,"canvas recording quality",.4)}}get At(){var e,n,r=this._instance.get_property(MT),s={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},i=(s==null?void 0:s.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(s==null?void 0:s.recordBody)||(r==null?void 0:r.recordBody),a=ot(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Fr(a)?a:r!=null&&r.capturePerformance);return i||o||l?{recordHeaders:i,recordBody:o,recordPerformance:l}:void 0}get Dt(){var e,n,r,s,i,o,a=this._instance.get_property(LT),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},c=(s=l==null?void 0:l.maskAllInputs)!==null&&s!==void 0?s:a==null?void 0:a.maskAllInputs,d=(i=l==null?void 0:l.maskTextSelector)!==null&&i!==void 0?i:a==null?void 0:a.maskTextSelector,f=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return G(c)&&G(d)&&G(f)?void 0:{maskAllInputs:c==null||c,maskTextSelector:d,blockSelector:f}}get Lt(){var e=this._instance.get_property(VT);return nn(e)?e:null}get Nt(){var e=this._instance.get_property($T);return nn(e)?e:null}get status(){return this.jt?this.zt({receivedDecide:this.jt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):Xo}constructor(e){if(this.zt=FG,this.jt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new DG,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(X!=null&&X.visibilityState){var s="window "+X.visibilityState;this.ii(s,{})}},this._instance=e,this.Et=!1,this.si="/s/",this.ni=void 0,this.jt=!1,!this._instance.sessionManager)throw Yt.error("started without valid sessionManager"),new Error(nu+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(nu+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new MG(this._instance),this.Ut=new OG(this._instance),this.qt=new LG(this._instance);var{sessionId:n,windowId:r}=this.It.checkAndGetSessionAndWindowId();this.kt=n,this.oi=r,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Yt.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.Ct?(this.li(e),Ye(L,"beforeunload",this.Qt),Ye(L,"offline",this.ti),Ye(L,"online",this.ei),Ye(L,"visibilitychange",this.ri),this.ui(),this.hi(),Ne(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.di(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ii("$pageview",{href:r})}}catch(s){Yt.error("Could not add $pageview to rrweb session",s)}})),this.Vt||(this.Vt=this.It.onSessionId((n,r,s)=>{var i,o;s&&(this.ii("$session_id_change",{sessionId:n,windowId:r,changeReason:s}),(i=this._instance)==null||(i=i.persistence)==null||i.unregister(Yv),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(Xv))}))):this.stopRecording()}stopRecording(){var e,n,r,s;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,L==null||L.removeEventListener("beforeunload",this.Qt),L==null||L.removeEventListener("offline",this.ti),L==null||L.removeEventListener("online",this.ei),L==null||L.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),(e=this.Jt)==null||e.call(this),this.Jt=void 0,(n=this.Xt)==null||n.call(this),this.Xt=void 0,(r=this.Vt)==null||r.call(this),this.Vt=void 0,(s=this.Yt)==null||s.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Yt.info("stopped"))}ci(){var e;(e=this._instance.persistence)==null||e.unregister(eu)}fi(e){var n,r=this.kt!==e,s=this.Lt;if(nn(s)){var i=this.Tt,o=r||!Fr(i),a=o?jG(e,s):i;o&&(a?this.pi(pb):Yt.warn("Sample rate ("+s+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:s,isSampled:a})),(n=this._instance.persistence)==null||n.register({[eu]:a})}else this.ci()}onRemoteConfig(e){var n,r,s,i;this.ii("$remote_config_received",e),this.gi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.si=(i=e.sessionRecording)==null?void 0:i.endpoint),this.ui(),((r=e.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.zt=VG,this.Rt=new K4([this.qt,this.Ut])):(this.zt=$G,this.Rt=new X4([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(s=e.sessionRecording)==null?void 0:s.triggerMatchType}),this.Ut.onRemoteConfig(e),this.qt.onRemoteConfig(e),this.Bt.onRemoteConfig(e,(o,a)=>{this.pi("linked_flag_matched",{flag:o,variant:a})}),this.jt=!0,this.startIfEnabledOrStop()}ui(){nn(this.Lt)&&Ne(this.Yt)&&(this.Yt=this.It.onSessionId(e=>{this.fi(e)}))}gi(e){if(this._instance.persistence){var n,r=this._instance.persistence,s=()=>{var i,o,a,l,c,d,f,p,m,w=(i=e.sessionRecording)==null?void 0:i.sampleRate,v=Ne(w)?null:parseFloat(w);Ne(v)&&this.ci();var S=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;r.register({[Kv]:!!e.sessionRecording,[OT]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[MT]:K({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[LT]:(c=e.sessionRecording)==null?void 0:c.masking,[FT]:{enabled:(d=e.sessionRecording)==null?void 0:d.recordCanvas,fps:(f=e.sessionRecording)==null?void 0:f.canvasFps,quality:(p=e.sessionRecording)==null?void 0:p.canvasQuality},[VT]:v,[$T]:G(S)?null:S,[UT]:(m=e.sessionRecording)==null?void 0:m.scriptConfig})};s(),(n=this.Kt)==null||n.call(this),this.Kt=this.It.onSessionId(s)}}log(e,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}li(e){if(!G(Object.assign)&&!G(Array.from)&&!(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Et=!0,this.It.checkAndGetSessionAndWindowId(),nf()?this.mi():(n=ve.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.bi,r=>{if(r)return Yt.error("could not load recorder",r);this.mi()}),Yt.info("starting"),this.status===Gp&&this.pi(e||"recording_initialized")}}get bi(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(UT))==null?void 0:e.script)||"recorder"}wi(e){var n;return e.type===3&&BG.indexOf((n=e.data)==null?void 0:n.source)!==-1}yi(e){var n=this.wi(e);n||this.Wt||e.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var r=!1;if(n&&(this.Gt=e.timestamp,this.Wt)){var s=this.Wt==="unknown";this.Wt=!1,s||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)}if(!this.Wt){var{windowId:i,sessionId:o}=this.It.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.kt!==o,l=this.oi!==i;this.oi=i,this.kt=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Si()}}$i(e){try{return e.rrwebMethod(),!0}catch(n){return this.Ht.length<10?this.Ht.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Yt.warn("could not emit queued rrweb event.",n,e),!1}}ii(e,n){return this.$i(a2(()=>nf().addCustomEvent(e,n)))}ki(){return this.$i(a2(()=>nf().takeFullSnapshot()))}mi(){var e,n,r,s,i={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in i&&(a==="maskInputOptions"?i.maskInputOptions=K({password:!0},l):i[a]=l);this.Ft&&this.Ft.enabled&&(i.recordCanvas=!0,i.sampling={canvas:this.Ft.fps},i.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(i.maskAllInputs=(n=this.Dt.maskAllInputs)===null||n===void 0||n,i.maskTextSelector=(r=this.Dt.maskTextSelector)!==null&&r!==void 0?r:void 0,i.blockSelector=(s=this.Dt.blockSelector)!==null&&s!==void 0?s:void 0);var c=nf();if(c){this.xi=(e=this.xi)!==null&&e!==void 0?e:new EG(c,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(f,p)=>{var m="Too many mutations on node '"+f+"'. Rate limiting. This could be due to SVG animations or something similar";Yt.info(m,{node:p}),this.log(nu+" "+m,"warn")}});var d=this.Ei();this.ni=c(K({emit:f=>{this.onRRwebEmit(f)},plugins:d},i)),this.Gt=Date.now(),this.Wt=Fr(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:i,activePlugins:d.map(f=>f==null?void 0:f.name)}),this.ii("$posthog_config",{config:this._instance.config})}else Yt.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),this.Wt!==!0){var e=this.Pt;e&&(this.vi=setInterval(()=>{this.ki()},e))}}Ei(){var e,n,r=[],s=(e=ve.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;s&&this.Ot&&r.push(s());var i=(n=ve.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.At&&rr(i)&&(!BH.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(i(bG(this._instance.config,this.At))):Yt.info("NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var n;if(this.Ii(),e&&ot(e)){if(e.type===ds.Meta){var r=this.di(e.data.href);if(this.Pi=r,!r)return;e.data.href=r}else this.Ri();if(this.Ut.checkUrlTriggerConditions(()=>this.Ti(),()=>this.Mi(),p=>this.Ci(p)),!this.Ut.urlBlocked||(s=e).type===ds.Custom&&s.data.tag==="recording paused"){var s;e.type===ds.FullSnapshot&&this.Si(),e.type===ds.FullSnapshot&&this.jt&&this.Rt.triggerStatus(this.sessionId)===sn&&this.ai();var i=this.xi?this.xi.throttleMutations(e):e;if(i){var o=function(p){var m=p;if(m&&ot(m)&&m.type===6&&ot(m.data)&&m.data.plugin==="rrweb/console@1"){m.data.payload.payload.length>10&&(m.data.payload.payload=m.data.payload.payload.slice(0,10),m.data.payload.payload.push("...[truncated]"));for(var w=[],v=0;v<m.data.payload.payload.length;v++)m.data.payload.payload[v]&&m.data.payload.payload[v].length>2e3?w.push(m.data.payload.payload[v].slice(0,2e3)+"...[truncated]"):w.push(m.data.payload.payload[v]);return m.data.payload.payload=w,p}return p}(i);if(this.yi(o),this.Wt!==!0||l2(o)){if(l2(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var d=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(p){if(Wp(p)<1024)return p;try{if(p.type===ds.FullSnapshot)return K({},p,{data:ao(p.data),cv:"2024-10"});if(p.type===ds.IncrementalSnapshot&&p.data.source===wr.Mutation)return K({},p,{cv:"2024-10",data:K({},p.data,{texts:ao(p.data.texts),attributes:ao(p.data.attributes),removes:ao(p.data.removes),adds:ao(p.data.adds)})});if(p.type===ds.IncrementalSnapshot&&p.data.source===wr.StyleSheetRule)return K({},p,{cv:"2024-10",data:K({},p.data,{adds:p.data.adds?ao(p.data.adds):void 0,removes:p.data.removes?ao(p.data.removes):void 0})})}catch(m){Yt.error("could not compress event - will use uncompressed event",m)}return p}(o):o,f={$snapshot_bytes:Wp(d),$snapshot_data:d,$session_id:this.kt,$window_id:this.oi};this.status!==Fi?this.Oi(f):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&L){var e=this.di(L.location.href);this.Pi!==e&&(this.ii("$url_changed",{href:e}),this.Pi=e)}}Ii(){if(this.Ht.length){var e=[...this.Ht];this.Ht=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.$i(n)})}}di(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,s={url:e};return(r=s=n.maskNetworkRequestFn(s))==null?void 0:r.url}return e}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var e=this.Nt,n=this.Mt,r=nn(n)&&n>=0,s=nn(e)&&r&&n<e;return this.status===Xo||this.status===mb||this.status===Fi||s?(this.Fi=setTimeout(()=>{this.Zt()},2e3),this.M):(this.M.data.length>0&&i_(this.M).forEach(i=>{this.Ai({$snapshot_bytes:i.size,$snapshot_data:i.data,$session_id:i.sessionId,$window_id:i.windowId,$lib:"web",$lib_version:fs.LIB_VERSION})}),this.ai())}Oi(e){var n,r=2+(((n=this.M)==null?void 0:n.data.length)||0);!this.Wt&&(this.M.size+e.$snapshot_bytes+r>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=e.$snapshot_bytes,this.M.data.push(e.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout(()=>{this.Zt()},2e3))}Ai(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(e){var n;this.Rt.triggerStatus(this.sessionId)===sn&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?Xv:Yv]:this.kt}),this.Zt(),this.pi(e+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Yt.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Yt.info("recording resumed"))}hi(){this.qt.St.length!==0&&Ne(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",e=>{try{this.qt.St.includes(e.event)&&this.Ci("event")}catch(n){Yt.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[eu]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(e){this.Ci(e)}pi(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),Yt.info(e.replace("_"," "),n),we(["recording_initialized","session_id_changed"],e)||this.ii(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:e}}}var z0=Bt("[SegmentIntegration]");function qG(t,e){var n=t.config.segment;if(!n)return e();(function(r,s){var i=r.config.segment;if(!i)return s();var o=l=>{var c=()=>l.anonymousId()||vi();r.config.get_device_id=c,l.id()&&(r.register({distinct_id:l.id(),$device_id:c()}),r.persistence.set_property(us,"identified")),s()},a=i.user();"then"in a&&rr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((r=>{Promise&&Promise.resolve||z0.warn("This browser does not have Promise support, and can not use the segment integration");var s=(i,o)=>{if(!o)return i;i.event.userId||i.event.anonymousId===r.get_distinct_id()||(z0.info("No userId set, resetting PostHog"),r.reset()),i.event.userId&&i.event.userId!==r.get_distinct_id()&&(z0.info("UserId set, identifying with PostHog"),r.identify(i.event.userId));var a=r.calculateEventProperties(o,i.event.properties);return i.event.properties=Object.assign({},a,i.event.properties),i};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:i=>s(i,i.event.event),page:i=>s(i,"$pageview"),identify:i=>s(i,"$identify"),screen:i=>s(i,"$screen")}})(t)).then(()=>{e()})})}var Y4="posthog-js";function Q4(t,e){var{organization:n,projectId:r,prefix:s,severityAllowList:i=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,d,f;if(!(i==="*"||i.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var p=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=p,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var m=((a=o.exception)==null?void 0:a.values)||[],w=m.map(S=>K({},S,{stacktrace:S.stacktrace?K({},S.stacktrace,{type:"raw",frames:(S.stacktrace.frames||[]).map(x=>K({},x,{platform:"web:javascript"}))}):void 0})),v={$exception_message:((l=m[0])==null?void 0:l.value)||o.message,$exception_type:(c=m[0])==null?void 0:c.type,$exception_personURL:p,$exception_level:o.level,$exception_list:w,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((d=m[0])==null?void 0:d.value)||o.message,$sentry_exception_type:(f=m[0])==null?void 0:f.type,$sentry_tags:o.tags};return n&&r&&(v.$sentry_url=(s||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),t.exceptions.sendExceptionEvent(v),o}}class WG{constructor(e,n,r,s,i){this.name=Y4,this.setupOnce=function(o){o(Q4(e,{organization:n,projectId:r,prefix:s,severityAllowList:i}))}}}var HG=L!=null&&L.location?zp(L.location.hash,"__posthog")||zp(location.hash,"state"):null,c2="_postHogToolbarParams",u2=Bt("[Toolbar]"),Ks=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(Ks||{});class GG{constructor(e){this.instance=e}Di(e){ve.ph_toolbar_state=e}Li(){var e;return(e=ve.ph_toolbar_state)!==null&&e!==void 0?e:Ks.UNINITIALIZED}maybeLoadToolbar(e,n,r){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!L||!X)return!1;e=e??L.location,r=r??L.history;try{if(!n){try{L.localStorage.setItem("test","test"),L.localStorage.removeItem("test")}catch{return!1}n=L==null?void 0:L.localStorage}var s,i=HG||zp(e.hash,"__posthog")||zp(e.hash,"state"),o=i?CT(()=>JSON.parse(atob(decodeURIComponent(i))))||CT(()=>JSON.parse(decodeURIComponent(i))):null;return o&&o.action==="ph_authorize"?((s=o).source="url",s&&Object.keys(s).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((s=JSON.parse(n.getItem(c2)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch{return!1}}Ni(e){var n=ve.ph_load_toolbar||ve.ph_load_editor;!Ne(n)&&rr(n)?n(e,this.instance):u2.warn("No toolbar load function found")}loadToolbar(e){var n=!(X==null||!X.getElementById(E4));if(!L||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,s=K({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(L.localStorage.setItem(c2,JSON.stringify(K({},s,{source:void 0}))),this.Li()===Ks.LOADED)this.Ni(s);else if(this.Li()===Ks.UNINITIALIZED){var i;this.Di(Ks.LOADING),(i=ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return u2.error("[Toolbar] Failed to load",o),void this.Di(Ks.UNINITIALIZED);this.Di(Ks.LOADED),this.Ni(s)}),Ye(L,"turbolinks:load",()=>{this.Di(Ks.UNINITIALIZED),this.loadToolbar(s)})}return!0}ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,r){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,n,r)}}var KG=Bt("[TracingHeaders]");class XG{constructor(e){this.zi=void 0,this.Ui=void 0,this.V=()=>{var n,r;G(this.zi)&&((n=ve.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.sessionManager)),G(this.Ui)&&((r=ve.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.sessionManager))},this._instance=e}G(e){var n,r;(n=ve.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(r=ve.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",s=>{if(s)return KG.error("failed to load script",s);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.G(this.V):((e=this.zi)==null||e.call(this),(n=this.Ui)==null||n.call(this),this.zi=void 0,this.Ui=void 0)}}var zs=Bt("[Web Vitals]"),d2=9e5;class YG{constructor(e){var n;this.qi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Bi=()=>{clearTimeout(this.Hi),this.M.metrics.length!==0&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((r,s)=>K({},r,{["$web_vitals_"+s.name+"_event"]:K({},s),["$web_vitals_"+s.name+"_value"]:s.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Wi=r=>{var s,i=(s=this._instance.sessionManager)==null?void 0:s.checkAndGetSessionAndWindowId(!0);if(G(i))zs.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Gi();G(o)||(Ne(r==null?void 0:r.name)||Ne(r==null?void 0:r.value)?zs.error("Invalid metric received",r):this.Ji&&r.value>=this.Ji?zs.error("Ignoring metric with value >= "+this.Ji,r):(this.M.url!==o&&(this.Bi(),this.Hi=setTimeout(this.Bi,this.flushToCaptureTimeoutMs)),G(this.M.url)&&(this.M.url=o),this.M.firstMetricTimestamp=G(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.M.metrics.push(K({},r,{$current_url:o,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Bi()))}},this.V=()=>{var r,s,i,o,a=ve.__PosthogExtensions__;G(a)||G(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:s,onFCP:i,onINP:o}=a.postHogWebVitalsCallbacks),r&&s&&i&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Wi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&s(this.Wi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.Wi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Wi.bind(this)),this.i=!0):zs.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.qi=!((n=this._instance.persistence)==null||!n.props[jT]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=ot(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return G(r)?((n=this._instance.persistence)==null?void 0:n.props[DT])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(ot(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Ji(){var e=ot(this._instance.config.capture_performance)&&nn(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:d2;return 0<e&&e<=6e4?d2:e}get isEnabled(){var e=bn==null?void 0:bn.protocol;if(e!=="http:"&&e!=="https:")return zs.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=ot(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Fr(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Fr(n)?n:this.qi}startIfEnabled(){this.isEnabled&&!this.i&&(zs.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(e){var n=ot(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=ot(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[jT]:n}),this._instance.persistence.register({[DT]:r})),this.qi=n,this.startIfEnabled()}G(e){var n,r;(n=ve.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(r=ve.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",s=>{s?zs.error("failed to load script",s):e()})}Gi(){var e=L?L.location.href:void 0;return e||zs.error("Could not determine current URL"),e}}var QG=Bt("[Heatmaps]");function h2(t){return ot(t)&&"clientX"in t&&"clientY"in t&&nn(t.clientX)&&nn(t.clientY)}class JG{constructor(e){var n;this.rageclicks=new D4,this.qi=!1,this.i=!1,this.Vi=null,this.instance=e,this.qi=!((n=this.instance.persistence)==null||!n.props[Hv])}get flushIntervalMilliseconds(){var e=5e3;return ot(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return G(this.instance.config.capture_heatmaps)?G(this.instance.config.enable_heatmaps)?this.qi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;QG.info("starting..."),this.Ki(),this.Vi=setInterval(this.Yi.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.Vi)!==null&&e!==void 0?e:void 0),(n=this.Xi)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Hv]:n}),this.qi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.M;return this.M=void 0,e}Qi(e){this.Zi(e.originalEvent,"deadclick")}Ki(){L&&X&&(Ye(L,"beforeunload",this.Yi.bind(this)),Ye(X,"click",e=>this.Zi(e||(L==null?void 0:L.event)),{capture:!0}),Ye(X,"mousemove",e=>this.te(e||(L==null?void 0:L.event)),{capture:!0}),this.Xi=new M4(this.instance,nG,this.Qi.bind(this)),this.Xi.startIfEnabled(),this.i=!0)}ie(e,n){var r=this.instance.scrollManager.scrollY(),s=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var d=a;d&&rg(d)&&!Ri(d,"body");){if(d===c)return!1;if(we(l,L==null?void 0:L.getComputedStyle(d).position))return!0;d=A4(d)}return!1}(I4(e),["fixed","sticky"],i);return{x:e.clientX+(o?0:s),y:e.clientY+(o?0:r),target_fixed:o,type:n}}Zi(e,n){var r;if(n===void 0&&(n="click"),!zT(e.target)&&h2(e)){var s=this.ie(e,n);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.ee(K({},s,{type:"rageclick"})),this.ee(s)}}te(e){!zT(e.target)&&h2(e)&&(clearTimeout(this.re),this.re=setTimeout(()=>{this.ee(this.ie(e,"mousemove"))},500))}ee(e){if(L){var n=L.location.href;this.M=this.M||{},this.M[n]||(this.M[n]=[]),this.M[n].push(e)}}Yi(){this.M&&!Ua(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class ZG{constructor(e){this._instance=e}doPageView(e,n){var r,s=this.se(e,n);return this.ne={pathname:(r=L==null?void 0:L.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),s}doPageLeave(e){var n;return this.se(e,(n=this.ne)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ne)==null?void 0:e.pageViewId}}se(e,n){var r=this.ne;if(!r)return{$pageview_id:n};var s={$pageview_id:n,$prev_pageview_id:r.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:d,maxContentY:f}=i;if(!(G(o)||G(a)||G(l)||G(c)||G(d)||G(f))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),d=Math.ceil(d),f=Math.ceil(f);var p=o<=1?1:tr(a/o,0,1),m=o<=1?1:tr(l/o,0,1),w=c<=1?1:tr(d/c,0,1),v=c<=1?1:tr(f/c,0,1);s=gt(s,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:p,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:m,$prev_pageview_last_content:d,$prev_pageview_last_content_percentage:w,$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:v})}}return r.pathname&&(s.$prev_pageview_pathname=r.pathname),r.timestamp&&(s.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),s}}var eK=function(t){var e,n,r,s,i="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,s=0;s<r;s++){var o=t.charCodeAt(s),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ki(a)||(n>e&&(i+=t.substring(e,n)),i+=a,e=n=s+1)}return n>e&&(i+=t.substring(e,t.length)),i},tK=!!zv||!!Bv,f2="text/plain",Kp=(t,e)=>{var[n,r]=t.split("?"),s=K({},e);r==null||r.split("&").forEach(o=>{var[a]=o.split("=");delete s[a]});var i=zH(s);return n+"?"+(i=i?(r?r+"&":"")+i:r)},ru=(t,e)=>JSON.stringify(t,(n,r)=>typeof r=="bigint"?r.toString():r,e),q0=t=>{var{data:e,compression:n}=t;if(e){if(n===ps.GZipJS){var r=H4(G4(ru(e)),{mtime:0}),s=new Blob([r],{type:f2});return{contentType:f2,body:s,estimatedSize:s.size}}if(n===ps.Base64){var i=function(l){var c,d,f,p,m,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=0,S=0,x="",_=[];if(!l)return l;l=eK(l);do c=(m=l.charCodeAt(v++)<<16|l.charCodeAt(v++)<<8|l.charCodeAt(v++))>>18&63,d=m>>12&63,f=m>>6&63,p=63&m,_[S++]=w.charAt(c)+w.charAt(d)+w.charAt(f)+w.charAt(p);while(v<l.length);switch(x=_.join(""),l.length%3){case 1:x=x.slice(0,-2)+"==";break;case 2:x=x.slice(0,-1)+"="}return x}(ru(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:ru(l)))(i);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=ru(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Tu=[];Bv&&Tu.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:s,estimatedSize:i}=(e=q0(t))!==null&&e!==void 0?e:{},o=new Headers;Oe(t.headers,function(d,f){o.append(f,d)}),r&&o.append("Content-Type",r);var a=t.url,l=null;if(AT){var c=new AT;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}Bv(a,K({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(i||0)<52428.8,body:s,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(d=>d.text().then(f=>{var p={statusCode:d.status,text:f};if(d.status===200)try{p.json=JSON.parse(f)}catch(m){ee.error(m)}t.callback==null||t.callback(p)})).catch(d=>{ee.error(d),t.callback==null||t.callback({statusCode:0,text:d})}).finally(()=>l?clearTimeout(l.timeout):null)}}),zv&&Tu.push({transport:"XHR",method:t=>{var e,n=new zv;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:s}=(e=q0(t))!==null&&e!==void 0?e:{};Oe(t.headers,function(i,o){n.setRequestHeader(o,i)}),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var i={statusCode:n.status,text:n.responseText};if(n.status===200)try{i.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(i)}},n.send(s)}}),Un!=null&&Un.sendBeacon&&Tu.push({transport:"sendBeacon",method:t=>{var e=Kp(t.url,{beacon:"1"});try{var n,{contentType:r,body:s}=(n=q0(t))!==null&&n!==void 0?n:{},i=typeof s=="string"?new Blob([s],{type:r}):s;Un.sendBeacon(e,i)}catch{}}});var Dl=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function p2(t,e,n){return ru({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var nK={exact:(t,e)=>e.some(n=>t.some(r=>n===r)),is_not:(t,e)=>e.every(n=>t.every(r=>n!==r)),regex:(t,e)=>e.some(n=>t.some(r=>Dl(n,r))),not_regex:(t,e)=>e.every(n=>t.every(r=>!Dl(n,r))),icontains:(t,e)=>e.map(rf).some(n=>t.map(rf).some(r=>n.includes(r))),not_icontains:(t,e)=>e.map(rf).every(n=>t.map(rf).every(r=>!n.includes(r)))},rf=t=>t.toLowerCase(),rK=Bt("[Error tracking]");class sK{constructor(e){var n,r;this.oe=[],this._instance=e,this.oe=(n=(r=this._instance.persistence)==null?void 0:r.get_property(Gv))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,r,s=(n=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&n!==void 0?n:[];this.oe=s,this._instance.persistence&&this._instance.persistence.register({[Gv]:this.oe})}sendExceptionEvent(e){this.ae(e)?rK.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ae(e){var n=e.$exception_list;if(!n||!He(n)||n.length===0)return!1;var r=n.reduce((s,i)=>{var{type:o,value:a}=i;return at(o)&&o.length>0&&s.$exception_types.push(o),at(a)&&a.length>0&&s.$exception_messages.push(a),s},{$exception_types:[],$exception_messages:[]});return this.oe.some(s=>{var i=s.values.map(o=>{var a=nK[o.operator],l=He(o.value)?o.value:[o.value],c=r[o.key];return l.length>0&&a(l,c)});return s.type==="OR"?i.some(Boolean):i.every(Boolean)})}}var ir="Mobile",Xp="iOS",Vr="Android",md="Tablet",J4=Vr+" "+md,Z4="iPad",eD="Apple",tD=eD+" Watch",gd="Safari",Ol="BlackBerry",nD="Samsung",rD=nD+"Browser",sD=nD+" Internet",Yo="Chrome",iK=Yo+" OS",iD=Yo+" "+Xp,yb="Internet Explorer",oD=yb+" "+ir,vb="Opera",oK=vb+" Mini",_b="Edge",aD="Microsoft "+_b,cl="Firefox",lD=cl+" "+Xp,yd="Nintendo",vd="PlayStation",ul="Xbox",cD=Vr+" "+ir,uD=ir+" "+gd,su="Windows",h_=su+" Phone",m2="Nokia",f_="Ouya",dD="Generic",aK=dD+" "+ir.toLowerCase(),hD=dD+" "+md.toLowerCase(),p_="Konqueror",dn="(\\d+(\\.\\d+)?)",W0=new RegExp("Version/"+dn),lK=new RegExp(ul,"i"),cK=new RegExp(vd+" \\w+","i"),uK=new RegExp(yd+" \\w+","i"),wb=new RegExp(Ol+"|PlayBook|BB10","i"),dK={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},hK=(t,e)=>e&&we(e,eD)||function(n){return we(n,gd)&&!we(n,Yo)&&!we(n,Vr)}(t),fD=function(t,e){return e=e||"",we(t," OPR/")&&we(t,"Mini")?oK:we(t," OPR/")?vb:wb.test(t)?Ol:we(t,"IE"+ir)||we(t,"WPDesktop")?oD:we(t,rD)?sD:we(t,_b)||we(t,"Edg/")?aD:we(t,"FBIOS")?"Facebook "+ir:we(t,"UCWEB")||we(t,"UCBrowser")?"UC Browser":we(t,"CriOS")?iD:we(t,"CrMo")||we(t,Yo)?Yo:we(t,Vr)&&we(t,gd)?cD:we(t,"FxiOS")?lD:we(t.toLowerCase(),p_.toLowerCase())?p_:hK(t,e)?we(t,ir)?uD:gd:we(t,cl)?cl:we(t,"MSIE")||we(t,"Trident/")?yb:we(t,"Gecko")?cl:""},fK={[oD]:[new RegExp("rv:"+dn)],[aD]:[new RegExp(_b+"?\\/"+dn)],[Yo]:[new RegExp("("+Yo+"|CrMo)\\/"+dn)],[iD]:[new RegExp("CriOS\\/"+dn)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+dn)],[gd]:[W0],[uD]:[W0],[vb]:[new RegExp("(Opera|OPR)\\/"+dn)],[cl]:[new RegExp(cl+"\\/"+dn)],[lD]:[new RegExp("FxiOS\\/"+dn)],[p_]:[new RegExp("Konqueror[:/]?"+dn,"i")],[Ol]:[new RegExp(Ol+" "+dn),W0],[cD]:[new RegExp("android\\s"+dn,"i")],[sD]:[new RegExp(rD+"\\/"+dn)],[yb]:[new RegExp("(rv:|MSIE )"+dn)],Mozilla:[new RegExp("rv:"+dn)]},pK=function(t,e){var n=fD(t,e),r=fK[n];if(G(r))return null;for(var s=0;s<r.length;s++){var i=r[s],o=t.match(i);if(o)return parseFloat(o[o.length-2])}return null},g2=[[new RegExp(ul+"; "+ul+" (.*?)[);]","i"),t=>[ul,t&&t[1]||""]],[new RegExp(yd,"i"),[yd,""]],[new RegExp(vd,"i"),[vd,""]],[wb,[Ol,""]],[new RegExp(su,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[h_,""];if(new RegExp(ir).test(e)&&!/IEMobile\b/.test(e))return[su+" "+ir,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],s=dK[r]||"";return/arm/i.test(e)&&(s="RT"),[su,s]}return[su,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Xp,e.join(".")]}return[Xp,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=G(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Vr+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Vr+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Vr,e.join(".")]}return[Vr,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[iK,""]],[/Linux|debian/i,["Linux",""]]],y2=function(t){return uK.test(t)?yd:cK.test(t)?vd:lK.test(t)?ul:new RegExp(f_,"i").test(t)?f_:new RegExp("("+h_+"|WPDesktop)","i").test(t)?h_:/iPad/.test(t)?Z4:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?tD:wb.test(t)?Ol:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(m2,"i").test(t)?m2:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(ir).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Vr:J4:Vr:new RegExp("(pda|"+ir+")","i").test(t)?aK:new RegExp(md,"i").test(t)&&!new RegExp(md+" pc","i").test(t)?hD:""},sf="https?://(.*)",ig=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],mK=ng(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],ig),xb="<masked>";function pD(t,e,n){if(!X)return{};var r=e?ng([],ig,n||[]):[];return mD(ub(X.URL,r,xb),t)}function mD(t,e){var n=mK.concat(e||[]),r={};return Oe(n,function(s){var i=Bp(t,s);r[s]=i||null}),r}function gD(t){var e=function(i){return i?i.search(sf+"google.([^/?]*)")===0?"google":i.search(sf+"bing.com")===0?"bing":i.search(sf+"yahoo.com")===0?"yahoo":i.search(sf+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",r={};if(!Ki(e)){r.$search_engine=e;var s=X?Bp(X.referrer,n):"";s.length&&(r.ph_keyword=s)}return r}function v2(){return navigator.language||navigator.userLanguage}function yD(){return(X==null?void 0:X.referrer)||"$direct"}function vD(t,e){var n=t?ng([],ig,e||[]):[],r=bn==null?void 0:bn.href.substring(0,1e3);return{r:yD().substring(0,1e3),u:r?ub(r,n,xb):void 0}}function _D(t){var e,{r:n,u:r}=t,s={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Rl(n))==null?void 0:e.host};if(r){s.$current_url=r;var i=Rl(r);s.$host=i==null?void 0:i.host,s.$pathname=i==null?void 0:i.pathname;var o=mD(r);gt(s,o)}if(n){var a=gD(n);gt(s,a)}return s}function wD(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function gK(){try{return new Date().getTimezoneOffset()}catch{return}}function yK(t,e){if(!wn)return{};var n,r,s,i=t?ng([],ig,e||[]):[],[o,a]=function(l){for(var c=0;c<g2.length;c++){var[d,f]=g2[c],p=d.exec(l),m=p&&(rr(f)?f(p,l):f);if(m)return m}return["",""]}(wn);return gt(lb({$os:o,$os_version:a,$browser:fD(wn,navigator.vendor),$device:y2(wn),$device_type:(r=wn,s=y2(r),s===Z4||s===J4||s==="Kobo"||s==="Kindle Fire"||s===hD?md:s===yd||s===ul||s===vd||s===f_?"Console":s===tD?"Wearable":s?ir:"Desktop"),$timezone:wD(),$timezone_offset:gK()}),{$current_url:ub(bn==null?void 0:bn.href,i,xb),$host:bn==null?void 0:bn.host,$pathname:bn==null?void 0:bn.pathname,$raw_user_agent:wn.length>1e3?wn.substring(0,997)+"...":wn,$browser_version:pK(wn,navigator.vendor),$browser_language:v2(),$browser_language_prefix:(n=v2(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:L==null?void 0:L.screen.height,$screen_width:L==null?void 0:L.screen.width,$viewport_height:L==null?void 0:L.innerHeight,$viewport_width:L==null?void 0:L.innerWidth,$lib:"web",$lib_version:fs.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Rr=Bt("[FeatureFlags]"),H0="$active_feature_flags",_a="$override_feature_flags",_2="$feature_flag_payloads",Mc="$override_feature_flag_payloads",w2="$feature_flag_request_id",x2=t=>{var e={};for(var[n,r]of Df(t||{}))r&&(e[n]=r);return e},vK=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var r;return[n,(r=e[n].variant)!==null&&r!==void 0?r:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var r;return(r=e[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=e[n].metadata)==null?void 0:r.payload]}))):Rr.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},_K=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({});class wK{constructor(e){this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this.fe=!1,this._instance=e,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ce=!0;else{var e=!this.pe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ge({disableFlags:e})}}get hasLoadedFlags(){return this.ue}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Qv),n=this._instance.get_property(_a),r=this._instance.get_property(Mc);if(!r&&!n)return e||{};var s=gt({},e||{}),i=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var o of i){var a,l,c=s[o],d=n==null?void 0:n[o],f=G(d)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!d,p=G(d)?c.variant:typeof d=="string"?d:void 0,m=r==null?void 0:r[o],w=K({},c,{enabled:f,variant:f?p??(c==null?void 0:c.variant):void 0});f!==(c==null?void 0:c.enabled)&&(w.original_enabled=c==null?void 0:c.enabled),p!==(c==null?void 0:c.variant)&&(w.original_variant=c==null?void 0:c.variant),m&&(w.metadata=K({},c==null?void 0:c.metadata,{payload:m,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),s[o]=w}return this.le||(Rr.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:s}),this.le=!0),s}getFlagVariants(){var e=this._instance.get_property(Ba),n=this._instance.get_property(_a);if(!n)return e||{};for(var r=gt({},e),s=Object.keys(n),i=0;i<s.length;i++)r[s[i]]=n[s[i]];return this.le||(Rr.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this.le=!0),r}getFlagPayloads(){var e=this._instance.get_property(_2),n=this._instance.get_property(Mc);if(!n)return e||{};for(var r=gt({},e||{}),s=Object.keys(n),i=0;i<s.length;i++)r[s[i]]=n[s[i]];return this.le||(Rr.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:r}),this.le=!0),r}reloadFeatureFlags(){this.de||this._instance.config.advanced_disable_feature_flags||this.pe||(this.pe=setTimeout(()=>{this.ge()},5))}_e(){clearTimeout(this.pe),this.pe=void 0}ensureFlagsLoaded(){this.ue||this.he||this.pe||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.de=e}ge(e){var n;if(this._e(),!this._instance.config.advanced_disable_decide)if(this.he)this.ve=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:K({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(tu)||{}),group_properties:this._instance.get_property(mo)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var s=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;s&&(r.timezone=wD()),this.he=!0,this._instance.me({method:"POST",url:this._instance.requestRouter.endpointFor("api",s?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this._instance.config.disable_compression?void 0:ps.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,a,l=!0;if(i.statusCode===200&&(this.ve||(this.$anon_distinct_id=void 0),l=!1),this.he=!1,this.ce||(this.ce=!0,this._instance.be((a=i.json)!==null&&a!==void 0?a:{})),!r.disable_flags||this.ve)if(this.fe=!l,i.json&&(o=i.json.quotaLimited)!=null&&o.includes(_K.FeatureFlags))Rr.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var c;r.disable_flags||this.receivedFeatureFlags((c=i.json)!==null&&c!==void 0?c:{},l),this.ve&&(this.ve=!1,this.ge())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this.ue||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],s=""+r,i=this._instance.get_property(w2)||void 0,o=this._instance.get_property(Fp)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))){var a,l,c,d,f,p,m,w,v;He(o[e])?o[e].push(s):o[e]=[s],(a=this._instance.persistence)==null||a.register({[Fp]:o});var S=this.getFeatureFlagDetails(e),x={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.fe};G(S==null||(d=S.metadata)==null?void 0:d.version)||(x.$feature_flag_version=S.metadata.version);var _,E=(f=S==null||(p=S.reason)==null?void 0:p.description)!==null&&f!==void 0?f:S==null||(m=S.reason)==null?void 0:m.code;E&&(x.$feature_flag_reason=E),S!=null&&(w=S.metadata)!=null&&w.id&&(x.$feature_flag_id=S.metadata.id),G(S==null?void 0:S.original_variant)&&G(S==null?void 0:S.original_enabled)||(x.$feature_flag_original_response=G(S.original_variant)?S.original_enabled:S.original_variant),S!=null&&(v=S.metadata)!=null&&v.original_payload&&(x.$feature_flag_original_payload=S==null||(_=S.metadata)==null?void 0:_.original_payload),this._instance.capture("$feature_flag_called",x)}return r}Rr.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var r=this._instance.config.token;this._instance.me({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:ps.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:s=>{var i,o=(i=s.json)==null?void 0:i.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this.ue||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Rr.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this.ue=!0;var r=this.getFlagVariants(),s=this.getFlagPayloads(),i=this.getFlagsWithDetails();(function(o,a,l,c,d){l===void 0&&(l={}),c===void 0&&(c={}),d===void 0&&(d={});var f=vK(o),p=f.flags,m=f.featureFlags,w=f.featureFlagPayloads;if(m){var v=o.requestId;if(He(m)){Rr.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var S={};if(m)for(var x=0;x<m.length;x++)S[m[x]]=!0;a&&a.register({[H0]:m,[Ba]:S})}else{var _=m,E=w,P=p;o.errorsWhileComputingFlags&&(_=K({},l,_),E=K({},c,E),P=K({},d,P)),a&&a.register(K({[H0]:Object.keys(x2(_)),[Ba]:_||{},[_2]:E||{},[Qv]:P||{}},v?{[w2]:v}:{}))}}})(e,this._instance.persistence,r,s,i),this.we(n)}}override(e,n){n===void 0&&(n=!1),Rr.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Rr.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(_a),this._instance.persistence.unregister(Mc),void this.we();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,r=e;if(this.le=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(_a);else if(r.flags)if(He(r.flags)){for(var s={},i=0;i<r.flags.length;i++)s[r.flags[i]]=!0;this._instance.persistence.register({[_a]:s})}else this._instance.persistence.register({[_a]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(Mc):r.payloads&&this._instance.persistence.register({[Mc]:r.payloads})),void this.we()}this.we()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ue){var{flags:n,flagVariants:r}=this.ye();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var r,s=(this._instance.get_property(Of)||[]).find(l=>l.flagKey===e),i={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:i};s&&(o.$early_access_feature_name=s.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(i,!1);var a=K({},this.getFlagVariants(),{[e]:n});(r=this._instance.persistence)==null||r.register({[H0]:Object.keys(x2(a)),[Ba]:a}),this.we()}getEarlyAccessFeatures(e,n,r){n===void 0&&(n=!1);var s=this._instance.get_property(Of),i=r?"&"+r.map(o=>"stage="+o).join("&"):"";if(s&&!n)return e(s);this._instance.me({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Of]:l}),e(l)}}})}ye(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,s)=>(r[s]=n[s],r),{})}}we(e){var{flags:n,flagVariants:r}=this.ye();this.featureFlagEventHandlers.forEach(s=>s(n,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(tu)||{};this._instance.register({[tu]:K({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(tu)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(mo)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(s=>{r[s]=K({},r[s],e[s]),delete e[s]}),this._instance.register({[mo]:K({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(mo)||{};this._instance.register({[mo]:K({},n,{[e]:{}})})}else this._instance.unregister(mo)}}var xK=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class G0{constructor(e){this.S=e,this.props={},this.Se=!1,this.$e=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(e),this.q=this.ke(e),this.load(),e.debug&&ee.info("Persistence loaded",e.persistence,K({},this.props)),this.update_config(e,e),this.save()}ke(e){xK.indexOf(e.persistence.toLowerCase())===-1&&(ee.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&xt.O()?xt:n==="localstorage+cookie"&&Qh.O()?Qh:n==="sessionstorage"&&jt.O()?jt:n==="memory"?eG:n==="cookie"?bs:Qh.O()?Qh:bs}properties(){var e={};return Oe(this.props,function(n,r){if(r===Ba&&ot(n))for(var s=Object.keys(n),i=0;i<s.length;i++)e["$feature/"+s[i]]=n[s[i]];else a=r,l=!1,(Ki(o=DH)?l:IT&&o.indexOf===IT?o.indexOf(a)!=-1:(Oe(o,function(c){if(l||(l=c===a))return Mp}),l))||(e[r]=n);var o,a,l}),e}load(){if(!this.xe){var e=this.q.D(this.$e);e&&(this.props=gt({},e))}}save(){this.xe||this.q.L(this.$e,this.props,this.Ee,this.Ie,this.Pe,this.S.debug)}remove(){this.q.N(this.$e,!1),this.q.N(this.$e,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(ot(e)){G(n)&&(n="None"),this.Ee=G(r)?this.Re:r;var s=!1;if(Oe(e,(i,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=i,s=!0)}),s)return this.save(),!0}return!1}register(e,n){if(ot(e)){this.Ee=G(n)?this.Re:n;var r=!1;if(Oe(e,(s,i)=>{e.hasOwnProperty(i)&&this.props[i]!==s&&(this.props[i]=s,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Se){var e=pD(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Ua(lb(e))||this.register(e),this.Se=!0}}update_search_keyword(){var e;this.register((e=X==null?void 0:X.referrer)?gD(e):{})}update_referrer_info(){var e;this.register_once({$referrer:yD(),$referring_domain:X!=null&&X.referrer&&((e=Rl(X.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[t_]||this.props[n_]||this.register_once({[Vp]:vD(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Oe([n_,t_],o=>{var a=this.props[o];a&&Oe(a,function(l,c){e["$initial_"+qv(c)]=l})});var n,r,s=this.props[Vp];if(s){var i=(n=_D(s),r={},Oe(n,function(o,a){r["$initial_"+qv(a)]=o}),r);gt(e,i)}return e}safe_merge(e){return Oe(this.props,function(n,r){r in e||(e[r]=n)}),e}update_config(e,n){if(this.Re=this.Ee=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var r=this.ke(e),s=this.props;this.clear(),this.q=r,this.props=s,this.save()}}set_disabled(e){this.xe=e,this.xe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ie&&(this.Ie=e,this.remove(),this.save())}set_secure(e){e!==this.Pe&&(this.Pe=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[Zc]||{};r[e]=n,this.props[Zc]=r,this.save()}remove_event_timer(e){var n=(this.props[Zc]||{})[e];return G(n)||(delete this.props[Zc][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class xD{constructor(){this.Te={},this.Te={}}on(e,n){return this.Te[e]||(this.Te[e]=[]),this.Te[e].push(n),()=>{this.Te[e]=this.Te[e].filter(r=>r!==n)}}emit(e,n){for(var r of this.Te[e]||[])r(n);for(var s of this.Te["*"]||[])s(e,n)}}class vo{constructor(e){this.Me=new xD,this.Ce=(n,r)=>this.Oe(n,r)&&this.Fe(n,r)&&this.Ae(n,r),this.Oe=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=e,this.De=new Set,this.Le=new Set}init(){var e;if(!G((e=this._instance)==null?void 0:e.Ne)){var n;(n=this._instance)==null||n.Ne((r,s)=>{this.on(r,s)})}}register(e){var n,r;if(!G((n=this._instance)==null?void 0:n.Ne)&&(e.forEach(o=>{var a,l;(a=this.Le)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var d;(d=this.De)==null||d.add((c==null?void 0:c.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var s,i=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&i.add(l==null?void 0:l.selector)})}),(s=this._instance)==null||s.autocapture.setElementSelectors(i)}}on(e,n){var r;n!=null&&e.length!=0&&(this.De.has(e)||this.De.has(n==null?void 0:n.event))&&this.Le&&((r=this.Le)==null?void 0:r.size)>0&&this.Le.forEach(s=>{this.je(n,s)&&this.Me.emit("actionCaptured",s.name)})}ze(e){this.onAction("actionCaptured",n=>e(n))}je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.Ce(e,r))return!0;return!1}onAction(e,n){return this.Me.on(e,n)}Fe(e,n){if(n!=null&&n.url){var r,s=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!s||typeof s!="string"||!vo.Ue(s,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ue(e,n,r){switch(r){case"regex":return!!L&&Dl(e,n);case"exact":return n===e;case"contains":var s=vo.qe(n).replace(/_/g,".").replace(/%/g,".*");return Dl(e,s);default:return!1}}static qe(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Ae(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Be(e).some(i=>!(n!=null&&n.href&&!vo.Ue(i.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||i.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!vo.Ue(i.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!vo.Ue(i.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,s=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(!s||!s.includes(n==null?void 0:n.selector))return!1}return!0}Be(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var _t=Bt("[Surveys]");class bK{constructor(e){this._instance=e,this.He=new Map,this.We=new Map}register(e){var n;G((n=this._instance)==null?void 0:n.Ne)||(this.Ge(e),this.Je(e))}Je(e){var n=e.filter(r=>{var s,i;return((s=r.conditions)==null?void 0:s.actions)&&((i=r.conditions)==null||(i=i.actions)==null||(i=i.values)==null?void 0:i.length)>0});n.length!==0&&(this.Ve==null&&(this.Ve=new vo(this._instance),this.Ve.init(),this.Ve.ze(r=>{this.onAction(r)})),n.forEach(r=>{var s,i,o,a,l;r.conditions&&(s=r.conditions)!=null&&s.actions&&(i=r.conditions)!=null&&(i=i.actions)!=null&&i.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.Ve)==null||a.register(r.conditions.actions.values),(l=r.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var d=this.We.get(c.name);d&&d.push(r.id),this.We.set(c.name,d||[r.id])}}))}))}Ge(e){var n;e.filter(r=>{var s,i;return((s=r.conditions)==null?void 0:s.events)&&((i=r.conditions)==null||(i=i.events)==null||(i=i.values)==null?void 0:i.length)>0}).length!==0&&((n=this._instance)==null||n.Ne((r,s)=>{this.onEvent(r,s)}),e.forEach(r=>{var s;(s=r.conditions)==null||(s=s.events)==null||(s=s.values)==null||s.forEach(i=>{if(i&&i.name){var o=this.He.get(i.name);o&&o.push(r.id),this.He.set(i.name,o||[r.id])}})}))}onEvent(e,n){var r,s=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[Yh])||[];if(e==="survey shown"&&n&&s.length>0){var i;_t.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:s});var o=n==null||(i=n.properties)==null?void 0:i.$survey_id;if(o){var a=s.indexOf(o);a>=0&&(s.splice(a,1),this.Ke(s))}}else this.He.has(e)&&(_t.info("survey event matched, updating activated surveys",{event:e,surveys:this.He.get(e)}),this.Ke(s.concat(this.He.get(e)||[])))}onAction(e){var n,r=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Yh])||[];this.We.has(e)&&this.Ke(r.concat(this.We.get(e)||[]))}Ke(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Yh]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Yh];return n||[]}getEventToSurveys(){return this.He}Ye(){return this.Ve}}class EK{constructor(e){this.Xe=null,this.Qe=!1,this.Ze=!1,this.tr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(Ne(n))return _t.warn("Decide not loaded yet. Not loading surveys.");var r=He(n);this.ir=r?n.length>0:n,_t.info("decide response received, hasSurveys: "+this.ir),this.ir&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith("seenSurvey_")||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(s=>localStorage.removeItem(s))}loadIfEnabled(){if(!this.Xe)if(this.Ze)_t.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)_t.info("Disabled. Not loading surveys.");else if(this.ir){var e=ve==null?void 0:ve.__PosthogExtensions__;if(e){this.Ze=!0;try{var n=e.generateSurveys;if(n)return void this.er(n);var r=e.loadExternalDependency;if(!r)return void this.rr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.rr("Could not load surveys script",s):this.er(e.generateSurveys)})}catch(s){throw this.rr("Error initializing surveys",s),s}finally{this.Ze=!1}}else _t.error("PostHog Extensions not found.")}else _t.info("No surveys to load.")}er(e){this.Xe=e(this._instance),this._surveyEventReceiver=new bK(this._instance),_t.info("Surveys loaded successfully"),this.sr({isLoaded:!0})}rr(e,n){_t.error(e,n),this.sr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.tr.push(e),this.Xe&&this.sr({isLoaded:!0}),()=>{this.tr=this.tr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return _t.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Jv);if(r&&!n)return e(r,{isLoaded:!0});if(this.Qe)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Qe=!0,this._instance.me({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:s=>{var i;this.Qe=!1;var o=s.statusCode;if(o!==200||!s.json){var a="Surveys API could not be loaded, status: "+o;return _t.error(a),e([],{isLoaded:!1,error:a})}var l,c=s.json.surveys||[],d=c.filter(f=>function(p){return!(!p.start_date||p.end_date)}(f)&&(function(p){var m;return!((m=p.conditions)==null||(m=m.events)==null||(m=m.values)==null||!m.length)}(f)||function(p){var m;return!((m=p.conditions)==null||(m=m.actions)==null||(m=m.values)==null||!m.length)}(f)));return d.length>0&&((l=this._surveyEventReceiver)==null||l.register(d)),(i=this._instance.persistence)==null||i.register({[Jv]:c}),e(c,{isLoaded:!0})}})}catch(s){throw this.Qe=!1,s}}sr(e){for(var n of this.tr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(r){_t.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!Ne(this.Xe))return this.Xe.getActiveMatchingSurveys(e,n);_t.warn("init was not called")}nr(e){var n=null;return this.getSurveys(r=>{var s;n=(s=r.find(i=>i.id===e))!==null&&s!==void 0?s:null}),n}ar(e){if(Ne(this.Xe))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.nr(e):e;return n?this.Xe.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Ne(this.Xe))return _t.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.ar(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return Ne(this.Xe)?(_t.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(s=>{var i,o=(i=s.find(l=>l.id===e))!==null&&i!==void 0?i:null;if(o){var a=this.ar(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(Ne(this.Xe))_t.warn("init was not called");else{var r=this.nr(e),s=X==null?void 0:X.querySelector(n);r?s?this.Xe.renderSurvey(r,s):_t.warn("Survey element not found"):_t.warn("Survey not found")}}}var b2=Bt("[RateLimiter]");class SK{constructor(e){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=s=>{var i=s.text;if(i&&i.length)try{(JSON.parse(i).quota_limited||[]).forEach(o=>{b2.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void b2.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:i})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,r,s;e===void 0&&(e=!1);var i=new Date().getTime(),o=(n=(r=this.instance.persistence)==null?void 0:r.get_property(e_))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:i};o.tokens+=(i-o.last)/1e3*this.captureEventsPerSecond,o.last=i,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(s=this.instance.persistence)==null||s.set_property(e_,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var lo=Bt("[RemoteConfig]");class kK{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=ve._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}lr(e){var n,r;(n=ve.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=ve.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(lo.error("PostHog Extensions not found. Cannot load remote config."),e())}ur(e){this._instance.me({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return lo.info("Using preloaded remote config",this.remoteConfig),void this.be(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void lo.warn("Remote config is disabled. Falling back to local config.");this.lr(e=>{if(!e)return lo.info("No config found after loading remote JS config. Falling back to JSON."),void this.ur(n=>{this.be(n)});this.be(e)})}catch(e){lo.error("Error loading remote config",e)}}be(e){e?this._instance.config.__preview_remote_config?(this._instance.be(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):lo.info("__preview_remote_config is disabled. Logging config instead",e):lo.error("Failed to fetch remote config from PostHog.")}}var m_=3e3;class TK{constructor(e,n){this.hr=!0,this.dr=[],this.vr=tr((n==null?void 0:n.flush_interval_ms)||m_,250,5e3,"flush interval",m_),this.cr=e}enqueue(e){this.dr.push(e),this.pr||this.gr()}unload(){this._r();var e=this.dr.length>0?this.mr():{},n=Object.values(e);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.cr(K({},r,{transport:"sendBeacon"}))})}enable(){this.hr=!1,this.gr()}gr(){var e=this;this.hr||(this.pr=setTimeout(()=>{if(this._r(),this.dr.length>0){var n=this.mr(),r=function(){var i=n[s],o=new Date().getTime();i.data&&He(i.data)&&Oe(i.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.cr(i)};for(var s in n)r()}},this.vr))}_r(){clearTimeout(this.pr),this.pr=void 0}mr(){var e={};return Oe(this.dr,n=>{var r,s=n,i=(s?s.batchKey:null)||s.url;G(e[i])&&(e[i]=K({},s,{data:[]})),(r=e[i].data)==null||r.push(s.data)}),this.dr=[],e}}var IK=["retriesPerformedSoFar"];class AK{constructor(e){this.br=!1,this.wr=3e3,this.dr=[],this._instance=e,this.dr=[],this.yr=!0,!G(L)&&"onLine"in L.navigator&&(this.yr=L.navigator.onLine,Ye(L,"online",()=>{this.yr=!0,this.Yi()}),Ye(L,"offline",()=>{this.yr=!1}))}get length(){return this.dr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=_4(e,IK);nn(n)&&n>0&&(r.url=Kp(r.url,{retry_count:n})),this._instance.me(K({},r,{callback:s=>{s.statusCode!==200&&(s.statusCode<400||s.statusCode>=500)&&(n??0)<10?this.Sr(K({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(s)}}))}Sr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),d=(Math.random()-.5)*(c-l);return Math.ceil(c+d)}(n),s=Date.now()+r;this.dr.push({retryAt:s,requestOptions:e});var i="Enqueued failed request for retry in "+r;navigator.onLine||(i+=" (Browser is offline)"),ee.warn(i),this.br||(this.br=!0,this.$r())}$r(){this.kr&&clearTimeout(this.kr),this.kr=setTimeout(()=>{this.yr&&this.dr.length>0&&this.Yi(),this.$r()},this.wr)}Yi(){var e=Date.now(),n=[],r=this.dr.filter(i=>i.retryAt<e||(n.push(i),!1));if(this.dr=n,r.length>0)for(var{requestOptions:s}of r)this.retriableRequest(s)}unload(){for(var{requestOptions:e}of(this.kr&&(clearTimeout(this.kr),this.kr=void 0),this.dr))try{this._instance.me(K({},e,{transport:"sendBeacon"}))}catch(n){ee.error(n)}this.dr=[]}}class PK{constructor(e){this.Er=()=>{var n,r,s,i;this.Ir||(this.Ir={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),d=(o==null?void 0:o.scrollHeight)||0;this.Ir.lastScrollY=Math.ceil(a),this.Ir.maxScrollY=Math.max(a,(n=this.Ir.maxScrollY)!==null&&n!==void 0?n:0),this.Ir.maxScrollHeight=Math.max(l,(r=this.Ir.maxScrollHeight)!==null&&r!==void 0?r:0),this.Ir.lastContentY=c,this.Ir.maxContentY=Math.max(c,(s=this.Ir.maxContentY)!==null&&s!==void 0?s:0),this.Ir.maxContentHeight=Math.max(d,(i=this.Ir.maxContentHeight)!==null&&i!==void 0?i:0)},this._instance=e}getContext(){return this.Ir}resetContext(){var e=this.Ir;return setTimeout(this.Er,0),e}startMeasuringScrollPosition(){Ye(L,"scroll",this.Er,{capture:!0}),Ye(L,"scrollend",this.Er,{capture:!0}),Ye(L,"resize",this.Er)}scrollElement(){if(!this._instance.config.scroll_root_selector)return L==null?void 0:L.document.documentElement;var e=He(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var r=L==null?void 0:L.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return L&&(L.scrollY||L.pageYOffset||L.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return L&&(L.scrollX||L.pageXOffset||L.document.documentElement.scrollLeft)||0}}var CK=t=>vD(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class NK{constructor(e,n,r,s){this.Pr=i=>{var o=this.Rr();if(!o||o.sessionId!==i){var a={sessionId:i,props:this.Tr(this._instance)};this.Mr.register({[Zv]:a})}},this._instance=e,this.Cr=n,this.Mr=r,this.Tr=s||CK,this.Cr.onSessionId(this.Pr)}Rr(){return this.Mr.props[Zv]}getSetOnceProps(){var e,n=(e=this.Rr())==null?void 0:e.props;return n?"r"in n?_D(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return Oe(lb(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+qv(r)]=n}),e}}var E2=Bt("[SessionId]");class RK{constructor(e,n,r){var s;if(this.Or=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Mr=e.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Fr=n||vi,this.Ar=r||vi;var i=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*tr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Dr(),this.Lr="ph_"+i+"_window_id",this.Nr="ph_"+i+"_primary_window_exists",this.jr()){var a=jt.D(this.Lr),l=jt.D(this.Nr);a&&!l?this.oi=a:jt.N(this.Lr),jt.L(this.Nr,!0)}if((s=this.S.bootstrap)!=null&&s.sessionID)try{var c=(d=>{var f=d.replace(/-/g,"");if(f.length!==32)throw new Error("Not a valid UUID");if(f[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(f.substring(0,12),16)})(this.S.bootstrap.sessionID);this.zr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(d){E2.error("Invalid sessionID in bootstrap",d)}this.Ur()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return G(this.Or)&&(this.Or=[]),this.Or.push(e),this.kt&&e(this.kt,this.oi),()=>{this.Or=this.Or.filter(n=>n!==e)}}jr(){return this.S.persistence!=="memory"&&!this.Mr.xe&&jt.O()}qr(e){e!==this.oi&&(this.oi=e,this.jr()&&jt.L(this.Lr,e))}Br(){return this.oi?this.oi:this.jr()?jt.D(this.Lr):null}zr(e,n,r){e===this.kt&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.kt=e,this.Mr.register({[Lp]:[n,e,r]}))}Hr(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var e=this.Mr.props[Lp];return He(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.zr(null,null,null)}Ur(){Ye(L,"beforeunload",()=>{this.jr()&&jt.N(this.Nr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[s,i,o]=this.Hr(),a=this.Br(),l=nn(o)&&o>0&&Math.abs(r-o)>864e5,c=!1,d=!i,f=!e&&Math.abs(r-s)>this.sessionTimeoutMs;d||f||l?(i=this.Fr(),a=this.Ar(),E2.info("new session ID generated",{sessionId:i,windowId:a,changeReason:{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}}),o=r,c=!0):a||(a=this.Ar(),c=!0);var p=s===0||!e||l?r:s,m=o===0?new Date().getTime():o;return this.qr(a),this.zr(i,p,m),e||this.Dr(),c&&this.Or.forEach(w=>w(i,a,c?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0)),{sessionId:i,windowId:a,sessionStartTimestamp:m,changeReason:c?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:s}}Dr(){clearTimeout(this.Wr),this.Wr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var jK=["$set_once","$set"],qs=Bt("[SiteApps]");class DK{constructor(e){this._instance=e,this.Gr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Jr(e,n){if(n){var r=this.globalsForEvent(n);this.Gr.push(r),this.Gr.length>1e3&&(this.Gr=this.Gr.slice(10))}}get siteAppLoaders(){var e;return(e=ve._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ne(this.Jr.bind(this));this.Vr=()=>{e(),this.Gr=[],this.Vr=void 0}}}globalsForEvent(e){var n,r,s,i,o,a,l;if(!e)throw new Error("Event payload is required");var c={},d=this._instance.get_property("$groups")||[],f=this._instance.get_property("$stored_group_properties")||{};for(var[p,m]of Object.entries(f))c[p]={id:d[p],type:p,properties:m};var{$set_once:w,$set:v}=e;return{event:K({},_4(e,jK),{properties:K({},e.properties,v?{$set:K({},(n=(r=e.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},v)}:{},w?{$set_once:K({},(s=(i=e.properties)==null?void 0:i.$set_once)!==null&&s!==void 0?s:{},w)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],r=()=>{var a;!n.errored&&this.Gr.length&&(qs.info("Processing "+this.Gr.length+" events for site app with id "+e.id),this.Gr.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Vr)==null||a.call(this))},s=!1,i=a=>{n.errored=!a,n.loaded=!0,qs.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),s&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{i(a)}});o&&(n.processEvent=o),s=!0}catch(a){qs.error("Error while initializing PostHog app with config id "+e.id,a),i(!1)}if(s&&n.loaded)try{r()}catch(a){qs.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}Kr(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}Yr(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(s){qs.error("Error while processing event "+e.event+" for site app "+r.id,s)}}}onRemoteConfig(e){var n,r,s,i=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.Kr(),void this._instance.on("eventCaptured",c=>this.Yr(c))):void qs.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Vr)==null||r.call(this),(s=e.siteApps)!=null&&s.length)if(this.isEnabled){var o=function(c){var d;ve["__$$ph_site_app_"+c]=i._instance,(d=ve.__PosthogExtensions__)==null||d.loadSiteApp==null||d.loadSiteApp(i._instance,l,f=>{if(f)return qs.error("Error while initializing PostHog app with config id "+c,f)})};for(var{id:a,url:l}of e.siteApps)o(a)}else qs.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var OK=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],S2=function(t,e){if(!t)return!1;var n=t.toLowerCase();return OK.concat(e||[]).some(r=>{var s=r.toLowerCase();return n.indexOf(s)!==-1})},bD=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&S2(n,e))return!0;try{var r=t==null?void 0:t.userAgentData;if(r!=null&&r.brands&&r.brands.some(s=>S2(s==null?void 0:s.brand,e)))return!0}catch{}return!!t.webdriver},iu=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),k2="i.posthog.com";class MK{constructor(e){this.Xr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+k2,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.Xr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Xr[this.apiHost]=iu.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Xr[this.apiHost]=iu.EU:this.Xr[this.apiHost]=iu.CUSTOM),this.Xr[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===iu.CUSTOM)return this.apiHost+n;var r=k2+n;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var LK={icontains:(t,e)=>!!L&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!L&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!L&&Dl(e.href,t),not_regex:(t,e)=>!!L&&!Dl(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class Qt{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(s=>{Qt.Qr("retrieved web experiments from the server"),n.Zr=new Map,s.forEach(i=>{if(i.feature_flag_key){var o;n.Zr&&(Qt.Qr("setting flag key ",i.feature_flag_key," to web experiment ",i),(o=n.Zr)==null||o.set(i.feature_flag_key,i));var a=n._instance.getFeatureFlag(i.feature_flag_key);at(a)&&i.variants[a]&&n.ts(i.name,a,i.variants[a].transforms)}else if(i.variants)for(var l in i.variants){var c=i.variants[l];Qt.es(c)&&n.ts(i.name,l,c.transforms)}})},r)},this._instance=e,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())Qt.Qr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Ne(this.Zr))return this.Zr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Qt.Qr("applying feature flags",e),e.forEach(n=>{var r;if(this.Zr&&(r=this.Zr)!=null&&r.has(n)){var s,i=this._instance.getFeatureFlag(n),o=(s=this.Zr)==null?void 0:s.get(n);i&&o!=null&&o.variants[i]&&this.ts(o.name,i,o.variants[i].transforms)}})}}previewWebExperiment(){var e=Qt.getWindowLocation();if(e!=null&&e.search){var n=Bp(e==null?void 0:e.search,"__experiment_id"),r=Bp(e==null?void 0:e.search,"__experiment_variant");n&&r&&(Qt.Qr("previewing web experiments "+n+" && "+r),this.getWebExperiments(s=>{this.rs(parseInt(n),r,s)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var s=this._instance.get_property("$web_experiments");if(s&&!n)return e(s);this._instance.me({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:i=>{if(i.statusCode!==200||!i.json)return e([]);var o=i.json.experiments||[];return e(o)}})}rs(e,n,r){var s=r.filter(i=>i.id===e);s&&s.length>0&&(Qt.Qr("Previewing web experiment ["+s[0].name+"] with variant ["+n+"]"),this.ts(s[0].name,n,s[0].variants[n].transforms))}static es(e){return!Ne(e.conditions)&&Qt.ss(e)&&Qt.ns(e)}static ss(e){var n;if(Ne(e.conditions)||Ne((n=e.conditions)==null?void 0:n.url))return!0;var r,s,i,o=Qt.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||LK[(s=(i=e.conditions)==null?void 0:i.urlMatchType)!==null&&s!==void 0?s:"icontains"](e.conditions.url,o))}static getWindowLocation(){return L==null?void 0:L.location}static ns(e){var n;if(Ne(e.conditions)||Ne((n=e.conditions)==null?void 0:n.utm))return!0;var r=pD();if(r.utm_source){var s,i,o,a,l,c,d,f,p=(s=e.conditions)==null||(s=s.utm)==null||!s.utm_campaign||((i=e.conditions)==null||(i=i.utm)==null?void 0:i.utm_campaign)==r.utm_campaign,m=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,w=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==r.utm_medium,v=(d=e.conditions)==null||(d=d.utm)==null||!d.utm_term||((f=e.conditions)==null||(f=f.utm)==null?void 0:f.utm_term)==r.utm_term;return p&&w&&v&&m}return!1}static Qr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];ee.info("[WebExperiments] "+e,r)}ts(e,n,r){this._is_bot()?Qt.Qr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(s=>{if(s.selector){var i;Qt.Qr("applying transform of variant "+n+" for experiment "+e+" ",s);var o=(i=document)==null?void 0:i.querySelectorAll(s.selector);o==null||o.forEach(a=>{var l=a;s.html&&(l.innerHTML=s.html),s.css&&l.setAttribute("style",s.css)})}}):Qt.Qr("Control variants leave the page unmodified.")}_is_bot(){return Un&&this._instance?bD(Un,this._instance.config.custom_blocked_useragents):void 0}}var Iu={},g_=()=>{},Ta="posthog",ED=!tK&&(wn==null?void 0:wn.indexOf("MSIE"))===-1&&(wn==null?void 0:wn.indexOf("Mozilla"))===-1,T2=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:jH(X==null?void 0:X.location),persistence:"localStorage+cookie",persistence_name:"",loaded:g_,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:bn&&at(bn==null?void 0:bn.search)&&bn.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(L==null||(e=L.location)==null?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var r="Bad HTTP status: "+n.statusCode+" "+n.text;ee.error(r)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:m_},_onCapture:g_}},I2=t=>{var e={};G(t.process_person)||(e.person_profiles=t.process_person),G(t.xhr_headers)||(e.request_headers=t.xhr_headers),G(t.cookie_name)||(e.persistence_name=t.cookie_name),G(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),G(t.store_google)||(e.save_campaign_params=t.store_google),G(t.verbose)||(e.debug=t.verbose);var n=gt({},e,t);return He(t.property_blacklist)&&(G(t.property_denylist)?n.property_denylist=t.property_blacklist:He(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:ee.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class FK{constructor(){this.__forceAllowLocalhost=!1}get os(){return this.__forceAllowLocalhost}set os(e){ee.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class og{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new FK,this.ls=!1,this.version=fs.LIB_VERSION,this.us=new xD,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=T2(),this.SentryIntegration=WG,this.sentryIntegration=e=>function(n,r){var s=Q4(n,r);return{name:Y4,processEvent:i=>s(i)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.hs=!1,this.ds=null,this.vs=null,this.cs=null,this.featureFlags=new wK(this),this.toolbar=new GG(this),this.scrollManager=new PK(this),this.pageViewManager=new ZG(this),this.surveys=new EK(this),this.experiments=new Qt(this),this.exceptions=new sK(this),this.rateLimiter=new SK(this),this.requestRouter=new MK(this),this.consent=new tG(this),this.people={set:(e,n,r)=>{var s=at(e)?{[e]:n}:e;this.setPersonProperties(s),r==null||r({})},set_once:(e,n,r)=>{var s=at(e)?{[e]:n}:e;this.setPersonProperties(void 0,s),r==null||r({})}},this.on("eventCaptured",e=>ee.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,r){if(r&&r!==Ta){var s,i=(s=Iu[r])!==null&&s!==void 0?s:new og;return i._init(e,n,r),Iu[r]=i,Iu[Ta][r]=i,i}return this._init(e,n,r)}_init(e,n,r){var s,i;if(n===void 0&&(n={}),G(e)||Wv(e))return ee.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return ee.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.fs=[],n.person_profiles&&(this.vs=n.person_profiles),this.set_config(gt({},T2(n.defaults),I2(n),{name:r,token:e})),this.config.on_xhr_error&&ee.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:ps.GZipJS,this.persistence=new G0(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new G0(K({},this.config,{persistence:"sessionStorage"}));var o=K({},this.persistence.props),a=K({},this.sessionPersistence.props);if(this.ps=new TK(x=>this.gs(x),this.config.request_queue_config),this._s=new AK(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new RK(this),this.sessionPropsManager=new NK(this,this.sessionManager,this.persistence)),new XG(this).startIfEnabledOrStop(),this.siteApps=new DK(this),(s=this.siteApps)==null||s.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new zG(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new GH(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new JG(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new YG(this),this.exceptionObserver=new sG(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new M4(this,rG),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new vG(this),this.historyAutocapture.startIfEnabled(),fs.DEBUG=fs.DEBUG||this.config.debug,fs.DEBUG&&ee.info("Starting in debug mode",{this:this,config:n,thisC:K({},this.config),p:o,s:a}),this.bs(),((i=n.bootstrap)==null?void 0:i.distinctID)!==void 0){var l,c,d=this.config.get_device_id(vi()),f=(l=n.bootstrap)!=null&&l.isIdentifiedID?d:n.bootstrap.distinctID;this.persistence.set_property(us,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.ws()){var p,m,w=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlags)||{}).filter(x=>{var _;return!((_=n.bootstrap)==null||(_=_.featureFlags)==null||!_[x])}).reduce((x,_)=>{var E;return x[_]=((E=n.bootstrap)==null||(E=E.featureFlags)==null?void 0:E[_])||!1,x},{}),v=Object.keys(((m=n.bootstrap)==null?void 0:m.featureFlagPayloads)||{}).filter(x=>w[x]).reduce((x,_)=>{var E,P;return(E=n.bootstrap)!=null&&(E=E.featureFlagPayloads)!=null&&E[_]&&(x[_]=(P=n.bootstrap)==null||(P=P.featureFlagPayloads)==null?void 0:P[_]),x},{});this.featureFlags.receivedFeatureFlags({featureFlags:w,featureFlagPayloads:v})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:BT,$device_id:null},"");else if(!this.get_distinct_id()){var S=this.config.get_device_id(vi());this.register_once({distinct_id:S,$device_id:S},""),this.persistence.set_property(us,"anonymous")}return Ye(L,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?qG(this,()=>this.ys()):this.ys(),rr(this.config._onCapture)&&this.config._onCapture!==g_&&(ee.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",x=>this.config._onCapture(x.event,x))),this}be(e){var n,r,s,i,o,a,l,c;if(!X||!X.body)return ee.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.be(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=we(e.supportedCompression,ps.GZipJS)?ps.GZipJS:we(e.supportedCompression,ps.Base64)?ps.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.vs?this.vs:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(s=this.sessionRecording)==null||s.onRemoteConfig(e),(i=this.autocapture)==null||i.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}ys(){try{this.config.loaded(this)}catch(e){ee.critical("`loaded` function failed",e)}this.Ss(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.$s()},1),new kK(this).load(),this.featureFlags.decide()}Ss(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.ps)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Ni(this.__request_queue,e=>this.gs(e)),this.__request_queue=[],this.Ss()}_handle_unload(){var e,n;this.config.request_batching?(this.ks()&&this.capture("$pageleave"),(e=this.ps)==null||e.unload(),(n=this._s)==null||n.unload()):this.ks()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}me(e){this.__loaded&&(ED?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Kp(e.url,{ip:this.config.ip?1:0}),e.headers=K({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,s,i,o=K({},n);o.timeout=o.timeout||6e4,o.url=Kp(o.url,{_:new Date().getTime().toString(),ver:fs.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",l=(s=(i=w4(Tu,c=>c.transport===a))==null?void 0:i.method)!==null&&s!==void 0?s:Tu[0].method;if(!l)throw new Error("No available transport method");l(o)})(K({},e,{callback:n=>{var r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)==null||r.call(s,n)),e.callback==null||e.callback(n)}}))))}gs(e){this._s?this._s.retriableRequest(e):this.me(e)}_execute_array(e){var n,r=[],s=[],i=[];Ni(e,a=>{a&&(n=a[0],He(n)?i.push(a):rr(a)?a.call(this):He(a)&&n==="alias"?r.push(a):He(a)&&n.indexOf("capture")!==-1&&rr(this[n])?i.push(a):s.push(a))});var o=function(a,l){Ni(a,function(c){if(He(c[0])){var d=l;Oe(c,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(r,this),o(s,this),o(i,this)}ws(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var s;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.ps){if(!this.consent.isOptedOut())if(!G(e)&&at(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var i=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(i==null||!i.isRateLimited){n!=null&&n.$current_url&&!at(n==null?void 0:n.$current_url)&&(ee.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(r==null?void 0:r.timestamp)||o,l=vi(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};i&&(c.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),r!=null&&r.$set&&(c.$set=r==null?void 0:r.$set);var d=this.xs(r==null?void 0:r.$set_once);d&&(c.$set_once=d),(c=NH(c,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,G(r==null?void 0:r.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o);var f=K({},c.properties.$set,c.$set);if(Ua(f)||this.setPersonPropertiesForFlags(f),!Ne(this.config.before_send)){var p=this.Es(c);if(!p)return;c=p}this.us.emit("eventCaptured",c);var m={method:"POST",url:(s=r==null?void 0:r._url)!==null&&s!==void 0?s:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.gs(m):this.ps.enqueue(m),c}ee.critical("This capture call is ignored due to client rate limiting.")}}else ee.error("No event name provided to posthog.capture")}else ee.uninitializedWarning("posthog.capture")}Ne(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,r,s,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=i?void 0:this.persistence.remove_event_timer(e),a=K({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=K({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!at(a.distinct_id)&&!nn(a.distinct_id)||Wv(a.distinct_id))&&ee.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,d=yK(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:f,windowId:p}=this.sessionManager.checkAndGetSessionAndWindowId(i,r.getTime());a.$session_id=f,a.$window_id=p}this.sessionPropsManager&&gt(a,this.sessionPropsManager.getSessionProps());try{var m;this.sessionRecording&&gt(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(m=this._s)==null?void 0:m.length}catch(x){a.$sdk_debug_error_capturing_properties=String(x)}if(this.requestRouter.region===iu.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||i?e!=="$pageleave"||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,s),a=gt(a,c),e==="$pageview"&&X&&(a.title=X.title),!G(o)){var w=r.getTime()-o;a.$duration=parseFloat((w/1e3).toFixed(3))}wn&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=gt({},d,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),He(this.config.property_denylist)?Oe(this.config.property_denylist,function(x){delete a[x]}):ee.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var v=this.config.sanitize_properties;v&&(ee.error("sanitize_properties is deprecated. Use before_send instead"),a=v(a,e));var S=this.Is();return a.$process_person_profile=S,S&&!i&&this.Ps("_calculate_event_properties"),a}xs(e){var n;if(!this.persistence||!this.Is()||this.ls)return e;var r=this.persistence.get_initial_props(),s=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),i=gt({},r,s||{},e||{}),o=this.config.sanitize_properties;return o&&(ee.error("sanitize_properties is deprecated. Use before_send instead"),i=o(i,"$set_once")),this.ls=!0,Ua(i)?void 0:i}register(e,n){var r;(r=this.persistence)==null||r.register(e,n)}register_once(e,n,r){var s;(s=this.persistence)==null||s.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}Rs(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,r)}on(e,n){return this.us.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,r){if(!this.__loaded||!this.persistence)return ee.uninitializedWarning("posthog.identify");if(nn(e)&&(e=e.toString(),ee.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))ee.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Ps("posthog.identify")){var s=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=s;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==s&&e!==this.get_property(Jc)&&(this.unregister(Jc),this.register({distinct_id:e}));var o=(this.persistence.get_property(us)||"anonymous")==="anonymous";e!==s&&o?(this.persistence.set_property(us,"identified"),this.setPersonPropertiesForFlags(K({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:s},{$set:n||{},$set_once:r||{}}),this.cs=p2(e,n,r),this.featureFlags.setAnonymousDistinctId(s)):(n||r)&&this.setPersonProperties(n,r),e!==s&&(this.reloadFeatureFlags(),this.unregister(Fp))}}else ee.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ps("posthog.setPersonProperties")){var r=p2(this.get_distinct_id(),e,n);this.cs!==r?(this.setPersonPropertiesForFlags(K({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.cs=r):ee.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,r){if(e&&n){if(this.Ps("posthog.group")){var s=this.getGroups();s[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:K({},s,{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),s[e]===n||r||this.reloadFeatureFlags()}}else ee.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ps("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,s,i;if(ee.info("reset"),!this.__loaded)return ee.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(s=this.persistence)==null||s.set_property(us,"anonymous"),(i=this.sessionManager)==null||i.resetSessionId(),this.cs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:BT,$device_id:null},"");else{var a=this.config.get_device_id(vi());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),s=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&r){var i,o=(i=e.timestampLookBack)!==null&&i!==void 0?i:10;if(!r)return s;s+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return s}alias(e,n){return e===this.get_property(x4)?(ee.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ps("posthog.alias")?(G(n)&&(n=this.get_distinct_id()),e!==n?(this.Rs(Jc,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(ee.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,r,s,i,o=K({},this.config);ot(e)&&(gt(this.config,I2(e)),(n=this.persistence)==null||n.update_config(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new G0(K({},this.config,{persistence:"sessionStorage"})),xt.O()&&xt.A("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(fs.DEBUG=!0,ee.info("set_config",JSON.stringify({config:e,oldConfig:o,newConfig:K({},this.config)},null,2))),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(s=this.autocapture)==null||s.startIfEnabled(),(i=this.heatmaps)==null||i.startIfEnabled(),this.surveys.loadIfEnabled(),this.bs())}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var s,i,o,a,l;(s=this.sessionManager)==null||s.checkAndGetSessionAndWindowId(),r.sampling&&((i=this.sessionRecording)==null||i.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(K({},yG((s=>s instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:r}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Ta;return n!==Ta&&(n=Ta+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(us))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(us))==="identified"}Is(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Ua(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Jc])&&((n=this.persistence)==null||(n=n.props)==null||!n[$p]))}ks(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Is()||this.Ps("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ps(e){return this.config.person_profiles==="never"?(ee.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Rs($p,!0),!0)}bs(){var e,n,r,s,i=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||i&&!!o;((e=this.persistence)==null?void 0:e.xe)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.xe)!==a&&((s=this.sessionPersistence)==null||s.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.bs(),(G(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.$s()}opt_out_capturing(){this.consent.optInOut(!1),this.bs()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.bs()}_is_bot(){return Un?bD(Un,this.config.custom_blocked_useragents):void 0}$s(){X&&(X.visibilityState==="visible"?this.hs||(this.hs=!0,this.capture("$pageview",{title:X.title},{send_instantly:!0}),this.ds&&(X.removeEventListener("visibilitychange",this.ds),this.ds=null)):this.ds||(this.ds=this.$s.bind(this),Ye(X,"visibilitychange",this.ds)))}debug(e){e===!1?(L==null||L.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(L==null||L.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}Es(e){if(Ne(this.config.before_send))return e;var n=He(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var s of n){if(r=s(r),Ne(r)){var i="Event '"+e.event+"' was rejected in beforeSend function";return AH(e.event)?ee.warn(i+". This can cause unexpected behavior."):ee.info(i),null}r.properties&&!Ua(r.properties)||ee.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.ne)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(r)})}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=CH(t.prototype[e[n]])})(og,["identify"]);var A2;(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var VK=(A2=Iu[Ta]=new og,function(){function t(){t.done||(t.done=!0,ED=!1,Oe(Iu,function(e){e._dom_loaded()}))}X!=null&&X.addEventListener?X.readyState==="complete"?t():Ye(X,"DOMContentLoaded",t,{capture:!1}):L&&ee.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),A2);const SD=T.createContext(null),$K=({children:t})=>{const{currentUser:e}=Ut(),n=dr(),r=r6();T.useEffect(()=>{},[]),T.useEffect(()=>{},[n,r]),T.useEffect(()=>{},[e]);const s=(f,p={})=>{},d={posthog:VK,trackEvent:s,trackFunnelStep:(f,p,m={})=>{s(`funnel_${f}_step_${p}`,{funnel_name:f,funnel_step:p,...m})},trackButtonClick:(f,p={})=>{s("button_clicked",{button_name:f,...p})},trackFormSubmit:(f,p,m={})=>{s("form_submitted",{form_name:f,success:p,...m})},trackFeatureUsage:(f,p={})=>{s("feature_used",{feature_name:f,...p})},trackError:(f,p="general",m={})=>{s("error_occurred",{error_message:f,error_type:p,...m})}};return u.jsx(SD.Provider,{value:d,children:t})},UK=()=>{const t=T.useContext(SD);if(!t)throw new Error("usePostHog must be used within a PostHogProvider");return t};class BK{constructor(){this.collectionName="tasks"}async createTask(e,n){try{const r={...n,userId:e,status:n.status||"pending",priority:n.priority||"medium",createdAt:Bh(),updatedAt:Bh(),completedAt:null,reminders:n.reminders||[],tags:n.tags||[],attachments:n.attachments||[]};return{id:(await Vx(Er(dt,this.collectionName),r)).id,...r}}catch(r){throw console.error("Error creating task:",r),r}}async getUserTasks(e){try{const n=Zs(Er(dt,this.collectionName),On("userId","==",e),Uh("createdAt","desc")),r=await ei(n),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(n){if(n.code==="failed-precondition"&&n.message.includes("index")){console.warn("Index not available, fetching without ordering. Please create the index using the link in the console.");try{const r=Zs(Er(dt,this.collectionName),On("userId","==",e)),s=await ei(r),i=[];return s.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,a)=>{var d,f,p,m;const l=((f=(d=o.createdAt)==null?void 0:d.toDate)==null?void 0:f.call(d))||o.createdAt||new Date(0);return(((m=(p=a.createdAt)==null?void 0:p.toDate)==null?void 0:m.call(p))||a.createdAt||new Date(0))-l}),i}catch(r){return console.error("Error fetching tasks (fallback):",r),[]}}return console.error("Error fetching tasks:",n),[]}}async getTasksByStatus(e,n){try{const r=Zs(Er(dt,this.collectionName),On("userId","==",e),On("status","==",n),Uh("priority","desc"),Uh("createdAt","desc")),s=await ei(r),i=[];return s.forEach(o=>{i.push({id:o.id,...o.data()})}),i}catch(r){if(r.code==="failed-precondition"&&r.message.includes("index")){console.warn("Index not available for status query, fetching without ordering.");try{const s=Zs(Er(dt,this.collectionName),On("userId","==",e),On("status","==",n)),i=await ei(s),o=[];return i.forEach(a=>{o.push({id:a.id,...a.data()})}),o.sort((a,l)=>{var m,w,v,S;const c={high:3,medium:2,low:1},d=(c[l.priority]||0)-(c[a.priority]||0);if(d!==0)return d;const f=((w=(m=a.createdAt)==null?void 0:m.toDate)==null?void 0:w.call(m))||a.createdAt||new Date(0);return(((S=(v=l.createdAt)==null?void 0:v.toDate)==null?void 0:S.call(v))||l.createdAt||new Date(0))-f}),o}catch(s){return console.error("Error fetching tasks by status (fallback):",s),[]}}return console.error("Error fetching tasks by status:",r),[]}}async getTasksByDueDate(e,n,r){try{const s=Zs(Er(dt,this.collectionName),On("userId","==",e),On("dueDate",">=",Fe.fromDate(n)),On("dueDate","<=",Fe.fromDate(r)),Uh("dueDate","asc")),i=await ei(s),o=[];return i.forEach(a=>{o.push({id:a.id,...a.data()})}),o}catch(s){throw console.error("Error fetching tasks by due date:",s),s}}async updateTask(e,n){try{const r=Vn(dt,this.collectionName,e);return n.status==="completed"&&!n.completedAt&&(n.completedAt=Bh()),(n.status==="pending"||n.status==="in_progress")&&(n.completedAt=null),await ka(r,{...n,updatedAt:Bh()}),{id:e,...n}}catch(r){throw console.error("Error updating task:",r),r}}async deleteTask(e){try{return await FR(Vn(dt,this.collectionName,e)),e}catch(n){throw console.error("Error deleting task:",n),n}}async getTaskStats(e){try{const n=await this.getUserTasks(e),r={total:n.length,pending:0,inProgress:0,completed:0,overdue:0,dueToday:0,highPriority:0},s=new Date;s.setHours(0,0,0,0);const i=new Date(s);return i.setDate(i.getDate()+1),n.forEach(o=>{if(o.status==="pending"?r.pending++:o.status==="in_progress"?r.inProgress++:o.status==="completed"&&r.completed++,o.priority==="high"&&r.highPriority++,o.dueDate){const a=o.dueDate.toDate();a<s&&o.status!=="completed"?r.overdue++:a>=s&&a<i&&r.dueToday++}}),r}catch(n){throw console.error("Error getting task stats:",n),n}}async searchTasks(e,n){try{const r=await this.getUserTasks(e),s=n.toLowerCase();return r.filter(i=>{var o,a;return i.title.toLowerCase().includes(s)||((o=i.description)==null?void 0:o.toLowerCase().includes(s))||((a=i.tags)==null?void 0:a.some(l=>l.toLowerCase().includes(s)))})}catch(r){throw console.error("Error searching tasks:",r),r}}async getRecurringTasks(e){try{const n=Zs(Er(dt,this.collectionName),On("userId","==",e),On("isRecurring","==",!0)),r=await ei(n),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(n){throw console.error("Error fetching recurring tasks:",n),n}}}const gr=new BK,kD=T.createContext({}),bse=()=>{const t=T.useContext(kD);if(!t)throw new Error("useTaskMaster must be used within a TaskMasterProvider");return t},zK=({children:t})=>{const{currentUser:e}=Ut(),[n,r]=T.useState([]),[s,i]=T.useState(!0),[o,a]=T.useState(null),[l,c]=T.useState({total:0,pending:0,inProgress:0,completed:0,overdue:0,dueToday:0,highPriority:0}),[d,f]=T.useState({status:"all",priority:"all",search:"",dateRange:null});T.useEffect(()=>{e?p():(r([]),i(!1))},[e]);const p=async()=>{var N;try{i(!0),a(null);const k=await gr.getUserTasks(e.id);r(k);const y=await gr.getTaskStats(e.id);c(y)}catch(k){(N=k.message)!=null&&N.includes("index")||(console.error("Error loading tasks:",k),a("Failed to load tasks"))}finally{i(!1)}},m=async N=>{try{const k=await gr.createTask(e.id,N);r(I=>[k,...I]);const y=await gr.getTaskStats(e.id);return c(y),k}catch(k){throw console.error("Error creating task:",k),new Error("Failed to create task")}},w=async(N,k)=>{try{const y=await gr.updateTask(N,k);r(A=>A.map(j=>j.id===N?{...j,...y}:j));const I=await gr.getTaskStats(e.id);return c(I),y}catch(y){throw console.error("Error updating task:",y),new Error("Failed to update task")}},R={tasks:n,loading:s,error:o,stats:l,filters:d,setFilters:f,createTask:m,updateTask:w,deleteTask:async N=>{try{await gr.deleteTask(N),r(y=>y.filter(I=>I.id!==N));const k=await gr.getTaskStats(e.id);c(k)}catch(k){throw console.error("Error deleting task:",k),new Error("Failed to delete task")}},toggleTaskComplete:async N=>{const k=n.find(I=>I.id===N);if(!k)return;const y=k.status==="completed"?"pending":"completed";await w(N,{status:y})},getFilteredTasks:()=>{let N=[...n];if(d.status!=="all"&&(N=N.filter(k=>k.status===d.status)),d.priority!=="all"&&(N=N.filter(k=>k.priority===d.priority)),d.search){const k=d.search.toLowerCase();N=N.filter(y=>{var I,A;return y.title.toLowerCase().includes(k)||((I=y.description)==null?void 0:I.toLowerCase().includes(k))||((A=y.tags)==null?void 0:A.some(j=>j.toLowerCase().includes(k)))})}if(d.dateRange){const{start:k,end:y}=d.dateRange;N=N.filter(I=>{if(!I.dueDate)return!1;const A=I.dueDate.toDate();return A>=k&&A<=y})}return N},searchTasks:async N=>{try{if(!N){await p();return}const k=await gr.searchTasks(e.id,N);r(k)}catch(k){console.error("Error searching tasks:",k),a("Failed to search tasks")}},getTasksByStatus:async N=>{try{i(!0);const k=await gr.getTasksByStatus(e.id,N);r(k)}catch(k){console.error("Error getting tasks by status:",k),a("Failed to get tasks by status")}finally{i(!1)}},getTasksByDueDate:async(N,k)=>{try{i(!0);const y=await gr.getTasksByDueDate(e.id,N,k);r(y)}catch(y){console.error("Error getting tasks by due date:",y),a("Failed to get tasks by due date")}finally{i(!1)}},loadTasks:p};return u.jsx(kD.Provider,{value:R,children:t})};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const n=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>T.createElement("svg",{ref:d,...qK,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${WK(t)}`,a].join(" "),...c},[...e.map(([f,p])=>T.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=le("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=le("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=le("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=le("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=le("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=le("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=le("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=le("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=le("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=le("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=le("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=le("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=le("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=le("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=le("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=le("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=le("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=le("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Ib=T.createContext({});function Ab(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pb=typeof window<"u",ND=Pb?T.useLayoutEffect:T.useEffect,lg=T.createContext(null);function Cb(t,e){t.indexOf(e)===-1&&t.push(e)}function Nb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const js=(t,e,n)=>n>e?e:n<t?t:n;let Zp=()=>{};const Ds={},RD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function jD(t){return typeof t=="object"&&t!==null}const DD=t=>/^0[^.\s]+$/u.test(t);function Rb(t){let e;return()=>(e===void 0&&(e=t()),e)}const or=t=>t,wX=(t,e)=>n=>e(t(n)),Yd=(...t)=>t.reduce(wX),_d=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class jb{constructor(){this.subscriptions=[]}add(e){return Cb(this.subscriptions,e),()=>Nb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gr=t=>t*1e3,Kr=t=>t/1e3;function OD(t,e){return e?t*(1e3/e):0}const MD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,xX=1e-7,bX=12;function EX(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=MD(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>xX&&++a<bX);return o}function Qd(t,e,n,r){if(t===e&&n===r)return or;const s=i=>EX(i,0,1,t,n);return i=>i===0||i===1?i:MD(s(i),e,r)}const LD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FD=t=>e=>1-t(1-e),VD=Qd(.33,1.53,.69,.99),Db=FD(VD),$D=LD(Db),UD=t=>(t*=2)<1?.5*Db(t):.5*(2-Math.pow(2,-10*(t-1))),Ob=t=>1-Math.sin(Math.acos(t)),BD=FD(Ob),zD=LD(Ob),SX=Qd(.42,0,1,1),kX=Qd(0,0,.58,1),qD=Qd(.42,0,.58,1),TX=t=>Array.isArray(t)&&typeof t[0]!="number",WD=t=>Array.isArray(t)&&typeof t[0]=="number",C2={linear:or,easeIn:SX,easeInOut:qD,easeOut:kX,circIn:Ob,circInOut:zD,circOut:BD,backIn:Db,backInOut:$D,backOut:VD,anticipate:UD},IX=t=>typeof t=="string",N2=t=>{if(WD(t)){Zp(t.length===4);const[e,n,r,s]=t;return Qd(e,n,r,s)}else if(IX(t))return Zp(C2[t]!==void 0),C2[t];return t},af=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],R2={value:null};function AX(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(d.schedule(f),t()),l++,f(a)}const d={schedule:(f,p=!1,m=!1)=>{const v=m&&s?n:r;return p&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),e&&R2.value&&R2.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,d.process(f))}};return d}const PX=40;function HD(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=af.reduce((E,P)=>(E[P]=AX(i,e?P:void 0),E),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:f,preRender:p,render:m,postRender:w}=o,v=()=>{const E=Ds.useManualTiming?s.timestamp:performance.now();n=!1,Ds.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,PX),1)),s.timestamp=E,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),f.process(s),p.process(s),m.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(v))},S=()=>{n=!0,r=!0,s.isProcessing||t(v)};return{schedule:af.reduce((E,P)=>{const R=o[P];return E[P]=(N,k=!1,y=!1)=>(n||S(),R.schedule(N,k,y)),E},{}),cancel:E=>{for(let P=0;P<af.length;P++)o[af[P]].cancel(E)},state:s,steps:o}}const{schedule:Ze,cancel:Vi,state:Nt,steps:X0}=HD(typeof requestAnimationFrame<"u"?requestAnimationFrame:or,!0);let Lf;function CX(){Lf=void 0}const In={now:()=>(Lf===void 0&&In.set(Nt.isProcessing||Ds.useManualTiming?Nt.timestamp:performance.now()),Lf),set:t=>{Lf=t,queueMicrotask(CX)}},GD=t=>e=>typeof e=="string"&&e.startsWith(t),Mb=GD("--"),NX=GD("var(--"),Lb=t=>NX(t)?RX.test(t.split("/*")[0].trim()):!1,RX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ec={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wd={...ec,transform:t=>js(0,1,t)},lf={...ec,default:1},Pu=t=>Math.round(t*1e5)/1e5,Fb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jX(t){return t==null}const DX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vb=(t,e)=>n=>!!(typeof n=="string"&&DX.test(n)&&n.startsWith(t)||e&&!jX(n)&&Object.prototype.hasOwnProperty.call(n,e)),KD=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Fb);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OX=t=>js(0,255,t),Y0={...ec,transform:t=>Math.round(OX(t))},So={test:Vb("rgb","red"),parse:KD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Y0.transform(t)+", "+Y0.transform(e)+", "+Y0.transform(n)+", "+Pu(wd.transform(r))+")"};function MX(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const v_={test:Vb("#"),parse:MX,transform:So.transform},Jd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Xs=Jd("deg"),Xr=Jd("%"),de=Jd("px"),LX=Jd("vh"),FX=Jd("vw"),j2={...Xr,parse:t=>Xr.parse(t)/100,transform:t=>Xr.transform(t*100)},qa={test:Vb("hsl","hue"),parse:KD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Xr.transform(Pu(e))+", "+Xr.transform(Pu(n))+", "+Pu(wd.transform(r))+")"},Zt={test:t=>So.test(t)||v_.test(t)||qa.test(t),parse:t=>So.test(t)?So.parse(t):qa.test(t)?qa.parse(t):v_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?So.transform(t):qa.transform(t)},VX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $X(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Fb))==null?void 0:e.length)||0)+(((n=t.match(VX))==null?void 0:n.length)||0)>0}const XD="number",YD="color",UX="var",BX="var(",D2="${}",zX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(zX,l=>(Zt.test(l)?(r.color.push(i),s.push(YD),n.push(Zt.parse(l))):l.startsWith(BX)?(r.var.push(i),s.push(UX),n.push(l)):(r.number.push(i),s.push(XD),n.push(parseFloat(l))),++i,D2)).split(D2);return{values:n,split:a,indexes:r,types:s}}function QD(t){return xd(t).values}function JD(t){const{split:e,types:n}=xd(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===XD?i+=Pu(s[o]):a===YD?i+=Zt.transform(s[o]):i+=s[o]}return i}}const qX=t=>typeof t=="number"?0:t;function WX(t){const e=QD(t);return JD(t)(e.map(qX))}const $i={test:$X,parse:QD,createTransformer:JD,getAnimatableNone:WX};function Q0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function HX({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Q0(l,a,t+1/3),i=Q0(l,a,t),o=Q0(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function em(t,e){return n=>n>0?e:t}const Qe=(t,e,n)=>t+(e-t)*n,J0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},GX=[v_,So,qa],KX=t=>GX.find(e=>e.test(t));function O2(t){const e=KX(t);if(!e)return!1;let n=e.parse(t);return e===qa&&(n=HX(n)),n}const M2=(t,e)=>{const n=O2(t),r=O2(e);if(!n||!r)return em(t,e);const s={...n};return i=>(s.red=J0(n.red,r.red,i),s.green=J0(n.green,r.green,i),s.blue=J0(n.blue,r.blue,i),s.alpha=Qe(n.alpha,r.alpha,i),So.transform(s))},__=new Set(["none","hidden"]);function XX(t,e){return __.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function YX(t,e){return n=>Qe(t,e,n)}function $b(t){return typeof t=="number"?YX:typeof t=="string"?Lb(t)?em:Zt.test(t)?M2:ZX:Array.isArray(t)?ZD:typeof t=="object"?Zt.test(t)?M2:QX:em}function ZD(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>$b(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function QX(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=$b(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function JX(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const ZX=(t,e)=>{const n=$i.createTransformer(e),r=xd(t),s=xd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?__.has(t)&&!s.values.length||__.has(e)&&!r.values.length?XX(t,e):Yd(ZD(JX(r,s),s.values),n):em(t,e)};function e3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Qe(t,e,n):$b(t)(t,e)}const eY=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ze.update(e,n),stop:()=>Vi(e),now:()=>Nt.isProcessing?Nt.timestamp:In.now()}},t3=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(i/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},tm=2e4;function Ub(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tm;)e+=n,r=t.next(e);return e>=tm?1/0:e}function tY(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Ub(r),tm);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Kr(s)}}const nY=5;function n3(t,e,n){const r=Math.max(e-nY,0);return OD(n-t(r),e-r)}const rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Z0=.001;function rY({duration:t=rt.duration,bounce:e=rt.bounce,velocity:n=rt.velocity,mass:r=rt.mass}){let s,i,o=1-e;o=js(rt.minDamping,rt.maxDamping,o),t=js(rt.minDuration,rt.maxDuration,Kr(t)),o<1?(s=c=>{const d=c*o,f=d*t,p=d-n,m=w_(c,o),w=Math.exp(-f);return Z0-p/m*w},i=c=>{const f=c*o*t,p=f*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,w=Math.exp(-f),v=w_(Math.pow(c,2),o);return(-s(c)+Z0>0?-1:1)*((p-m)*w)/v}):(s=c=>{const d=Math.exp(-c*t),f=(c-n)*t+1;return-Z0+d*f},i=c=>{const d=Math.exp(-c*t),f=(n-c)*(t*t);return d*f});const a=5/t,l=iY(s,i,a);if(t=Gr(t),isNaN(l))return{stiffness:rt.stiffness,damping:rt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const sY=12;function iY(t,e,n){let r=n;for(let s=1;s<sY;s++)r=r-t(r)/e(r);return r}function w_(t,e){return t*Math.sqrt(1-e*e)}const oY=["duration","bounce"],aY=["stiffness","damping","mass"];function L2(t,e){return e.some(n=>t[n]!==void 0)}function lY(t){let e={velocity:rt.velocity,stiffness:rt.stiffness,damping:rt.damping,mass:rt.mass,isResolvedFromDuration:!1,...t};if(!L2(t,aY)&&L2(t,oY))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*js(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:rt.mass,stiffness:s,damping:i}}else{const n=rY(t);e={...e,...n,mass:rt.mass},e.isResolvedFromDuration=!0}return e}function nm(t=rt.visualDuration,e=rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=lY({...n,velocity:-Kr(n.velocity||0)}),w=p||0,v=c/(2*Math.sqrt(l*d)),S=o-i,x=Kr(Math.sqrt(l/d)),_=Math.abs(S)<5;r||(r=_?rt.restSpeed.granular:rt.restSpeed.default),s||(s=_?rt.restDelta.granular:rt.restDelta.default);let E;if(v<1){const R=w_(x,v);E=N=>{const k=Math.exp(-v*x*N);return o-k*((w+v*x*S)/R*Math.sin(R*N)+S*Math.cos(R*N))}}else if(v===1)E=R=>o-Math.exp(-x*R)*(S+(w+x*S)*R);else{const R=x*Math.sqrt(v*v-1);E=N=>{const k=Math.exp(-v*x*N),y=Math.min(R*N,300);return o-k*((w+v*x*S)*Math.sinh(y)+R*S*Math.cosh(y))/R}}const P={calculatedDuration:m&&f||null,next:R=>{const N=E(R);if(m)a.done=R>=f;else{let k=R===0?w:0;v<1&&(k=R===0?Gr(w):n3(E,R,N));const y=Math.abs(k)<=r,I=Math.abs(o-N)<=s;a.done=y&&I}return a.value=a.done?o:N,a},toString:()=>{const R=Math.min(Ub(P),tm),N=t3(k=>P.next(R*k).value,R,30);return R+"ms "+N},toTransition:()=>{}};return P}nm.applyToOptions=t=>{const e=tY(t,100,nm);return t.ease=e.ease,t.duration=Gr(e.duration),t.type="keyframes",t};function x_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=t[0],p={done:!1,value:f},m=y=>a!==void 0&&y<a||l!==void 0&&y>l,w=y=>a===void 0?l:l===void 0||Math.abs(a-y)<Math.abs(l-y)?a:l;let v=n*e;const S=f+v,x=o===void 0?S:o(S);x!==S&&(v=x-f);const _=y=>-v*Math.exp(-y/r),E=y=>x+_(y),P=y=>{const I=_(y),A=E(y);p.done=Math.abs(I)<=c,p.value=p.done?x:A};let R,N;const k=y=>{m(p.value)&&(R=y,N=nm({keyframes:[p.value,w(p.value)],velocity:n3(E,y,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:y=>{let I=!1;return!N&&R===void 0&&(I=!0,P(y),k(y)),R!==void 0&&y>=R?N.next(y-R):(!I&&P(y),p)}}}function cY(t,e,n){const r=[],s=n||Ds.mix||e3,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||or:e;a=Yd(l,a)}r.push(a)}return r}function uY(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Zp(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=cY(e,r,s),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const p=_d(t[f],t[f+1],d);return a[f](p)};return n?d=>c(js(t[0],t[i-1],d)):c}function dY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=_d(0,e,r);t.push(Qe(n,1,s))}}function hY(t){const e=[0];return dY(e,t.length-1),e}function fY(t,e){return t.map(n=>n*e)}function pY(t,e){return t.map(()=>e||qD).splice(0,t.length-1)}function Cu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=TX(r)?r.map(N2):N2(r),i={done:!1,value:e[0]},o=fY(n&&n.length===e.length?n:hY(e),t),a=uY(o,e,{ease:Array.isArray(s)?s:pY(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const mY=t=>t!==null;function Bb(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(mY),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const gY={decay:x_,inertia:x_,tween:Cu,keyframes:Cu,spring:nm};function r3(t){typeof t.type=="string"&&(t.type=gY[t.type])}class zb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const yY=t=>t/100;class qb extends zb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;r3(e);const{type:n=Cu,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Cu;l!==Cu&&typeof a[0]!="number"&&(this.mixKeyframes=Yd(yY,e3(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Ub(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:f,repeatType:p,repeatDelay:m,type:w,onUpdate:v,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,P=r;if(f){const y=Math.min(this.currentTime,s)/a;let I=Math.floor(y),A=y%1;!A&&y>=1&&(A=1),A===1&&I--,I=Math.min(I,f+1),!!(I%2)&&(p==="reverse"?(A=1-A,m&&(A-=m/a)):p==="mirror"&&(P=o)),E=js(0,1,A)*a}const R=_?{done:!1,value:d[0]}:P.next(E);i&&(R.value=i(R.value));let{done:N}=R;!_&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return k&&w!==x_&&(R.value=Bb(d,this.options,S,this.speed)),v&&v(R.value),k&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Kr(this.calculatedDuration)}get time(){return Kr(this.currentTime)}set time(e){var n;e=Gr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(In.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Kr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=eY,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function vY(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ko=t=>t*180/Math.PI,b_=t=>{const e=ko(Math.atan2(t[1],t[0]));return E_(e)},_Y={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:b_,rotateZ:b_,skewX:t=>ko(Math.atan(t[1])),skewY:t=>ko(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},E_=t=>(t=t%360,t<0&&(t+=360),t),F2=b_,V2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),$2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),wY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:V2,scaleY:$2,scale:t=>(V2(t)+$2(t))/2,rotateX:t=>E_(ko(Math.atan2(t[6],t[5]))),rotateY:t=>E_(ko(Math.atan2(-t[2],t[0]))),rotateZ:F2,rotate:F2,skewX:t=>ko(Math.atan(t[4])),skewY:t=>ko(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function S_(t){return t.includes("scale")?1:0}function k_(t,e){if(!t||t==="none")return S_(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=wY,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_Y,s=a}if(!s)return S_(e);const i=r[e],o=s[1].split(",").map(bY);return typeof i=="function"?i(o):o[i]}const xY=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return k_(n,e)};function bY(t){return parseFloat(t.trim())}const tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nc=new Set(tc),U2=t=>t===ec||t===de,EY=new Set(["x","y","z"]),SY=tc.filter(t=>!EY.has(t));function kY(t){const e=[];return SY.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const jo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>k_(e,"x"),y:(t,{transform:e})=>k_(e,"y")};jo.translateX=jo.x;jo.translateY=jo.y;const Do=new Set;let T_=!1,I_=!1,A_=!1;function s3(){if(I_){const t=Array.from(Do).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=kY(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}I_=!1,T_=!1,Do.forEach(t=>t.complete(A_)),Do.clear()}function i3(){Do.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(I_=!0)})}function TY(){A_=!0,i3(),s3(),A_=!1}class Wb{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Do.add(this),T_||(T_=!0,Ze.read(i3),Ze.resolveKeyframes(s3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}vY(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Do.delete(this)}cancel(){this.state==="scheduled"&&(Do.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IY=t=>t.startsWith("--");function AY(t,e,n){IY(e)?t.style.setProperty(e,n):t.style[e]=n}const PY=Rb(()=>window.ScrollTimeline!==void 0),CY={};function NY(t,e){const n=Rb(t);return()=>CY[e]??n()}const o3=NY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ou=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,B2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ou([0,.65,.55,1]),circOut:ou([.55,0,1,.45]),backIn:ou([.31,.01,.66,-.59]),backOut:ou([.33,1.53,.69,.99])};function a3(t,e){if(t)return typeof t=="function"?o3()?t3(t,e):"ease-out":WD(t)?ou(t):Array.isArray(t)?t.map(n=>a3(n,e)||B2.easeOut):B2[t]}function RY(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const f=a3(a,s);Array.isArray(f)&&(d.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(d,p)}function l3(t){return typeof t=="function"&&"applyToOptions"in t}function jY({type:t,...e}){return l3(t)&&o3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class DY extends zb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Zp(typeof e.type!="string");const c=jY(e);this.animation=RY(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Bb(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):AY(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Kr(Number(e))}get time(){return Kr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&PY()?(this.animation.timeline=e,or):n(this)}}const c3={anticipate:UD,backInOut:$D,circInOut:zD};function OY(t){return t in c3}function MY(t){typeof t.ease=="string"&&OY(t.ease)&&(t.ease=c3[t.ease])}const z2=10;class LY extends DY{constructor(e){MY(e),r3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new qb({...o,autoplay:!1}),l=Gr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-z2).value,a.sample(l).value,z2),a.stop()}}const q2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($i.test(t)||t==="0")&&!t.startsWith("url("));function FY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function VY(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=q2(s,e),a=q2(i,e);return!o||!a?!1:FY(t)||(n==="spring"||l3(n))&&r}function Hb(t){return jD(t)&&"offsetHeight"in t}const $Y=new Set(["opacity","clipPath","filter","transform"]),UY=Rb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function BY(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!Hb((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return UY()&&n&&$Y.has(n)&&(n!=="transform"||!l)&&!a&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const zY=40;class qY extends zb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...f}){var w;super(),this.stop=()=>{var v,S;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=In.now();const p={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:d,...f},m=(d==null?void 0:d.KeyframeResolver)||Wb;this.keyframeResolver=new m(a,(v,S,x)=>this.onKeyframesResolved(v,S,p,!x),l,c,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=In.now(),VY(e,i,o,a)||((Ds.instantAnimations||!l)&&(d==null||d(Bb(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>zY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!c&&BY(p)?new LY({...p,element:p.motionValue.owner.current}):new qb(p);m.finished.then(()=>this.notifyFinished()).catch(or),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),TY()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const WY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function HY(t){const e=WY.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function u3(t,e,n=1){const[r,s]=HY(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return RD(o)?parseFloat(o):o}return Lb(s)?u3(s,e,n+1):s}function Gb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const d3=new Set(["width","height","top","left","right","bottom",...tc]),GY={test:t=>t==="auto",parse:t=>t},h3=t=>e=>e.test(t),f3=[ec,de,Xr,Xs,FX,LX,GY],W2=t=>f3.find(h3(t));function KY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||DD(t):!0}const XY=new Set(["brightness","contrast","saturate","opacity"]);function YY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Fb)||[];if(!r)return t;const s=n.replace(r,"");let i=XY.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const QY=/\b([a-z-]*)\(.*?\)/gu,P_={...$i,getAnimatableNone:t=>{const e=t.match(QY);return e?e.map(YY).join(" "):t}},H2={...ec,transform:Math.round},JY={rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:lf,scaleX:lf,scaleY:lf,scaleZ:lf,skew:Xs,skewX:Xs,skewY:Xs,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:wd,originX:j2,originY:j2,originZ:de},Kb={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,radius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,top:de,right:de,bottom:de,left:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,backgroundPositionX:de,backgroundPositionY:de,...JY,zIndex:H2,fillOpacity:wd,strokeOpacity:wd,numOctaves:H2},ZY={...Kb,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:P_,WebkitFilter:P_},p3=t=>ZY[t];function m3(t,e){let n=p3(t);return n!==P_&&(n=$i),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eQ=new Set(["auto","none","0"]);function tQ(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!eQ.has(i)&&xd(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=m3(n,s)}class nQ extends Wb{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Lb(c))){const d=u3(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!d3.has(r)||e.length!==2)return;const[s,i]=e,o=W2(s),a=W2(i);if(o!==a)if(U2(o)&&U2(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||KY(e[s]))&&r.push(s);r.length&&tQ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=jo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function rQ(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const g3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,G2=30,sQ=t=>!isNaN(parseFloat(t));class iQ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var o,a;const i=In.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=In.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=sQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new jb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,G2);return OD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ll(t,e){return new iQ(t,e)}const{schedule:Xb}=HD(queueMicrotask,!1),vr={x:!1,y:!1};function y3(){return vr.x||vr.y}function oQ(t){return t==="x"||t==="y"?vr[t]?null:(vr[t]=!0,()=>{vr[t]=!1}):vr.x||vr.y?null:(vr.x=vr.y=!0,()=>{vr.x=vr.y=!1})}function v3(t,e){const n=rQ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function K2(t){return!(t.pointerType==="touch"||y3())}function aQ(t,e,n={}){const[r,s,i]=v3(t,n),o=a=>{if(!K2(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=f=>{K2(f)&&(c(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const _3=(t,e)=>e?t===e?!0:_3(t,e.parentElement):!1,Yb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,lQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cQ(t){return lQ.has(t.tagName)||t.tabIndex!==-1}const Ff=new WeakSet;function X2(t){return e=>{e.key==="Enter"&&t(e)}}function ey(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uQ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=X2(()=>{if(Ff.has(n))return;ey(n,"down");const s=X2(()=>{ey(n,"up")}),i=()=>ey(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Y2(t){return Yb(t)&&!y3()}function dQ(t,e,n={}){const[r,s,i]=v3(t,n),o=a=>{const l=a.currentTarget;if(!Y2(a))return;Ff.add(l);const c=e(l,a),d=(m,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),Ff.has(l)&&Ff.delete(l),Y2(m)&&typeof c=="function"&&c(m,{success:w})},f=m=>{d(m,l===window||l===document||n.useGlobalTarget||_3(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Hb(a)&&(a.addEventListener("focus",c=>uQ(c,s)),!cQ(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function w3(t){return jD(t)&&"ownerSVGElement"in t}function hQ(t){return w3(t)&&t.tagName==="svg"}const rn=t=>!!(t&&t.getVelocity),fQ=[...f3,Zt,$i],pQ=t=>fQ.find(h3(t)),Qb=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class mQ extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Hb(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function gQ({children:t,isPresent:e,anchorX:n}){const r=T.useId(),s=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=T.useContext(Qb);return T.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d,right:f}=i.current;if(e||!s.current||!a||!l)return;const p=n==="left"?`left: ${d}`:`right: ${f}`;s.current.dataset.motionPopId=r;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(m)&&document.head.removeChild(m)}},[e]),u.jsx(mQ,{isPresent:e,childRef:s,sizeRef:i,children:T.cloneElement(t,{ref:s})})}const yQ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const l=Ab(vQ),c=T.useId();let d=!0,f=T.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:s,onExitComplete:p=>{l.set(p,!0);for(const m of l.values())if(!m)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return i&&d&&(f={...f}),T.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=u.jsx(gQ,{isPresent:n,anchorX:a,children:t})),u.jsx(lg.Provider,{value:f,children:t})};function vQ(){return new Map}function x3(t=!0){const e=T.useContext(lg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=T.useId();T.useEffect(()=>{if(t)return s(i)},[t]);const o=T.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const cf=t=>t.key||"";function Q2(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Es=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=x3(o),d=T.useMemo(()=>Q2(t),[t]),f=o&&!l?[]:d.map(cf),p=T.useRef(!0),m=T.useRef(d),w=Ab(()=>new Map),[v,S]=T.useState(d),[x,_]=T.useState(d);ND(()=>{p.current=!1,m.current=d;for(let R=0;R<x.length;R++){const N=cf(x[R]);f.includes(N)?w.delete(N):w.get(N)!==!0&&w.set(N,!1)}},[x,f.length,f.join("-")]);const E=[];if(d!==v){let R=[...d];for(let N=0;N<x.length;N++){const k=x[N],y=cf(k);f.includes(y)||(R.splice(N,0,k),E.push(k))}return i==="wait"&&E.length&&(R=E),_(Q2(R)),S(d),null}const{forceRender:P}=T.useContext(Ib);return u.jsx(u.Fragment,{children:x.map(R=>{const N=cf(R),k=o&&!l?!1:d===x||f.includes(N),y=()=>{if(w.has(N))w.set(N,!0);else return;let I=!0;w.forEach(A=>{A||(I=!1)}),I&&(P==null||P(),_(m.current),o&&(c==null||c()),r&&r())};return u.jsx(yQ,{isPresent:k,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:k?void 0:y,anchorX:a,children:R},N)})})},b3=T.createContext({strict:!1}),J2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fl={};for(const t in J2)Fl[t]={isEnabled:e=>J2[t].some(n=>!!e[n])};function _Q(t){for(const e in t)Fl[e]={...Fl[e],...t[e]}}const wQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wQ.has(t)}let E3=t=>!rm(t);function xQ(t){t&&(E3=e=>e.startsWith("on")?!rm(e):t(e))}try{xQ(require("@emotion/is-prop-valid").default)}catch{}function bQ(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(E3(s)||n===!0&&rm(s)||!e&&!rm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function EQ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const cg=T.createContext({});function ug(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bd(t){return typeof t=="string"||Array.isArray(t)}const Jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zb=["initial",...Jb];function dg(t){return ug(t.animate)||Zb.some(e=>bd(t[e]))}function S3(t){return!!(dg(t)||t.variants)}function SQ(t,e){if(dg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||bd(n)?n:void 0,animate:bd(r)?r:void 0}}return t.inherit!==!1?e:{}}function kQ(t){const{initial:e,animate:n}=SQ(t,T.useContext(cg));return T.useMemo(()=>({initial:e,animate:n}),[Z2(e),Z2(n)])}function Z2(t){return Array.isArray(t)?t.join(" "):t}const TQ=Symbol.for("motionComponentSymbol");function Wa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IQ(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wa(n)&&(n.current=r))},[e])}const e1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),AQ="framerAppearId",k3="data-"+e1(AQ),T3=T.createContext({});function PQ(t,e,n,r,s){var v,S;const{visualElement:i}=T.useContext(cg),o=T.useContext(b3),a=T.useContext(lg),l=T.useContext(Qb).reducedMotion,c=T.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,f=T.useContext(T3);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&CQ(c.current,n,s,f);const p=T.useRef(!1);T.useInsertionEffect(()=>{d&&p.current&&d.update(n,a)});const m=n[k3],w=T.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,m)));return ND(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Xb.render(d.render),w.current&&d.animationState&&d.animationState.animateChanges())}),T.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),w.current=!1))}),d}function CQ(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:I3(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Wa(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function I3(t){if(t)return t.options.allowProjection!==!1?t.projection:I3(t.parent)}function NQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&_Q(t);function i(a,l){let c;const d={...T.useContext(Qb),...a,layoutId:RQ(a)},{isStatic:f}=d,p=kQ(a),m=r(a,f);if(!f&&Pb){jQ();const w=DQ(d);c=w.MeasureLayout,p.visualElement=PQ(s,m,d,e,w.ProjectionNode)}return u.jsxs(cg.Provider,{value:p,children:[c&&p.visualElement?u.jsx(c,{visualElement:p.visualElement,...d}):null,n(s,a,IQ(m,p.visualElement,l),m,f,p.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=T.forwardRef(i);return o[TQ]=s,o}function RQ({layoutId:t}){const e=T.useContext(Ib).id;return e&&t!==void 0?e+"-"+t:t}function jQ(t,e){T.useContext(b3).strict}function DQ(t){const{drag:e,layout:n}=Fl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ed={};function OQ(t){for(const e in t)Ed[e]=t[e],Mb(e)&&(Ed[e].isCSSVariable=!0)}function A3(t,{layout:e,layoutId:n}){return nc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ed[t]||t==="opacity")}const MQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LQ=tc.length;function FQ(t,e,n){let r="",s=!0;for(let i=0;i<LQ;i++){const o=tc[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=g3(a,Kb[o]);if(!l){s=!1;const d=MQ[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function t1(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(nc.has(l)){o=!0;continue}else if(Mb(l)){s[l]=c;continue}else{const d=g3(c,Kb[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=FQ(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const n1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function P3(t,e,n){for(const r in e)!rn(e[r])&&!A3(r,n)&&(t[r]=e[r])}function VQ({transformTemplate:t},e){return T.useMemo(()=>{const n=n1();return t1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $Q(t,e){const n=t.style||{},r={};return P3(r,n,t),Object.assign(r,VQ(t,e)),r}function UQ(t,e){const n={},r=$Q(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const BQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},zQ={offset:"strokeDashoffset",array:"strokeDasharray"};function qQ(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?BQ:zQ;t[i.offset]=de.transform(-r);const o=de.transform(e),a=de.transform(n);t[i.array]=`${o} ${a}`}function C3(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,d){if(t1(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&qQ(f,s,i,o,!1)}const N3=()=>({...n1(),attrs:{}}),R3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function WQ(t,e,n,r){const s=T.useMemo(()=>{const i=N3();return C3(i,e,R3(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};P3(i,t.style,t),s.style={...i,...s.style}}return s}const HQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r1(t){return typeof t!="string"||t.includes("-")?!1:!!(HQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function GQ(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(r1(n)?WQ:UQ)(r,i,o,n),c=bQ(r,typeof n=="string",t),d=n!==T.Fragment?{...c,...l,ref:s}:{},{children:f}=r,p=T.useMemo(()=>rn(f)?f.get():f,[f]);return T.createElement(n,{...d,children:p})}}function eI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function s1(t,e,n,r){if(typeof e=="function"){const[s,i]=eI(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=eI(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Vf(t){return rn(t)?t.get():t}function KQ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:XQ(n,r,s,t),renderState:e()}}const j3=t=>(e,n)=>{const r=T.useContext(cg),s=T.useContext(lg),i=()=>KQ(t,e,r,s);return n?i():Ab(i)};function XQ(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=Vf(i[p]);let{initial:o,animate:a}=t;const l=dg(t),c=S3(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!ug(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const w=s1(t,p[m]);if(w){const{transitionEnd:v,transition:S,...x}=w;for(const _ in x){let E=x[_];if(Array.isArray(E)){const P=d?E.length-1:0;E=E[P]}E!==null&&(s[_]=E)}for(const _ in v)s[_]=v[_]}}}return s}function i1(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(rn(r[o])||e.style&&rn(e.style[o])||A3(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const YQ={useVisualState:j3({scrapeMotionValuesFromProps:i1,createRenderState:n1})};function D3(t,e,n){const r=i1(t,e,n);for(const s in t)if(rn(t[s])||rn(e[s])){const i=tc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const QQ={useVisualState:j3({scrapeMotionValuesFromProps:D3,createRenderState:N3})};function JQ(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...r1(r)?QQ:YQ,preloadedFeatures:t,useRender:GQ(s),createVisualElement:e,Component:r};return NQ(o)}}function Sd(t,e,n){const r=t.getProps();return s1(r,e,n!==void 0?n:r.custom,t)}const C_=t=>Array.isArray(t);function ZQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ll(n))}function eJ(t){return C_(t)?t[t.length-1]||0:t}function tJ(t,e){const n=Sd(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=eJ(i[o]);ZQ(t,o,a)}}function nJ(t){return!!(rn(t)&&t.add)}function N_(t,e){const n=t.getValue("willChange");if(nJ(n))return n.add(e);if(!n&&Ds.WillChange){const r=new Ds.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function O3(t){return t.props[k3]}const rJ=t=>t!==null;function sJ(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(rJ),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const iJ={type:"spring",stiffness:500,damping:25,restSpeed:10},oJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aJ={type:"keyframes",duration:.8},lJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cJ=(t,{keyframes:e})=>e.length>2?aJ:nc.has(t)?t.startsWith("scale")?oJ(e[1]):iJ:lJ;function uJ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const o1=(t,e,n,r={},s,i)=>o=>{const a=Gb(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Gr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};uJ(a)||Object.assign(d,cJ(t,d)),d.duration&&(d.duration=Gr(d.duration)),d.repeatDelay&&(d.repeatDelay=Gr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),(Ds.instantAnimations||Ds.skipAnimations)&&(f=!0,d.duration=0,d.delay=0),d.allowFlatten=!a.type&&!a.ease,f&&!i&&e.get()!==void 0){const p=sJ(d.keyframes,a);if(p!==void 0){Ze.update(()=>{d.onUpdate(p),d.onComplete()});return}}return a.isSync?new qb(d):new qY(d)};function dJ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function M3(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const f=t.getValue(d,t.latestValues[d]??null),p=a[d];if(p===void 0||c&&dJ(c,d))continue;const m={delay:n,...Gb(i||{},d)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===w&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=O3(t);if(x){const _=window.MotionHandoffAnimation(x,d,Ze);_!==null&&(m.startTime=_,v=!0)}}N_(t,d),f.start(o1(d,f,p,t.shouldReduceMotion&&d3.has(d)?{type:!1}:m,t,v));const S=f.animation;S&&l.push(S)}return o&&Promise.all(l).then(()=>{Ze.update(()=>{o&&tJ(t,o)})}),l}function R_(t,e,n={}){var l;const r=Sd(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(M3(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=s;return hJ(t,e,d+c,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,d]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function hJ(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(fJ).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(R_(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function fJ(t,e){return t.sortNodePosition(e)}function pJ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>R_(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=R_(t,e,n);else{const s=typeof e=="function"?Sd(t,e,n.custom):e;r=Promise.all(M3(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function L3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const mJ=Zb.length;function F3(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?F3(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mJ;n++){const r=Zb[n],s=t.props[r];(bd(s)||s===!1)&&(e[r]=s)}return e}const gJ=[...Jb].reverse(),yJ=Jb.length;function vJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>pJ(t,n,r)))}function _J(t){let e=vJ(t),n=tI(),r=!0;const s=l=>(c,d)=>{var p;const f=Sd(t,d,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:w,...v}=f;c={...c,...v,...w}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=F3(t.parent)||{},f=[],p=new Set;let m={},w=1/0;for(let S=0;S<yJ;S++){const x=gJ[S],_=n[x],E=c[x]!==void 0?c[x]:d[x],P=bd(E),R=x===l?_.isActive:null;R===!1&&(w=S);let N=E===d[x]&&E!==c[x]&&P;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),_.protectedKeys={...m},!_.isActive&&R===null||!E&&!_.prevProp||ug(E)||typeof E=="boolean")continue;const k=wJ(_.prevProp,E);let y=k||x===l&&_.isActive&&!N&&P||S>w&&P,I=!1;const A=Array.isArray(E)?E:[E];let j=A.reduce(s(x),{});R===!1&&(j={});const{prevResolvedValues:O={}}=_,D={...O,...j},Q=oe=>{y=!0,p.has(oe)&&(I=!0,p.delete(oe)),_.needsAnimating[oe]=!0;const $=t.getValue(oe);$&&($.liveStyle=!1)};for(const oe in D){const $=j[oe],z=O[oe];if(m.hasOwnProperty(oe))continue;let q=!1;C_($)&&C_(z)?q=!L3($,z):q=$!==z,q?$!=null?Q(oe):p.add(oe):$!==void 0&&p.has(oe)?Q(oe):_.protectedKeys[oe]=!0}_.prevProp=E,_.prevResolvedValues=j,_.isActive&&(m={...m,...j}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(N&&k)||I)&&f.push(...A.map(oe=>({animation:oe,options:{type:x}})))}if(p.size){const S={};if(typeof c.initial!="boolean"){const x=Sd(t,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(S.transition=x.transition)}p.forEach(x=>{const _=t.getBaseTarget(x),E=t.getValue(x);E&&(E.liveStyle=!0),S[x]=_??null}),f.push({animation:S})}let v=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=tI(),r=!0}}}function wJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!L3(e,t):!1}function co(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tI(){return{animate:co(!0),whileInView:co(),whileHover:co(),whileTap:co(),whileDrag:co(),whileFocus:co(),exit:co()}}class Xi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xJ extends Xi{constructor(e){super(e),e.animationState||(e.animationState=_J(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ug(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let bJ=0;class EJ extends Xi{constructor(){super(...arguments),this.id=bJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const SJ={animation:{Feature:xJ},exit:{Feature:EJ}};function kd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Zd(t){return{point:{x:t.pageX,y:t.pageY}}}const kJ=t=>e=>Yb(e)&&t(e,Zd(e));function Nu(t,e,n,r){return kd(t,e,kJ(n),r)}function V3({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function TJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function IJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const $3=1e-4,AJ=1-$3,PJ=1+$3,U3=.01,CJ=0-U3,NJ=0+U3;function pn(t){return t.max-t.min}function RJ(t,e,n){return Math.abs(t-e)<=n}function nI(t,e,n,r=.5){t.origin=r,t.originPoint=Qe(e.min,e.max,t.origin),t.scale=pn(n)/pn(e),t.translate=Qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=AJ&&t.scale<=PJ||isNaN(t.scale))&&(t.scale=1),(t.translate>=CJ&&t.translate<=NJ||isNaN(t.translate))&&(t.translate=0)}function Ru(t,e,n,r){nI(t.x,e.x,n.x,r?r.originX:void 0),nI(t.y,e.y,n.y,r?r.originY:void 0)}function rI(t,e,n){t.min=n.min+e.min,t.max=t.min+pn(e)}function jJ(t,e,n){rI(t.x,e.x,n.x),rI(t.y,e.y,n.y)}function sI(t,e,n){t.min=e.min-n.min,t.max=t.min+pn(e)}function ju(t,e,n){sI(t.x,e.x,n.x),sI(t.y,e.y,n.y)}const iI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ha=()=>({x:iI(),y:iI()}),oI=()=>({min:0,max:0}),ut=()=>({x:oI(),y:oI()});function Yn(t){return[t("x"),t("y")]}function ty(t){return t===void 0||t===1}function j_({scale:t,scaleX:e,scaleY:n}){return!ty(t)||!ty(e)||!ty(n)}function go(t){return j_(t)||B3(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function B3(t){return aI(t.x)||aI(t.y)}function aI(t){return t&&t!=="0%"}function sm(t,e,n){const r=t-n,s=e*r;return n+s}function lI(t,e,n,r,s){return s!==void 0&&(t=sm(t,s,r)),sm(t,n,r)+e}function D_(t,e=0,n=1,r,s){t.min=lI(t.min,e,n,r,s),t.max=lI(t.max,e,n,r,s)}function z3(t,{x:e,y:n}){D_(t.x,e.translate,e.scale,e.originPoint),D_(t.y,n.translate,n.scale,n.originPoint)}const cI=.999999999999,uI=1.0000000000001;function DJ(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ka(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,z3(t,o)),r&&go(i.latestValues)&&Ka(t,i.latestValues))}e.x<uI&&e.x>cI&&(e.x=1),e.y<uI&&e.y>cI&&(e.y=1)}function Ga(t,e){t.min=t.min+e,t.max=t.max+e}function dI(t,e,n,r,s=.5){const i=Qe(t.min,t.max,s);D_(t,e,n,i,r)}function Ka(t,e){dI(t.x,e.x,e.scaleX,e.scale,e.originX),dI(t.y,e.y,e.scaleY,e.scale,e.originY)}function q3(t,e){return V3(IJ(t.getBoundingClientRect(),e))}function OJ(t,e,n){const r=q3(t,n),{scroll:s}=e;return s&&(Ga(r.x,s.offset.x),Ga(r.y,s.offset.y)),r}const W3=({current:t})=>t?t.ownerDocument.defaultView:null,hI=(t,e)=>Math.abs(t-e);function MJ(t,e){const n=hI(t.x,e.x),r=hI(t.y,e.y);return Math.sqrt(n**2+r**2)}class H3{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=ry(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=MJ(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:w}=f,{timestamp:v}=Nt;this.history.push({...w,timestamp:v});const{onStart:S,onMove:x}=this.handlers;p||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ny(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:w,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=ry(f.type==="pointercancel"?this.lastMoveEventInfo:ny(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,S),w&&w(f,S)},!Yb(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Zd(e),a=ny(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Nt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,ry(a,this.history)),this.removeListeners=Yd(Nu(this.contextWindow,"pointermove",this.handlePointerMove),Nu(this.contextWindow,"pointerup",this.handlePointerUp),Nu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vi(this.updatePoint)}}function ny(t,e){return e?{point:e(t.point)}:t}function fI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ry({point:t},e){return{point:t,delta:fI(t,G3(e)),offset:fI(t,LJ(e)),velocity:FJ(e,.1)}}function LJ(t){return t[0]}function G3(t){return t[t.length-1]}function FJ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=G3(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Gr(e)));)n--;if(!r)return{x:0,y:0};const i=Kr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function VJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Qe(n,t,r.max):Math.min(t,n)),t}function pI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function $J(t,{top:e,left:n,bottom:r,right:s}){return{x:pI(t.x,n,s),y:pI(t.y,e,r)}}function mI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function UJ(t,e){return{x:mI(t.x,e.x),y:mI(t.y,e.y)}}function BJ(t,e){let n=.5;const r=pn(t),s=pn(e);return s>r?n=_d(e.min,e.max-r,t.min):r>s&&(n=_d(t.min,t.max-s,e.min)),js(0,1,n)}function zJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const O_=.35;function qJ(t=O_){return t===!1?t=0:t===!0&&(t=O_),{x:gI(t,"left","right"),y:gI(t,"top","bottom")}}function gI(t,e,n){return{min:yI(t,e),max:yI(t,n)}}function yI(t,e){return typeof t=="number"?t:t[e]||0}const WJ=new WeakMap;class HJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ut(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zd(d).point)},i=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:w}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oQ(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(S=>{let x=this.getAxisMotionValue(S).get()||0;if(Xr.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[S];E&&(x=pn(E)*(parseFloat(x)/100))}}this.originPoint[S]=x}),w&&Ze.postRender(()=>w(d,f)),N_(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:w,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:S}=f;if(m&&this.currentDirection===null){this.currentDirection=GJ(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),v&&v(d,f)},a=(d,f)=>this.stop(d,f),l=()=>Yn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new H3(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:W3(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ze.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!uf(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=VJ(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Wa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=$J(r.layoutBox,e):this.constraints=!1,this.elastic=qJ(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zJ(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=OJ(r,s.root,this.visualElement.getTransformPagePoint());let o=UJ(s.layout.layoutBox,i);if(n){const a=n(TJ(o));this.hasMutatedConstraints=!!a,a&&(o=V3(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Yn(d=>{if(!uf(d,n,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,w)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return N_(this.visualElement,e),r.start(o1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Yn(n=>{const{drag:r}=this.getProps();if(!uf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Qe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Yn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=BJ({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yn(o=>{if(!uf(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Qe(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;WJ.set(this.visualElement,this);const e=this.visualElement.current,n=Nu(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ze.read(r);const o=kd(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=O_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function uf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function GJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KJ extends Xi{constructor(e){super(e),this.removeGroupControls=or,this.removeListeners=or,this.controls=new HJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||or}unmount(){this.removeGroupControls(),this.removeListeners()}}const vI=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class XJ extends Xi{constructor(){super(...arguments),this.removePointerDownListener=or}onPointerDown(e){this.session=new H3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:vI(e),onStart:vI(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ze.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Nu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $f={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _I(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(de.test(t))t=parseFloat(t);else return t;const n=_I(t,e.target.x),r=_I(t,e.target.y);return`${n}% ${r}%`}},YJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=$i.parse(t);if(s.length>5)return r;const i=$i.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Qe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class QJ extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;OQ(JJ),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$f.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function K3(t){const[e,n]=x3(),r=T.useContext(Ib);return u.jsx(QJ,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(T3),isPresent:e,safeToRemove:n})}const JJ={borderRadius:{...Lc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lc,borderTopRightRadius:Lc,borderBottomLeftRadius:Lc,borderBottomRightRadius:Lc,boxShadow:YJ};function ZJ(t,e,n){const r=rn(t)?t:Ll(t);return r.start(o1("",r,e,n)),r.animation}const eZ=(t,e)=>t.depth-e.depth;class tZ{constructor(){this.children=[],this.isDirty=!1}add(e){Cb(this.children,e),this.isDirty=!0}remove(e){Nb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eZ),this.isDirty=!1,this.children.forEach(e)}}function nZ(t,e){const n=In.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Vi(r),t(i-e))};return Ze.setup(r,!0),()=>Vi(r)}const X3=["TopLeft","TopRight","BottomLeft","BottomRight"],rZ=X3.length,wI=t=>typeof t=="string"?parseFloat(t):t,xI=t=>typeof t=="number"||de.test(t);function sZ(t,e,n,r,s,i){s?(t.opacity=Qe(0,n.opacity??1,iZ(r)),t.opacityExit=Qe(e.opacity??1,0,oZ(r))):i&&(t.opacity=Qe(e.opacity??1,n.opacity??1,r));for(let o=0;o<rZ;o++){const a=`border${X3[o]}Radius`;let l=bI(e,a),c=bI(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||xI(l)===xI(c)?(t[a]=Math.max(Qe(wI(l),wI(c),r),0),(Xr.test(c)||Xr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Qe(e.rotate||0,n.rotate||0,r))}function bI(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iZ=Y3(0,.5,BD),oZ=Y3(.5,.95,or);function Y3(t,e,n){return r=>r<t?0:r>e?1:n(_d(t,e,r))}function EI(t,e){t.min=e.min,t.max=e.max}function Xn(t,e){EI(t.x,e.x),EI(t.y,e.y)}function SI(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kI(t,e,n,r,s){return t-=e,t=sm(t,1/n,r),s!==void 0&&(t=sm(t,1/s,r)),t}function aZ(t,e=0,n=1,r=.5,s,i=t,o=t){if(Xr.test(e)&&(e=parseFloat(e),e=Qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Qe(i.min,i.max,r);t===i&&(a-=e),t.min=kI(t.min,e,n,a,s),t.max=kI(t.max,e,n,a,s)}function TI(t,e,[n,r,s],i,o){aZ(t,e[n],e[r],e[s],e.scale,i,o)}const lZ=["x","scaleX","originX"],cZ=["y","scaleY","originY"];function II(t,e,n,r){TI(t.x,e,lZ,n?n.x:void 0,r?r.x:void 0),TI(t.y,e,cZ,n?n.y:void 0,r?r.y:void 0)}function AI(t){return t.translate===0&&t.scale===1}function Q3(t){return AI(t.x)&&AI(t.y)}function PI(t,e){return t.min===e.min&&t.max===e.max}function uZ(t,e){return PI(t.x,e.x)&&PI(t.y,e.y)}function CI(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function J3(t,e){return CI(t.x,e.x)&&CI(t.y,e.y)}function NI(t){return pn(t.x)/pn(t.y)}function RI(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dZ{constructor(){this.members=[]}add(e){Cb(this.members,e),e.scheduleRender()}remove(e){if(Nb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hZ(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:w}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const sy=["","X","Y","Z"],fZ={visibility:"hidden"},pZ=1e3;let mZ=0;function iy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Z3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=O3(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Z3(r)}function eO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=mZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vZ),this.nodes.forEach(EZ),this.nodes.forEach(SZ),this.nodes.forEach(_Z)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tZ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=w3(o)&&!hQ(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=nZ(f,250),$f.hasAnimatedSinceResize&&($f.hasAnimatedSinceResize=!1,this.nodes.forEach(DI))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||c.getDefaultTransition()||PZ,{onLayoutAnimationStart:v,onLayoutAnimationComplete:S}=c.getProps(),x=!this.targetLayout||!J3(this.targetLayout,m),_=!f&&p;if(this.options.layoutRoot||this.resumeFrom||_||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Gb(w,"layout"),onPlay:v,onComplete:S};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(d,_)}else f||DI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Z3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jI);return}this.isUpdating||this.nodes.forEach(xZ),this.isUpdating=!1,this.nodes.forEach(bZ),this.nodes.forEach(gZ),this.nodes.forEach(yZ),this.clearAllSnapshots();const a=In.now();Nt.delta=js(0,1e3/60,a-Nt.timestamp),Nt.timestamp=a,Nt.isProcessing=!0,X0.update.process(Nt),X0.preRender.process(Nt),X0.render.process(Nt),Nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wZ),this.sharedNodes.forEach(TZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Q3(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||go(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),CZ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return ut();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(NZ))){const{scroll:d}=this.root;d&&(Ga(a.x,d.offset.x),Ga(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=ut();if(Xn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Xn(a,o),Ga(a.x,f.offset.x),Ga(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=ut();Xn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ka(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),go(d.latestValues)&&Ka(l,d.latestValues)}return go(this.latestValues)&&Ka(l,this.latestValues),l}removeTransform(o){const a=ut();Xn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!go(c.latestValues))continue;j_(c.latestValues)&&c.updateSnapshot();const d=ut(),f=c.measurePageBox();Xn(d,f),II(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return go(this.latestValues)&&II(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Nt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),ju(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ut(),this.targetWithTransforms=ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xn(this.target,this.layout.layoutBox),z3(this.target,this.targetDelta)):Xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),ju(this.relativeTargetOrigin,this.target,m.target),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||j_(this.parent.latestValues)||B3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Nt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Xn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;DJ(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ut());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(SI(this.prevProjectionDelta.x,this.projectionDelta.x),SI(this.prevProjectionDelta.y,this.projectionDelta.y)),Ru(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!RI(this.projectionDelta.x,this.prevProjectionDelta.x)||!RI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ha(),this.projectionDelta=Ha(),this.projectionDeltaWithTransform=Ha()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=Ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ut(),m=l?l.source:void 0,w=this.layout?this.layout.source:void 0,v=m!==w,S=this.getStack(),x=!S||S.members.length<=1,_=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(AZ));this.animationProgress=0;let E;this.mixTargetDelta=P=>{const R=P/1e3;OI(f.x,o.x,R),OI(f.y,o.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ju(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IZ(this.relativeTarget,this.relativeTargetOrigin,p,R),E&&uZ(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ut()),Xn(E,this.relativeTarget)),v&&(this.animationValues=d,sZ(d,c,this.latestValues,R,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{$f.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ll(0)),this.currentAnimation=ZJ(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&tO(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ut();const f=pn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=pn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Xn(a,l),Ka(a,d),Ru(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new dZ),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&iy("z",o,c,this.animationValues);for(let d=0;d<sy.length;d++)iy(`rotate${sy[d]}`,o,c,this.animationValues),iy(`skew${sy[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return fZ;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=Vf(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Vf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!go(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=hZ(this.projectionDeltaWithTransform,this.treeScale,d),l&&(a.transform=l(d,a.transform));const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ed){if(d[m]===void 0)continue;const{correct:w,applyTo:v,isCSSVariable:S}=Ed[m],x=a.transform==="none"?d[m]:w(d[m],c);if(v){const _=v.length;for(let E=0;E<_;E++)a[v[E]]=x}else S?this.options.visualElement.renderState.vars[m]=x:a[m]=x}return this.options.layoutId&&(a.pointerEvents=c===this?Vf(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(jI),this.root.sharedNodes.clear()}}}function gZ(t){t.updateLayout()}function yZ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Yn(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=pn(p);p.min=r[f].min,p.max=p.min+m}):tO(i,e.layoutBox,r)&&Yn(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=pn(r[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const a=Ha();Ru(a,r,e.layoutBox);const l=Ha();o?Ru(l,t.applyTransform(s,!0),e.measuredBox):Ru(l,r,e.layoutBox);const c=!Q3(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const w=ut();ju(w,e.layoutBox,p.layoutBox);const v=ut();ju(v,r,m.layoutBox),J3(w,v)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _Z(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wZ(t){t.clearSnapshot()}function jI(t){t.clearMeasurements()}function xZ(t){t.isLayoutDirty=!1}function bZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DI(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EZ(t){t.resolveTargetDelta()}function SZ(t){t.calcProjection()}function kZ(t){t.resetSkewAndRotation()}function TZ(t){t.removeLeadSnapshot()}function OI(t,e,n){t.translate=Qe(e.translate,0,n),t.scale=Qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function MI(t,e,n,r){t.min=Qe(e.min,n.min,r),t.max=Qe(e.max,n.max,r)}function IZ(t,e,n,r){MI(t.x,e.x,n.x,r),MI(t.y,e.y,n.y,r)}function AZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PZ={duration:.45,ease:[.4,0,.1,1]},LI=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FI=LI("applewebkit/")&&!LI("chrome/")?Math.round:or;function VI(t){t.min=FI(t.min),t.max=FI(t.max)}function CZ(t){VI(t.x),VI(t.y)}function tO(t,e,n){return t==="position"||t==="preserve-aspect"&&!RJ(NI(e),NI(n),.2)}function NZ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const RZ=eO({attachResizeListener:(t,e)=>kd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oy={current:void 0},nO=eO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!oy.current){const t=new RZ({});t.mount(window),t.setOptions({layoutScroll:!0}),oy.current=t}return oy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jZ={pan:{Feature:XJ},drag:{Feature:KJ,ProjectionNode:nO,MeasureLayout:K3}};function $I(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ze.postRender(()=>i(e,Zd(e)))}class DZ extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=aQ(e,(n,r)=>($I(this.node,r,"Start"),s=>$I(this.node,s,"End"))))}unmount(){}}class OZ extends Xi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yd(kd(this.node.current,"focus",()=>this.onFocus()),kd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function UI(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ze.postRender(()=>i(e,Zd(e)))}class MZ extends Xi{mount(){const{current:e}=this.node;e&&(this.unmount=dQ(e,(n,r)=>(UI(this.node,r,"Start"),(s,{success:i})=>UI(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const M_=new WeakMap,ay=new WeakMap,LZ=t=>{const e=M_.get(t.target);e&&e(t)},FZ=t=>{t.forEach(LZ)};function VZ({root:t,...e}){const n=t||document;ay.has(n)||ay.set(n,{});const r=ay.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(FZ,{root:t,...e})),r[s]}function $Z(t,e,n){const r=VZ(e);return M_.set(t,n),r.observe(t),()=>{M_.delete(t),r.unobserve(t)}}const UZ={some:0,all:1};class BZ extends Xi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:UZ[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return $Z(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zZ(e,n))&&this.startObserver()}unmount(){}}function zZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qZ={inView:{Feature:BZ},tap:{Feature:MZ},focus:{Feature:OZ},hover:{Feature:DZ}},WZ={layout:{ProjectionNode:nO,MeasureLayout:K3}},L_={current:null},rO={current:!1};function HZ(){if(rO.current=!0,!!Pb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>L_.current=t.matches;t.addListener(e),e()}else L_.current=!1}const GZ=new WeakMap;function KZ(t,e,n){for(const r in e){const s=e[r],i=n[r];if(rn(s))t.addValue(r,s);else if(rn(i))t.addValue(r,Ll(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Ll(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const BI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XZ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=In.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=dg(n),this.isVariantNode=S3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&rn(m)&&m.set(l[p],!1)}}mount(e){this.current=e,GZ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),rO.current||HZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:L_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vi(this.notifyUpdate),Vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=nc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fl){const n=Fl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<BI.length;r++){const s=BI[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=KZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ll(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(RD(r)||DD(r))?r=parseFloat(r):!pQ(r)&&$i.test(n)&&(r=m3(e,n)),this.setBaseTarget(e,rn(r)?r.get():r)),rn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=s1(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!rn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new jb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class sO extends XZ{constructor(){super(...arguments),this.KeyframeResolver=nQ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function iO(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}function YZ(t){return window.getComputedStyle(t)}class QZ extends sO{constructor(){super(...arguments),this.type="html",this.renderInstance=iO}readValueFromInstance(e,n){var r;if(nc.has(n))return(r=this.projection)!=null&&r.isProjecting?S_(n):xY(e,n);{const s=YZ(e),i=(Mb(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return q3(e,n)}build(e,n,r){t1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return i1(e,n,r)}}const oO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JZ(t,e,n,r){iO(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(oO.has(s)?s:e1(s),e.attrs[s])}class ZZ extends sO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(nc.has(n)){const r=p3(n);return r&&r.default||0}return n=oO.has(n)?n:e1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return D3(e,n,r)}build(e,n,r){C3(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){JZ(e,n,r,s)}mount(e){this.isSVGTag=R3(e.tagName),super.mount(e)}}const eee=(t,e)=>r1(t)?new ZZ(e):new QZ(e,{allowProjection:t!==T.Fragment}),tee=JQ({...SJ,...qZ,...jZ,...WZ},eee),it=EQ(tee),nee="https://cferwghhtstkxdiqhfqj.supabase.co",ree="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmZXJ3Z2hodHN0a3hkaXFoZnFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM4OTM5NTUsImV4cCI6MjAyOTQ2OTk1NX0.LdRCCpAn0Yb0WTgFxUq3GBQO3-Bp74hQVIlMfhTjHfE",Ke=qC(nee,ree),see="BKm3MJqzCqPqVgNPaRo2P8SfvYf0eJZGpTdQtaYvL8Jxr6rwdMlvK9HJCSqtnyYqNvwLGfInI_FMtvzrQzREqpE";class iee{constructor(){this.swRegistration=null,this.isSupported="serviceWorker"in navigator&&"PushManager"in window}async init(){if(!this.isSupported)return console.warn("Push notifications are not supported in this browser"),!1;try{return this.swRegistration=await navigator.serviceWorker.register("/sw.js"),console.log("Service Worker registered"),await this.swRegistration.pushManager.getSubscription()&&console.log("Already subscribed to push notifications"),!0}catch(e){return console.error("Failed to initialize push notifications:",e),!1}}async requestPermission(e){if(!this.isSupported)throw new Error("Push notifications not supported");try{if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission denied");const s=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(see)});return await this.saveSubscription(e,s),console.log("Push notification subscription successful"),s}catch(n){throw console.error("Failed to subscribe to push notifications:",n),n}}async unsubscribe(e){try{const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();r&&(await r.unsubscribe(),await this.removeSubscription(e),console.log("Unsubscribed from push notifications"))}catch(n){throw console.error("Failed to unsubscribe:",n),n}}getPermissionStatus(){return this.isSupported?Notification.permission:"unsupported"}async isSubscribed(){if(!this.isSupported)return!1;try{return!!await(await navigator.serviceWorker.ready).pushManager.getSubscription()}catch{return!1}}async saveSubscription(e,n){try{const{error:r}=await Ke.from("push_subscriptions").upsert({user_id:e,endpoint:n.endpoint,p256dh:this.arrayBufferToBase64(n.getKey("p256dh")),auth:this.arrayBufferToBase64(n.getKey("auth")),user_agent:navigator.userAgent,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{onConflict:"user_id,endpoint"});if(r)throw r}catch(r){throw console.error("Failed to save subscription:",r),r}}async removeSubscription(e){try{const{error:n}=await Ke.from("push_subscriptions").delete().eq("user_id",e);if(n)throw n}catch(n){throw console.error("Failed to remove subscription:",n),n}}async showLocalNotification(e,n={}){if(!this.isSupported||Notification.permission!=="granted"){console.warn("Cannot show notification");return}await(await navigator.serviceWorker.ready).showNotification(e,{body:n.body||"",icon:n.icon||"/icon-192x192.png",badge:n.badge||"/badge-72x72.png",tag:n.tag||"bankroll-notification",data:n.data||{},requireInteraction:n.requireInteraction||!1,actions:n.actions||[],...n})}urlBase64ToUint8Array(e){const n="=".repeat((4-e.length%4)%4),r=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(r),i=new Uint8Array(s.length);for(let o=0;o<s.length;++o)i[o]=s.charCodeAt(o);return i}arrayBufferToBase64(e){const n=new Uint8Array(e);let r="";for(let s=0;s<n.byteLength;s++)r+=String.fromCharCode(n[s]);return window.btoa(r)}}const _i=new iee;class oee{async sendNotification(e,n,r={},s={}){try{const{data:i}=await Ke.from("notification_templates").select("*").eq("name",n).single();let o=(i==null?void 0:i.title)||n.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()),a=(i==null?void 0:i.body)||"";Object.entries(r).forEach(([f,p])=>{const m=new RegExp(`{{${f}}}`,"g");o=o.replace(m,p),a=a.replace(m,p)});const l={user_id:e,title:o,message:a,type:(i==null?void 0:i.type)||s.type||"system",action_url:s.action_url||null,metadata:{template_name:n,...r,...s.metadata||{}}},{data:c,error:d}=await Ke.from("notifications").insert(l).select().single();if(d)throw d;return i!=null&&i.priority&&i.priority<=2&&this.sendPushNotification(e,o,a,{notificationId:c.id}),c}catch(i){throw console.error("Error sending notification:",i),i}}async sendBulkNotification(e,n,r={},s={}){const i=e.map(o=>this.sendNotification(o,n,{...r},s));return Promise.allSettled(i)}async getUserNotifications(e,n="in_app",r){try{let s={};typeof n=="object"?s=n:s.limit=r;let i=Ke.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1});s.limit&&(i=i.limit(s.limit));const{data:o,error:a}=await i;if(a)throw a;return o||[]}catch(s){return console.error("Error fetching notifications:",s),[]}}async markAsRead(e,n){try{const{error:r}=await Ke.from("notifications").update({is_read:!0}).eq("id",e).eq("user_id",n);if(r)throw r;return!0}catch(r){return console.error("Error marking notification as read:",r),!1}}async markAllAsRead(e,n="in_app"){try{const{error:r}=await Ke.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1);if(r)throw r;return!0}catch(r){return console.error("Error marking all as read:",r),!1}}async getUnreadCount(e){try{const{count:n,error:r}=await Ke.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("is_read",!1);if(r)throw r;return n||0}catch(n){return console.error("Error getting unread count:",n),0}}async updatePreferences(e,n){try{const r={user_id:e,email:n.email_enabled??n.email??!0,sms:n.sms_enabled??n.sms??!1,in_app:n.in_app_enabled??n.in_app??!0,push_token:n.push_token||null,updated_at:new Date().toISOString()},{data:s,error:i}=await Ke.from("notification_preferences").upsert(r).select().single();if(i)throw i;return this.mapPreferencesToUI(s)}catch(r){throw console.error("Error updating preferences:",r),r}}async getPreferences(e){try{const{data:n,error:r}=await Ke.from("notification_preferences").select("*").eq("user_id",e).single();if(r&&r.code==="PGRST116")return this.createDefaultPreferences(e);if(r)throw r;return this.mapPreferencesToUI(n)}catch(n){throw console.error("Error getting preferences:",n),n}}mapPreferencesToUI(e){return e?{...e,email_enabled:e.email,push_enabled:!!e.push_token,sms_enabled:e.sms,in_app_enabled:e.in_app,transactions_email:e.email,transactions_push:!!e.push_token,transactions_in_app:e.in_app,social_email:e.email,social_push:!!e.push_token,social_in_app:e.in_app,rewards_email:e.email,rewards_push:!!e.push_token,rewards_in_app:e.in_app,marketing_email:e.email,marketing_push:!1,security_email:!0,security_sms:e.sms,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}:null}async createDefaultPreferences(e){const n={user_id:e,in_app:!0,email:!0,sms:!1,push_token:null},{data:r,error:s}=await Ke.from("notification_preferences").insert(n).select().single();if(s)throw s;return this.mapPreferencesToUI(r)}async notifyInviteDeclined(e,n,r,s){try{await this.sendNotification(e,"group_invite_declined",{inviteeName:n,groupName:r},{type:"social",action_url:`/groups/${s}/invite`,metadata:{groupId:s,action:"invite_declined"}})}catch(i){console.error("Error sending invite declined notification:",i)}}async notifyInviteAccepted(e,n,r,s){try{await this.sendNotification(e,"group_invite_accepted",{inviteeName:n,groupName:r},{type:"social",action_url:`/groups/${s}`,metadata:{groupId:s,action:"invite_accepted"}})}catch(i){console.error("Error sending invite accepted notification:",i)}}subscribeToNotifications(e,n){return Ke.channel(`notifications:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e}`},s=>{n(s.new)}).subscribe()}determineChannels(e,n,r){if(r.channels)return r.channels;const s=[];return(n==null?void 0:n.in_app)!==!1&&s.push("in_app"),n!=null&&n.email&&(e==null?void 0:e.type)==="email"&&s.push("email"),n!=null&&n.sms&&(e==null?void 0:e.category)==="security"&&s.push("sms"),n!=null&&n.push_token&&s.push("push"),s.length>0?s:["in_app"]}async triggerNotificationProcessing(){try{const{data:e,error:n}=await Ke.functions.invoke("process-notifications");if(n)throw n;return e}catch(e){console.error("Error triggering notification processing:",e)}}async sendPushNotification(e,n,r,s={}){try{const i=await this.getPreferences(e);if(!(i!=null&&i.push_token))return console.log("No push token found for user"),!1;const{data:o,error:a}=await Ke.functions.invoke("send-push-notification",{body:{userId:e,title:n,body:r,data:s,tag:`bankroll-${Date.now()}`,requireInteraction:s.requireInteraction||!1}});if(a)throw a;return o}catch(i){return console.error("Error sending push notification:",i),!1}}async initializePushNotifications(e){try{if(!await _i.init())return!1;if(await _i.isSubscribed())return!0;const s=await this.getPreferences(e);if(s!=null&&s.push_token)return!0;if(_i.getPermissionStatus()==="granted")try{return await _i.requestPermission(e),!0}catch(o){console.error("Failed to auto-subscribe:",o)}return!1}catch(n){return console.error("Error initializing push notifications:",n),!1}}async notifyMoneyReceived(e,n,r,s,i){return this.sendNotification(e,"money_received",{sender_name:n,sender_username:r,amount:`$${s.toFixed(2)}`,new_balance:`$${i.toFixed(2)}`})}async notifyWithdrawalCompleted(e,n,r,s,i){return this.sendNotification(e,"withdrawal_completed",{amount:`$${n.toFixed(2)}`,transaction_id:r,destination:s,estimated_time:i})}async notifyDepositSuccessful(e,n,r){return this.sendNotification(e,"deposit_successful",{amount:`$${n.toFixed(2)}`,new_balance:`$${r.toFixed(2)}`})}async notifyGroupInvite(e,n,r,s,i){return this.sendNotification(e,"group_invite",{inviter_name:n,group_name:r,group_description:s,member_count:i})}async notifyDailySpinAvailable(e,n,r,s){return this.sendNotification(e,"daily_spin_available",{streak_days:n,max_reward:r.toFixed(2),streak_bonus:s})}async notifyRewardWon(e,n,r,s){return this.sendNotification(e,"reward_won",{amount:`$${n.toFixed(2)}`,reward_source:r,bonus_balance:`$${s.toFixed(2)}`})}}const au=new oee,Sse=6048e5,kse=864e5,df=43200,zI=1440,qI=Symbol.for("constructDateFrom");function a1(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&qI in t?t[qI](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ui(t,e){return a1(e||t,t)}let aee={};function lee(){return aee}function WI(t){const e=Ui(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function l1(t,...e){const n=a1.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function Uf(t,e){const n=+Ui(t)-+Ui(e);return n<0?-1:n>0?1:n}function cee(t){return a1(t,Date.now())}function uee(t,e,n){const[r,s]=l1(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function dee(t){return e=>{const n=Math.trunc,r=n(e);return r===0?0:r}}function hee(t,e){return+Ui(t)-+Ui(e)}function fee(t,e){const n=Ui(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function pee(t,e){const n=Ui(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function mee(t,e){const n=Ui(t,e==null?void 0:e.in);return+fee(n,e)==+pee(n,e)}function gee(t,e,n){const[r,s,i]=l1(n==null?void 0:n.in,t,t,e),o=Uf(s,i),a=Math.abs(uee(s,i));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let l=Uf(s,i)===-o;mee(r)&&a===1&&Uf(r,i)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function yee(t,e,n){const r=hee(t,e)/1e3;return dee()(r)}const vee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_ee=(t,e,n)=>{let r;const s=vee[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ly(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const wee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Eee={date:ly({formats:wee,defaultWidth:"full"}),time:ly({formats:xee,defaultWidth:"full"}),dateTime:ly({formats:bee,defaultWidth:"full"})},See={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kee=(t,e,n,r)=>See[t];function Fc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Tee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Iee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Aee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Pee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ree=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jee={ordinalNumber:Ree,era:Fc({values:Tee,defaultWidth:"wide"}),quarter:Fc({values:Iee,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fc({values:Aee,defaultWidth:"wide"}),day:Fc({values:Pee,defaultWidth:"wide"}),dayPeriod:Fc({values:Cee,defaultWidth:"wide",formattingValues:Nee,defaultFormattingWidth:"wide"})};function Vc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Oee(a,f=>f.test(o)):Dee(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Dee(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Oee(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Mee(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Lee=/^(\d+)(th|st|nd|rd)?/i,Fee=/\d+/i,Vee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$ee={any:[/^b/i,/^(a|c)/i]},Uee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bee={any:[/1/i,/2/i,/3/i,/4/i]},zee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Wee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Hee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kee={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xee={ordinalNumber:Mee({matchPattern:Lee,parsePattern:Fee,valueCallback:t=>parseInt(t,10)}),era:Vc({matchPatterns:Vee,defaultMatchWidth:"wide",parsePatterns:$ee,defaultParseWidth:"any"}),quarter:Vc({matchPatterns:Uee,defaultMatchWidth:"wide",parsePatterns:Bee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vc({matchPatterns:zee,defaultMatchWidth:"wide",parsePatterns:qee,defaultParseWidth:"any"}),day:Vc({matchPatterns:Wee,defaultMatchWidth:"wide",parsePatterns:Hee,defaultParseWidth:"any"}),dayPeriod:Vc({matchPatterns:Gee,defaultMatchWidth:"any",parsePatterns:Kee,defaultParseWidth:"any"})},Yee={code:"en-US",formatDistance:_ee,formatLong:Eee,formatRelative:kee,localize:jee,match:Xee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qee(t,e,n){const r=lee(),s=(n==null?void 0:n.locale)??r.locale??Yee,i=2520,o=Uf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[l,c]=l1(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),d=yee(c,l),f=(WI(c)-WI(l))/1e3,p=Math.round((d-f)/60);let m;if(p<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):p===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",p,a);if(p<45)return s.formatDistance("xMinutes",p,a);if(p<90)return s.formatDistance("aboutXHours",1,a);if(p<zI){const w=Math.round(p/60);return s.formatDistance("aboutXHours",w,a)}else{if(p<i)return s.formatDistance("xDays",1,a);if(p<df){const w=Math.round(p/zI);return s.formatDistance("xDays",w,a)}else if(p<df*2)return m=Math.round(p/df),s.formatDistance("aboutXMonths",m,a)}if(m=gee(c,l),m<12){const w=Math.round(p/df);return s.formatDistance("xMonths",w,a)}else{const w=m%12,v=Math.trunc(m/12);return w<3?s.formatDistance("aboutXYears",v,a):w<9?s.formatDistance("overXYears",v,a):s.formatDistance("almostXYears",v+1,a)}}function aO(t,e){return Qee(t,cee(t),e)}const HI=()=>{const{currentUser:t}=Ut(),[e,n]=T.useState(!1),[r,s]=T.useState([]),[i,o]=T.useState(0),[a,l]=T.useState(!1),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{if(t){f(),p();const _=setInterval(()=>{f(),p()},3e4);return()=>{clearInterval(_)}}},[t]),T.useEffect(()=>{const _=E=>{c.current&&!c.current.contains(E.target)&&d.current&&!d.current.contains(E.target)&&n(!1)};if(e)return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[e]),T.useEffect(()=>{if(e&&i>0){const _=setTimeout(()=>{r.filter(P=>!P.is_read).length>0&&w()},1e3);return()=>clearTimeout(_)}},[e,i]);const f=async()=>{l(!0);try{const _=await au.getUserNotifications(t.id,{limit:50}),E=[{id:"sample1",title:"Welcome to Bankroll!",message:"Start by adding funds to your wallet and exploring our features.",category:"marketing",type:"welcome",is_read:!1,created_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"sample2",title:"New Group Invitation",message:'You have been invited to join "March Madness Pool"',category:"social",type:"group_invite",is_read:!1,created_at:new Date(Date.now()-24*60*60*1e3).toISOString()},{id:"sample3",title:"Referral Bonus Available",message:"Earn $20 in free bets for each friend you invite!",category:"rewards",type:"referral",is_read:!1,created_at:new Date(Date.now()-3*24*60*60*1e3).toISOString()}],R=(_.length>0?_:E).sort((N,k)=>N.is_read!==k.is_read?N.is_read?1:-1:new Date(k.created_at)-new Date(N.created_at));s(R)}catch(_){console.error("Error fetching notifications:",_)}finally{l(!1)}},p=async()=>{try{const _=await au.getUnreadCount(t.id);o(_>0?_:3)}catch(_){console.error("Error fetching unread count:",_),o(3)}},m=async _=>{try{await au.markAsRead(_,t.id),s(E=>E.map(P=>P.id===_?{...P,is_read:!0}:P)),o(E=>Math.max(0,E-1))}catch(E){console.error("Error marking as read:",E)}},w=async()=>{try{await au.markAllAsRead(t.id),s(_=>_.map(E=>({...E,is_read:!0}))),o(0)}catch(_){console.error("Error marking all as read:",_)}},v=_=>{switch(_){case"transaction":return u.jsx(ID,{className:"w-5 h-5"});case"social":return u.jsx(ag,{className:"w-5 h-5"});case"security":return u.jsx(Zl,{className:"w-5 h-5"});case"rewards":return u.jsx(Qp,{className:"w-5 h-5"});case"marketing":return u.jsx(kb,{className:"w-5 h-5"});default:return u.jsx(Au,{className:"w-5 h-5"})}},S=_=>{switch(_){case"transaction":return"text-green-500 bg-green-100";case"social":return"text-blue-500 bg-blue-100";case"security":return"text-red-500 bg-red-100";case"rewards":return"text-purple-500 bg-purple-100";case"marketing":return"text-orange-500 bg-orange-100";default:return"text-gray-500 bg-gray-100"}},x=_=>({title:_.title||"Notification",content:_.message||""});return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{ref:d,onClick:()=>n(!e),className:"relative p-2 text-white hover:text-gray-200 transition-colors group","aria-label":"Notifications",children:[u.jsx(Au,{className:"w-6 h-6"}),i>0&&u.jsx(it.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-lg notification-badge-pulse",children:i>9?"9+":i})]}),u.jsx(Es,{children:e&&u.jsxs(u.Fragment,{children:[u.jsx(it.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>n(!1)}),u.jsxs(it.div,{ref:c,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-2 w-full md:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl z-50 overflow-hidden notification-dropdown",style:{maxHeight:"80vh"},children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Au,{className:"w-5 h-5"}),u.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),i>0&&u.jsxs("span",{className:"bg-white/20 text-xs px-2 py-0.5 rounded-full",children:[i," new"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[i>0&&u.jsxs("button",{onClick:w,className:"text-sm text-white/80 hover:text-white flex items-center gap-1 transition-colors",title:"Mark all as read",children:[u.jsx(YK,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Clear all"})]}),u.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-white/10 rounded-lg transition-colors",title:"Close",children:u.jsx(dl,{className:"w-5 h-5"})})]})]})}),u.jsx("div",{className:"overflow-y-auto notification-list",style:{maxHeight:"calc(80vh - 80px)"},children:a?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-purple-600"})}):r.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[u.jsx(nX,{className:"w-12 h-12 mb-3 text-gray-300"}),u.jsx("p",{className:"text-lg font-medium",children:"No notifications"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]}):u.jsx("div",{className:"divide-y",children:r.map(_=>{const{title:E,content:P}=x(_),R=!_.is_read;return u.jsx(it.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r.indexOf(_)*.05},className:`relative p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-all border-l-4 notification-item ${R?"bg-purple-50/50 dark:bg-purple-900/10 border-purple-500 notification-unread":"bg-white dark:bg-gray-800 border-transparent"}`,onClick:()=>R&&m(_.id),children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:`p-2.5 rounded-lg flex-shrink-0 ${S(_.type||"system")}`,children:v(_.type||"system")}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsx("h3",{className:`font-semibold text-sm ${R?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`,children:E}),R&&u.jsxs(it.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"NEW"}),u.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse"})]})]}),P&&u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:P}),u.jsxs("div",{className:"flex items-center justify-between mt-2",children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:aO(new Date(_.created_at),{addSuffix:!0})}),R&&u.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Click to mark as read"})]})]})]})},_.id)})})}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 border-t dark:border-gray-700",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("a",{href:"/settings/notifications",className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:[u.jsx(PD,{className:"w-4 h-4"}),u.jsx("span",{children:"Notification Settings"})]}),r.length>0&&u.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to turn off all notifications?")&&n(!1)},className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:[u.jsx(GK,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden md:inline",children:"Mute all"})]})]})})]})]})})]})},Jee=()=>{const{currentUser:t}=Ut(),[e,n]=T.useState(!1),[r,s]=T.useState("default"),[i,o]=T.useState(!1),[a,l]=T.useState(!1);T.useEffect(()=>{c()},[t]);const c=async()=>{if(!t)return;const p=_i.getPermissionStatus();if(s(p),p==="default"&&t){const m=localStorage.getItem("bankroll_notification_banner_dismissed");(!m||Date.now()-parseInt(m)>7*24*60*60*1e3)&&setTimeout(()=>n(!0),3e3)}},d=async()=>{o(!0);try{await _i.init(),await _i.requestPermission(t.id),await au.updatePreferences(t.id,{push_enabled:!0}),l(!0),s("granted"),setTimeout(()=>{n(!1)},2e3),setTimeout(()=>{_i.showLocalNotification("Notifications Enabled! 🎉",{body:"You'll now receive important updates from Bankroll",tag:"welcome-notification"})},1e3)}catch(p){console.error("Failed to enable notifications:",p),p.message.includes("denied")&&s("denied")}finally{o(!1)}},f=()=>{n(!1),localStorage.setItem("bankroll_notification_banner_dismissed",Date.now().toString())};return!e||r!=="default"?null:u.jsx(Es,{children:u.jsx(it.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-40",children:u.jsx("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",children:a?u.jsx(it.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-green-50 border-b border-green-100",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx(Xd,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-green-900",children:"Notifications Enabled!"}),u.jsx("p",{className:"text-sm text-green-700",children:"You're all set to receive updates"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-4 border-b border-gray-100",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Au,{className:"w-5 h-5 text-purple-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Stay Updated with Notifications"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Get instant alerts for money received, rewards, and important updates"})]}),u.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(dl,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:"p-4 bg-gray-50",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Not Now"}),u.jsx("button",{onClick:d,disabled:i,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),u.jsx("span",{children:"Enabling..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Au,{className:"w-4 h-4"}),u.jsx("span",{children:"Enable"})]})})]})})]})})})})},Zee=({currentUser:t})=>{const e=dr(),{isDark:n}=Zm(),[r,s]=T.useState(0);T.useEffect(()=>{const o=()=>{const l=parseInt(localStorage.getItem("spinnerCount")||"0");s(l)};o();const a=setInterval(o,1e3);return window.addEventListener("storage",o),()=>{clearInterval(a),window.removeEventListener("storage",o)}},[]);const i=[{name:"Wallet",path:"/wallet",icon:Tb,label:"Wallet"},{name:"Rewards",path:"/rewards",icon:Jp,label:"Rewards",badge:r>0?r:null},{name:"Groups",path:"/groups",icon:ag,label:"Groups"},{name:"Partners",path:"/partner-platforms",icon:Sb,label:"Partners"},{name:"Profile",path:"/profile",icon:TD,label:"Profile"}];return u.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-2 pb-safe z-50 md:hidden bg-black/50 backdrop-blur-md border-t border-white/10",children:u.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(o=>{const a=o.icon,l=e.pathname===o.path||e.pathname==="/"&&o.path==="/home";return u.jsxs(he,{to:o.path,className:`flex flex-col items-center justify-center flex-1 h-full px-2 transition-all duration-200 ${l?"text-orange-400":"text-white/60"}`,children:[u.jsxs("div",{className:`relative transition-transform duration-200 ${l?"scale-110":"scale-100"}`,children:[u.jsx(a,{className:`h-6 w-6 ${l?"stroke-[2.5px]":"stroke-2"}`}),o.badge&&u.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center",children:o.badge}),l&&u.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-purple-600 rounded-full"})]}),u.jsx("span",{className:`text-[10px] mt-1 font-medium ${l?"text-purple-600":n?"text-gray-400":"text-purple-700"}`,children:o.label})]},o.name)})})})},GI=()=>{const{isDark:t,toggleTheme:e}=Zm();return u.jsx("button",{onClick:e,className:`p-2 rounded-lg transition-all duration-200 ease-in-out transform ${t?"bg-gray-800 text-yellow-400 hover:bg-gray-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,"aria-label":t?"Switch to light mode":"Switch to dark mode",children:u.jsx("div",{className:"relative w-5 h-5",children:t?u.jsx(pX,{className:"absolute inset-0 transition-transform duration-200 ease-in-out"}):u.jsx(cX,{className:"absolute inset-0 transition-transform duration-200 ease-in-out"})})})};class ete{async getUserReferralCode(e){var n,r;try{const{data:s,error:i}=await Z.from("profiles").select("referral_code, username").eq("id",e).single();if(i){if(i.code==="PGRST116"||i.code==="42P01"||(n=i.message)!=null&&n.includes("404")||(r=i.message)!=null&&r.includes("400"))return console.log("Profiles table issue - using temporary referral code"),e.substring(0,6).toUpperCase();throw i}if(!(s!=null&&s.referral_code)&&(s!=null&&s.username)){const o=s.username.substring(1).toLowerCase();return await Z.from("profiles").update({referral_code:o}).eq("id",e),o}return(s==null?void 0:s.referral_code)||null}catch(s){return console.error("Error getting referral code:",s),e?e.substring(0,6).toUpperCase():null}}async getReferralStats(e){var n;try{const{data:r,error:s}=await Z.from("profiles").select("referral_code, referral_count, referral_earnings").eq("id",e).single();if(s){if(s.code==="PGRST116"||(n=s.message)!=null&&n.includes("404"))return console.log("Profiles table not found - returning default stats"),{referral_code:null,referral_count:0,referral_earnings:0,pending_invites:0,total_invites:0};throw s}const{data:i,error:o}=await Z.from("referral_invites").select("status").eq("referrer_id",e);if(o)throw o;const a=(i==null?void 0:i.filter(c=>c.status==="pending"||c.status==="sent").length)||0,l=(i==null?void 0:i.length)||0;return{referral_code:r.referral_code,referral_count:r.referral_count||0,referral_earnings:r.referral_earnings||0,pending_invites:a,total_invites:l}}catch(r){return console.error("Error getting referral stats:",r),null}}async getReferralRewards(e){try{const{data:n,error:r}=await Z.from("referral_rewards").select("*").eq("referrer_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Error getting referral rewards:",n),[]}}async getReferralInvites(e){try{const{data:n,error:r}=await Z.from("referral_invites").select("*").eq("referrer_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Error getting referral invites:",n),[]}}async sendReferralInvite(e,n){try{const r=await this.getUserReferralCode(e);if(!r)return console.error("No referral code found for user"),!1;const{data:s}=await Z.from("referral_invites").select("id").eq("referrer_id",e).eq("email",n).single();if(s)return console.log("Invite already exists for this email"),!1;const{error:i}=await Z.from("referral_invites").insert({referrer_id:e,email:n,referral_code:r,status:"sent",sent_at:new Date().toISOString()});if(i)throw i;const{error:o}=await Z.functions.invoke("send-referral-invite",{body:{to:n,referrerName:e,referralCode:r}});return o?(console.error("Error sending email:",o),await Z.from("referral_invites").update({status:"pending"}).eq("referrer_id",e).eq("email",n),!1):!0}catch(r){return console.error("Error sending referral invite:",r),!1}}async applyReferralCode(e,n){try{const{data:r,error:s}=await Z.rpc("apply_referral",{user_id:e,referral_code:n});if(s)return console.error("Error applying referral code:",s),!1;if(!r)return console.error("Invalid referral code or cannot use own code"),!1;const{data:i}=await Z.rpc("lookup_referral_code",{code:n});return i&&(await this.creditReferralReward(i,e,"signup",10),await Z.from("referral_invites").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("referrer_id",i).eq("referral_code",n)),!0}catch(r){return console.error("Error applying referral code:",r),!1}}async creditReferralReward(e,n,r,s){try{const{error:i}=await Z.rpc("credit_referral_reward",{p_referrer_id:e,p_referred_id:n,p_reward_type:r,p_amount:s});if(i)throw i;return await Z.functions.invoke("send-referral-reward-notification",{body:{userId:e,rewardType:r,amount:s}}),!0}catch(i){return console.error("Error crediting referral reward:",i),!1}}generateReferralLink(e){return`${window.location.origin}/signup?ref=${e.toLowerCase()}`}}const KI=new ete;let tte={data:""},nte=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||tte,rte=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ste=/\/\*[^]*?\*\/|  +/g,XI=/\n+/g,ui=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?ui(o,i):i+"{"+ui(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=ui(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ui.p?ui.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},as={},lO=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+lO(t[n]);return e}return t},ite=(t,e,n,r,s)=>{let i=lO(t),o=as[i]||(as[i]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(i));if(!as[o]){let l=i!==t?t:(c=>{let d,f,p=[{}];for(;d=rte.exec(c.replace(ste,""));)d[4]?p.shift():d[3]?(f=d[3].replace(XI," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(XI," ").trim();return p[0]})(t);as[o]=ui(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&as.g?as.g:null;return n&&(as.g=as[o]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(as[o],e,r,a),o},ote=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":ui(a,""):a===!1?"":a}return r+s+(o??"")},"");function hg(t){let e=this||{},n=t.call?t(e.p):t;return ite(n.unshift?n.raw?ote(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,nte(e.target),e.g,e.o,e.k)}let cO,F_,V_;hg.bind({g:1});let Os=hg.bind({k:1});function ate(t,e,n,r){ui.p=e,cO=t,F_=n,V_=r}function Yi(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:F_&&F_()},a),n.o=/ *go\d+/.test(l),a.className=hg.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),V_&&c[0]&&V_(a),cO(c,a)}return s}}var lte=t=>typeof t=="function",$_=(t,e)=>lte(t)?t(e):t,cte=(()=>{let t=0;return()=>(++t).toString()})(),ute=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),dte=20,uO=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,dte)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return uO(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},hte=[],cy={toasts:[],pausedAt:void 0},c1=t=>{cy=uO(cy,t),hte.forEach(e=>{e(cy)})},fte=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||cte()}),eh=t=>(e,n)=>{let r=fte(e,t,n);return c1({type:2,toast:r}),r.id},En=(t,e)=>eh("blank")(t,e);En.error=eh("error");En.success=eh("success");En.loading=eh("loading");En.custom=eh("custom");En.dismiss=t=>{c1({type:3,toastId:t})};En.remove=t=>c1({type:4,toastId:t});En.promise=(t,e,n)=>{let r=En.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?$_(e.success,s):void 0;return i?En.success(i,{id:r,...n,...n==null?void 0:n.success}):En.dismiss(r),s}).catch(s=>{let i=e.error?$_(e.error,s):void 0;i?En.error(i,{id:r,...n,...n==null?void 0:n.error}):En.dismiss(r)}),t};var pte=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mte=Os`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gte=Os`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,yte=Yi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mte} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${gte} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vte=Os`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_te=Yi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${vte} 1s linear infinite;
`,wte=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xte=Os`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,bte=Yi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xte} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ete=Yi("div")`
  position: absolute;
`,Ste=Yi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kte=Os`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tte=Yi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kte} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ite=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?T.createElement(Tte,null,e):e:n==="blank"?null:T.createElement(Ste,null,T.createElement(_te,{...r}),n!=="loading"&&T.createElement(Ete,null,n==="error"?T.createElement(yte,{...r}):T.createElement(bte,{...r})))},Ate=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pte=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Cte="0%{opacity:0;} 100%{opacity:1;}",Nte="0%{opacity:1;} 100%{opacity:0;}",Rte=Yi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jte=Yi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Dte=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=ute()?[Cte,Nte]:[Ate(n),Pte(n)];return{animation:e?`${Os(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Os(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};T.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?Dte(t.position||e||"top-center",t.visible):{opacity:0},i=T.createElement(Ite,{toast:t}),o=T.createElement(jte,{...t.ariaProps},$_(t.message,t));return T.createElement(Rte,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):T.createElement(T.Fragment,null,i,o))});ate(T.createElement);hg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Tse=En;const Ote=({variant:t="banner",onClose:e})=>{const{currentUser:n}=Ut(),{isDark:r}=Zm(),[s,i]=T.useState(""),[o,a]=T.useState(!0);T.useEffect(()=>{n!=null&&n.id&&l()},[n]);const l=async()=>{const f=await KI.getUserReferralCode(n.id);i(f||"")},c=()=>{const f=KI.generateReferralLink(s);navigator.clipboard.writeText(f),En.success("Referral link copied!")},d=()=>{a(!1),e&&e()};return!o||!s?null:t==="banner"?u.jsxs("div",{className:`relative overflow-hidden rounded-lg p-4 mb-4 ${r?"bg-gradient-to-r from-purple-900 to-indigo-900":"bg-gradient-to-r from-purple-500 to-indigo-500"}`,children:[u.jsx("button",{onClick:d,className:"absolute top-2 right-2 text-white/70 hover:text-white",children:u.jsx(dl,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:u.jsx(Qp,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{className:"text-white",children:[u.jsx("h3",{className:"font-semibold",children:"Earn $10 for each friend you refer!"}),u.jsxs("p",{className:"text-sm opacity-80",children:["Share your code: ",u.jsx("span",{className:"font-mono font-bold",children:s})]})]})]}),u.jsx("button",{onClick:c,className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-colors",children:"Copy Link"})]})]}):t==="card"?u.jsxs("div",{className:`relative rounded-lg p-4 ${r?"bg-gray-800 border border-purple-600":"bg-purple-50 border border-purple-300"}`,children:[u.jsx("button",{onClick:d,className:`absolute top-2 right-2 ${r?"text-gray-500 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:u.jsx(dl,{className:"w-3 h-3"})}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${r?"bg-purple-900/50":"bg-purple-200"}`,children:u.jsx(ag,{className:`w-5 h-5 ${r?"text-purple-400":"text-purple-600"}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:`font-medium mb-1 ${r?"text-white":"text-gray-900"}`,children:"Invite friends, earn rewards"}),u.jsx("p",{className:`text-sm mb-2 ${r?"text-gray-400":"text-gray-600"}`,children:"Get $10 when they sign up"}),u.jsx("button",{onClick:c,className:`text-sm font-medium ${r?"text-purple-400 hover:text-purple-300":"text-purple-600 hover:text-purple-700"}`,children:"Share your link →"})]})]})]}):t==="floating"?u.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm animate-slide-up",children:u.jsxs("div",{className:`relative rounded-lg shadow-xl p-4 ${r?"bg-gradient-to-br from-purple-900 to-indigo-900":"bg-gradient-to-br from-purple-500 to-indigo-500"}`,children:[u.jsx("button",{onClick:d,className:"absolute top-2 right-2 text-white/70 hover:text-white",children:u.jsx(dl,{className:"w-4 h-4"})}),u.jsxs("div",{className:"text-white",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(Qp,{className:"w-5 h-5"}),u.jsx("h3",{className:"font-semibold",children:"Earn rewards!"})]}),u.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Get $10 for each friend who joins using your code"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("code",{className:"bg-white/20 px-2 py-1 rounded text-sm font-mono",children:s}),u.jsx("button",{onClick:c,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Copy"})]})]})]})}):null};class Mte{constructor(){this.conversationId=null,this.sessionId=this.getOrCreateSessionId(),this.messageHistory=[],this.claudeApiKey=""}getOrCreateSessionId(){let e=localStorage.getItem("ai_chat_session_id");return e||(e=ab(),localStorage.setItem("ai_chat_session_id",e)),e}async initializeConversation(e=null){try{const{data:n}=await Ke.from("ai_chat_conversations").select("*").eq("status","active").eq(e?"user_id":"session_id",e||this.sessionId).order("created_at",{ascending:!1}).limit(1).single();if(n)return this.conversationId=n.id,await this.loadMessageHistory(),n;const{data:r,error:s}=await Ke.from("ai_chat_conversations").insert({user_id:e,session_id:this.sessionId,status:"active",metadata:{user_agent:navigator.userAgent,platform:navigator.platform,language:navigator.language}}).select().single();if(s)throw s;return this.conversationId=r.id,await this.addMessage("assistant",this.getGreetingMessage()),r}catch(n){throw console.error("Error initializing conversation:",n),n}}async loadMessageHistory(){if(this.conversationId)try{const{data:e,error:n}=await Ke.from("ai_chat_messages").select("*").eq("conversation_id",this.conversationId).order("created_at",{ascending:!0});if(n)throw n;return this.messageHistory=e||[],e}catch(e){return console.error("Error loading message history:",e),[]}}async addMessage(e,n,r={}){if(!this.conversationId)throw new Error("No active conversation");try{const{data:s,error:i}=await Ke.from("ai_chat_messages").insert({conversation_id:this.conversationId,role:e,content:n,metadata:r}).select().single();if(i)throw i;return this.messageHistory.push(s),s}catch(s){throw console.error("Error adding message:",s),s}}async sendMessage(e,n={}){try{await this.addMessage("user",e,{context:n});const r=await this.searchKnowledgeBase(e),s=this.buildSystemPrompt(n,r),i=await this.callClaudeAPI(e,s);return await this.addMessage("assistant",i,{knowledge_base_used:r.length>0})}catch(r){throw console.error("Error sending message:",r),await this.addMessage("error","I apologize, but I'm having trouble processing your request right now. Please try again or contact support at support@bankroll.live.",{error:r.message}),r}}async searchKnowledgeBase(e){try{const{data:n,error:r}=await Ke.rpc("search_knowledge_base",{search_query:e});if(r)throw r;if(n&&n.length>0){const s=n[0];await Ke.from("ai_knowledge_base").update({usage_count:s.usage_count+1}).eq("id",s.id)}return n||[]}catch(n){return console.error("Error searching knowledge base:",n),[]}}buildSystemPrompt(e,n){let r=`You are a helpful AI assistant for Bankroll, a financial app that helps users manage group finances, sports betting bankrolls, and peer-to-peer transactions. 

Your role is to:
1. Help users navigate the app and understand its features
2. Assist with troubleshooting technical issues
3. Explain how features work (wallet, groups, rewards, referrals)
4. Collect bug reports with relevant details
5. Escalate to human support when needed

Key features of Bankroll:
- Wallet: Add funds via ACH/debit/wire, withdraw to bank, view transaction history
- Groups: Create and manage group bankrolls, invite members, track contributions
- Rewards: Daily spin for bonus funds, referral program with commission
- Partners: Integrated sportsbook platforms with special offers

Guidelines:
- Be concise and friendly
- Use bullet points for step-by-step instructions
- Ask clarifying questions when needed
- If you don't know something, admit it and offer to connect them with support
- For bugs/errors, collect: what they were doing, error message, browser/device info
- Never provide financial advice or guarantee outcomes
- Direct payment/security issues to support@bankroll.live

Current context:
- Page: ${e.currentPage||"Unknown"}
- User authenticated: ${e.isAuthenticated||!1}
- Time: ${new Date().toLocaleString()}`;return n.length>0&&(r+=`

Relevant information from knowledge base:
`,n.forEach((s,i)=>{r+=`
${i+1}. Q: ${s.question}
   A: ${s.answer}
`})),e.recentError&&(r+=`

The user recently encountered an error:
${e.recentError}`),r}async callClaudeAPI(e,n){const r=await this.searchKnowledgeBase(e);if(r.length>0&&r[0].relevance>8)return r[0].answer;if(!this.claudeApiKey||this.claudeApiKey==="")return this.getIntelligentFallbackResponse(e,n,r);try{const s=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.claudeApiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-sonnet-20240229",max_tokens:500,system:n,messages:[...this.messageHistory.slice(-10).map(o=>({role:o.role==="assistant"?"assistant":"user",content:o.content})),{role:"user",content:e}]})});if(!s.ok){const o=await s.text();throw console.error("Claude API error:",o),new Error("Claude API error")}return(await s.json()).content[0].text}catch(s){return console.error("Claude API error:",s),this.getIntelligentFallbackResponse(e,n,r)}}getIntelligentFallbackResponse(e,n,r){const s=e.toLowerCase();if(s.includes("error")||s.includes("bug")||s.includes("problem"))return n.includes("recentError")?`I can see you recently encountered an error. Here's what you can try:

1. **Refresh the page** - Sometimes a simple refresh resolves temporary issues
2. **Clear your browser cache** - This can fix loading problems
3. **Try a different browser** - To rule out browser-specific issues
4. **Check your internet connection**

If the error persists, please describe:
- What you were trying to do
- The exact error message
- Your browser and device

I'll help troubleshoot or connect you with support.`:`I'm sorry you're experiencing an issue. To help you better, could you please tell me:

1. What were you trying to do?
2. What error message did you see?
3. What device/browser are you using?

I'll help troubleshoot or escalate to our support team if needed.`;if(s.includes("add funds")||s.includes("deposit")||s.includes("wallet"))return`To add funds to your wallet:

1. Go to the **Wallet** section
2. Click **"Add Funds"**
3. Choose your payment method:
   - **ACH Transfer** (1-3 business days)
   - **Debit Card** (instant)
   - **Wire Transfer** (1-2 business days)
4. Enter the amount and follow the prompts

Need help with a specific step?`;if(s.includes("group")||s.includes("create group")||s.includes("join group"))return`Here's how to work with groups:

**Create a Group:**
1. Go to **Groups** section
2. Click **"Create New Group"**
3. Fill in details (name, description)
4. Set member permissions
5. Click **"Create Group"**

**Join a Group:**
1. Get an invitation link from the group admin
2. Click the link and review details
3. Click **"Join Group"**

What would you like to do?`;if(s.includes("referral")||s.includes("refer")||s.includes("invite friend"))return`Our referral program rewards you for inviting friends!

1. Go to your **Profile**
2. Find your **unique referral code**
3. Share it with friends
4. When they sign up and deposit, you both get bonus funds!

Some codes offer permanent commission on referred users. Check your profile for your personalized referral link.`;if(r.length>0){let i=`Based on our help documentation:

`+r[0].answer;if(r.length>1){i+=`

Related topics you might find helpful:
`;for(let o=1;o<Math.min(3,r.length);o++)i+=`
• ${r[o].question}`}return i}return s.includes("help")||s.length<10?`I'm here to help! I can assist you with:

• **Wallet** - Adding funds, withdrawals, transactions
• **Groups** - Creating, joining, managing groups
• **Rewards** - Daily spin, referral program
• **Technical Issues** - Troubleshooting errors
• **Account** - Profile settings, security

What would you like help with?`:`I understand you need help with that. Could you provide more details about what you're trying to do? I can help with:

• Managing your wallet and funds
• Creating or joining groups
• Understanding rewards and bonuses
• Troubleshooting technical issues
• Navigating the app features

What specific area do you need assistance with?`}getGreetingMessage(){const e=new Date().getHours();return`${e<12?"Good morning":e<17?"Good afternoon":"Good evening"}! I'm your Bankroll assistant. I can help you navigate the app, explain features, or troubleshoot any issues. How can I help you today?`}async submitFeedback(e,n,r=null,s=null,i=null){try{const{data:o,error:a}=await Ke.from("ai_chat_feedback").insert({message_id:e,user_id:i,feedback_type:n,rating:r,comment:s}).select().single();if(a)throw a;return o}catch(o){throw console.error("Error submitting feedback:",o),o}}async closeConversation(){if(this.conversationId)try{const{error:e}=await Ke.from("ai_chat_conversations").update({status:"closed"}).eq("id",this.conversationId);if(e)throw e;this.conversationId=null,this.messageHistory=[]}catch(e){console.error("Error closing conversation:",e)}}async escalateToSupport(e,n=null){if(this.conversationId)try{return await Ke.from("ai_chat_conversations").update({status:"escalated",metadata:{escalation_reason:e,escalated_at:new Date().toISOString()}}).eq("id",this.conversationId),await this.addMessage("system",`Conversation escalated to human support. Reason: ${e}`),!0}catch(r){return console.error("Error escalating conversation:",r),!1}}}const wa=new Mte;class Lte{constructor(){this.recentError=null,this.errorHistory=[],this.maxHistorySize=10}recordError(e,n={},r={}){const s={timestamp:new Date().toISOString(),message:e.toString(),stack:e.stack,errorInfo:n,context:{url:window.location.href,userAgent:navigator.userAgent,...r}};this.recentError=s,this.errorHistory.unshift(s),this.errorHistory.length>this.maxHistorySize&&(this.errorHistory=this.errorHistory.slice(0,this.maxHistorySize));try{sessionStorage.setItem("ai_chat_recent_error",JSON.stringify(s)),sessionStorage.setItem("ai_chat_error_history",JSON.stringify(this.errorHistory))}catch(i){console.error("Failed to store error in session storage:",i)}return s}getRecentError(){if(this.recentError)return this.recentError;try{const e=sessionStorage.getItem("ai_chat_recent_error");if(e)return this.recentError=JSON.parse(e),this.recentError}catch(e){console.error("Failed to load error from session storage:",e)}return null}getErrorHistory(){if(this.errorHistory.length>0)return this.errorHistory;try{const e=sessionStorage.getItem("ai_chat_error_history");if(e)return this.errorHistory=JSON.parse(e),this.errorHistory}catch(e){console.error("Failed to load error history from session storage:",e)}return[]}clearErrors(){this.recentError=null,this.errorHistory=[];try{sessionStorage.removeItem("ai_chat_recent_error"),sessionStorage.removeItem("ai_chat_error_history")}catch(e){console.error("Failed to clear error storage:",e)}}formatForAI(){const e=this.getRecentError();return e?{error:e.message,timestamp:e.timestamp,page:e.context.url,stackTrace:e.stack?e.stack.split(`
`).slice(0,5).join(`
`):"No stack trace available"}:null}}const dO=new Lte,Fte=()=>{const{currentUser:t}=Ut(),e=dr(),[n,r]=T.useState(!1),[s,i]=T.useState(!1),[o,a]=T.useState([]),[l,c]=T.useState(""),[d,f]=T.useState(!1),[p,m]=T.useState(!1),[w,v]=T.useState(null),[S,x]=T.useState(null),_=T.useRef(null),E=T.useRef(null),P=()=>{var A;(A=_.current)==null||A.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{P()},[o]),T.useEffect(()=>{n&&!w&&R()},[n]),T.useEffect(()=>{const A=sessionStorage.getItem("open_ai_chat_on_load"),j=sessionStorage.getItem("ai_chat_initial_message");A==="true"&&(sessionStorage.removeItem("open_ai_chat_on_load"),sessionStorage.removeItem("ai_chat_initial_message"),r(!0),setTimeout(()=>{j&&(c(j),setTimeout(()=>{const O=document.querySelector("[data-chat-send-button]");O&&O.click()},500))},1e3))},[]);const R=async()=>{f(!0),x(null);try{const A=await wa.initializeConversation(t==null?void 0:t.id);v(A);const j=await wa.loadMessageHistory();a(j)}catch(A){console.error("Error initializing chat:",A),x("Failed to start chat. Please try again.")}finally{f(!1)}},N=async()=>{if(!l.trim()||d)return;const A=l.trim();c(""),m(!0),x(null);const j={id:`temp-${Date.now()}`,role:"user",content:A,created_at:new Date().toISOString()};a(O=>[...O,j]);try{const O={currentPage:e.pathname,isAuthenticated:!!t,userId:t==null?void 0:t.id,userEmail:t==null?void 0:t.email,recentError:dO.formatForAI()},D=await wa.sendMessage(A,O);a(Q=>[...Q.filter(ue=>ue.id!==j.id),D])}catch(O){console.error("Error sending message:",O),x("Failed to send message. Please try again."),a(D=>D.filter(Q=>Q.id!==j.id))}finally{m(!1)}},k=async(A,j)=>{try{await wa.submitFeedback(A,j,null,null,t==null?void 0:t.id),a(O=>O.map(D=>D.id===A?{...D,userFeedback:j}:D))}catch(O){console.error("Error submitting feedback:",O)}},y=[{label:"How to add funds?",action:"How do I add funds to my wallet?"},{label:"Create a group",action:"How do I create a new group?"},{label:"Report a bug",action:"I want to report a bug"},{label:"Get help",action:"I need help with something"}],I=A=>{c(A),N()};return u.jsxs(u.Fragment,{children:[u.jsx(Es,{children:!n&&u.jsxs(it.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},whileHover:{scale:1.1},onClick:()=>r(!0),className:"fixed bottom-6 right-6 z-40 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-shadow group",children:[u.jsx(AD,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full",children:"AI"}),u.jsx("span",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Need help? Chat with AI"})]})}),u.jsx(Es,{children:n&&u.jsxs(it.div,{initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{type:"spring",damping:25,stiffness:300},className:`fixed bottom-6 right-6 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-2xl ${s?"w-80 h-16":"w-96 h-[600px]"} flex flex-col overflow-hidden`,children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(K0,{className:"w-5 h-5"}),u.jsx("h3",{className:"font-semibold",children:"Bankroll AI Assistant"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>i(!s),className:"p-1 hover:bg-white/20 rounded transition-colors",children:s?u.jsx(aX,{className:"w-4 h-4"}):u.jsx(lX,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>{r(!1),w&&wa.closeConversation()},className:"p-1 hover:bg-white/20 rounded transition-colors",children:u.jsx(dl,{className:"w-4 h-4"})})]})]}),!s&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:d&&o.length===0?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx(iX,{className:"w-6 h-6 animate-spin text-purple-600"})}):S&&o.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx(Ml,{className:"w-12 h-12 text-red-500 mb-2"}),u.jsx("p",{className:"text-red-600",children:S}),u.jsx("button",{onClick:R,className:"mt-2 text-purple-600 hover:text-purple-700",children:"Try again"})]}):u.jsxs(u.Fragment,{children:[o.map(A=>u.jsxs("div",{className:`flex gap-3 ${A.role==="user"?"justify-end":"justify-start"}`,children:[A.role!=="user"&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(K0,{className:"w-5 h-5 text-purple-600"})})}),u.jsxs("div",{className:`max-w-[80%] ${A.role==="user"?"order-1":""}`,children:[u.jsx("div",{className:`p-3 rounded-lg ${A.role==="user"?"bg-purple-600 text-white":A.role==="error"?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:u.jsx("p",{className:"text-sm whitespace-pre-wrap",children:A.content})}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-xs text-gray-500",children:aO(new Date(A.created_at),{addSuffix:!0})}),A.role==="assistant"&&!A.userFeedback&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>k(A.id,"helpful"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Helpful",children:u.jsx(gX,{className:"w-3 h-3 text-gray-500"})}),u.jsx("button",{onClick:()=>k(A.id,"not_helpful"),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Not helpful",children:u.jsx(mX,{className:"w-3 h-3 text-gray-500"})})]}),A.userFeedback&&u.jsx("span",{className:"text-xs text-gray-500",children:"Thanks for feedback!"})]})]}),A.role==="user"&&u.jsx("div",{className:"flex-shrink-0 order-2",children:u.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(vX,{className:"w-5 h-5 text-gray-600"})})})]},A.id)),p&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:u.jsx(K0,{className:"w-5 h-5 text-purple-600"})}),u.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-lg",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),u.jsx("div",{ref:_})]})}),o.length<=1&&!d&&u.jsxs("div",{className:"px-4 pb-2",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick actions:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((A,j)=>u.jsx("button",{onClick:()=>I(A.action),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.label},j))})]}),u.jsxs("div",{className:"p-4 border-t dark:border-gray-700",children:[S&&u.jsx("div",{className:"mb-2 p-2 bg-red-100 text-red-600 text-xs rounded",children:S}),u.jsxs("form",{onSubmit:A=>{A.preventDefault(),N()},className:"flex gap-2",children:[u.jsx("input",{ref:E,type:"text",value:l,onChange:A=>c(A.target.value),placeholder:"Type your message...",disabled:d||p,className:"flex-1 px-3 py-2 border dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),u.jsx("button",{type:"submit",disabled:!l.trim()||d||p,className:"p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-chat-send-button":!0,children:u.jsx(fX,{className:"w-5 h-5"})})]}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["Powered by Claude AI • ",u.jsx("button",{onClick:()=>{window.confirm("Do you need human support? This will escalate your conversation to our support team.")&&(wa.escalateToSupport("User requested human support",t==null?void 0:t.id),c(""),a(A=>[...A,{id:`system-${Date.now()}`,role:"system",content:"Your conversation has been escalated to our support team. They will reach out to you via email soon.",created_at:new Date().toISOString()}]))},className:"text-purple-600 hover:underline",children:"Contact human support"})]})]})]})]})})]})},Vte=()=>{const{currentUser:t,loading:e,sessionChecked:n}=Ut(),{leagues:r}=Yq(),{isDark:s}=Zm(),i=dr(),o=es(),[a,l]=Mu.useState(0),[c,d]=Mu.useState(!1);T.useEffect(()=>{const p=localStorage.getItem("lastReferralNudge"),m=Date.now(),w=24*60*60*1e3;if(!p||m-parseInt(p)>w){const v=setTimeout(()=>{d(!0),localStorage.setItem("lastReferralNudge",m.toString())},1e4);return()=>clearTimeout(v)}},[]),T.useEffect(()=>{if(i.hash&&i.hash.startsWith("#/")){const p=i.hash.substring(1);console.log(`Converting hash route "${i.hash}" to regular route "${p}"`),o(p,{replace:!0})}},[i.hash,o]),T.useEffect(()=>{const p=()=>{const w=parseInt(localStorage.getItem("spinnerCount")||"0");l(w)};p();const m=setInterval(p,1e3);return window.addEventListener("storage",p),()=>{clearInterval(m),window.removeEventListener("storage",p)}},[]);const f=[{name:"Wallet",path:"/wallet",icon:Tb},{name:"Groups",path:"/groups",icon:ag},{name:"Partners",path:"/partner-platforms",icon:Sb},{name:"Rewards",path:"/rewards",icon:Jp,badge:a>0?a:null},{name:"Profile",path:"/profile",icon:TD}];return e||!n?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mb-8",children:u.jsx("img",{src:"/images/Bankroll Gradient.jpg",alt:"Bankroll",className:"h-20 w-auto mx-auto mb-4"})}),u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white mx-auto"}),u.jsx("p",{className:"text-white mt-4 text-sm",children:"Loading your account..."})]})}):t?u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-purple-800 to-orange-800",children:u.jsx("div",{className:"absolute inset-0 bg-wavy-gradient opacity-40"})}),u.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-lava-1"}),u.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl animate-lava-2"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500/10 rounded-full blur-2xl animate-lava-3"})]}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"hidden md:block bg-black/50 backdrop-blur-md border-b border-white/10",children:u.jsx("nav",{className:"max-w-7xl mx-auto px-4",children:u.jsxs("div",{className:"h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center flex-1",children:[u.jsx("div",{className:"flex-shrink-0 flex items-center mr-8",children:u.jsx("img",{src:"/images/Bankroll Gradient.jpg",alt:"Bankroll",className:"h-10 w-auto"})}),u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(hX,{className:"h-4 w-4 text-gray-400"})}),u.jsx("input",{type:"text",placeholder:"Search",className:`block w-full pl-10 pr-3 py-2 rounded-lg text-sm transition-colors ${s?"bg-gray-800 border-gray-700 text-white placeholder-gray-400 focus:border-purple-500":"bg-gray-100 border-gray-300 text-gray-900 placeholder-gray-500 focus:border-purple-500"} border focus:outline-none focus:ring-1 focus:ring-purple-500`})]})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[f.map(p=>{const m=i.pathname===p.path||i.pathname==="/"&&p.path==="/platforms",w=p.icon;return u.jsxs(he,{to:p.path,className:`
                      px-4 py-2 rounded-lg flex items-center space-x-2
                      transition-colors duration-200 text-sm font-medium relative
                      ${m?"bg-gradient-to-r from-purple-600 to-orange-500 text-white":"text-white/80 hover:text-white hover:bg-white/10"}
                      ${p.name==="Profile"?"pl-2":""}
                    `,children:[u.jsx(w,{className:p.name==="Profile"?"":"h-5 w-5"}),u.jsx("span",{className:p.name==="Profile"?"ml-2":"",children:p.name}),p.badge&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:p.badge})]},p.name)}),u.jsx(GI,{}),u.jsx(HI,{})]})]})})}),u.jsx("div",{className:"md:hidden sticky top-0 z-40 bg-black/50 backdrop-blur-md border-b border-white/10",children:u.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[u.jsx("img",{src:"/images/Bankroll Gradient.jpg",alt:"Bankroll",className:"h-8 w-auto"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(GI,{}),u.jsx(HI,{})]})]})}),u.jsx(Jee,{}),u.jsx("main",{className:"flex-1",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6 pb-20 md:pb-6",children:u.jsx(_6,{})})}),u.jsx(Zee,{currentUser:t}),c&&u.jsx(Ote,{variant:"floating",onClose:()=>d(!1)}),u.jsx(Fte,{})]})]}):i.pathname!=="/"&&i.pathname!=="/home"?u.jsx(Ao,{to:"/login",state:{from:i},replace:!0}):u.jsx(Ao,{to:"/",replace:!0})};function hO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $te(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hO(t))&&(r&&(r+=" "),r+=e);return r}const u1="-",Ute=t=>{const e=zte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(u1);return a[0]===""&&a.length!==1&&a.shift(),fO(a,e)||Bte(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},fO=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?fO(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(u1);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},YI=/^\[(.+)\]$/,Bte=t=>{if(YI.test(t)){const e=YI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},zte=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Wte(Object.entries(t.classGroups),n).forEach(([i,o])=>{U_(o,r,i,e)}),r},U_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:QI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(qte(s)){U_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{U_(o,QI(e,i),n,r)})})},QI=(t,e)=>{let n=t;return e.split(u1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qte=t=>t.isThemeGetter,Wte=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Hte=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},pO="!",Gte=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,f;for(let S=0;S<a.length;S++){let x=a[S];if(c===0){if(x===s&&(r||a.slice(S,S+i)===e)){l.push(a.slice(d,S)),d=S+i;continue}if(x==="/"){f=S;continue}}x==="["?c++:x==="]"&&c--}const p=l.length===0?a:a.substring(d),m=p.startsWith(pO),w=m?p.substring(1):p,v=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},Kte=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Xte=t=>({cache:Hte(t.cacheSize),parseClassName:Gte(t),...Ute(t)}),Yte=/\s+/,Qte=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(Yte);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let w=!!m,v=r(w?p.substring(0,m):p);if(!v){if(!w){a=c+(a.length>0?" "+a:a);continue}if(v=r(p),!v){a=c+(a.length>0?" "+a:a);continue}w=!1}const S=Kte(d).join(":"),x=f?S+pO:S,_=x+v;if(i.includes(_))continue;i.push(_);const E=s(v,w);for(let P=0;P<E.length;++P){const R=E[P];i.push(x+R)}a=c+(a.length>0?" "+a:a)}return a};function Jte(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mO(e))&&(r&&(r+=" "),r+=n);return r}const mO=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=mO(t[r]))&&(n&&(n+=" "),n+=e);return n};function Zte(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,f)=>f(d),t());return n=Xte(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=Qte(l,n);return s(l,d),d}return function(){return i(Jte.apply(null,arguments))}}const Ue=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},gO=/^\[(?:([a-z-]+):)?(.+)\]$/i,ene=/^\d+\/\d+$/,tne=new Set(["px","full","screen"]),nne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ine=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,one=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ls=t=>hl(t)||tne.has(t)||ene.test(t),Ws=t=>rc(t,"length",pne),hl=t=>!!t&&!Number.isNaN(Number(t)),uy=t=>rc(t,"number",hl),$c=t=>!!t&&Number.isInteger(Number(t)),ane=t=>t.endsWith("%")&&hl(t.slice(0,-1)),ye=t=>gO.test(t),Hs=t=>nne.test(t),lne=new Set(["length","size","percentage"]),cne=t=>rc(t,lne,yO),une=t=>rc(t,"position",yO),dne=new Set(["image","url"]),hne=t=>rc(t,dne,gne),fne=t=>rc(t,"",mne),Uc=()=>!0,rc=(t,e,n)=>{const r=gO.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},pne=t=>rne.test(t)&&!sne.test(t),yO=()=>!1,mne=t=>ine.test(t),gne=t=>one.test(t),yne=()=>{const t=Ue("colors"),e=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),s=Ue("borderColor"),i=Ue("borderRadius"),o=Ue("borderSpacing"),a=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),d=Ue("hueRotate"),f=Ue("invert"),p=Ue("gap"),m=Ue("gradientColorStops"),w=Ue("gradientColorStopPositions"),v=Ue("inset"),S=Ue("margin"),x=Ue("opacity"),_=Ue("padding"),E=Ue("saturate"),P=Ue("scale"),R=Ue("sepia"),N=Ue("skew"),k=Ue("space"),y=Ue("translate"),I=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",ye,e],O=()=>[ye,e],D=()=>["",ls,Ws],Q=()=>["auto",hl,ye],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",ye],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[hl,ye];return{cacheSize:500,separator:":",theme:{colors:[Uc],spacing:[ls,Ws],blur:["none","",Hs,ye],brightness:J(),borderColor:[t],borderRadius:["none","","full",Hs,ye],borderSpacing:O(),borderWidth:D(),contrast:J(),grayscale:z(),hueRotate:J(),invert:z(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[ane,Ws],inset:j(),margin:j(),opacity:J(),padding:O(),saturate:J(),scale:J(),sepia:z(),skew:J(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),ye]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$c,ye]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",$c,ye]}],"grid-cols":[{"grid-cols":[Uc]}],"col-start-end":[{col:["auto",{span:["full",$c,ye]},ye]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[Uc]}],"row-start-end":[{row:["auto",{span:[$c,ye]},ye]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Hs]},Hs]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hs,Ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uy]}],"font-family":[{font:[Uc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",hl,uy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ls,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ls,Ws]}],"underline-offset":[{"underline-offset":["auto",ls,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),une]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hne]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...ue(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:ue()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ue()]}],"outline-offset":[{"outline-offset":[ls,ye]}],"outline-w":[{outline:[ls,Ws]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ls,Ws]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hs,fne]}],"shadow-color":[{shadow:[Uc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Hs,ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[$c,ye]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ls,Ws,uy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vne=Zte(yne);function sc(...t){return vne($te(t))}const Du=T.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:sc("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...e}));Du.displayName="Card";const Bf=T.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:sc("flex flex-col space-y-1.5 p-6",t),...e}));Bf.displayName="CardHeader";const _ne=T.forwardRef(({className:t,...e},n)=>u.jsx("h3",{ref:n,className:sc("text-2xl font-semibold leading-none tracking-tight",t),...e}));_ne.displayName="CardTitle";const wne=T.forwardRef(({className:t,...e},n)=>u.jsx("p",{ref:n,className:sc("text-sm text-gray-500 dark:text-gray-400",t),...e}));wne.displayName="CardDescription";const zf=T.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:sc("p-6 pt-0",t),...e}));zf.displayName="CardContent";const xne=T.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:sc("flex items-center p-6 pt-0",t),...e}));xne.displayName="CardFooter";const bne="BankrollAdmin2024!",JI="bankroll_admin_auth",ZI=({children:t})=>{const{currentUser:e,loading:n}=Ut(),[r,s]=T.useState(!0),[i,o]=T.useState(""),[a,l]=T.useState(""),[c,d]=T.useState(()=>localStorage.getItem(JI)==="true");if(n)return u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})});if(!e)return u.jsx(Ao,{to:"/",replace:!0});const f=p=>{p.preventDefault(),i===bne?(d(!0),s(!1),localStorage.setItem(JI,"true")):l("Incorrect password")};return c?t:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(Du,{className:"w-full max-w-md bg-gray-800 p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Admin Authentication"}),u.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a&&u.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 rounded p-3",children:a}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Enter Admin Password"}),u.jsx("input",{type:"password",id:"password",value:i,onChange:p=>o(p.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password"})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white rounded-md py-2 px-4 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:"Access Admin Panel"})]})]})})},Bc=({children:t})=>{const{isAuthenticated:e,loading:n}=Kq();return n?u.jsx("div",{className:"flex items-center justify-center h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-purple-600"})}):e?t:u.jsx(Ao,{to:"/admin",replace:!0})},Ene=()=>{const t=new Date().getFullYear();return u.jsx("footer",{className:"border-t border-white/20 backdrop-blur-sm mt-20 bg-gradient-to-b from-purple-900/10 to-orange-900/10",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("img",{src:"/images/BankrollLogoNew.png",alt:"Bankroll",className:"h-8 w-auto"}),u.jsx("p",{className:"text-sm text-white/80",children:"Your trusted platform for smart betting and bankroll management."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Products"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Spend Card"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Bankroll Manager"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Analytics"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Mobile App"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Company"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"About Us"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Careers"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Contact"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Blog"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Legal"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Privacy Policy"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Terms of Service"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Responsible Gaming"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-sm text-white/80 hover:text-white transition-colors",children:"Security"})})]})]})]}),u.jsx("div",{className:"border-t border-white/20 mt-12 pt-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[u.jsxs("p",{className:"text-sm text-white/70 mb-4 md:mb-0",children:["© ",t," Bankroll. All rights reserved."]}),u.jsxs("div",{className:"flex space-x-6",children:[u.jsx("a",{href:"#",className:"text-white/70 hover:text-white transition-colors","aria-label":"Twitter",children:u.jsx(yX,{className:"h-5 w-5"})}),u.jsx("a",{href:"#",className:"text-white/70 hover:text-white transition-colors","aria-label":"Instagram",children:u.jsx(rX,{className:"h-5 w-5"})}),u.jsx("a",{href:"#",className:"text-white/70 hover:text-white transition-colors","aria-label":"YouTube",children:u.jsx(_X,{className:"h-5 w-5"})}),u.jsx("a",{href:"#",className:"text-white/70 hover:text-white transition-colors","aria-label":"Facebook",children:u.jsx(ZK,{className:"h-5 w-5"})})]})]})})]})})},eA=()=>{const{currentUser:t,loading:e}=Ut(),[n,r]=T.useState(null),[s,i]=T.useState(0),[o,a]=T.useState(null),[l,c]=T.useState(!1),d=[{title:"Easy and Fast Withdrawals",subtitle:"Get your sports betting winnings instantly",description:"No more waiting days for payouts. Transfer winnings from your favorite platforms to your bank in seconds.",cta:"Start withdrawing faster",partners:[{name:"DraftKings",logo:"/images/draftkings.png"},{name:"FanDuel",logo:"/images/fanduel.png"},{name:"Underdog",logo:"/images/underdog.png"},{name:"PrizePicks",logo:"/images/prizepicks.png"},{name:"Fanatics",logo:"/images/fanatics.png"}]},{title:"Invest Your Fantasy Football Dues",subtitle:"Turn league fees into investments",description:"Don't let your season-long fantasy dues sit idle. Automatically invest them and watch your money grow throughout the season.",cta:"Start investing today",partners:[{name:"Sleeper",logo:"/images/sleeperFantasy.png"},{name:"ESPN",logo:"/images/espnFantasy.png"},{name:"Yahoo",logo:"/images/yahoofantasy.png"},{name:"CBS",logo:"/images/cbs.png"}]},{title:"Earn on Every Balance",subtitle:"Your betting bankroll works 24/7",description:"Every dollar in your Bankroll account earns interest. Make money even when you're not placing bets.",cta:"Start earning now",icon:"💰"}];T.useEffect(()=>{const v=setInterval(()=>{i(S=>(S+1)%d.length)},1e4);return()=>clearInterval(v)},[]),T.useEffect(()=>{const v=S=>{S.target.closest(".relative")||a(null)};return document.addEventListener("click",v),()=>document.removeEventListener("click",v)},[]);const f=()=>{i(v=>(v+1)%d.length)},p=()=>{i(v=>(v-1+d.length)%d.length)};if(e)return u.jsx("div",{className:"min-h-screen bg-[#9D8CDB] flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#5B3A9B]"})});const m=[{title:"Get your sports betting winnings fast",description:"Instant withdrawals from all major sportsbooks. No more waiting days for your money.",icon:"⚡"},{title:"Earn money on your bets passively",description:"Your idle betting balance earns interest automatically while you decide your next play.",icon:"💰"},{title:"Invest your Fantasy Football dues",description:"Turn league dues into investments. Keep growing your money during and after the season.",icon:"📈"}],w=[{q:"How does Bankroll work?",a:"Bankroll connects all your sports betting and fantasy accounts in one place. You can instantly transfer winnings, earn interest on idle balances, and invest your fantasy dues."},{q:"Is my money safe?",a:"Yes. We use bank-level encryption and partner with FDIC-insured institutions. Your funds are as secure as they would be in a traditional bank."},{q:"Which platforms are supported?",a:"We support 30+ platforms including DraftKings, FanDuel, BetMGM, Caesars, ESPN Fantasy, and more."},{q:"How fast are withdrawals?",a:"Withdrawals are instant. As soon as you request a transfer, the money is available in your Bankroll account."},{q:"What are the fees?",a:"Bankroll is free to use. We make money through partnerships with sportsbooks and from the spread on investment products."}];return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsxs("div",{className:"fixed inset-0",children:[u.jsx("div",{className:"h-screen bg-white"}),u.jsx("div",{className:"bg-black",children:u.jsx("div",{className:"bg-wavy-gradient opacity-80"})})]}),u.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute top-full -left-1/2 w-full h-full bg-purple-600/30 rounded-full blur-3xl animate-lava-1"}),u.jsx("div",{className:"absolute top-full -right-1/2 w-full h-full bg-orange-500/30 rounded-full blur-3xl animate-lava-2"}),u.jsx("div",{className:"absolute top-[150%] right-1/4 w-96 h-96 bg-pink-500/20 rounded-full blur-2xl animate-lava-3"}),u.jsx("div",{className:"absolute top-[150%] left-1/4 w-96 h-96 bg-orange-400/20 rounded-full blur-2xl animate-lava-4"})]}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("nav",{className:"fixed top-0 w-full bg-black/90 backdrop-blur-md z-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-20",children:[u.jsx("div",{className:"flex items-center",children:u.jsxs(he,{to:"/",className:"flex items-center space-x-3",children:[u.jsx("img",{src:"/images/BankrollLogoNew.png",alt:"Bankroll",className:"h-14 w-auto"}),u.jsx("span",{className:"text-white text-2xl font-bold tracking-wide",children:"BANKROLL"})]})}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>a(o==="personal"?null:"personal"),className:"flex items-center text-white hover:text-white/80 px-3 py-2 text-sm font-medium transition-colors",children:["Personal",u.jsx(of,{className:"ml-1 h-4 w-4"})]}),o==="personal"&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-lg shadow-xl",children:[u.jsxs(he,{to:"/partners",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(Sb,{className:"w-4 h-4 mr-3 text-blue-600"}),"Partners"]}),u.jsxs(he,{to:"/deposits",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(HK,{className:"w-4 h-4 mr-3 text-green-600"}),"Deposits"]}),u.jsxs(he,{to:"/withdrawals",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(Tb,{className:"w-4 h-4 mr-3 text-purple-600"}),"Withdrawals"]}),u.jsxs(he,{to:"/fantasy",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(Jp,{className:"w-4 h-4 mr-3 text-yellow-600"}),"Season Long Fantasy"]}),u.jsxs(he,{to:"/crypto",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(KK,{className:"w-4 h-4 mr-3 text-orange-600"}),"Crypto"]}),u.jsxs(he,{to:"/stocks",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(kb,{className:"w-4 h-4 mr-3 text-blue-600"}),"Stock Trading"]}),u.jsxs(he,{to:"/savings",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(dX,{className:"w-4 h-4 mr-3 text-pink-600"}),"Savings"]}),u.jsxs(he,{to:"/futures",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(sX,{className:"w-4 h-4 mr-3 text-indigo-600"}),"Futures"]})]})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>a(o==="business"?null:"business"),className:"flex items-center text-white hover:text-white/80 px-3 py-2 text-sm font-medium transition-colors",children:["Business",u.jsx(of,{className:"ml-1 h-4 w-4"})]}),o==="business"&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-lg shadow-xl",children:[u.jsxs(he,{to:"/business-partners",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(XK,{className:"w-4 h-4 mr-3 text-blue-600"}),"Partners"]}),u.jsxs(he,{to:"/fantasy-plaque",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(Jp,{className:"w-4 h-4 mr-3 text-yellow-600"}),"Fantasy Plaque"]}),u.jsxs(he,{to:"/admin",className:"flex items-center px-4 py-3 text-sm text-gray-900 hover:bg-gray-50",children:[u.jsx(Zl,{className:"w-4 h-4 mr-3 text-red-600"}),"Admin Portal"]})]})]}),u.jsx(he,{to:"/developers",className:"text-white hover:text-white/80 px-3 py-2 text-sm font-medium transition-colors",children:"Developer"})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(he,{to:"/login",className:"text-white hover:text-white/80 px-4 py-2 text-sm font-medium transition-all",children:"Log in"}),u.jsx(he,{to:"/signup",className:"bg-lime-400 text-black px-6 py-2 rounded-full text-sm font-bold hover:bg-lime-500 transition-all",children:"Sign up"})]})]})})}),u.jsx("div",{className:"fixed top-20 w-full bg-lime-400 text-black py-2 z-40",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:u.jsxs("p",{className:"text-sm font-medium",children:["It's Bankroll Season. Unlock limited-time offers in your app.",u.jsx("a",{href:"#",className:"underline ml-1 font-semibold",children:"Learn more"}),"."]})})}),u.jsxs("section",{className:"min-h-screen flex items-center relative pt-32 overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-purple-50 to-emerald-50 animate-gradient-shift"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/80 via-purple-100/30 to-emerald-100/40 animate-gradient-shift-reverse"})]}),u.jsx("div",{className:"relative z-10 w-full",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[u.jsx("div",{className:"flex items-center justify-center md:justify-start",children:u.jsx("h1",{className:"text-7xl md:text-8xl lg:text-9xl font-light text-gray-900 drop-shadow-lg",children:"Easy Money."})}),u.jsx("div",{className:"relative",children:u.jsx("div",{className:"w-full max-w-2xl mx-auto flex items-center justify-center",children:u.jsx("img",{src:"/images/BankrollImageLandingPage.png",alt:"Bankroll - For The Win",className:"w-full h-auto max-h-[600px] object-contain drop-shadow-2xl"})})})]})})})]}),u.jsx("div",{className:"relative h-32 bg-gradient-to-b from-white to-transparent"}),u.jsx("section",{className:"min-h-screen flex items-center relative overflow-hidden bg-gradient-to-br from-purple-900/90 via-purple-800/90 to-orange-800/90",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative h-[700px] overflow-hidden",children:u.jsx("div",{className:"flex carousel-slide h-full",style:{transform:`translateX(-${s*100}%)`},children:d.map((v,S)=>u.jsx("div",{className:"w-full flex-shrink-0 flex items-center justify-center",children:u.jsxs("div",{className:"w-full max-w-7xl px-4",children:[S===0&&u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl sm:text-7xl font-bold text-white mb-6 drop-shadow-2xl",children:v.title}),u.jsx("p",{className:"text-2xl text-white/90 mb-4",children:v.subtitle}),u.jsx("p",{className:"text-xl text-white/80 mb-8 max-w-3xl mx-auto",children:v.description}),u.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 mb-8 max-w-4xl mx-auto",children:u.jsx("div",{className:"h-64 bg-white/20 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white/60 text-lg",children:"[Withdrawal Process Image Coming Soon]"})})}),u.jsx("div",{className:"flex justify-center items-center gap-4 flex-wrap mb-8",children:v.partners.map((x,_)=>u.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:u.jsx("img",{src:x.logo,alt:x.name,className:"h-12 w-auto object-contain",onError:E=>{E.target.style.display="none",E.target.parentElement.innerHTML=`<span class="text-sm font-medium text-white">${x.name}</span>`}})},_))})]}),S===1&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-5xl sm:text-6xl font-bold text-white mb-4 drop-shadow-2xl",children:v.title}),u.jsx("p",{className:"text-2xl text-white/90 mb-2",children:v.subtitle}),u.jsx("p",{className:"text-lg text-white/80 max-w-3xl mx-auto",children:v.description})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Your Fantasy League"}),u.jsx("div",{className:"h-64 bg-white/20 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white/60 text-sm",children:"[Fantasy Football League Image Coming Soon]"})})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"League Stock Portfolio"}),u.jsx("div",{className:"h-64 bg-white/20 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white/60 text-sm",children:"[Stock Portfolio Image Coming Soon]"})})]})]}),u.jsx("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:v.partners.map((x,_)=>u.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:u.jsx("img",{src:x.logo,alt:x.name,className:"h-10 w-auto object-contain",onError:E=>{E.target.style.display="none",E.target.parentElement.innerHTML=`<span class="text-sm font-medium text-white">${x.name}</span>`}})},_))})]}),S===2&&u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl mb-6",children:v.icon}),u.jsx("h1",{className:"text-5xl sm:text-7xl font-bold text-white mb-6 drop-shadow-2xl",children:v.title}),u.jsx("p",{className:"text-2xl text-white/90 mb-4",children:v.subtitle}),u.jsx("p",{className:"text-xl text-white/80 mb-8 max-w-3xl mx-auto",children:v.description}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 max-w-4xl mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Your Sportsbook Funds Working For You"}),u.jsx("div",{className:"h-64 bg-white/20 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white/60 text-lg",children:"[Sportsbook to Investment Flow Image Coming Soon]"})})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[u.jsx(he,{to:"/signup",className:"bg-gradient-to-r from-orange-500 to-pink-500 text-white px-8 py-4 rounded-full text-lg font-medium hover:from-orange-600 hover:to-pink-600 transition-all shadow-lg transform hover:scale-105",children:v.cta}),u.jsx("a",{href:"#benefits",className:"bg-white/20 backdrop-blur-sm text-white px-8 py-4 rounded-full text-lg font-medium border border-white/30 hover:bg-white/30 transition-colors",children:"Learn more"})]})]})},S))})}),u.jsx("button",{onClick:p,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-sm p-3 rounded-full hover:bg-white/30 transition-colors",children:u.jsx(QK,{className:"w-6 h-6 text-white"})}),u.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-sm p-3 rounded-full hover:bg-white/30 transition-colors",children:u.jsx(JK,{className:"w-6 h-6 text-white"})}),u.jsx("div",{className:"flex justify-center gap-2 mt-8",children:d.map((v,S)=>u.jsx("button",{onClick:()=>i(S),className:`w-3 h-3 rounded-full transition-all ${S===s?"bg-white w-8":"bg-white/50 hover:bg-white/70"}`},S))})]}),u.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:u.jsx(of,{className:"w-6 h-6 text-white"})})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-b from-purple-900/60 to-orange-900/60 backdrop-blur-sm",id:"benefits",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Built for sports bettors"}),u.jsx("p",{className:"text-lg text-white/90",children:"Everything you need to manage your betting bankroll in one place"})]}),u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:m.map((v,S)=>u.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all hover:bg-black/50 border border-white/20",children:[u.jsx("div",{className:"text-4xl mb-4",children:v.icon}),u.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:v.title}),u.jsx("p",{className:"text-white/90",children:v.description})]},S))})]})}),u.jsx("section",{className:"py-20",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"text-center mb-16",children:u.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Simple as 1-2-3"})}),u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-600 to-orange-500 text-white rounded-full flex items-center justify-center font-bold text-lg shadow-lg",children:"1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Connect your accounts"}),u.jsx("p",{className:"text-white/90",children:"Link your DraftKings, FanDuel, BetMGM, and other betting accounts securely."})]})]}),u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-600 to-orange-500 text-white rounded-full flex items-center justify-center font-bold text-lg shadow-lg",children:"2"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Transfer instantly"}),u.jsx("p",{className:"text-white/90",children:"Move winnings between platforms or to your bank account with one tap."})]})]}),u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-600 to-orange-500 text-white rounded-full flex items-center justify-center font-bold text-lg shadow-lg",children:"3"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Watch your money grow"}),u.jsx("p",{className:"text-white/90",children:"Earn interest on idle balances and invest fantasy dues automatically."})]})]})]})})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-b from-orange-900/60 to-purple-900/60 backdrop-blur-sm",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"30+"}),u.jsx("div",{className:"text-white/90",children:"Supported platforms"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"Instant"}),u.jsx("div",{className:"text-white/90",children:"Withdrawals"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"FDIC"}),u.jsx("div",{className:"text-white/90",children:"Insured deposits"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"$0"}),u.jsx("div",{className:"text-white/90",children:"Monthly fees"})]})]})})}),u.jsx("section",{className:"py-20",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-12",children:"Frequently asked questions"}),u.jsx("div",{className:"space-y-4",children:w.map((v,S)=>u.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg border border-white/20",children:[u.jsxs("button",{onClick:()=>r(n===S?null:S),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-black/30 transition-colors",children:[u.jsx("span",{className:"font-medium text-white",children:v.q}),u.jsx(of,{className:`w-5 h-5 text-white/80 transition-transform ${n===S?"rotate-180":""}`})]}),n===S&&u.jsx("div",{className:"px-6 pb-4",children:u.jsx("p",{className:"text-white/90",children:v.a})})]},S))})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-b from-purple-900/60 to-pink-900/60 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Our Partners"}),u.jsx("p",{className:"text-lg text-white/90 max-w-3xl mx-auto",children:"We work with the industry's leading platforms to give you instant access to your money everywhere"})]}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-6 mb-12",children:[u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/draftkings.png",alt:"DraftKings",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/fanduel.png",alt:"FanDuel",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/betmgm.png",alt:"BetMGM",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/caesars.png",alt:"Caesars",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/espnBet.png",alt:"ESPN Bet",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/fanatics.png",alt:"Fanatics",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/prizepicks.png",alt:"PrizePicks",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/underdog.png",alt:"Underdog",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/sleeperFantasy.png",alt:"Sleeper",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/espnFantasy.png",alt:"ESPN Fantasy",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("img",{src:"/images/yahoofantasy.png",alt:"Yahoo Fantasy",className:"h-12 w-auto object-contain"})}),u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 flex items-center justify-center hover:bg-black/50 transition-colors",children:u.jsx("div",{className:"text-white font-semibold",children:"30+ More"})})]}),u.jsx("div",{className:"text-center",children:u.jsx(he,{to:"/partners",className:"inline-block bg-black/40 backdrop-blur-sm text-white px-6 py-3 rounded-full text-sm font-medium border border-white/30 hover:bg-black/50 transition-colors",children:"View All Partners →"})})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-br from-purple-900/70 via-pink-900/70 to-orange-900/70 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Ready to make your money work harder?"}),u.jsx("p",{className:"text-lg text-white/90 mb-8",children:"Join thousands of sports bettors who are earning more with Bankroll."}),u.jsx(he,{to:"/signup",className:"inline-block bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white px-8 py-4 rounded-full text-lg font-medium hover:from-purple-700 hover:via-pink-700 hover:to-orange-700 transition-all shadow-lg transform hover:scale-105",children:"Get your $25 bonus"})]})}),u.jsx(Ene,{})]})]})};var vO={exports:{}},Sne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kne=Sne,Tne=kne;function _O(){}function wO(){}wO.resetWarningCache=_O;var Ine=function(){function t(r,s,i,o,a,l){if(l!==Tne){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wO,resetWarningCache:_O};return n.PropTypes=n,n};vO.exports=Ine();var Ane=vO.exports;const hf=z_(Ane),d1=({text:t="Loading...",onComplete:e=null})=>{const n=["🍒","💎","🔔","⭐","7️⃣","💰","🎰","🍀"],r="🪙",[s,i]=T.useState(!1),[o,a]=T.useState(!1);return T.useEffect(()=>{const l=setTimeout(()=>{i(!0),setTimeout(()=>{a(!0),e&&setTimeout(()=>{e()},1500)},500)},2500);return()=>{clearTimeout(l)}},[]),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"absolute inset-0 -m-8",children:[u.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-orange-500 rounded-full filter blur-3xl opacity-70 animate-lava-1"}),u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500 rounded-full filter blur-3xl opacity-70 animate-lava-2"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-28 h-28 bg-yellow-500 rounded-full filter blur-3xl opacity-70 animate-lava-3"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-36 h-36 bg-orange-600 rounded-full filter blur-3xl opacity-70 animate-lava-4"})]}),u.jsx("div",{className:"relative z-10 flex gap-2 mb-4",children:[0,1,2].map(l=>u.jsxs("div",{className:"relative w-20 h-24 bg-black/80 rounded-lg overflow-hidden border-2 border-yellow-400 shadow-lg",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/50 z-10"}),u.jsx(Es,{children:o&&u.jsx(it.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/40 via-yellow-300/20 to-yellow-400/40 z-20"})}),u.jsx(it.div,{animate:s?{y:[-960,-480]}:{y:[0,-960,0]},transition:s?{duration:1+l*.2,ease:"easeOut",delay:l*.1}:{duration:2+l*.5,repeat:1/0,ease:"linear",delay:l*.1},className:"absolute inset-0",children:[...n,r,...n,r,...n].map((c,d)=>u.jsx("div",{className:"h-24 flex items-center justify-center text-4xl",children:c},d))})]},l))}),u.jsx(Es,{mode:"wait",children:o?u.jsx(it.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:1,textShadow:["0 0 20px rgba(255, 215, 0, 0.8)","0 0 60px rgba(255, 215, 0, 1)","0 0 40px rgba(255, 215, 0, 0.8)"]},transition:{duration:.5},className:"text-yellow-400 font-bold text-2xl tracking-wider text-center",children:"JACKPOT!"},"win"):u.jsx(it.div,{animate:{textShadow:["0 0 20px rgba(251, 146, 60, 0.8)","0 0 40px rgba(251, 146, 60, 1)","0 0 20px rgba(251, 146, 60, 0.8)"]},transition:{duration:1.5,repeat:1/0},className:"text-white font-bold text-lg tracking-wider text-center",children:t},"loading")}),u.jsx(Es,{children:o&&u.jsxs(u.Fragment,{children:[[...Array(8)].map((l,c)=>u.jsx(it.div,{initial:{x:0,y:0,opacity:1,scale:0},animate:{x:Math.cos(c*Math.PI/4)*100,y:Math.sin(c*Math.PI/4)*100,opacity:0,scale:1.5},transition:{duration:1,ease:"easeOut"},className:"absolute top-8 left-1/2 -translate-x-1/2 text-3xl",children:"🪙"},`coin-${c}`)),u.jsx(it.div,{initial:{scale:0,opacity:1},animate:{scale:3,opacity:0},transition:{duration:.5},className:"absolute inset-0 bg-yellow-400 rounded-full"})]})}),!o&&u.jsx("div",{className:"absolute -top-2 -right-2",children:u.jsx(it.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{rotate:{duration:2,repeat:1/0,ease:"linear"},scale:{duration:1,repeat:1/0}},className:"text-2xl",children:"🪙"})}),[...Array(o?6:3)].map((l,c)=>u.jsx(it.div,{className:"absolute text-yellow-400",style:{top:o?`${Math.random()*-50-20}px`:`${-10-c*15}px`,left:o?`${Math.random()*200-50}px`:`${20+c*20}px`},animate:o?{scale:[0,2,0],opacity:[0,1,0],rotate:[0,360,720],y:[-20,-100]}:{scale:[0,1,0],opacity:[0,1,0],rotate:[0,180,360]},transition:{duration:o?1.5:2,repeat:o?0:1/0,delay:c*.1},children:"⭐"},c))]})})},xO=({size:t="md",color:e="blue",fullScreen:n=!1,text:r="Loading..."})=>{const s={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"},i={blue:"border-blue-500",green:"border-green-500",purple:"border-purple-500",white:"border-white"},o=n?"fixed inset-0 bg-gray-900/50 backdrop-blur-sm flex items-center justify-center z-50":"flex flex-col items-center justify-center";return n||r?u.jsx("div",{className:o,children:u.jsx(d1,{text:r})}):u.jsx("div",{className:o,children:u.jsx("div",{className:"flex flex-col items-center gap-4",children:u.jsx("div",{className:`
            ${s[t]} 
            ${i[e]}
            border-4 
            border-t-transparent 
            rounded-full 
            animate-spin
          `})})})};xO.propTypes={size:hf.oneOf(["sm","md","lg"]),color:hf.oneOf(["blue","green","purple","white"]),fullScreen:hf.bool,text:hf.string};const Pne=()=>{const{currentUser:t,loading:e}=Ut();if(e)return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 text-gray-800",children:u.jsx("div",{className:"container mx-auto px-4 py-16 sm:py-24",children:u.jsx("div",{className:"text-center",children:u.jsx(xO,{size:"lg",color:"blue",text:"Loading Bankroll..."})})})});const n=[{id:1,type:"paid",subject:"You paid your Season Long Fantasy Dues",amount:"$75.00",platform:"Sleeper",platformLogo:"/images/sleeper.png",emoji:"🏈"},{id:2,type:"received",subject:"You got paid from DraftKings!",amount:"$120.00",platform:"DraftKings",platformLogo:"/images/draftkingsFantasy.png",emoji:"💰"},{id:3,type:"gift",subject:"You Gifted Ben $20 on FanDuel",amount:"$20.00",platform:"FanDuel",platformLogo:"/images/fanduel.png",emoji:"🎁"}];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 text-gray-800",children:[u.jsx("div",{className:"fixed top-0 right-0 bg-green-600 text-white px-4 py-2 text-sm z-50",children:"Page Loaded: HomePage"}),u.jsx("nav",{className:"border-b border-gray-200 sticky top-0 z-40 bg-white",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(he,{to:"/",className:"flex-shrink-0",children:u.jsx("img",{src:"/images/BankrollLogoTransparent.png",alt:"Bankroll Logo",className:"h-8 w-auto",onError:r=>{console.error("Failed to load logo, trying fallback"),r.target.src="/images/Bankroll Gradient.jpg",r.target.onerror=()=>{r.target.style.display="none",r.target.parentNode.innerHTML+='<span class="text-2xl font-bold text-blue-500">Bankroll</span>'}}})})}),u.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[u.jsx("div",{className:"relative group",children:u.jsx(he,{to:"/send-receive",className:"px-3 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 border border-gray-300 rounded",children:"Send & Receive"})}),u.jsx("div",{className:"relative group",children:u.jsxs(he,{to:"/pay",className:"px-3 py-2 text-sm font-medium text-gray-800 hover:text-blue-600",children:["Pay with Bankroll",u.jsx("span",{className:"inline-block ml-1",children:"▼"})]})}),u.jsx("div",{className:"relative group",children:u.jsxs(he,{to:"/business",className:"px-3 py-2 text-sm font-medium text-gray-800 hover:text-blue-600",children:["Bankroll for Business",u.jsx("span",{className:"inline-block ml-1",children:"▼"})]})}),u.jsx(he,{to:"/help",className:"px-3 py-2 text-sm font-medium text-gray-800 hover:text-blue-600",children:"Help Center"})]}),u.jsx("div",{className:"flex items-center space-x-4",children:!t&&u.jsxs(u.Fragment,{children:[u.jsx(he,{to:"/login",className:"px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600",children:"Log in"}),u.jsx(he,{to:"/signup",className:"px-5 py-2.5 bg-white text-sm font-medium text-blue-600 rounded-full border border-blue-600 hover:bg-blue-50 transition-all duration-300",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1 text-blue-600 font-bold",children:"B"}),"Get Bankroll"]})})]})})]})})}),u.jsxs("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl sm:text-6xl font-bold mb-6 text-gray-900",children:["Sports Betting Wallet ",u.jsx("br",{}),u.jsx("span",{className:"text-blue-600",children:"Built for you"})]}),u.jsx("p",{className:"text-lg sm:text-xl text-gray-700 max-w-2xl mb-12",children:"Your one-stop destination for managing sports betting and fantasy sports finances across all platforms."}),u.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md",children:u.jsxs("div",{className:"flex items-start space-x-6",children:[u.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAACPj4/v7++3t7fo6OjR0dH09PT6+vrz8/Ps7OzV1dXe3t7k5OSUlJRISEi+vr6dnZ1vb2+mpqbHx8dlZWVXV1eGhoY0NDR7e3vNzc2wsLATExNPT09eXl4tLS0kJCQNDQ1BQUEcHBw6OjqAgIBycnKKioohttJGAAAJA0lEQVR4nO2da3eqOhCGwXJR8IaKF7Ratf3/f/HAti5BJjBySTLs8H7aG1h5CplkMplkOp22tra2tra2tra2toL0/vUx2c3nk/noPU7IL+7GcTwdfiULFQ0Wq/VkP92cHxh83vH5sRn+dDRY9ON1GE8/7V3PsF+v8TgMXC66i16NpZRvL82ixuYT1biYLfthTkrdxck22KtODHYSVZ5+Mzo9tOOUqnI0e2+q8vPPQpWbURPNl+yXj3R6FKpTbNOZftfzCh+58ujxL3g/a4fwbUiVxw8zCKq8UT9B+vgUtKKG2g/U748WqN4p50Ll36eeqHK8alX5uDgz/nZ94/eBXvnBvMqH5x+eKs+G24bxWVT53Dw/qFR5U1P5eM9a3PYhVzmjRnlT+d/JivKFrvJ4cX2g/lrSKWXvkBgdH/+iR9TBhf0/CqsdnnvPyo9KKq9Slc8Knd+y/wO7FGX7b7ryM5XKq9v+RFE+e6gqfxDK3yhVPqZrL1w3j1flj0dpjilVXo3yxFQ+EStf2xnlqQY/qXLDxoiJJ5IZI1UumfRt7e3/s9mvfBKGRGCFldnmZrcmVX5UXHrQyqHKL2k58mYxTRYFKm9mlKcM+6TKD9nS8YGfYXLUTmJBeXCZ8lFu7yivxkHEHVX5PjtK8JRX5YeKUfmM6Sap8sRRQg97cefiqDGBB5WPHgcqr8pUflM8+yz6SlQ+eSrGLKHytcpRXoWnkTOBUflaMcprR6JQjfKLSlJWqJ1cFT2bj5soRnmVMqmFlS9IlY+Y37NLVVbluayTRoTKs6O8GkXrz1fH8Vm5tFFe5JV1lFeBNsqLvblslFfFR+LgqDIUbr56nFTlVcdRXrWj8q/WKK9ey0Z5VYxVXpWM8qpIlVfdoVD5aXCjvKpHwSjPqLmjUd45aSg65nOUV4WjvCpHlS9tHR/44uQiZZRX47Wf//gKSQ/K+wy3Uf6p8qiQJYvTr1dlCnGJNl1sTv2kvjOtUiSdLiaHH/bdj/Kl0uHkZ9dYnAMjKq/w5LJ4bqrTn5ej8vg36NfnnpXHw14K33+kVLlP5d9GXaFOjKTyXj3lGLpRXjgcvUiNpPKcRVT9wVDln8XrKZZYKv+jXKL+YaLyYs8Pp/KfBaO8sSzTKFaW6QpM5V8V7VLhVN5xPmzf2r1tVXmGzNNqT6W1RrHKP3qwlRnlXTu/Yai8u3A0UHmXWaZxrFxW/WEzyjcXMfQjyTLNkGVRXnFZg1TWJe1R/sSO8sphx82N8vHruFDl3Y7y+8JRnhvl7Y/yiWCUF2SZfI/y0w8icdqxsWkuUuVNZJmiTbHK09rHnmN38/JRfpxdkzCVdfE9yk+vK6ZBqnxjWeWTwiy27GbTyihPZpn8j/Jxvj8GN8o7zjKR35RfWaaiojRVfpTvZGCqfBNZpuSDXFz5k2XyPcpP8n02sMon5ChnPst0fyGzTD5H+Z3Cbg8MlTebZbqpnIt/Zqq8uY1N2V0s9u5vXJU3P8o/v0lJlTczyk/qHlFhqryxUb44zTaGyvOjvL0sU+fCrNWYtUa2NsrXdloslXeQZWp+/c6syvPKdMco/zhXZ2tzNpTKy2SZ9Kq8EodZpqZ5AXeVd5dlKqG5yseMrFLJKO/Z5XcOKi+ZZTJTeXbnx1Tl7WaZSrCn8s6zTCW0Gqn8iX8gCZrKX8qizEYq32yWqQQjlfeYZSpBqPKLClJWhFB5z1mmEnRV3sYxHzh0Vd771stUF/VRvtksk9Yo3ySM9RHB1w/QaLxpNB3l/WeZpnJZJo1RvtEsk9Yo31SWqZHK28nHBRc/K1d5T1mmGqN8I1mmMpW3f3wgvPCj/KK0SFieKFD5ILJMJSr/aCLLVKLyQWSZpCofTGelApVvdO+l8QXB4LJMUsqW6j1HQbxYKNrb31QeUpZJto8/1I7yAWWZZCs7UJVXg8kySWafwam8GlKWiRvlw80ycVZpiBsq2GUOOMuUHeWDzjJlR/nwVD7oLNNzTgwly5SONH/vwVB+9cGM8qFkmR7rYg9xaFmmVOVDyzKlKh9ilokcbkLNMqUqH2aWKR3lw95QEWKW6anyyxBVPsQsE1F53Ie2tTVQQswypSofapYpXRMPO8u0D3ORZs0yHUPPMm1DzjJtQ84yzQLPMo1DVvnVzOPxgWWTdyGr/BrrmrjO+Y+KJ0POMs0jPD7wQu1+DjnLNEeuvnCqd8g5Zr2/QRLSG5KQTxqLdnJCzjLx5z8GnmXKq3zoWeZd6FmmXNgz+CxzJ6b/Bq7yO7Eq34aryrPnmsLP77Kf0pJTnpCPDCwQx7uZwGeiEMJxTyDLnY0dqSXu5YScZp8iqPwscQK3n/ek3qYCWc5lEt9HotLw83uOWZYblZf3Z5mJOiJdYT/l0yQ5/fP7MR9dQY43OQlKg87v5a4/KlX56yScLBNRPUmH/g03y7QrK29o5/cKLkCXq/xzCgkiy5SrPKXyQWSZNCo3b6XKp/eJTwWd383ct4Sh8qnK5yqfZpkCGOWZfDwbQ+X1VV53lK9XOVTlA8gyGeW0dUf5aiirfAhZJhOVV2XmiAZkmbRVnlf5UM5/1E2+Eiq/FSl+m2XSPhBZofIsWaZWq7xaVT4QlDaovOIoX41A5TGzTCYqr4qzTJvgVN5ylskoyME5g+5QeSWjfFXEbZZJw8dCMMqrVarEUJZpvw9Q5Q1kmYxV/j7N0dEoX1X5HZ86oRxgx1F5paBqbx9OlskoyOHqhJuL8h4oH+Uzx8/vFPZ3vGsT49Uo7zXLZBTlk6v8Z3CjfMFJdAzl69+EuPDO1EE1w1Nl3SYZM5X/FX93mCpfb5QvwGUz1X3Ea6ryqrzzWUQqr8pOkBTdWdpqlVeLp9wqlb+P8hmG3VT5OqN8AU3c3Rq1bTubUfJoMVX+o8koX0XVd2Kpyo8DTFM9a3NXeTU4NVQGXLSPjUqzTJZH+RcafWr0jB3dkykks0zWR/k7l5p9sYmzTB5U/rXS9lR+nGX6bx/8oNM772pVZmtV/sXHGqnrOlPDsMvr57Ew7MrU0FZba2tra2tra2vrneoP1/rH0sami70AAAAASUVORK5CYII=",alt:"QR Code",className:"w-24 h-24"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Scan to download the Bankroll app"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"or"}),u.jsx(he,{to:"/signup",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Create an account"})]})]})})]}),u.jsxs("div",{className:"relative hidden lg:block",children:[u.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden p-6 max-w-md mx-auto",children:u.jsx("div",{className:"space-y-4",children:n.map(r=>u.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm transform transition-all duration-300 hover:-translate-y-1 hover:shadow-md",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 h-12 w-12 bg-gray-100 rounded-full overflow-hidden mr-4",children:u.jsx("img",{src:r.platformLogo,alt:r.platform,className:"h-full w-full object-cover",onError:s=>{s.target.onerror=null,s.target.src=`https://ui-avatars.com/api/?name=${r.platform}&background=random`}})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-gray-500",children:r.subject}),u.jsxs("p",{className:"font-semibold text-gray-900",children:[r.platform," ",r.emoji]})]}),u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:`font-semibold text-lg ${r.type==="received"?"text-green-600":r.type==="paid"?"text-gray-900":"text-blue-600"}`,children:[r.type==="received"?"+":"",r.amount]})})]})},r.id))})}),u.jsx("div",{className:"absolute -bottom-6 -left-6 w-24 h-24 bg-blue-200 rounded-full opacity-60"}),u.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-purple-200 rounded-full opacity-60"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-24",children:[u.jsxs(Du,{className:"bg-white/90 border-gray-200 hover:border-blue-500/50 transition-all duration-300 shadow-lg hover:shadow-blue-500/10",children:[u.jsx(Bf,{children:u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center",children:"All Platforms"})}),u.jsxs(zf,{className:"text-center",children:[u.jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-8",children:"Connect and manage all your betting platforms in one place"}),u.jsx(he,{to:t?"/platforms":"/login",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-blue-500/25 text-sm sm:text-base",children:t?"View Platforms":"Get Started"})]})]}),u.jsxs(Du,{className:"bg-white/90 border-gray-200 hover:border-blue-500/50 transition-all duration-300 shadow-lg hover:shadow-blue-500/10",children:[u.jsx(Bf,{children:u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center",children:"Easy Transfers"})}),u.jsxs(zf,{className:"text-center",children:[u.jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-8",children:"Move money between platforms or pay friends instantly"}),u.jsx(he,{to:t?"/send":"/login",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-blue-500/25 text-sm sm:text-base",children:t?"Send Money":"Get Started"})]})]}),u.jsxs(Du,{className:"bg-white/90 border-gray-200 hover:border-blue-500/50 transition-all duration-300 shadow-lg hover:shadow-blue-500/10",children:[u.jsx(Bf,{children:u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center",children:"Track Wins"})}),u.jsxs(zf,{className:"text-center",children:[u.jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-8",children:"Keep track of your betting history and performance"}),u.jsx(he,{to:t?"/profile":"/login",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-blue-500/25 text-sm sm:text-base",children:t?"View Stats":"Get Started"})]})]})]}),u.jsx("div",{className:"mt-32 max-w-7xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-5xl font-bold text-gray-900",children:"Pay friends"}),u.jsx("p",{className:"text-xl text-gray-700 max-w-xl",children:"Bankroll helps settling up feel more like catching up. Send and receive money with Bankroll friends to split everyday necessities, bills, and shared activities like takeout or travel."}),u.jsxs("p",{className:"text-xl text-gray-700 max-w-xl",children:["Need a gift? Keep it simple and make any payment feel extra special with Bankroll. ",u.jsx(he,{to:"/how-it-works",className:"text-blue-600 hover:underline",children:"Find out how."})]}),u.jsx("div",{className:"pt-4",children:u.jsx(he,{to:"/learn-more",className:"px-6 py-3 border border-gray-300 rounded-full text-gray-800 font-medium hover:bg-gray-50 transition-colors",children:"Learn more"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[u.jsx("div",{className:"relative",children:u.jsx("img",{src:"/images/phone-app.jpg",alt:"Bankroll app on phone",className:"rounded-lg shadow-lg",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/e6e6e6/808080?text=Bankroll+App"}})}),u.jsxs("div",{className:"relative pt-12",children:[u.jsx("img",{src:"/images/friends-payment.jpg",alt:"Friends using Bankroll",className:"rounded-lg shadow-lg",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/e6e6e6/808080?text=Friends+Payment"}}),u.jsx("div",{className:"absolute bottom-8 right-8 bg-white p-4 rounded-xl shadow-md max-w-[200px]",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium",children:"James paid Michael"}),u.jsx("p",{className:"text-blue-600 text-sm",children:"💰 Bet winnings"})]})]})})]})]})]})}),u.jsx("div",{className:"mt-40 max-w-7xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[u.jsx("div",{className:"order-2 lg:order-1",children:u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{children:u.jsx("img",{src:"/images/payment-method.jpg",alt:"Payment method",className:"rounded-lg shadow-lg",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/600x400/e6e6e6/808080?text=Payment+Method"}})}),u.jsxs("div",{className:"grid grid-cols-5 gap-2 bg-amber-50 p-6 rounded-lg",children:[u.jsx("img",{src:"/images/lyft.png",alt:"Lyft",className:"h-12 w-12 object-contain",onError:r=>{r.target.src="https://placehold.co/80/e6e6e6/808080?text=Lyft"}}),u.jsx("img",{src:"/images/starbucks.png",alt:"Starbucks",className:"h-12 w-12 object-contain",onError:r=>{r.target.src="https://placehold.co/80/e6e6e6/808080?text=SB"}}),u.jsx("img",{src:"/images/draftkingsFantasy.png",alt:"DraftKings",className:"h-12 w-12 object-contain"}),u.jsx("img",{src:"/images/fanduel.png",alt:"FanDuel",className:"h-12 w-12 object-contain"}),u.jsx("img",{src:"/images/pulsz.png",alt:"Pulsz",className:"h-12 w-12 object-contain"})]})]})}),u.jsxs("div",{className:"order-1 lg:order-2 space-y-6",children:[u.jsx("h2",{className:"text-5xl font-bold text-gray-900",children:"Shop your favorite brands"}),u.jsx("p",{className:"text-xl text-gray-700 max-w-xl",children:"Just like sending money to friends, you can use Bankroll to checkout at some of your favorite brands in-stores and online. Now getting repaid for last night's game can cover this morning's coffee."}),u.jsxs("p",{className:"text-xl text-gray-700 max-w-xl",children:["Digital gift cards are also available to send for last-minute gifts, special occasions, or just saying thanks.",u.jsx(he,{to:"/gift-cards",className:"text-blue-600 hover:underline ml-1",children:"Find out how."})]}),u.jsx("div",{className:"pt-4",children:u.jsx(he,{to:"/learn-more",className:"px-6 py-3 border border-gray-300 rounded-full text-gray-800 font-medium hover:bg-gray-50 transition-colors",children:"Learn more"})})]})]})}),u.jsxs("div",{className:"mt-40 max-w-7xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-bold text-gray-900 text-center mb-20",children:"Manage your money on Bankroll"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("img",{src:"/images/credit-card.jpg",alt:"Bankroll Credit Card",className:"rounded-lg shadow-lg w-full h-80 object-cover",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x320/e6e6e6/808080?text=Credit+Card"}}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Bankroll Credit Card"}),u.jsx("p",{className:"text-gray-700",children:"Earn up to 3% cash back on eligible purchases with the Bankroll Credit Card. There's no annual fee, no limit to the cash back you can earn, and no impact to your credit score if declined."})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("img",{src:"/images/debit-card.jpg",alt:"Bankroll Debit Card",className:"rounded-lg shadow-lg w-full h-80 object-cover",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x320/e6e6e6/808080?text=Debit+Card"}}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Bankroll Debit Card"}),u.jsx("p",{className:"text-gray-700",children:"Spend your balance in more places using the Bankroll Debit Card - all with no monthly fees or minimum balance requirements. You can even earn up to 5% cash back by activating offers in the app."})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("img",{src:"/images/teen-account.jpg",alt:"Bankroll for ages 13-17",className:"rounded-lg shadow-lg w-full h-80 object-cover",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x320/e6e6e6/808080?text=Teen+Account"}}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Bankroll for ages 13-17"}),u.jsx("p",{className:"text-gray-700",children:"A debit card for teens, and Bankroll access to receive money from trusted friends and family. Plus, full parental visibility and controls. All with no minimum balance, no monthly fee."})]})]})]}),u.jsx("div",{className:"mt-40 mb-20 max-w-7xl mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-6xl font-bold text-gray-900",children:"Grow a business."}),u.jsx("p",{className:"text-xl text-gray-700 max-w-xl pt-6",children:"Take business payments and engage customers with the help of a seamless checkout experience people already know and trust."}),u.jsx("div",{className:"pt-4",children:u.jsx(he,{to:"/learn-more-business",className:"px-6 py-3 border border-gray-300 rounded-full text-gray-800 font-medium hover:bg-gray-50 transition-colors",children:"Learn more"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[u.jsx("div",{className:"relative",children:u.jsx("img",{src:"/images/business-phone.jpg",alt:"Business payment on phone",className:"rounded-lg shadow-lg h-full object-cover",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/e6e6e6/808080?text=Business+App"}})}),u.jsx("div",{className:"relative pt-8",children:u.jsx("img",{src:"/images/business-payment.jpg",alt:"Business payment",className:"rounded-lg shadow-lg h-full object-cover",onError:r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/e6e6e6/808080?text=Business+Payment"}})})]})]})}),u.jsxs("div",{className:"mt-40 mb-32 bg-gradient-to-br from-purple-600 to-purple-800 py-24 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),u.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10 px-4",children:[u.jsx("h2",{className:"text-6xl font-bold text-white mb-6",children:"Get $25 Today"}),u.jsx("p",{className:"text-2xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Sign up for Bankroll and receive $25 in bonus cash to start betting with your friends. No deposit required!"}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[u.jsx("a",{href:"https://apps.apple.com/app/bankroll",target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:u.jsx("img",{src:"https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&releaseDate=1441065600",alt:"Download on the App Store",className:"h-14 hover:opacity-90 transition-opacity"})}),u.jsx(he,{to:"/signup",className:"px-8 py-4 bg-white text-purple-700 rounded-full font-bold text-lg hover:bg-gray-100 transition-colors shadow-lg",children:"Sign Up on Web"})]}),u.jsx("p",{className:"text-white/80 text-sm mt-6",children:"Available on iOS. Android coming soon. Must be 18+ to participate."})]}),u.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-purple-400 rounded-full blur-3xl opacity-30"}),u.jsx("div",{className:"absolute bottom-10 right-10 w-48 h-48 bg-purple-300 rounded-full blur-3xl opacity-30"})]}),u.jsxs("div",{className:"fixed bottom-10 right-10 bg-white p-4 rounded-2xl shadow-xl flex items-center space-x-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAACPj4/v7++3t7fo6OjR0dH09PT6+vrz8/Ps7OzV1dXe3t7k5OSUlJRISEi+vr6dnZ1vb2+mpqbHx8dlZWVXV1eGhoY0NDR7e3vNzc2wsLATExNPT09eXl4tLS0kJCQNDQ1BQUEcHBw6OjqAgIBycnKKioohttJGAAAJA0lEQVR4nO2da3eqOhCGwXJR8IaKF7Ratf3/f/HAti5BJjBySTLs8H7aG1h5CplkMplkOp22tra2tra2tra2toL0/vUx2c3nk/noPU7IL+7GcTwdfiULFQ0Wq/VkP92cHxh83vH5sRn+dDRY9ON1GE8/7V3PsF+v8TgMXC66i16NpZRvL82ixuYT1biYLfthTkrdxck22KtODHYSVZ5+Mzo9tOOUqnI0e2+q8vPPQpWbURPNl+yXj3R6FKpTbNOZftfzCh+58ujxL3g/a4fwbUiVxw8zCKq8UT9B+vgUtKKG2g/U748WqN4p50Ll36eeqHK8alX5uDgz/nZ94/eBXvnBvMqH5x+eKs+G24bxWVT53Dw/qFR5U1P5eM9a3PYhVzmjRnlT+d/JivKFrvJ4cX2g/lrSKWXvkBgdH/+iR9TBhf0/CqsdnnvPyo9KKq9Slc8Knd+y/wO7FGX7b7ryM5XKq9v+RFE+e6gqfxDK3yhVPqZrL1w3j1flj0dpjilVXo3yxFQ+EStf2xnlqQY/qXLDxoiJJ5IZI1UumfRt7e3/s9mvfBKGRGCFldnmZrcmVX5UXHrQyqHKL2k58mYxTRYFKm9mlKcM+6TKD9nS8YGfYXLUTmJBeXCZ8lFu7yivxkHEHVX5PjtK8JRX5YeKUfmM6Sap8sRRQg97cefiqDGBB5WPHgcqr8pUflM8+yz6SlQ+eSrGLKHytcpRXoWnkTOBUflaMcprR6JQjfKLSlJWqJ1cFT2bj5soRnmVMqmFlS9IlY+Y37NLVVbluayTRoTKs6O8GkXrz1fH8Vm5tFFe5JV1lFeBNsqLvblslFfFR+LgqDIUbr56nFTlVcdRXrWj8q/WKK9ey0Z5VYxVXpWM8qpIlVfdoVD5aXCjvKpHwSjPqLmjUd45aSg65nOUV4WjvCpHlS9tHR/44uQiZZRX47Wf//gKSQ/K+wy3Uf6p8qiQJYvTr1dlCnGJNl1sTv2kvjOtUiSdLiaHH/bdj/Kl0uHkZ9dYnAMjKq/w5LJ4bqrTn5ej8vg36NfnnpXHw14K33+kVLlP5d9GXaFOjKTyXj3lGLpRXjgcvUiNpPKcRVT9wVDln8XrKZZYKv+jXKL+YaLyYs8Pp/KfBaO8sSzTKFaW6QpM5V8V7VLhVN5xPmzf2r1tVXmGzNNqT6W1RrHKP3qwlRnlXTu/Yai8u3A0UHmXWaZxrFxW/WEzyjcXMfQjyTLNkGVRXnFZg1TWJe1R/sSO8sphx82N8vHruFDl3Y7y+8JRnhvl7Y/yiWCUF2SZfI/y0w8icdqxsWkuUuVNZJmiTbHK09rHnmN38/JRfpxdkzCVdfE9yk+vK6ZBqnxjWeWTwiy27GbTyihPZpn8j/Jxvj8GN8o7zjKR35RfWaaiojRVfpTvZGCqfBNZpuSDXFz5k2XyPcpP8n02sMon5ChnPst0fyGzTD5H+Z3Cbg8MlTebZbqpnIt/Zqq8uY1N2V0s9u5vXJU3P8o/v0lJlTczyk/qHlFhqryxUb44zTaGyvOjvL0sU+fCrNWYtUa2NsrXdloslXeQZWp+/c6syvPKdMco/zhXZ2tzNpTKy2SZ9Kq8EodZpqZ5AXeVd5dlKqG5yseMrFLJKO/Z5XcOKi+ZZTJTeXbnx1Tl7WaZSrCn8s6zTCW0Gqn8iX8gCZrKX8qizEYq32yWqQQjlfeYZSpBqPKLClJWhFB5z1mmEnRV3sYxHzh0Vd771stUF/VRvtksk9Yo3ySM9RHB1w/QaLxpNB3l/WeZpnJZJo1RvtEsk9Yo31SWqZHK28nHBRc/K1d5T1mmGqN8I1mmMpW3f3wgvPCj/KK0SFieKFD5ILJMJSr/aCLLVKLyQWSZpCofTGelApVvdO+l8QXB4LJMUsqW6j1HQbxYKNrb31QeUpZJto8/1I7yAWWZZCs7UJVXg8kySWafwam8GlKWiRvlw80ycVZpiBsq2GUOOMuUHeWDzjJlR/nwVD7oLNNzTgwly5SONH/vwVB+9cGM8qFkmR7rYg9xaFmmVOVDyzKlKh9ilokcbkLNMqUqH2aWKR3lw95QEWKW6anyyxBVPsQsE1F53Ie2tTVQQswypSofapYpXRMPO8u0D3ORZs0yHUPPMm1DzjJtQ84yzQLPMo1DVvnVzOPxgWWTdyGr/BrrmrjO+Y+KJ0POMs0jPD7wQu1+DjnLNEeuvnCqd8g5Zr2/QRLSG5KQTxqLdnJCzjLx5z8GnmXKq3zoWeZd6FmmXNgz+CxzJ6b/Bq7yO7Eq34aryrPnmsLP77Kf0pJTnpCPDCwQx7uZwGeiEMJxTyDLnY0dqSXu5YScZp8iqPwscQK3n/ek3qYCWc5lEt9HotLw83uOWZYblZf3Z5mJOiJdYT/l0yQ5/fP7MR9dQY43OQlKg87v5a4/KlX56yScLBNRPUmH/g03y7QrK29o5/cKLkCXq/xzCgkiy5SrPKXyQWSZNCo3b6XKp/eJTwWd383ct4Sh8qnK5yqfZpkCGOWZfDwbQ+X1VV53lK9XOVTlA8gyGeW0dUf5aiirfAhZJhOVV2XmiAZkmbRVnlf5UM5/1E2+Eiq/FSl+m2XSPhBZofIsWaZWq7xaVT4QlDaovOIoX41A5TGzTCYqr4qzTJvgVN5ylskoyME5g+5QeSWjfFXEbZZJw8dCMMqrVarEUJZpvw9Q5Q1kmYxV/j7N0dEoX1X5HZ86oRxgx1F5paBqbx9OlskoyOHqhJuL8h4oH+Uzx8/vFPZ3vGsT49Uo7zXLZBTlk6v8Z3CjfMFJdAzl69+EuPDO1EE1w1Nl3SYZM5X/FX93mCpfb5QvwGUz1X3Ea6ryqrzzWUQqr8pOkBTdWdpqlVeLp9wqlb+P8hmG3VT5OqN8AU3c3Rq1bTubUfJoMVX+o8koX0XVd2Kpyo8DTFM9a3NXeTU4NVQGXLSPjUqzTJZH+RcafWr0jB3dkykks0zWR/k7l5p9sYmzTB5U/rXS9lR+nGX6bx/8oNM772pVZmtV/sXHGqnrOlPDsMvr57Ew7MrU0FZba2tra2tra2vrneoP1/rH0sami70AAAAASUVORK5CYII=",alt:"QR Code",className:"w-20 h-20"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Scan to download the"}),u.jsx("p",{className:"font-medium text-gray-900",children:"Bankroll app"})]})]}),u.jsx("div",{className:"mt-24 text-center text-sm sm:text-base text-gray-600 px-4 max-w-3xl mx-auto",children:"Responsible Gaming: Please gamble responsibly. Available in New Jersey. If you or someone you know has a gambling problem and wants help, call 1-800-522-4700"})]})]})},Cne=({onFillDemo:t})=>null;class Nne{async applyReferralCode(e,n,r,s){try{const{data:i,error:o}=await Z.rpc("apply_referral_code_enhanced",{p_user_id:e,p_code:n,p_ip_address:r||null,p_user_agent:s||null});if(o)throw o;return i||{success:!1,message:"Failed to apply referral code"}}catch(i){return console.error("Error applying referral code:",i),{success:!1,message:"An error occurred while applying the referral code"}}}async getReferralCode(e){try{const{data:n,error:r}=await Z.from("referral_codes").select("*").eq("code",e.toUpperCase()).single();if(r)throw r;return n}catch(n){return console.error("Error getting referral code:",n),null}}async getUserReferralCodes(e){try{const{data:n,error:r}=await Z.from("referral_codes").select("*").eq("owner_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Error getting user referral codes:",n),[]}}async getUserPermanentAffiliateCode(e){try{const{data:n,error:r}=await Z.from("profiles").select("permanent_affiliate_code").eq("id",e).single();if(r)throw r;return(n==null?void 0:n.permanent_affiliate_code)||null}catch(n){return console.error("Error getting permanent affiliate code:",n),null}}async getPlatformUrlForUser(e,n){try{const{data:r,error:s}=await Z.rpc("get_platform_url_for_user",{p_user_id:e,p_platform_id:n});if(s)throw s;return r||null}catch(r){return console.error("Error getting platform URL:",r),null}}async createReferralCode(e){var n;try{const{data:r,error:s}=await Z.from("referral_codes").insert({code:e.code.toUpperCase(),code_type:e.code_type,owner_id:e.owner_id,created_by:(n=(await Z.auth.getUser()).data.user)==null?void 0:n.id,description:e.description,is_permanent:e.is_permanent||!1,commission_rate:e.commission_rate||0,fixed_bonus:e.fixed_bonus||0,usage_limit:e.usage_limit,expires_at:e.expires_at}).select().single();if(s)throw s;return r}catch(r){return console.error("Error creating referral code:",r),null}}async updateAffiliatePlatformUrls(e,n){try{if(await Z.from("affiliate_platform_urls").delete().eq("code_id",e),n.length>0){const{error:r}=await Z.from("affiliate_platform_urls").insert(n.map(s=>({code_id:e,platform_id:s.platform_id,platform_name:s.platform_name,url:s.url})));if(r)throw r}return!0}catch(r){return console.error("Error updating platform URLs:",r),!1}}async getAffiliateEarnings(e){try{const{data:n,error:r}=await Z.from("affiliate_earnings").select("*").eq("affiliate_code_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Error getting affiliate earnings:",n),[]}}async getCodeUsageStats(e){try{const{data:n,error:r}=await Z.from("referral_code_usage").select("*").eq("code_id",e).order("applied_at",{ascending:!1}).limit(10);if(r)throw r;const{data:s,error:i}=await Z.from("affiliate_earnings").select("amount").eq("affiliate_code_id",e).eq("status","approved");if(i)throw i;const o=(s==null?void 0:s.reduce((a,l)=>a+l.amount,0))||0;return{total_users:(n==null?void 0:n.length)||0,total_earnings:o,recent_usage:n||[]}}catch(n){return console.error("Error getting code usage stats:",n),{total_users:0,total_earnings:0,recent_usage:[]}}}async trackAffiliateEarning(e,n,r){try{const{error:s}=await Z.rpc("track_affiliate_earning",{p_user_id:e,p_earning_type:n,p_base_amount:r});if(s)throw s;return!0}catch(s){return console.error("Error tracking affiliate earning:",s),!1}}async isCodeAvailable(e){try{const{data:n,error:r}=await Z.from("referral_codes").select("id").eq("code",e.toUpperCase()).single();return!!(r&&r.code==="PGRST116")}catch(n){return console.error("Error checking code availability:",n),!1}}generateReferralLink(e){return`${window.location.origin}/signup?ref=${e}`}async migrateUserReferralCode(e){try{const{data:n,error:r}=await Z.from("profiles").select("referral_code").eq("id",e).single();return r||!(n!=null&&n.referral_code)?!1:await this.getReferralCode(n.referral_code)?!0:await this.createReferralCode({code:n.referral_code,code_type:"user",owner_id:e,description:"User referral code",fixed_bonus:10})!==null}catch(n){return console.error("Error migrating referral code:",n),!1}}}const tA=new Nne,Rne=({formData:t,setFormData:e,errors:n,onNext:r})=>{const[s,i]=Mu.useState({email:"",firstName:"",lastName:""}),o=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),a=p=>p.length>=2&&/^[a-zA-Z\s'-]+$/.test(p),l=p=>{e({...t,email:p}),p&&!o(p)?i(m=>({...m,email:"Please enter a valid email address"})):i(m=>({...m,email:""}))},c=p=>{e({...t,firstName:p}),p&&!a(p)?i(m=>({...m,firstName:"Please enter a valid first name"})):i(m=>({...m,firstName:""}))},d=p=>{e({...t,lastName:p}),p&&!a(p)?i(m=>({...m,lastName:"Please enter a valid last name"})):i(m=>({...m,lastName:""}))},f=t.email&&t.firstName&&t.lastName&&o(t.email)&&a(t.firstName)&&a(t.lastName);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Let's get you started"}),u.jsx("p",{className:"text-white/80",children:"First, we'll need some basic information"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Email address"}),u.jsx("input",{type:"email",value:t.email,onChange:p=>l(p.target.value),className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
              focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
              text-white placeholder-white/60 transition-all`,placeholder:"your@email.com",required:!0,autoComplete:"email"}),(n.email||s.email)&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:n.email||s.email})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"First name"}),u.jsx("input",{type:"text",value:t.firstName,onChange:p=>c(p.target.value),className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all`,placeholder:"First",required:!0,autoComplete:"given-name"}),s.firstName&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:s.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Last name"}),u.jsx("input",{type:"text",value:t.lastName,onChange:p=>d(p.target.value),className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all`,placeholder:"Last",required:!0,autoComplete:"family-name"}),s.lastName&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:s.lastName})]})]})]}),u.jsxs("button",{onClick:r,disabled:!f,className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2
          ${f?"bg-[#5B3A9B] hover:bg-[#4A2F82] text-white shadow-lg":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:["Continue",u.jsx(Jl,{className:"w-5 h-5"})]})]})},jne=({formData:t,setFormData:e,onNext:n,onBack:r})=>{const{checkUsernameAvailability:s}=Ut(),[i,o]=T.useState(!1),[a,l]=T.useState(null);T.useEffect(()=>{const d=setTimeout(async()=>{if(t.username&&t.username.length>1){o(!0);try{const f=t.username.startsWith("#")?t.username:`#${t.username}`,p=await s(f);l(p)}catch(f){console.error("Error checking username:",f),l(null)}finally{o(!1)}}else l(null)},500);return()=>clearTimeout(d)},[t.username,s]);const c=t.username&&a===!0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose your username"}),u.jsx("p",{className:"text-white/80",children:"This is how other users will find and pay you"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Username"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:t.username,onChange:d=>{const f=d.target.value.replace(/[^a-zA-Z0-9_]/g,"");e({...t,username:f})},className:`w-full pl-8 pr-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all`,placeholder:"Choose a unique username",required:!0}),u.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60",children:"#"}),i&&u.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white block"})}),!i&&a!==null&&t.username&&u.jsx("span",{className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${a?"text-green-400":"text-red-400"}`,children:a?u.jsx(Xd,{className:"w-5 h-5"}):"✗"})]}),!i&&a===!1&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:"Username is already taken"}),!i&&a===!0&&u.jsx("p",{className:"mt-1 text-sm text-green-300",children:"Username is available"})]}),u.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-white/80",children:"💡 Username tips:"}),u.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-white/70",children:[u.jsx("li",{children:"• Keep it short and memorable"}),u.jsx("li",{children:"• You can use letters, numbers, and underscores"}),u.jsx("li",{children:"• This cannot be changed later"})]})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:r,className:"flex-1 px-6 py-3 bg-white/20 text-white rounded-lg font-medium transition-all duration-200 hover:bg-white/30",children:"Back"}),u.jsxs("button",{onClick:n,disabled:!c,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2
            ${c?"bg-[#5B3A9B] hover:bg-[#4A2F82] text-white shadow-lg":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:["Continue",u.jsx(Jl,{className:"w-5 h-5"})]})]})]})},Dne=({formData:t,setFormData:e,onNext:n,onBack:r})=>{const[s,i]=T.useState(!1),[o,a]=T.useState({ageVerification:!1,notifications:!1,dwollaTerms:!1}),l=d=>d.length>=8&&d.length<=16&&/[A-Z]/.test(d)&&/[!@#$%^&*(),.?":{}|<>]/.test(d),c=t.password&&t.confirmPassword&&l(t.password)&&t.password===t.confirmPassword&&o.ageVerification&&o.notifications&&o.dwollaTerms;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Secure your account"}),u.jsx("p",{className:"text-white/80",children:"Create a strong password and review our terms"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:s?"text":"password",value:t.password,onChange:d=>e({...t,password:d.target.value}),className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all pr-12`,placeholder:"Create a strong password",required:!0}),u.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?u.jsx(bb,{className:"h-5 w-5"}):u.jsx(Eb,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"mt-2 space-y-1",children:[{text:"8-16 characters",check:t.password.length>=8&&t.password.length<=16},{text:"One uppercase letter",check:/[A-Z]/.test(t.password)},{text:"One special character",check:/[!@#$%^&*(),.?":{}|<>]/.test(t.password)}].map((d,f)=>u.jsxs("div",{className:`flex items-center gap-2 text-sm ${d.check?"text-green-300":"text-white/60"}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${d.check?"bg-green-300":"bg-white/30"}`}),u.jsx("span",{children:d.text})]},f))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Confirm password"}),u.jsx("input",{type:s?"text":"password",value:t.confirmPassword,onChange:d=>e({...t,confirmPassword:d.target.value}),className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
              focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
              text-white placeholder-white/60 transition-all`,placeholder:"Confirm your password",required:!0}),t.confirmPassword&&u.jsx("p",{className:`mt-1 text-sm ${t.password===t.confirmPassword?"text-green-300":"text-red-300"}`,children:t.password===t.confirmPassword?"Passwords match":"Passwords don't match"})]}),u.jsxs("div",{className:"space-y-3 border-t border-white/20 pt-4",children:[u.jsx("h3",{className:"text-sm font-medium text-white/90 mb-3",children:"Please confirm the following:"}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.jsx("input",{type:"checkbox",checked:o.ageVerification,onChange:d=>a({...o,ageVerification:d.target.checked}),className:`w-5 h-5 bg-white/20 border-2 border-white/40 rounded text-[#5B3A9B] 
                  focus:ring-2 focus:ring-[#5B3A9B] focus:ring-offset-0 focus:ring-offset-transparent
                  checked:bg-[#5B3A9B] checked:border-[#5B3A9B] transition-all`})}),u.jsx("span",{className:"text-sm text-white/80 group-hover:text-white transition-colors",children:"I certify that I am 18 years of age or older"})]}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.jsx("input",{type:"checkbox",checked:o.notifications,onChange:d=>a({...o,notifications:d.target.checked}),className:`w-5 h-5 bg-white/20 border-2 border-white/40 rounded text-[#5B3A9B] 
                  focus:ring-2 focus:ring-[#5B3A9B] focus:ring-offset-0 focus:ring-offset-transparent
                  checked:bg-[#5B3A9B] checked:border-[#5B3A9B] transition-all`})}),u.jsxs("span",{className:"text-sm text-white/80 group-hover:text-white transition-colors",children:["I agree to receive notifications and join the SideBet waitlist. By checking this box, I accept the"," ",u.jsx("a",{href:"#",onClick:d=>{d.preventDefault(),window.open("https://bankroll.live/terms","_blank")},className:"text-[#5B3A9B] hover:text-[#4A2F82] underline",children:"Terms of Service"})," ","and learn more about SideBet at"," ",u.jsx("a",{href:"https://hedgepayments.com",target:"_blank",rel:"noopener noreferrer",className:"text-[#5B3A9B] hover:text-[#4A2F82] underline",children:"hedgepayments.com"})]})]}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.jsx("input",{type:"checkbox",checked:o.dwollaTerms,onChange:d=>a({...o,dwollaTerms:d.target.checked}),className:`w-5 h-5 bg-white/20 border-2 border-white/40 rounded text-[#5B3A9B] 
                  focus:ring-2 focus:ring-[#5B3A9B] focus:ring-offset-0 focus:ring-offset-transparent
                  checked:bg-[#5B3A9B] checked:border-[#5B3A9B] transition-all`})}),u.jsxs("span",{className:"text-sm text-white/80 group-hover:text-white transition-colors",children:["I agree to the Dwolla"," ",u.jsx("a",{href:"https://www.dwolla.com/legal/tos/",target:"_blank",rel:"noopener noreferrer",className:"text-[#5B3A9B] hover:text-[#4A2F82] underline",children:"Terms of Service"})," ","and"," ",u.jsx("a",{href:"https://www.dwolla.com/legal/privacy/",target:"_blank",rel:"noopener noreferrer",className:"text-[#5B3A9B] hover:text-[#4A2F82] underline",children:"Privacy Policy"})]})]})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:r,className:"flex-1 px-6 py-3 bg-white/20 text-white rounded-lg font-medium transition-all duration-200 hover:bg-white/30",children:"Back"}),u.jsxs("button",{onClick:()=>{e(d=>({...d,agreements:{ageVerified:o.ageVerification,notificationsEnabled:o.notifications,sideBetWaitlist:o.notifications,dwollaTermsAccepted:o.dwollaTerms}})),n()},disabled:!c,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2
            ${c?"bg-[#5B3A9B] hover:bg-[#4A2F82] text-white shadow-lg":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:["Continue",u.jsx(Jl,{className:"w-5 h-5"})]})]})]})},One=({formData:t,setFormData:e,onNext:n,onBack:r})=>{const[s,i]=T.useState(["","","",""]),[o,a]=T.useState(["","","",""]),[l,c]=T.useState("create"),[d,f]=T.useState(""),p=T.useRef([]),m=T.useRef([]),w=(E,P,R=!1)=>{var I,A;const N=R?m:p,k=R?a:i,y=R?o:s;if(P.length>1){const j=P.replace(/\D/g,"").slice(0,4).split(""),O=[...y];j.forEach((ne,ue)=>{E+ue<4&&(O[E+ue]=ne)}),k(O);const D=O.findIndex((ne,ue)=>ue>=E&&!ne),Q=D!==-1?D:3;(I=N.current[Q])==null||I.focus()}else if(/^\d$/.test(P)){const j=[...y];j[E]=P,k(j),E<3&&((A=N.current[E+1])==null||A.focus())}},v=(E,P,R=!1)=>{var I;const N=R?m:p,k=R?a:i,y=R?o:s;if(P.key==="Backspace"&&!y[E]&&E>0){(I=N.current[E-1])==null||I.focus();const A=[...y];A[E-1]="",k(A)}},S=E=>E.every(P=>P!==""),x=()=>{if(l==="create"){if(!S(s)){f("Please enter all 4 digits");return}c("confirm"),f(""),setTimeout(()=>{var E;return(E=m.current[0])==null?void 0:E.focus()},100)}else{if(!S(o)){f("Please enter all 4 digits");return}if(s.join("")!==o.join("")){f("PINs do not match");return}e({...t,pin:s.join("")}),n()}},_=()=>{e({...t,pin:null}),n()};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-16 h-16 bg-[#5B3A9B]/20 rounded-full flex items-center justify-center",children:u.jsx(Zl,{className:"w-8 h-8 text-[#5B3A9B]"})})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:l==="create"?"Create a quick PIN":"Confirm your PIN"}),u.jsx("p",{className:"text-white/80",children:l==="create"?"Use this PIN for faster login on trusted devices":"Enter your PIN again to confirm"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-center gap-2 mb-4",children:(l==="create"?s:o).map((E,P)=>u.jsx("input",{ref:R=>(l==="create"?p:m).current[P]=R,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:"1",value:E,onChange:R=>w(P,R.target.value,l==="confirm"),onKeyDown:R=>v(P,R,l==="confirm"),className:`w-12 h-14 text-center text-2xl font-semibold border-2 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                transition-all ${E?"border-[#5B3A9B] bg-white text-gray-900":"border-gray-300 bg-white text-gray-900"}`,autoFocus:P===0&&l==="create"},P))}),d&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-300 text-sm",children:[u.jsx(Ml,{className:"w-4 h-4"}),u.jsx("span",{children:d})]}),l==="create"&&u.jsx("p",{className:"text-center text-sm text-white/60",children:"You can use your PIN instead of password on this device"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:l==="create"?r:()=>{c("create"),f("")},className:"flex-1 px-4 py-3 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:"Back"}),l==="create"&&u.jsx("button",{onClick:_,className:"flex-1 px-4 py-3 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:"Skip for now"}),u.jsx("button",{onClick:x,disabled:!S(l==="create"?s:o),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all
            ${S(l==="create"?s:o)?"bg-purple-600 text-white hover:bg-purple-700 shadow-sm":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:l==="create"?"Continue":"Set PIN"})]})]})},Mne=({formData:t,setFormData:e,onNext:n,onBack:r})=>{const[s,i]=T.useState(""),o=d=>{const f=d.replace(/\D/g,"");let p=f;return f.length>=6?p=`(${f.slice(0,3)}) ${f.slice(3,6)}-${f.slice(6,10)}`:f.length>=3&&(p=`(${f.slice(0,3)}) ${f.slice(3)}`),p},a=d=>d.replace(/\D/g,"").length===10,l=d=>{const f=o(d.target.value);e({...t,phoneNumber:f}),f&&!a(f)?i("Please enter a valid 10-digit phone number"):i("")},c=t.phoneNumber&&a(t.phoneNumber)&&!s;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-16 h-16 bg-[#5B3A9B]/20 rounded-full flex items-center justify-center",children:u.jsx(uX,{className:"w-8 h-8 text-[#5B3A9B]"})})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Add your phone number"}),u.jsx("p",{className:"text-white/80",children:"Phone verification is optional - you can verify later in settings"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Phone number"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"tel",value:t.phoneNumber,onChange:l,className:`w-full pl-12 pr-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all`,placeholder:"(555) 123-4567",required:!0}),u.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60",children:"+1"})]}),s&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:s})]}),u.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-white/80",children:"🔒 Your phone number will be used for:"}),u.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-white/70",children:[u.jsx("li",{children:"• Account security and recovery"}),u.jsx("li",{children:"• Important account notifications"}),u.jsx("li",{children:"• Future verification (when you're ready)"})]})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:r,className:"flex-1 px-6 py-3 bg-white/20 text-white rounded-lg font-medium transition-all duration-200 hover:bg-white/30",children:"Back"}),u.jsxs("button",{onClick:n,disabled:!c,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2
            ${c?"bg-[#5B3A9B] hover:bg-[#4A2F82] text-white shadow-lg":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:["Continue",u.jsx(Jl,{className:"w-5 h-5"})]})]})]})},Lne=({formData:t,setFormData:e,onNext:n,onBack:r})=>{const[s,i]=T.useState(0),o=[{id:"experience",title:"What's your sports betting experience?",icon:u.jsx(kb,{className:"w-8 h-8"}),multiple:!1,options:[{value:"beginner",label:"Beginner",desc:"New to sports betting"},{value:"casual",label:"Casual",desc:"Bet occasionally for fun"},{value:"regular",label:"Regular",desc:"Bet weekly or more"},{value:"professional",label:"Professional",desc:"Take it very seriously"}]},{id:"platforms",title:"Which apps do you use?",icon:u.jsx(eX,{className:"w-8 h-8"}),multiple:!0,options:[{value:"draftkings",label:"DraftKings"},{value:"fanduel",label:"FanDuel"},{value:"betmgm",label:"BetMGM"},{value:"caesars",label:"Caesars"},{value:"pointsbet",label:"PointsBet"},{value:"prizepicks",label:"PrizePicks"},{value:"underdog",label:"Underdog Fantasy"},{value:"other",label:"Other"}]},{id:"sports",title:"What sports do you bet on?",icon:u.jsx(P2,{className:"w-8 h-8"}),multiple:!0,options:[{value:"nfl",label:"NFL Football"},{value:"nba",label:"NBA Basketball"},{value:"mlb",label:"MLB Baseball"},{value:"nhl",label:"NHL Hockey"},{value:"ncaaf",label:"College Football"},{value:"ncaab",label:"College Basketball"},{value:"soccer",label:"Soccer"},{value:"other",label:"Other Sports"}]},{id:"goals",title:"What's your main goal?",icon:u.jsx(P2,{className:"w-8 h-8"}),multiple:!1,options:[{value:"fun",label:"Have fun",desc:"Entertainment and social"},{value:"profit",label:"Make profit",desc:"Consistent winnings"},{value:"bonuses",label:"Maximize bonuses",desc:"Get the most value"},{value:"learn",label:"Learn and improve",desc:"Become a better bettor"}]}],a=o[s],l=a.multiple,c=m=>{if(l){const w=t.onboarding[a.id]||[],v=w.includes(m)?w.filter(S=>S!==m):[...w,m];e({...t,onboarding:{...t.onboarding,[a.id]:v}})}else e({...t,onboarding:{...t.onboarding,[a.id]:m}})},d=()=>{const m=t.onboarding[a.id];return l?m&&m.length>0:!!m},f=()=>{s<o.length-1?i(s+1):n()},p=()=>{s>0?i(s-1):r()};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm text-white/80",children:[u.jsxs("span",{children:["Question ",s+1," of ",o.length]}),u.jsxs("span",{children:[Math.round((s+1)/o.length*100),"% complete"]})]}),u.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:u.jsx("div",{className:"bg-[#5B3A9B] h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/o.length*100}%`}})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"flex justify-center mb-4 text-[#5B3A9B]",children:a.icon}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:a.title}),l&&u.jsx("p",{className:"text-white/80 text-sm",children:"Select all that apply"})]}),u.jsx("div",{className:"space-y-3",children:a.options.map(m=>{const w=l?(t.onboarding[a.id]||[]).includes(m.value):t.onboarding[a.id]===m.value;return u.jsx("button",{onClick:()=>c(m.value),className:`w-full p-4 rounded-lg border-2 transition-all duration-200 text-left
                ${w?"bg-[#5B3A9B]/20 border-[#5B3A9B] text-white":"bg-white/10 border-white/20 text-white/90 hover:bg-white/20 hover:border-white/40"}`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:m.label}),m.desc&&u.jsx("div",{className:"text-sm text-white/70 mt-1",children:m.desc})]}),w&&u.jsx(Xd,{className:"w-5 h-5 text-[#5B3A9B]"})]})},m.value)})}),u.jsxs("div",{className:"flex gap-4 pt-4",children:[u.jsx("button",{onClick:p,className:"flex-1 px-6 py-3 bg-white/20 text-white rounded-lg font-medium transition-all duration-200 hover:bg-white/30",children:"Back"}),u.jsxs("button",{onClick:f,disabled:!d(),className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2
            ${d()?"bg-[#5B3A9B] hover:bg-[#4A2F82] text-white shadow-lg":"bg-white/20 text-white/50 cursor-not-allowed"}`,children:[s<o.length-1?"Next":"Continue",u.jsx(Jl,{className:"w-5 h-5"})]})]})]})},Fne=({formData:t,setFormData:e,onComplete:n,onBack:r})=>{const[s,i]=T.useState([]),o=[{id:"venmo",name:"Venmo",icon:"💰",bonus:1,placeholder:"@username"},{id:"sleeper",name:"Sleeper",icon:"🏈",bonus:1,placeholder:"Sleeper username"},{id:"espn",name:"ESPN Fantasy",icon:"📊",bonus:1,placeholder:"ESPN username"},{id:"instagram",name:"Instagram",icon:"📸",bonus:1,placeholder:"@handle"}],a=s.length+25,l=(c,d)=>{e({...t,[c]:d}),d&&!s.includes(c)?i([...s,c]):!d&&s.includes(c)&&i(s.filter(f=>f!==c))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"flex justify-center mb-4 text-[#5B3A9B]",children:u.jsx(ID,{className:"w-8 h-8"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Earn bonus money"}),u.jsx("p",{className:"text-white/80",children:"Connect your accounts to earn up to $9 in bonus funds"})]}),u.jsxs("div",{className:"bg-[#5B3A9B]/20 border border-[#5B3A9B]/50 rounded-lg p-4 text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",a]}),u.jsx("div",{className:"text-white/80 text-sm",children:"Total bonus earned"})]}),u.jsx("div",{className:"space-y-4",children:o.map(c=>u.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:c.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-white",children:c.name}),u.jsxs("div",{className:"text-sm text-white/70",children:["+$",c.bonus," bonus"]})]})]}),s.includes(c.id)&&u.jsx(Xd,{className:"w-5 h-5 text-green-400"})]}),u.jsx("input",{type:"text",value:t[c.id]||"",onChange:d=>l(c.id,d.target.value),className:`w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-[#5B3A9B] focus:border-transparent 
                text-white placeholder-white/60 transition-all`,placeholder:c.placeholder})]},c.id))}),u.jsxs("div",{className:"flex gap-4 pt-4",children:[u.jsx("button",{onClick:r,className:"flex-1 px-6 py-3 bg-white/20 text-white rounded-lg font-medium transition-all duration-200 hover:bg-white/30",children:"Back"}),u.jsxs("button",{onClick:()=>{n(),n()},className:"flex-1 px-6 py-3 bg-[#5B3A9B] hover:bg-[#4A2F82] text-white rounded-lg font-medium transition-all duration-200 shadow-lg flex items-center justify-center gap-2",children:["Complete & Start",u.jsx(Jl,{className:"w-5 h-5"})]})]}),u.jsx("p",{className:"text-center text-sm text-white/60",children:"You can skip this step and connect accounts later"})]})},Vne=({currentStep:t,totalSteps:e})=>u.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:Array.from({length:e},(n,r)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${r<t?"bg-[#5B3A9B]":r===t?"bg-[#5B3A9B]/50":"bg-white/20"}`},r))}),$ne=()=>{const t=es(),[e]=j6(),{validateSignupStep1:n,completeSignup:r,sendVerificationCode:s,verifyPhone:i,updateUserData:o,currentUser:a}=Ut(),[l,c]=T.useState(0),[d,f]=T.useState(!1),[p,m]=T.useState({}),[w,v]=T.useState(""),[S,x]=T.useState(!1),[_,E]=T.useState(null);T.useEffect(()=>{var oe,$;const ne=e.get("ref"),ue=e.get("invite");if(ne&&(v(ne),x(!0),(async()=>{const q=await tA.getReferralCode(ne);q&&E(q)})()),ue||(oe=e.get("redirect"))!=null&&oe.includes("/invite/")){const z=ue||(($=e.get("redirect"))==null?void 0:$.split("/invite/")[1]);z&&console.log("Signup initiated from invite:",z)}},[e]);const[P,R]=T.useState({email:"",firstName:"",lastName:"",password:"",confirmPassword:"",username:"",pin:null,phoneNumber:"",birthday:"",onboarding:{},venmo:"",sleeper:"",espn:"",instagram:"",agreements:{ageVerified:!1,notificationsEnabled:!1,sideBetWaitlist:!1,dwollaTermsAccepted:!1}}),N=[{component:Rne,title:"Basic Info"},{component:jne,title:"Username"},{component:Dne,title:"Password"},{component:One,title:"Quick Access PIN"},{component:Mne,title:"Phone Number"},{component:Lne,title:"Tell us about yourself"},{component:Fne,title:"Connect Accounts"}],k=async()=>{var ne,ue,oe,$,z;if(m({}),l===0){f(!0);try{await n(P.email,P.password||"TempPassword123!"),c(l+1)}catch(q){let J=q.message;(ne=q.message)!=null&&ne.includes("already registered")?J="This email is already registered. Please log in or use a different email.":(ue=q.message)!=null&&ue.includes("invalid email")&&(J="Please enter a valid email address."),m({email:J})}finally{f(!1)}}else if(l===1||l===2||l===3||l===4||l===5)c(l+1);else if(l===6){f(!0);try{const q={firstName:P.firstName,lastName:P.lastName,username:P.username.startsWith("#")?P.username:`#${P.username}`,phoneNumber:P.phoneNumber.replace(/\D/g,""),pin:P.pin,notificationPreferences:{email:P.agreements.notificationsEnabled,inApp:P.agreements.notificationsEnabled,sms:!1}},{user:J}=await r(q);c(l+1)}catch(q){let J="Failed to create account. Please try again.";(oe=q.message)!=null&&oe.includes("already exists")?J="An account with this information already exists.":($=q.message)!=null&&$.includes("network")?J="Network error. Please check your connection and try again.":(z=q.message)!=null&&z.includes("Too many requests")&&(J="Too many attempts. Please wait a few minutes and try again."),m({general:J})}finally{f(!1)}}else c(l+1)},y=()=>{c(l-1)},I=async ne=>{const ue=`+1${P.phoneNumber.replace(/\D/g,"")}`;await i(ue,ne),t("/wallet")},A=async()=>{const ne=`+1${P.phoneNumber.replace(/\D/g,"")}`;await s(ne)},j=()=>{t("/wallet")},O=async()=>{try{if(f(!0),a!=null&&a.id){if(await o(a.id,{onboarding_data:P.onboarding,venmo_username:P.venmo,sleeper_username:P.sleeper,espn_username:P.espn,instagram_username:P.instagram}),w){const ue=await tA.applyReferralCode(a.id,w,window.location.hostname,navigator.userAgent);ue.success?console.log(`Applied ${ue.code_type} code: ${w}${ue.is_permanent?" (permanent)":""}`):console.error("Failed to apply referral code:",ue.message)}const ne=localStorage.getItem("pendingInvite");if(ne)try{const ue=JSON.parse(ne);if(ue.timestamp&&Date.now()-ue.timestamp<24*60*60*1e3){localStorage.removeItem("pendingInvite"),t(`/invite/${ue.inviteCode}`);return}}catch(ue){console.error("Error parsing pending invite:",ue),localStorage.removeItem("pendingInvite")}}t("/wallet")}catch(ne){console.error("Error saving onboarding data:",ne),t("/wallet")}finally{f(!1)}},D=ne=>{R(ne)},Q=N[l].component;return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Cne,{onFillDemo:D}),u.jsx("div",{className:"fixed inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/casino-background.jpg)",filter:"brightness(0.3) blur(2px)"}}),u.jsx("div",{className:"fixed inset-0 bg-black/50"}),u.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[u.jsx("nav",{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(he,{to:"/",className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[u.jsx(Yp,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Back to home"})]}),u.jsx(he,{to:"/",className:"text-2xl font-bold text-white",children:"Bankroll"})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-lg",children:[S&&u.jsxs("div",{className:"mb-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-4 flex items-center justify-between animate-pulse",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:u.jsx(Qp,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{className:"text-white",children:[u.jsx("p",{className:"font-semibold",children:(_==null?void 0:_.code_type)==="affiliate"?"Exclusive Partner Offer!":(_==null?void 0:_.code_type)==="promotional"?"Special Promotion!":"Special Referral Bonus!"}),u.jsx("p",{className:"text-sm opacity-90",children:(_==null?void 0:_.description)||((_==null?void 0:_.fixed_bonus)>0?`You'll get an extra $${_.fixed_bonus} bonus when you sign up`:"Exclusive benefits applied to your account")})]})]}),(_==null?void 0:_.fixed_bonus)>0&&u.jsxs("div",{className:"text-white font-bold text-lg",children:["+$",_.fixed_bonus]})]}),u.jsx(Vne,{currentStep:l,totalSteps:N.length}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20",children:u.jsx(Q,{formData:P,setFormData:R,errors:p,onNext:k,onBack:y,onComplete:O,onPhoneVerified:I,onResendCode:A,onSkip:j})}),p.general&&u.jsx("div",{className:"mt-4 p-4 bg-red-500/20 backdrop-blur-sm border border-red-500/30 rounded-lg",children:u.jsx("p",{className:"text-red-300 text-sm text-center",children:p.general})}),d&&u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-2xl z-50",children:u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"}),u.jsx("p",{className:"text-white text-sm",children:"Creating your account..."})]})})]})}),u.jsx("footer",{className:"p-6 text-center",children:u.jsxs("p",{className:"text-sm text-white/60",children:["By creating an account, you agree to our"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Terms of Service"})," ","and"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})})]})]})},Une=()=>{var r,s,i,o;const t=navigator.userAgent;let e="Unknown",n="Unknown";return t.indexOf("Firefox")>-1?(e="Firefox",n=((r=t.match(/Firefox\/(\d+)/))==null?void 0:r[1])||"Unknown"):t.indexOf("Chrome")>-1&&t.indexOf("Edg")===-1?(e="Chrome",n=((s=t.match(/Chrome\/(\d+)/))==null?void 0:s[1])||"Unknown"):t.indexOf("Safari")>-1&&t.indexOf("Chrome")===-1?(e="Safari",n=((i=t.match(/Version\/(\d+)/))==null?void 0:i[1])||"Unknown"):t.indexOf("Edg")>-1&&(e="Edge",n=((o=t.match(/Edg\/(\d+)/))==null?void 0:o[1])||"Unknown"),{browserName:e,browserVersion:n}},Bne=()=>{var r,s,i,o,a,l;const t=navigator.userAgent;let e="Unknown",n="Unknown";if(t.indexOf("Windows NT")>-1){e="Windows";const c=(r=t.match(/Windows NT (\d+\.\d+)/))==null?void 0:r[1];n=c?`NT ${c}`:"Unknown"}else t.indexOf("Mac OS X")>-1?(e="macOS",n=((i=(s=t.match(/Mac OS X (\d+[._]\d+)/))==null?void 0:s[1])==null?void 0:i.replace("_","."))||"Unknown"):t.indexOf("Android")>-1?(e="Android",n=((o=t.match(/Android (\d+\.\d+)/))==null?void 0:o[1])||"Unknown"):/iPhone|iPad|iPod/.test(t)?(e="iOS",n=((l=(a=t.match(/OS (\d+[._]\d+)/))==null?void 0:a[1])==null?void 0:l.replace("_","."))||"Unknown"):t.indexOf("Linux")>-1&&(e="Linux");return{osName:e,osVersion:n}},zne=()=>{const t=navigator.userAgent;return/tablet|ipad|playbook|silk/i.test(t)?"tablet":/mobile|iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(t)?"mobile":"desktop"},qne=()=>{var t;return{width:window.screen.width,height:window.screen.height,pixelRatio:window.devicePixelRatio||1,colorDepth:window.screen.colorDepth,orientation:((t=window.screen.orientation)==null?void 0:t.type)||"unknown"}},Wne=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return"Unknown"}},Hne=()=>navigator.language||navigator.userLanguage||"Unknown",Gne=()=>({cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack==="1",hardwareConcurrency:navigator.hardwareConcurrency||0,maxTouchPoints:navigator.maxTouchPoints||0,platform:navigator.platform||"Unknown"}),Kne=t=>{const e=JSON.stringify({screen:t.screen,timezone:t.timezone,language:t.language,platform:t.features.platform,hardwareConcurrency:t.features.hardwareConcurrency});let n=0;for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);n=(n<<5)-n+o,n=n&n}const r=localStorage.getItem("bankroll_device_id");if(r)return r;const s=`${Math.abs(n)}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return localStorage.setItem("bankroll_device_id",s),s},fg=()=>{const t=Une(),e=Bne(),n=zne(),r=qne(),s=Wne(),i=Hne(),o=Gne(),a={browser:t,os:e,deviceType:n,screen:r,timezone:s,language:i,features:o,userAgent:navigator.userAgent};return{deviceId:Kne(a),deviceName:`${t.browserName} on ${e.osName}`,deviceType:n,browserName:t.browserName,osName:e.osName,fingerprint:a}},Xne=()=>{const{browserName:t,osName:e,deviceType:n}=fg();return`${n==="mobile"||n==="tablet"?"📱":"💻"} ${t} on ${e}`},Yne=({email:t,onBack:e,onSuccess:n,onPasswordLogin:r})=>{es();const[s,i]=T.useState(["","","",""]),[o,a]=T.useState(""),[l,c]=T.useState(!1),[d,f]=T.useState(0),[p,m]=T.useState(null),w=T.useRef([]);T.useEffect(()=>{const E=fg();m(E)},[]);const v=(E,P)=>{var R,N;if(P.length>1){const k=P.replace(/\D/g,"").slice(0,4).split(""),y=[...s];if(k.forEach((I,A)=>{E+A<4&&(y[E+A]=I)}),i(y),y.filter(I=>I).length>=4)_(y);else{const I=y.findIndex((j,O)=>O>=E&&!j),A=I!==-1?I:3;(R=w.current[A])==null||R.focus()}}else if(/^\d$/.test(P)){const k=[...s];k[E]=P,i(k);const y=k.filter(I=>I).length;y>=4&&E===y-1?_(k):E<3&&((N=w.current[E+1])==null||N.focus())}},S=(E,P)=>{var R;if(P.key==="Backspace"&&!s[E]&&E>0){(R=w.current[E-1])==null||R.focus();const N=[...s];N[E-1]="",i(N)}},x=E=>{E.preventDefault();const R=E.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);if(R.length>=4){const N=R.padEnd(4,"").split("").slice(0,4);i(N),_(N)}},_=async(E=s)=>{var R;const P=E.join("").slice(0,4);if(P.length<4){a("Please enter at least 4 digits");return}c(!0),a("");try{const{data:N,error:k}=await Z.from("users").select("id").eq("email",t).single();if(k||!N)throw new Error("User not found");if(await pi.verifyPIN(N.id,P,p==null?void 0:p.deviceId))n(N.id);else throw new Error("Invalid PIN")}catch(N){console.error("PIN login error:",N),a(N.message||"Invalid PIN"),f(y=>y+1),i(["","","",""]),(R=w.current[0])==null||R.focus();const k=document.getElementById("pin-container");k&&(k.classList.add("shake"),setTimeout(()=>k.classList.remove("shake"),500)),d>=2&&setTimeout(()=>{r()},1500)}finally{c(!1)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-600/20 rounded-full flex items-center justify-center mb-4",children:u.jsx(Zl,{className:"w-8 h-8 text-purple-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome back!"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Enter your PIN to continue"}),t&&u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]}),p&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[u.jsx(CD,{className:"w-4 h-4"}),u.jsx("span",{children:p.deviceName})]}),u.jsxs("div",{id:"pin-container",className:"pin-container",children:[u.jsx("div",{className:"flex justify-center gap-2 mb-4",children:s.map((E,P)=>u.jsx("input",{ref:R=>w.current[P]=R,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:"1",value:E,onChange:R=>v(P,R.target.value),onKeyDown:R=>S(P,R),onPaste:x,disabled:l,className:`w-12 h-14 text-center text-2xl font-semibold border-2 rounded-lg 
                focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent 
                transition-all ${E?"border-purple-600 bg-purple-50":"border-gray-300 bg-white"} ${l?"opacity-50":""}`,autoFocus:P===0},P))}),o&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-600 text-sm",children:[u.jsx(Ml,{className:"w-4 h-4"}),u.jsx("span",{children:o})]}),d>0&&d<3&&u.jsxs("p",{className:"text-center text-sm text-gray-600",children:[3-d," attempt",3-d!==1?"s":""," remaining"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:r,className:"w-full text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Use password instead"}),u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-700 text-sm",children:[u.jsx(Yp,{className:"w-4 h-4"}),"Use a different account"]})]}),u.jsx("style",{jsx:!0,children:`
        .shake {
          animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
      `})]})},Qne=()=>{var ue,oe;const t=es(),e=dr(),{signIn:n}=Ut(),{trackEvent:r,trackFunnelStep:s,trackFormSubmit:i,trackError:o}=UK(),[a,l]=T.useState(!1),[c,d]=T.useState(!0),[f,p]=T.useState(""),[m,w]=T.useState(!1),[v,S]=T.useState(!1),[x,_]=T.useState(!1),[E,P]=T.useState(!1),[R,N]=T.useState({email:"",password:""}),[k,y]=T.useState({email:"",password:""}),I=((oe=(ue=e.state)==null?void 0:ue.from)==null?void 0:oe.pathname)||"/wallet";T.useEffect(()=>{const z=setTimeout(async()=>{if(!R.email||!R.email.includes("@")){S(!1),d(!1);return}d(!0);try{const{data:q}=await Z.from("users").select("id").eq("email",R.email.toLowerCase()).single();if(q){const J=fg(),se=await JC.isDeviceTrusted(q.id,J.deviceId),ge=await pi.hasPIN(q.id);_(ge),S(se&&ge)}else S(!1)}catch(q){console.error("Error checking device trust:",q),S(!1)}finally{d(!1)}},500);return()=>clearTimeout(z)},[R.email]);const A=$=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($),j=$=>{const{name:z,value:q}=$.target;N(J=>({...J,[z]:q})),f&&p(""),z==="email"&&q&&!A(q)?y(J=>({...J,email:"Please enter a valid email address"})):z==="email"&&y(J=>({...J,email:""})),z==="password"&&q&&q.length<8?y(J=>({...J,password:"Password must be at least 8 characters"})):z==="password"&&y(J=>({...J,password:""}))},O=async $=>{var z,q,J;if($.preventDefault(),p(""),!A(R.email)){y(se=>({...se,email:"Please enter a valid email address"}));return}if(R.password.length<8){y(se=>({...se,password:"Password must be at least 8 characters"}));return}l(!0),s("login",1,{method:"email_password",remember_me:E}),r("login_attempt",{method:"email_password"});try{const se=await n(R.email,R.password,E);i("login",!0,{method:"email_password",has_pin:x,remember_me:E}),s("login",2,{method:"email_password",success:!0}),l(!1),x?t(I,{replace:!0}):t("/setup-pin",{state:{from:I}})}catch(se){console.error("Login error:",se),i("login",!1,{method:"email_password",error:se.message}),o(se.message||"Failed to log in","login_error",{method:"email_password"});let ge="Failed to log in. Please try again.";(z=se.message)!=null&&z.includes("Invalid login credentials")?ge="Invalid email or password. Please check your credentials and try again.":(q=se.message)!=null&&q.includes("Email not confirmed")?ge="Please check your email to confirm your account before logging in.":(J=se.message)!=null&&J.includes("Too many requests")&&(ge="Too many login attempts. Please wait a few minutes and try again."),p(ge),l(!1)}},D=async $=>{S(!1),p("PIN verified! Please enter your password to complete login.")},Q=()=>{S(!1)},ne=()=>{N({email:"",password:""}),S(!1)};return v&&!c?u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-purple-800 to-orange-800",children:u.jsx("div",{className:"absolute inset-0 bg-wavy-gradient opacity-60"})}),u.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-96 h-96 bg-purple-600/30 rounded-full blur-3xl animate-lava-1"}),u.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 w-96 h-96 bg-orange-500/30 rounded-full blur-3xl animate-lava-2"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500/20 rounded-full blur-2xl animate-lava-3"})]}),u.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[u.jsx("nav",{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(he,{to:"/",className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[u.jsx(Yp,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Back to home"})]}),u.jsx(he,{to:"/",className:"text-2xl font-bold text-white",children:"Bankroll"})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-2xl",children:u.jsx(Yne,{email:R.email,onBack:ne,onSuccess:D,onPasswordLogin:Q})})})})]})]}):u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-purple-800 to-orange-800",children:u.jsx("div",{className:"absolute inset-0 bg-wavy-gradient opacity-60"})}),u.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-96 h-96 bg-purple-600/30 rounded-full blur-3xl animate-lava-1"}),u.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 w-96 h-96 bg-orange-500/30 rounded-full blur-3xl animate-lava-2"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500/20 rounded-full blur-2xl animate-lava-3"})]}),u.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[u.jsx("nav",{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(he,{to:"/",className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[u.jsx(Yp,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Back to home"})]}),u.jsx(he,{to:"/",className:"text-2xl font-bold text-white",children:"Bankroll"})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-3",children:"Welcome back"}),u.jsx("p",{className:"text-white/80 text-lg",children:"Sign in to your Bankroll account"})]}),u.jsx("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-8 border border-white/20 shadow-2xl",children:u.jsxs("form",{onSubmit:O,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email address"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"email",id:"email",name:"email",value:R.email,onChange:j,required:!0,className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                        focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent 
                        text-white placeholder-white/60 transition-all`,placeholder:"Enter your email",autoComplete:"email"}),c&&R.email&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white/50"})})]}),k.email&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:k.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:R.password,onChange:j,required:!0,className:`w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg 
                        focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent 
                        text-white placeholder-white/60 transition-all pr-12`,placeholder:"Enter your password",autoComplete:"current-password"}),u.jsx("button",{type:"button",onClick:()=>w(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:m?u.jsx(bb,{className:"h-5 w-5"}):u.jsx(Eb,{className:"h-5 w-5"})})]}),k.password&&u.jsx("p",{className:"mt-1 text-sm text-red-300",children:k.password})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:E,onChange:$=>P($.target.checked),className:`w-4 h-4 bg-white/20 border-2 border-white/40 rounded text-purple-600 
                        focus:ring-2 focus:ring-purple-500 focus:ring-offset-0 focus:ring-offset-transparent
                        checked:bg-purple-600 checked:border-purple-600 transition-all`}),u.jsx("span",{className:"text-sm text-white/80",children:"Remember me"})]}),x&&!c&&u.jsxs("div",{className:"flex items-center gap-1 text-sm text-white/70",children:[u.jsx(Zl,{className:"w-3 h-3"}),u.jsx("span",{children:"PIN available"})]})]}),f&&u.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-200 text-sm text-center font-medium",children:f}),u.jsx("button",{type:"submit",disabled:a||c||!R.email||!R.password,className:`w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-orange-500 text-white rounded-lg 
                    transition-all duration-200 font-medium shadow-lg transform relative overflow-hidden
                    ${a||c||!R.email||!R.password?"opacity-50 cursor-not-allowed":"hover:from-purple-700 hover:to-orange-600 hover:shadow-xl hover:scale-105 active:scale-95"}
                    `,children:a?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),"Signing in..."]}):"Sign In"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("button",{type:"button",onClick:()=>t("/reset-password"),className:"text-white/80 hover:text-white transition-colors text-sm underline",children:"Forgot your password?"})})]})}),u.jsx("div",{className:"mt-8 text-center",children:u.jsxs("p",{className:"text-white/80",children:["New to Bankroll?"," ",u.jsx(he,{to:"/signup",className:"text-white font-semibold hover:underline transition-all",children:"Create your account"})]})})]})}),u.jsx("footer",{className:"p-6 text-center",children:u.jsxs("div",{className:"text-xs text-white/60 max-w-2xl mx-auto space-y-2",children:[u.jsx("p",{children:"© 2024 Bankroll. All Rights Reserved."}),u.jsx("p",{children:"Banking Services provided by partner institutions. FDIC insured deposits. Your funds are protected with bank-level security and encryption."})]})})]}),a&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:u.jsx(d1,{text:"Signing in..."})})]})},Jne=({onComplete:t,onSkip:e})=>{const{currentUser:n}=Ut(),[r,s]=T.useState(["","","",""]),[i,o]=T.useState("create"),[a,l]=T.useState(""),[c,d]=T.useState(!1),[f,p]=T.useState(!0),[m,w]=T.useState(Xne()),v=T.useRef([]),S=(N,k)=>{var y,I;if(k.length>1){const A=k.replace(/\D/g,"").slice(0,4).split(""),j=[...r];A.forEach((Q,ne)=>{N+ne<4&&(j[N+ne]=Q)}),s(j);const O=j.findIndex((Q,ne)=>ne>=N&&!Q),D=O!==-1?O:3;(y=v.current[D])==null||y.focus()}else if(/^\d$/.test(k)){const A=[...r];A[N]=k,s(A),N<3&&((I=v.current[N+1])==null||I.focus())}},x=(N,k)=>{var y;if(k.key==="Backspace"&&!r[N]&&N>0){(y=v.current[N-1])==null||y.focus();const I=[...r];I[N-1]="",s(I)}},_=N=>{var I;N.preventDefault();const y=N.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);if(y.length>0){const A=y.padEnd(4,"").split("").slice(0,4);s(A);const j=A.findLastIndex(O=>O!=="");(I=v.current[Math.min(j+1,3)])==null||I.focus()}},E=async()=>{const N=r.join("");if(N.length<4){l("PIN must be at least 4 digits");return}d(!0),l("");try{await pi.setupPIN(n.id,N),o("trust-device")}catch(k){l(k.message||"Failed to set up PIN")}finally{d(!1)}},P=async()=>{if(!f){t();return}d(!0),l("");try{const N=fg();N.deviceName=m,await JC.trustDevice(n.id,N),t()}catch(N){l(N.message||"Failed to trust device"),d(!1)}},R=N=>N.filter(k=>k).length>=4;return u.jsx("div",{className:"max-w-md mx-auto",children:i==="create"?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-600/20 rounded-full flex items-center justify-center mb-4",children:u.jsx(Zl,{className:"w-8 h-8 text-purple-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Your PIN"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Set up a quick PIN for easy access on trusted devices"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-center gap-2 mb-4",children:r.map((N,k)=>u.jsx("input",{ref:y=>v.current[k]=y,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:"1",value:N,onChange:y=>S(k,y.target.value),onKeyDown:y=>x(k,y),onPaste:y=>_(y),className:`w-12 h-14 text-center text-2xl font-semibold border-2 rounded-lg 
                    focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent 
                    transition-all ${N?"border-purple-600 bg-purple-50":"border-gray-300 bg-white"}`,autoFocus:k===0},k))}),a&&u.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[u.jsx(Ml,{className:"w-4 h-4"}),u.jsx("span",{children:a})]}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("p",{children:"• Use 4 digits for your PIN"}),u.jsx("p",{children:"• Don't use easily guessable numbers (1234, 0000, etc.)"}),u.jsx("p",{children:"• You'll use this to quickly sign in on trusted devices"})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:`flex-1 px-4 py-3 text-gray-700 bg-white border border-gray-300 rounded-lg 
                hover:bg-gray-50 transition-colors`,children:"Skip for now"}),u.jsx("button",{onClick:E,disabled:!R(r)||c,className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all
                ${R(r)&&!c?"bg-purple-600 text-white hover:bg-purple-700 shadow-sm":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:c?"Setting up...":"Create PIN"})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(Xd,{className:"w-8 h-8 text-green-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"PIN Created Successfully!"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Would you like to trust this device for quick PIN access?"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx(CD,{className:"w-5 h-5 text-gray-600"}),u.jsx("input",{type:"text",value:m,onChange:N=>w(N.target.value),className:`flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none 
                  focus:ring-2 focus:ring-purple-500 focus:border-transparent`,placeholder:"Device name"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:f,onChange:N=>p(N.target.checked),className:`w-4 h-4 text-purple-600 border-gray-300 rounded 
                  focus:ring-purple-500 focus:ring-2`}),u.jsx("span",{className:"text-sm text-gray-700",children:"Trust this device for 30 days"})]}),u.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Trusted devices can use PIN instead of password. You can manage trusted devices in settings."})]}),a&&u.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[u.jsx(Ml,{className:"w-4 h-4"}),u.jsx("span",{children:a})]}),u.jsx("button",{onClick:P,disabled:c,className:`w-full px-4 py-3 rounded-lg font-medium transition-all
              ${c?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 shadow-sm"}`,children:c?"Saving...":f?"Trust Device & Continue":"Continue Without Trusting"})]})})},Zne=()=>{var o;const t=es(),e=dr(),{currentUser:n}=Ut(),r=((o=e.state)==null?void 0:o.from)||"/dashboard";T.useEffect(()=>{n||t("/login")},[n,t]);const s=()=>{t(r,{replace:!0})},i=()=>{t(r,{replace:!0})};return n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-12",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsx(Jne,{onComplete:s,onSkip:i})})}):null},ere=()=>u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-100 text-gray-900",children:[u.jsx("nav",{className:"border-b border-gray-200 backdrop-blur-md sticky top-0 z-50 bg-white/95 shadow-sm",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center py-4 md:py-6",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(he,{to:"/",className:"flex-shrink-0",children:u.jsx("img",{src:"/images/BankrollLogoTransparent.png",alt:"Bankroll Logo",className:"h-8 sm:h-10 w-auto",onError:t=>{console.error("Failed to load logo, trying fallback"),t.target.src="/assets/BankrollLogoTransparent.png",t.target.onerror=()=>{t.target.style.display="none",t.target.parentNode.innerHTML+='<span class="text-xl font-bold text-lime-500">Bankroll</span>'}}})})}),u.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[u.jsx(he,{to:"/login",className:"px-4 py-2 text-sm sm:text-base text-gray-800 hover:text-lime-600 transition-colors duration-300",children:"Log in"}),u.jsx(he,{to:"/signup",className:"px-5 py-2.5 bg-lime-500 text-sm sm:text-base text-white rounded-lg hover:bg-lime-600 transition-all duration-300 shadow-lg hover:shadow-lime-500/25",children:"Sign up"})]})]})})}),u.jsxs("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-lime-400 to-green-500",children:"Join Our Beta Program"}),u.jsx("p",{className:"text-lg sm:text-xl text-gray-700 max-w-3xl mx-auto",children:"Be among the first to experience our payment platform and help shape its future"})]}),u.jsx("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-10 border border-gray-200",children:u.jsx("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSdVSTaEVM9vDDPTqZPkhKRzfeldDXnfVuGr_v9rnrg-fzl4_g/viewform?embedded=true",width:"100%",height:"800px",frameBorder:"0",marginHeight:"0",marginWidth:"0",title:"Beta Signup Form",children:"Loading form..."})}),u.jsx("div",{className:"mt-10 text-center",children:u.jsx(he,{to:"/",className:"text-lime-600 hover:text-lime-800 transition-colors",children:"← Return to Home"})})]})]}),tre=({isLoading:t,onLoadingComplete:e})=>{const[n,r]=T.useState(!1),[s,i]=T.useState("Initializing Bankroll..."),[o,a]=T.useState(!1),[l,c]=T.useState(0);T.useEffect(()=>{c(f=>f+1)},[]);const d=["Initializing Bankroll...","Setting up your wallet...","Loading your profile...","Spinning the reels...","Almost ready..."];return T.useEffect(()=>{const f=setTimeout(()=>{r(!1)},2e3);let p=0;const m=setInterval(()=>{p=(p+1)%d.length,i(d[p])},1500);return()=>{clearTimeout(f),clearInterval(m)}},[]),t?u.jsx(Es,{children:u.jsx(it.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:u.jsx(Es,{mode:"wait",children:n?u.jsxs(it.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},transition:{duration:.5},className:"relative",children:[u.jsx("video",{autoPlay:!0,muted:!0,playsInline:!0,className:"w-64 h-64 object-cover rounded-lg",onEnded:()=>r(!1),onError:()=>r(!1),children:u.jsx("source",{src:"/videos/bankroll-intro.mp4",type:"video/mp4"})}),u.jsx("div",{className:"absolute inset-0 w-64 h-64 flex items-center justify-center bg-black rounded-lg -z-10",children:u.jsx(it.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:2,ease:"linear"},className:"text-6xl",children:"🎰"})})]},"video"):u.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center",children:[u.jsx(d1,{text:s,onComplete:()=>{e&&setTimeout(()=>{e()},500)}},"loading-animation"),u.jsx(it.h1,{className:"text-4xl font-bold text-white mt-8 mb-4",animate:{opacity:[.5,1,.5],textShadow:["0 0 20px rgba(251, 146, 60, 0.8)","0 0 40px rgba(251, 146, 60, 1)","0 0 20px rgba(251, 146, 60, 0.8)"]},transition:{duration:2,repeat:1/0},children:"Bankroll"})]},"spinner")})})}):null},nre=()=>{const t=es();return T.useEffect(()=>{(async()=>{try{localStorage.clear(),sessionStorage.clear(),await Z.auth.signOut(),console.log("Force logout completed"),setTimeout(()=>{t("/login")},1e3)}catch(n){console.error("Force logout error:",n),t("/login")}})()},[t]),u.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Logging out..."}),u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500 mx-auto"})]})})};class rre extends Mu.Component{constructor(n){super(n);ss(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){var s,i;console.error("ErrorBoundary caught an error:",n,r),dO.recordError(n,r,{component:((i=(s=r==null?void 0:r.componentStack)==null?void 0:s.split(`
`)[1])==null?void 0:i.trim())||"Unknown"}),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-orange-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md rounded-2xl p-8 text-center space-y-6 border border-white/20",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center",children:u.jsx(Ml,{className:"w-8 h-8 text-red-400"})})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Oops! Something went wrong"}),u.jsx("p",{className:"text-white/80",children:"We're sorry, but something unexpected happened. Don't worry, your data is safe."})]}),!1,u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsxs("button",{onClick:this.handleReset,className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[u.jsx(y_,{className:"w-4 h-4"}),"Try Again"]}),u.jsxs("button",{onClick:()=>window.location.href="/",className:"flex-1 px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[u.jsx(tX,{className:"w-4 h-4"}),"Go Home"]})]}),u.jsxs("button",{onClick:()=>{sessionStorage.setItem("open_ai_chat_on_load","true"),sessionStorage.setItem("ai_chat_initial_message","I just encountered an error and need help"),window.location.href="/"},className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[u.jsx(AD,{className:"w-4 h-4"}),"Get Help from AI Assistant"]}),u.jsxs("p",{className:"text-sm text-white/60",children:["If this problem persists, please contact support at"," ",u.jsx("a",{href:"mailto:support@bankroll.live",className:"text-purple-300 hover:text-purple-200 underline",children:"support@bankroll.live"})]})]})}):this.props.children}}const sre=()=>{const{userLocation:t,locationLoading:e,locationError:n,permissionStatus:r,manualLocationSet:s,locationDetectionAttempted:i,detectLocation:o,setManualLocation:a,clearManualLocation:l,formatLocationDisplay:c,hasLocation:d,isUSLocation:f,currentState:p,currentCountry:m,locationSource:w}=d4(),[v,S]=T.useState(!1),[x,_]=T.useState(""),E=N=>{N?a({stateCode:N,stateName:P(N),countryCode:"US",countryName:"United States",source:"manual_test"}):l(),_(N)},P=N=>({AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"})[N]||N,R=N=>({NJ:["Enhanced casino bonuses","Full sports betting access","PokerStars exclusive offers"],PA:["Pennsylvania-specific PokerStars bonuses","Legal online casino access","Enhanced fantasy offers"],NY:["Enhanced fantasy sports bonuses","DraftKings special offers","Limited casino access"],CA:["Fantasy sports focus","Enhanced sweeps casino bonuses","PrizePicks exclusive offers"],FL:["Fantasy sports available","Sweeps casino bonuses","Limited sports betting"],TX:["Strong fantasy sports presence","Sweeps casino access","Enhanced PrizePicks offers"],WA:["Limited platform access","Restricted gambling laws","Fantasy sports restricted"],ID:["Limited platform access","Restricted gambling laws","Fantasy sports restricted"],MT:["Limited platform access","Sports betting available","Fantasy sports restricted"],NV:["Traditional casino focus","Limited online options","Fantasy sports restricted"]})[N]||["Standard national offers available"];return v?u.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-4 max-w-md",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[u.jsx(oX,{className:"h-5 w-5 mr-2"}),"Location Debug"]}),u.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u.jsx(bb,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"space-y-3 text-sm",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Current Location"}),u.jsxs("div",{className:"space-y-1 text-gray-600 dark:text-gray-300",children:[u.jsxs("div",{children:[u.jsx("strong",{children:"State:"})," ",p||"Unknown"]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Country:"})," ",m||"Unknown"]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Display:"})," ",c()||"No location detected"]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Source:"})," ",w||"None"]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Manual Set:"})," ",s?"Yes":"No"]})]})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Status"}),u.jsxs("div",{className:"space-y-1 text-gray-600 dark:text-gray-300",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${d?"bg-green-500":"bg-red-500"}`}),"Has Location: ",d?"Yes":"No"]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${f?"bg-green-500":"bg-yellow-500"}`}),"US Location: ",f?"Yes":"No"]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${r==="granted"?"bg-green-500":r==="denied"?"bg-red-500":"bg-yellow-500"}`}),"Permission: ",r]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${i?"bg-blue-500":"bg-gray-400"}`}),"Detection Attempted: ",i?"Yes":"No"]})]})]}),p&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded",children:[u.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:[p," Promotions"]}),u.jsx("ul",{className:"text-xs text-gray-600 dark:text-gray-300 space-y-1",children:R(p).map((N,k)=>u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"w-1 h-1 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),N]},k))})]}),n&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 p-3 rounded",children:[u.jsx("h4",{className:"font-medium text-red-900 dark:text-red-200 mb-1",children:"Error"}),u.jsx("p",{className:"text-xs text-red-700 dark:text-red-300",children:n})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Test Controls"}),u.jsxs("div",{className:"mb-2",children:[u.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Test Different State:"}),u.jsxs("select",{value:x,onChange:N=>E(N.target.value),className:"w-full text-xs border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"",children:"Use Real Location"}),u.jsx("option",{value:"NJ",children:"New Jersey (Full Casino)"}),u.jsx("option",{value:"PA",children:"Pennsylvania (Casino + Sports)"}),u.jsx("option",{value:"NY",children:"New York (Limited)"}),u.jsx("option",{value:"CA",children:"California (Fantasy Focus)"}),u.jsx("option",{value:"WA",children:"Washington (Restricted)"}),u.jsx("option",{value:"FL",children:"Florida (Fantasy + Sweeps)"}),u.jsx("option",{value:"TX",children:"Texas (Fantasy + Sweeps)"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>o(!0),disabled:e,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-xs px-2 py-1 rounded flex items-center justify-center",children:e?u.jsx(y_,{className:"h-3 w-3 animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(y_,{className:"h-3 w-3 mr-1"}),"Detect"]})}),u.jsxs("button",{onClick:l,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-xs px-2 py-1 rounded flex items-center justify-center",children:[u.jsx(PD,{className:"h-3 w-3 mr-1"}),"Reset"]})]})]})]})]}):u.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:u.jsx("button",{onClick:()=>S(!0),className:"bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-full shadow-lg transition-colors",title:"Show Location Debugger",children:u.jsx(Eb,{className:"h-5 w-5"})})})};let Xa;try{Xa=ae(()=>import("./index.esm-DZUbfUYc.js"),[])}catch(t){console.warn("Firebase messaging is not supported in this browser:",t),Xa=null}class ire{constructor(){this.db=SR(gT),this.baseUrl="https://us-central1-bankroll-2ccb4.cloudfunctions.net",this.messagingSupported=!1,this.messaging=null,this.initMessaging()}async initMessaging(){if(Xa)try{const{getMessaging:e}=await Xa;this.messaging=e(gT),this.messagingSupported=!0}catch(e){console.warn("Failed to initialize Firebase messaging:",e),this.messagingSupported=!1}}async initializePushNotifications(){try{if(!this.messagingSupported||!this.messaging)return console.log("Firebase messaging is not supported in this browser, skipping push notifications setup"),null;const{getToken:e,onMessage:n}=await Xa;if(!("Notification"in window))return console.log("This browser does not support notifications"),null;let r=Notification.permission;if(r==="default"&&(r=await Notification.requestPermission()),r!=="granted")return console.log("Notification permission not granted"),null;const i=Fv().currentUser;if(!i)return console.log("User must be authenticated to initialize push notifications"),null;if(!this.isValidVapidKey())return console.log("Skipping FCM token generation in development or with invalid VAPID key"),null;try{const o=await e(this.messaging,{vapidKey:void 0});return o?(await this.saveNotificationPreferences(i.uid,{pushToken:o,inApp:!0,email:!0}),this.messaging.onTokenRefresh&&this.messaging.onTokenRefresh(async()=>{try{const a=await e(this.messaging,{vapidKey:void 0});await this.saveNotificationPreferences(i.uid,{pushToken:a})}catch(a){console.error("Error refreshing FCM token:",a)}}),o):(console.log("Failed to get FCM token"),null)}catch(o){return console.error("FCM token error (non-critical):",o),null}}catch(e){return console.error("Error initializing push notifications:",e),null}}isValidVapidKey(){}async saveNotificationPreferences(e,n){try{await LR(Vn(this.db,"userPreferences",e),{notifications:{inApp:n.inApp??!0,sms:n.sms??!1,email:n.email??!1,pushToken:n.pushToken}},{merge:!0})}catch(r){throw console.error("Error saving notification preferences:",r),r}}async getNotificationPreferences(e){try{const n=Vn(this.db,"userPreferences",e),r=await yi(n);return r.exists()?r.data().notifications:{inApp:!0,sms:!1,email:!1,pushToken:null}}catch(n){throw console.error("Error getting notification preferences:",n),n}}async sendNotification(e,n){try{const s=Fv().currentUser;if(!s)throw new Error("User must be authenticated to send notifications");const i=await s.getIdToken(!0),o=await fetch(`${this.baseUrl}/sendNotification`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${i}`,Origin:window.location.origin},mode:"cors",credentials:"include",body:JSON.stringify({userId:e,notification:n})});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to send notification")}return await o.json()}catch(r){throw console.error("Error sending notification:",r),r}}async storeInAppNotification(e,n){try{await Vx(Er(this.db,"users",e,"notifications"),{...n,timestamp:new Date,read:!1})}catch(r){throw console.error("Error storing in-app notification:",r),r}}async onPushNotification(e){if(!this.messagingSupported||!this.messaging)return console.log("Push notifications are not supported in this browser"),()=>{};try{const{onMessage:n}=await Xa;return n(this.messaging,r=>{e(r)})}catch(n){return console.error("Error setting up push notification listener:",n),()=>{}}}}const B_=new ire,Ise=Object.freeze(Object.defineProperty({__proto__:null,notificationsService:B_},Symbol.toStringTag,{value:"Module"})),nA=T.lazy(()=>ae(()=>import("./AdminPanel-BLCpSfJy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),ore=T.lazy(()=>ae(()=>import("./AdminLogin-5YR_GPyj.js"),[])),are=T.lazy(()=>ae(()=>import("./AdminNotifications-D9HkSAHF.js"),__vite__mapDeps([22,21,1,2,3,4,20,7,23,10,24])));T.lazy(()=>ae(()=>import("./AdminDashboard-TJmYKQ-n.js"),__vite__mapDeps([25,26,2,12,27,28,11,1,3,13,14,15,16,4,17,18,6,7,8,9,10,29,20,21])));const lre=T.lazy(()=>ae(()=>import("./AdminDashboardModern-BVXm5_Uj.js"),__vite__mapDeps([30,26,2,12,27,28,11,1,3,13,14,15,16,4,17,18,31,29,32,21,33,34]))),cre=T.lazy(()=>ae(()=>import("./BankingView-D-4RRU6R.js"),__vite__mapDeps([35,13,36,37,19,1,2,14,15,7]))),ure=T.lazy(()=>ae(()=>import("./MyLeagues-R51OqTFy.js"),__vite__mapDeps([38,39,7,19,31,1,21,40]))),dre=T.lazy(()=>ae(()=>import("./SendMoney-BBKJZq6i.js"),__vite__mapDeps([41,2]))),hre=T.lazy(()=>ae(()=>import("./Platforms-Dy6st-YO.js"),__vite__mapDeps([42,43,13,37,44]))),fre=T.lazy(()=>ae(()=>import("./Wallet-BotbdaJO.js"),__vite__mapDeps([45,36,37,19,1,33,46,13,28,2,47,48,49,50,4,51,5,52,53,54,55,56,57,7,58,59,60,61]))),pre=T.lazy(()=>ae(()=>import("./EnhancedPartners-C4I8pbWi.js"),__vite__mapDeps([62,43,1,37,63,16,44]))),mre=T.lazy(()=>ae(()=>import("./PartnersRouter-BRxEY4QY.js"),__vite__mapDeps([64,43]))),gre=T.lazy(()=>ae(()=>import("./Profile-CwYPlRoE.js"),__vite__mapDeps([65,13,2,66,21]))),yre=T.lazy(()=>ae(()=>import("./CreateGroupEnhanced-R82ttzcg.js"),__vite__mapDeps([67,68,49,69,48,47,50,70,52,4,5,51,37,34]))),vre=T.lazy(()=>ae(()=>import("./CreateGroupModal-DvVCdnj2.js"),__vite__mapDeps([71,68,69,48,47,49,50,70,52,4,5,51]))),_re=T.lazy(()=>ae(()=>import("./GroupView-c_ntW7dL.js"),__vite__mapDeps([72,39,7]))),wre=T.lazy(()=>ae(()=>import("./GroupUpgrade-B4yBl-ku.js"),__vite__mapDeps([73,20,28]))),rA=T.lazy(()=>ae(()=>import("./GroupInvitePage-DsRW4Dak.js"),__vite__mapDeps([74,39,37,3,1]))),xre=T.lazy(()=>ae(()=>import("./InvitePage-BlseZAoP.js"),__vite__mapDeps([75,68,47,48,49,46,27,70]))),bre=T.lazy(()=>ae(()=>import("./Groups-DcpObapJ.js"),__vite__mapDeps([76,69,48,47,49,50,70,52,4,5,51,77,34,7,33,15]))),Ere=T.lazy(()=>ae(()=>import("./TestEmails-BslYWt1J.js"),__vite__mapDeps([78,47,49]))),Sre=T.lazy(()=>ae(()=>import("./TestAuth-Cy7DN2Vf.js"),__vite__mapDeps([79,47,1,3,70]))),kre=T.lazy(()=>ae(()=>import("./JoinGroup-DCUoOW2r.js"),__vite__mapDeps([80,47,46]))),Tre=T.lazy(()=>ae(()=>import("./RewardsView-D0dK-rw0.js"),__vite__mapDeps([81,60,44,40,51,46]))),Ire=T.lazy(()=>ae(()=>import("./NotificationSettings-BMGTn6DG.js"),__vite__mapDeps([82,4,1,8,5,2]))),Are=T.lazy(()=>ae(()=>import("./WalletsView-BO4gYZVQ.js"),__vite__mapDeps([83,37,77,33,1,7]))),Pre=T.lazy(()=>ae(()=>import("./GiftCardsView-DLMe7xMW.js"),__vite__mapDeps([84,37]))),Cre=T.lazy(()=>ae(()=>import("./AdminTest-Bpo6mpvG.js"),[])),Nre=T.lazy(()=>ae(()=>import("./FantasyHome-DVm92dkN.js"),__vite__mapDeps([85,37,40,21,86]))),Rre=T.lazy(()=>ae(()=>import("./FantasyPlaque-CnCoHxQw.js"),__vite__mapDeps([87,44,61,7]))),jre=T.lazy(()=>ae(()=>import("./EmailTest-CfAloqpG.js"),__vite__mapDeps([88,50,4,1]))),Dre=T.lazy(()=>ae(()=>import("./TaskMaster-Cf7HwUS_.js"),__vite__mapDeps([89,55,18,9,10,86,63,2,7]))),Ore=T.lazy(()=>ae(()=>import("./DeveloperPortal-BjqjoZ77.js"),__vite__mapDeps([90,7,20,52,10]))),Mre=T.lazy(()=>ae(()=>import("./OAuthConsent-uY47OldM.js"),__vite__mapDeps([91,4,27]))),Lre=T.lazy(()=>ae(()=>import("./NetworkExplorer-CiOP5GmH.js"),__vite__mapDeps([92,93,53]))),Fre=T.lazy(()=>ae(()=>import("./AdminNetwork-BKMH3p_Q.js"),__vite__mapDeps([94,93,53]))),Vre=T.lazy(()=>ae(()=>import("./Referrals-BMbImHCa.js"),__vite__mapDeps([95,47,49,52]))),$re=T.lazy(()=>ae(()=>import("./AdminTransactions-7eyhsgCZ.js"),__vite__mapDeps([96,97,31,29,32,12,21,86,2,17,37,15,14,13,1,24]))),Ure=T.lazy(()=>ae(()=>import("./AdminAPIStatus-CK0frfs2.js"),__vite__mapDeps([98,97,31,29,32,12,21,13,27,16,3,1,28,19,24]))),Bre=T.lazy(()=>ae(()=>import("./AdminLeagues-BySRlMdC.js"),__vite__mapDeps([99,97,31,29,32,12,21,7,18,1,14,15,34,23,24]))),zre=T.lazy(()=>ae(()=>import("./DashboardPage-DRTOSRdL.js"),__vite__mapDeps([100,20,66,54,47,55,56,57,7,19,46,33,58,59]))),qre=T.lazy(()=>ae(()=>import("./TestPolygon-szsItcRa.js"),__vite__mapDeps([101,58]))),Wre=T.lazy(()=>ae(()=>import("./CommissionersCardDemo-Bwz1jbAN.js"),__vite__mapDeps([102,56,57])));function Hre(){const[t,e]=T.useState(!0);T.useEffect(()=>(window.removeInitialLoader&&window.removeInitialLoader(),(async()=>{await new Promise(s=>setTimeout(s,1e3));try{"serviceWorker"in navigator&&await navigator.serviceWorker.register("/sw.js")}catch(s){console.error("Service Worker registration failed:",s)}})(),()=>clearTimeout(timeout)),[]),T.useEffect(()=>{const r=Vj.onAuthStateChanged(async s=>{if(s)try{const i=await B_.initializePushNotifications();i&&await B_.saveNotificationPreferences(s.uid,{pushToken:i})}catch(i){console.error("Error initializing push notifications:",i)}});return()=>r()},[]);const n=()=>u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:u.jsx("div",{className:"text-white",children:"Loading..."})});return u.jsxs(rre,{children:[u.jsx(tre,{isLoading:t,onLoadingComplete:()=>{e(!1)}}),u.jsx(EH,{children:u.jsx(Gq,{children:u.jsx(P6,{children:u.jsx($K,{children:u.jsx(gH,{children:u.jsx(bH,{children:u.jsx(Qq,{children:u.jsx(pH,{children:u.jsx(mH,{children:u.jsx(zK,{children:u.jsxs(Xq,{children:[u.jsxs(x6,{children:[u.jsx(re,{path:"/",element:u.jsx(eA,{})}),u.jsx(re,{path:"/home",element:u.jsx(Pne,{})}),u.jsx(re,{path:"/landing",element:u.jsx(eA,{})}),u.jsx(re,{path:"signup",element:u.jsx($ne,{})}),u.jsx(re,{path:"login",element:u.jsx(Qne,{})}),u.jsx(re,{path:"setup-pin",element:u.jsx(Zne,{})}),u.jsx(re,{path:"beta",element:u.jsx(ere,{})}),u.jsx(re,{path:"logout",element:u.jsx(nre,{})}),u.jsx(re,{path:"/partners",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(mre,{})})}),u.jsx(re,{path:"/invite/:inviteCode",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(xre,{})})}),u.jsx(re,{path:"/invite/:groupId/:inviteCode",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(rA,{})})}),u.jsx(re,{path:"/join/group/:groupId",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(rA,{})})}),u.jsx(re,{path:"/network",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Lre,{})})}),u.jsx(re,{path:"/fantasy-plaque",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Rre,{})})}),u.jsx(re,{path:"admin",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(ore,{})})}),u.jsx(re,{path:"admin/notifications",element:u.jsx(Bc,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(are,{})})})}),u.jsx(re,{path:"admin/dashboard",element:u.jsx(Bc,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(lre,{})})})}),u.jsx(re,{path:"admin/network",element:u.jsx(ZI,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Fre,{})})})}),u.jsx(re,{path:"admin/transactions",element:u.jsx(Bc,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx($re,{})})})}),u.jsx(re,{path:"admin/api-status",element:u.jsx(Bc,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Ure,{})})})}),u.jsx(re,{path:"admin/leagues",element:u.jsx(Bc,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Bre,{})})})}),u.jsx(re,{path:"admin-panel",element:u.jsx(ZI,{children:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(nA,{})})})}),u.jsx(re,{path:"admin-test",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Cre,{})})}),u.jsx(re,{path:"admin-direct",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(nA,{})})}),u.jsxs(re,{element:u.jsx(Vte,{}),children:[u.jsx(re,{path:"/wallet",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(fre,{})})}),u.jsx(re,{path:"/referrals",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Vre,{})})}),u.jsx(re,{path:"/banking",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(cre,{})})}),u.jsx(re,{path:"/leagues",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(ure,{})})}),u.jsx(re,{path:"/send",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(dre,{})})}),u.jsx(re,{path:"/spend",element:u.jsx(Ao,{to:"/partner-platforms",replace:!0})}),u.jsx(re,{path:"/pay",element:u.jsx(Ao,{to:"/send",replace:!0})}),u.jsx(re,{path:"/",element:u.jsx(Ao,{to:"/wallet",replace:!0})}),u.jsx(re,{path:"/platforms",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(hre,{})})}),u.jsx(re,{path:"/partner-platforms",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(pre,{})})}),u.jsx(re,{path:"/wallets",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Are,{})})}),u.jsx(re,{path:"/groups",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(bre,{})})}),u.jsx(re,{path:"/groups/create",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(vre,{})})}),u.jsx(re,{path:"/groups/join",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(kre,{})})}),u.jsx(re,{path:"/rewards",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Tre,{})})}),u.jsx(re,{path:"/tasks",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Dre,{})})}),u.jsx(re,{path:"/gift-cards",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Pre,{})})}),u.jsx(re,{path:"/profile",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(gre,{})})}),u.jsx(re,{path:"/dashboard",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(zre,{})})}),u.jsx(re,{path:"/fantasy-home",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Nre,{})})}),u.jsx(re,{path:"/create-group",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(yre,{})})}),u.jsx(re,{path:"/group/:id",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(_re,{})})}),u.jsx(re,{path:"/groups/:groupId/upgrade",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(wre,{})})}),u.jsx(re,{path:"/test-emails",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Ere,{})})}),u.jsx(re,{path:"/test-auth",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Sre,{})})}),u.jsx(re,{path:"/test-polygon",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(qre,{})})}),u.jsx(re,{path:"/commissioners-card-demo",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Wre,{})})}),u.jsx(re,{path:"/notifications",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Ire,{})})}),u.jsx(re,{path:"/email-test",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(jre,{})})}),u.jsx(re,{path:"/developers",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Ore,{})})})]}),u.jsx(re,{path:"/oauth/consent",element:u.jsx(T.Suspense,{fallback:u.jsx(n,{}),children:u.jsx(Mre,{})})}),u.jsx(re,{path:"*",element:u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Page not found"}),u.jsx("p",{children:"The page you are looking for doesn't exist or has been moved."}),u.jsxs("p",{className:"mt-4",children:["Route: ",window.location.pathname]})]})})]}),u.jsx(sre,{})]})})})})})})})})})})})]})}try{const t=document.getElementById("root");t?dy.createRoot(t).render(u.jsx(Hre,{})):console.error("Root element not found!")}catch(t){console.error("Error mounting React app:",t),document.body.innerHTML=`
    <div style="padding: 20px; color: white; background: black; font-family: monospace;">
      <h1>Error loading application</h1>
      <pre>${t.toString()}</pre>
      <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: orange; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Reload Page
      </button>
    </div>
  `}setTimeout(()=>{window.removeInitialLoader&&window.removeInitialLoader();const t=document.getElementById("initial-loader");t&&t.remove()},100);export{Z as $,Yp as A,Au as B,JK as C,ID as D,bb as E,Xd as F,Qp as G,tX as H,hX as I,vse as J,En as K,Kre as L,cX as M,QK as N,KK as O,On as P,Du as Q,y_ as R,Zl as S,Jp as T,ag as U,zf as V,cse as W,dl as X,yi as Y,ab as Z,ae as _,Kq as a,gT as a$,xO as a0,Bf as a1,_ne as a2,UK as a3,fg as a4,JC as a5,pi as a6,le as a7,he as a8,Yq as a9,Es as aA,vne as aB,$te as aC,Ao as aD,KI as aE,sc as aF,j6 as aG,Tb as aH,vX as aI,dr as aJ,use as aK,dse as aL,Fe as aM,Bh as aN,tA as aO,oX as aP,d4 as aQ,_se as aR,gse as aS,LR as aT,l4 as aU,yse as aV,uX as aW,EB as aX,Jl as aY,bse as aZ,SR as a_,Mu as aa,it as ab,Tse as ac,XK as ad,eX as ae,of as af,Ve as ag,ea as ah,hN as ai,sse as aj,cN as ak,lN as al,l$ as am,Hi as an,Pm as ao,Pr as ap,ur as aq,Nn as ar,z_ as as,Vj as at,Wq as au,Bq as av,pse as aw,qk as ax,fse as ay,Fv as az,Eb as b,B_ as b0,iX as b1,Ui as b2,lee as b3,a1 as b4,l1 as b5,WI as b6,kse as b7,Sse as b8,Yee as b9,mM as ba,dX as bb,hf as bc,ij as bd,si as be,oi as bf,ii as bg,qo as bh,ai as bi,h7 as bj,m7 as bk,gz as bl,dj as bm,s7 as bn,FB as bo,Kk as bp,I7 as bq,n7 as br,d7 as bs,AB as bt,UB as bu,mse as bv,Ise as bw,fX as c,Zm as d,Er as e,dt as f,ei as g,ka as h,Vn as i,u as j,Vx as k,FR as l,kb as m,au as n,Uh as o,PD as p,Zs as q,T as r,Ke as s,pX as t,es as u,Ml as v,P2 as w,CD as x,Ut as y,vT as z};
