import{y as b,r,j as e,F as u,c as j,K as l,$ as v,v as f}from"./main-CIF9t6XU.js";import{B as h}from"./button-ooYe08FM.js";import{I as N}from"./input-DZxtkRTY.js";const E=()=>{const{currentUser:a}=b(),[t,o]=r.useState((a==null?void 0:a.email)||""),[i,c]=r.useState({}),[n,d]=r.useState({}),p=[{type:"test",name:"Test Email",description:"Tests the email system",icon:"🧪",data:{timestamp:new Date().toISOString()}},{type:"group-invite",name:"Group Invite",description:"Invitation to join a group",icon:"🎯",data:{inviterName:"John Doe",groupName:"Weekend Warriors",groupEmoji:"🏈",groupBalance:150,memberCount:5,winRate:65,personalMessage:"Hey! Join our fantasy football group. We pool money for bigger bets and track our wins together.",inviteLink:"https://bankroll.live/join/group/abc123"}},{type:"verification-code",name:"Verification Code",description:"6-digit verification code",icon:"🔐",data:{code:"123456"}},{type:"money-sent",name:"Money Sent",description:"Payment sent confirmation",icon:"💸",data:{amount:"50.00",recipientName:"Jane Smith",transactionId:"TXN-"+Math.random().toString(36).substr(2,9).toUpperCase(),date:new Date().toLocaleDateString(),paymentMethod:"Bankroll Balance",note:"Thanks for the tickets!"}},{type:"money-received",name:"Money Received",description:"Payment received notification",icon:"💰",data:{amount:"75.00",senderName:"Mike Johnson",senderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=mike",note:"For last night's bet winnings 🎉",newBalance:"425.50"}}],g=async s=>{if(!t){l.error("Please enter an email address");return}c({...i,[s.type]:!0});try{const{data:m,error:x}=await v.functions.invoke("send-email",{body:{to:t,type:s.type,data:s.data}});if(x)throw x;l.success(`${s.name} sent to ${t}`),d({...n,[s.type]:!0}),setTimeout(()=>{d(y=>({...y,[s.type]:!1}))},3e3)}catch(m){console.error("Error sending test email:",m),l.error(`Failed to send ${s.name}`)}finally{c({...i,[s.type]:!1})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Test Email Templates"}),e.jsx("p",{className:"text-gray-400",children:"Send test emails to verify all templates are working correctly"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Email Address"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(N,{type:"email",placeholder:"Enter email address",value:t,onChange:s=>o(s.target.value),className:"flex-1 bg-gray-900 border-gray-700"}),e.jsx(h,{onClick:()=>o((a==null?void 0:a.email)||""),variant:"outline",className:"border-gray-700 text-gray-300 hover:bg-gray-800",children:"Use My Email"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Emails will be sent from notifications@bankroll.live"})]}),e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700 hover:border-purple-500/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.description})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Template Data:"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:JSON.stringify(s.data,null,2)})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(h,{onClick:()=>g(s),disabled:i[s.type]||!t,className:`min-w-[120px] ${n[s.type]?"bg-green-600 hover:bg-green-700":"bg-purple-600 hover:bg-purple-700"}`,children:i[s.type]?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):n[s.type]?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Sent!"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Send Test"]})})})]})},s.type))}),e.jsx("div",{className:"mt-8 bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-300 mb-1",children:"Email Deliverability Tips"}),e.jsxs("ul",{className:"text-sm text-blue-200/80 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Check spam folder if emails don't appear in inbox"}),e.jsx("li",{children:"Add notifications@bankroll.live to your contacts"}),e.jsx("li",{children:"Domain is verified with SPF, DKIM, and DMARC records"}),e.jsx("li",{children:"All emails include unsubscribe links for compliance"})]})]})]})})]})};export{E as default};
