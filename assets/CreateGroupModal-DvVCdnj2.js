import{u as I,d as U,y as L,J as E,r as o,j as e,X as N,I as M,F as D,K as m}from"./main-CIF9t6XU.js";import{g as F}from"./GroupService-DlhNiBgH.js";import{I as T}from"./InviteUsersModalEnhanced-D16Bx1SZ.js";import"./alert-DSPc-G07.js";import"./button-ooYe08FM.js";import"./input-DZxtkRTY.js";import"./EmailService-CRBjdB80.js";import"./key-BfkyW3y6.js";import"./copy-Dba7HXDr.js";import"./mail-BthhqBKa.js";import"./message-square-Dsl2VSSP.js";import"./share-2-D0Q1OSBU.js";const Q=()=>{const n=I(),{isDark:a}=U(),{currentUser:i}=L(),{refreshGroups:w}=E(),[t,x]=o.useState(1),[s,c]=o.useState({name:"",description:"",type:"general",emoji:"👥",members:[],admins:[]}),[p,C]=o.useState(""),[d,S]=o.useState([]),[h,A]=o.useState(null),[k,b]=o.useState(!1),[g,y]=o.useState(!1),$=[{id:"1",name:"Sarah Johnson",username:"@sarah_j",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=sarah"},{id:"2",name:"Mike Chen",username:"@mikechen",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=mike"},{id:"3",name:"Emily Davis",username:"@emilyd",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=emily"},{id:"4",name:"Alex Rivera",username:"@arivera",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=alex"},{id:"5",name:"Jordan Lee",username:"@jlee",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=jordan"},{id:"6",name:"Taylor Swift",username:"@tswift",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=taylor"}].filter(r=>r.name.toLowerCase().includes(p.toLowerCase())||r.username.toLowerCase().includes(p.toLowerCase())),f=r=>{S(l=>l.some(u=>u.id===r.id)?l.filter(u=>u.id!==r.id):[...l,r])},G=async()=>{if(t===1&&s.name)x(2);else if(t===2){y(!0);try{if(console.log("Creating group:",s),console.log("Current user:",i),!i||!i.id&&!i.uid)throw new Error("User not authenticated");const r=await F.createGroup(s,i);r&&r.id?(m.success("Group created successfully!"),await w(),n("/groups")):m.error("Failed to create group")}catch(r){console.error("Error creating group:",r),m.error(r.message||"Failed to create group")}finally{y(!1)}}},v=t===1?s.name.trim()!=="":!0;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>n(-1)}),e.jsxs("div",{className:`relative w-full max-w-md ${a?"bg-gray-900":"bg-white"} rounded-2xl shadow-2xl overflow-hidden`,children:[e.jsx("div",{className:`p-4 border-b ${a?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(-1),className:`p-2 rounded-lg transition-colors ${a?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("h2",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:t===1?"Create Group":"Add Members"})]}),t>1&&e.jsx("button",{onClick:()=>x(1),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Back"})]})}),e.jsx("div",{className:"p-4",children:t===1?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Group Name"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>c({...s,name:r.target.value}),placeholder:"Weekend Warriors, Fantasy Squad...",className:`w-full px-4 py-3 rounded-lg border transition-colors ${a?"bg-gray-800 border-gray-700 text-white placeholder-gray-500 focus:border-purple-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400 focus:border-purple-500"} focus:outline-none focus:ring-2 focus:ring-purple-500/20`,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Group Icon"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-8 gap-2",children:["👥","🏈","🏀","⚾","⚽","🏒","🎯","💰","🎲","🃏","🎰","🏆","💎","🚀","🔥","⭐"].map(r=>e.jsx("button",{type:"button",onClick:()=>c({...s,emoji:r}),className:`p-2 text-2xl rounded-lg transition-all ${s.emoji===r?"bg-purple-600 ring-2 ring-purple-500 ring-offset-2"+(a?" ring-offset-gray-900":" ring-offset-white"):a?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:r},r))}),e.jsx("div",{className:`p-3 rounded-lg border-2 border-dashed ${a?"border-gray-700":"border-gray-300"}`,children:e.jsx("p",{className:"text-xs text-center text-gray-500",children:"Custom image upload coming soon"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Description (Optional)"}),e.jsx("textarea",{value:s.description,onChange:r=>c({...s,description:r.target.value}),placeholder:"What's this group about?",rows:3,className:`w-full px-4 py-3 rounded-lg border transition-colors resize-none ${a?"bg-gray-800 border-gray-700 text-white placeholder-gray-500 focus:border-purple-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400 focus:border-purple-500"} focus:outline-none focus:ring-2 focus:ring-purple-500/20`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Group Type"}),e.jsxs("select",{value:s.type,onChange:r=>c({...s,type:r.target.value}),className:`w-full px-4 py-3 rounded-lg border transition-colors ${a?"bg-gray-800 border-gray-700 text-white focus:border-purple-500":"bg-gray-50 border-gray-300 text-gray-900 focus:border-purple-500"} focus:outline-none focus:ring-2 focus:ring-purple-500/20`,children:[e.jsx("option",{value:"general",children:"General Group"}),e.jsx("option",{value:"sleeper",children:"Sleeper League"}),e.jsx("option",{value:"espn",children:"ESPN League"}),e.jsx("option",{value:"yahoo",children:"Yahoo League"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:p,onChange:r=>C(r.target.value),placeholder:"Search by name or username",className:`block w-full pl-10 pr-3 py-3 rounded-lg text-sm transition-colors ${a?"bg-gray-800 border-gray-700 text-white placeholder-gray-400 focus:border-purple-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500 focus:border-purple-500"} border focus:outline-none focus:ring-2 focus:ring-purple-500/20`})]}),d.length>0&&e.jsxs("div",{className:"pb-2",children:[e.jsxs("p",{className:`text-xs font-medium mb-2 ${a?"text-gray-400":"text-gray-600"}`,children:["Selected (",d.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(r=>e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${a?"bg-purple-900/50 text-purple-300":"bg-purple-100 text-purple-700"}`,children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-4 h-4 rounded-full"}),e.jsx("span",{children:r.name}),e.jsx("button",{onClick:()=>f(r),className:"ml-1 hover:opacity-70",children:e.jsx(N,{className:"w-3 h-3"})})]},r.id))})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:$.map(r=>{const l=d.some(j=>j.id===r.id);return e.jsxs("button",{onClick:()=>f(r),className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${l?a?"bg-purple-900/50 border-purple-600":"bg-purple-50 border-purple-300":a?"hover:bg-gray-800":"hover:bg-gray-50"} border ${a?"border-gray-800":"border-transparent"}`,children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:r.name}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:r.username})]}),l&&e.jsx("div",{className:"p-1 bg-purple-600 rounded-full",children:e.jsx(D,{className:"w-3 h-3 text-white"})})]},r.id)})})]})}),e.jsx("div",{className:`p-4 border-t ${a?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:e.jsx("button",{onClick:G,disabled:!v||g,className:`w-full py-3 rounded-lg font-medium transition-all flex items-center justify-center ${v&&!g?"bg-purple-600 hover:bg-purple-700 text-white":a?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creating..."]}):t===1?"Next":"Create Group"})})]}),k&&h&&e.jsx(T,{groupId:h,groupName:s.name,onClose:()=>{b(!1),n("/groups")},onInvite:()=>{b(!1),n("/groups")}})]})};export{Q as default};
