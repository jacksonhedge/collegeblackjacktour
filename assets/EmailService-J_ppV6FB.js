const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ResendInviteService-BnnlyYs3.js","assets/main-Bt21LLck.js","assets/main-D0prcIsd.css"])))=>i.map(i=>d[i]);
import{$ as u,_ as f,bd as p,be as w,bf as b,bg as g,bh as _,bi as E,bj as k,bk as S,bl as A,bm as P,bn as R,az as D,bo as I,bp as T,bq as L,br as $,bs as C,bt as O,bu as B}from"./main-Bt21LLck.js";const U=Object.freeze(Object.defineProperty({__proto__:null,AuthCredential:p,FacebookAuthProvider:w,GithubAuthProvider:b,GoogleAuthProvider:g,OAuthCredential:_,TwitterAuthProvider:E,beforeAuthStateChanged:k,browserLocalPersistence:S,browserPopupRedirectResolver:A,browserSessionPersistence:P,connectAuthEmulator:R,getAuth:D,getIdTokenResult:I,inMemoryPersistence:T,indexedDBLocalPersistence:L,initializeAuth:$,onIdTokenChanged:C,prodErrorMap:O,reload:B},Symbol.toStringTag,{value:"Module"}));class j{async sendWelcomeEmail(r,i){try{const{data:t,error:n}=await u.functions.invoke("send-email",{body:{to:r,type:"welcome",data:{userName:i||r.split("@")[0]}}});if(n)throw n;return t}catch(t){throw console.error("Error sending welcome email:",t),t}}async sendGroupInvite({to:r,inviterName:i,groupName:t,groupId:n,groupBalance:o=0,memberCount:a=0,personalMessage:l}){try{const{data:e,error:s}=await u.functions.invoke("send-email",{body:{to:r,type:"group-invite",data:{inviterName:i,groupName:t,groupId:n,groupBalance:o,memberCount:a,personalMessage:l,inviteLink:`https://bankroll.live/invite/${n}/${Date.now().toString(36)}`}}});if(s)throw s;return e}catch(e){throw console.error("Error sending group invite:",e),e}}async sendTransactionEmail({to:r,type:i,amount:t,currency:n="USD",fromUser:o,toUser:a,platform:l,description:e,transactionId:s,balance:m}){try{const{data:d,error:h}=await u.functions.invoke("send-email",{body:{to:r,type:"transaction",data:{type:i,amount:t,currency:n,fromUser:o,toUser:a,platform:l,description:e,transactionId:s,timestamp:new Date().toLocaleString(),balance:m}}});if(h)throw h;return d}catch(d){throw console.error("Error sending transaction email:",d),d}}async sendCustomEmail({to:r,subject:i,htmlContent:t}){try{const{data:n,error:o}=await u.functions.invoke("send-email",{body:{to:r,type:"custom",subject:i,data:{htmlContent:t}}});if(o)throw o;return n}catch(n){throw console.error("Error sending custom email:",n),n}}async sendBulkEmail({recipients:r,type:i,subject:t,data:n}){try{const{data:o,error:a}=await u.functions.invoke("send-email",{body:{to:r,type:i,subject:t,data:n}});if(a)throw a;return o}catch(o){throw console.error("Error sending bulk emails:",o),o}}async sendVerificationEmail(r){try{const{data:i,error:t}=await u.functions.invoke("send-email",{body:{to:r,type:"verification",data:{email:r,verificationLink:`https://bankroll.live/verify-email?email=${encodeURIComponent(r)}`}}});if(t)throw t;return i}catch(i){throw console.error("Error sending verification email:",i),i}}async sendInviteDeclinedNotification({inviterEmail:r,inviterName:i,inviteeName:t,groupName:n,groupId:o,memberCount:a=0,groupBalance:l=0}){try{const{data:e,error:s}=await u.functions.invoke("send-email",{body:{to:r,type:"invite-declined",data:{inviterName:i,inviteeName:t,groupName:n,groupId:o,memberCount:a,groupBalance:l}}});if(s)throw s;return e}catch(e){throw console.error("Error sending invite declined notification:",e),e}}async sendInviteAcceptedNotification({inviterEmail:r,inviterName:i,inviteeName:t,groupName:n,groupId:o,memberCount:a=0,groupBalance:l=0}){try{const{data:e,error:s}=await u.functions.invoke("send-email",{body:{to:r,type:"invite-accepted",data:{inviterName:i,inviteeName:t,groupName:n,groupId:o,memberCount:a,groupBalance:l}}});if(s)throw s;return e}catch(e){throw console.error("Error sending invite accepted notification:",e),e}}async sendBulkGroupInvites(r,i,t,n="ðŸ‘¥",o=null){var a,l;try{console.log("Sending bulk group invites via Resend:",{groupId:r,groupName:i,emails:t});const e=(await f(async()=>{const{default:c}=await import("./ResendInviteService-BnnlyYs3.js");return{default:c}},__vite__mapDeps([0,1,2]))).default;let s,m;if(o)s=o.displayName||((a=o.email)==null?void 0:a.split("@")[0])||"Someone",m=o.email;else{const{getAuth:c}=await f(async()=>{const{getAuth:y}=await Promise.resolve().then(()=>U);return{getAuth:y}},void 0),v=c().currentUser;if(!v)throw new Error("User not authenticated");s=v.displayName||((l=v.email)==null?void 0:l.split("@")[0])||"Someone",m=v.email}const d=await e.sendBulkInvites({recipients:t,type:"group",inviteData:{inviterName:s,inviterEmail:m,groupId:r,groupName:i,groupEmoji:n,method:"email"}}),h=d.filter(c=>c.success).length;return{success:h>0,message:`Successfully sent ${h} of ${t.length} invitations`,sentTo:d.filter(c=>c.success).map(c=>c.recipient),failed:d.filter(c=>!c.success).map(c=>({email:c.recipient,error:c.error})),results:d}}catch(e){throw console.error("Error sending bulk group invites:",e),e}}async sendReferralInvites(r,i,t,n=""){try{console.log("Sending referral invites:",{emails:r,referralCode:i,inviterName:t});const a=await(await f(async()=>{const{default:e}=await import("./ResendInviteService-BnnlyYs3.js");return{default:e}},__vite__mapDeps([0,1,2]))).default.sendBulkInvites({recipients:r,type:"referral",inviteData:{inviterName:t,referralCode:i,personalMessage:n,method:"email"}}),l=a.filter(e=>e.success).length;return{success:l>0,message:`Successfully sent ${l} of ${r.length} referral invites`,sentTo:a.filter(e=>e.success).map(e=>e.recipient),failed:a.filter(e=>!e.success).map(e=>({email:e.recipient,error:e.error})),results:a}}catch(o){throw console.error("Error sending referral invites:",o),o}}async sendSecurityEmail({to:r,alertType:i,data:t}){try{const{data:n,error:o}=await u.functions.invoke("send-email",{body:{to:r,type:"security",data:{alertType:i,...t,timestamp:new Date().toLocaleString()}}});if(o)throw o;return n}catch(n){throw console.error("Error sending security email:",n),n}}}const x=new j;export{x as default};
